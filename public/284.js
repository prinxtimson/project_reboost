"use strict";(self.webpackChunksupreme=self.webpackChunksupreme||[]).push([[284],{5284:function($,v,l){l.r(v),l.d(v,{DocsModule:function(){return B}});var g=l(3144),_=l(5671),f=l(9808),h=l(4902),C=l(5083),u=l(7224),d=l(3075),p=l(500),Z=l(2171),e=l(1891),y=l(8185),D=l(5444),x=l(4242),m=l(7322),T=l(7531);function b(t,c){1&t&&e._UZ(0,"i",33)}function U(t,c){1&t&&e._UZ(0,"i",34)}function k(t,c){1&t&&e._UZ(0,"i",35)}function F(t,c){1&t&&e._UZ(0,"i",36)}function w(t,c){if(1&t){var o=e.EpF();e.TgZ(0,"div",18)(1,"div",19)(2,"div",20),e.YNc(3,b,1,0,"i",21),e.YNc(4,U,1,0,"i",22),e.YNc(5,k,1,0,"i",23),e.YNc(6,F,1,0,"i",24),e.qZA(),e.TgZ(7,"div",25)(8,"h6"),e._uU(9),e.qZA(),e.TgZ(10,"span"),e._uU(11),e.qZA()(),e.TgZ(12,"div",26)(13,"button",27),e.NdJ("click",function(){var s=e.CHM(o).$implicit;return e.oxw(3).download(s)}),e._UZ(14,"i",28),e.qZA(),e.TgZ(15,"button",29),e.NdJ("click",function(){var s=e.CHM(o).$implicit;return e.oxw(3).editDoc(s)}),e._UZ(16,"i",30),e.qZA(),e.TgZ(17,"button",31),e.NdJ("click",function(){var s=e.CHM(o).$implicit;return e.oxw(3).deleteDoc(s)}),e._UZ(18,"i",32),e.qZA()()()()}if(2&t){var i=c.$implicit;e.xp6(3),e.Q6J("ngIf",i.file.link.toLowerCase().includes("pdf")),e.xp6(1),e.Q6J("ngIf",i.file.link.toLowerCase().includes("doc")),e.xp6(1),e.Q6J("ngIf",i.file.link.toLowerCase().includes("xls")),e.xp6(1),e.Q6J("ngIf",i.file.fileType.toLowerCase().includes("image")),e.xp6(3),e.Oqu(i.name),e.xp6(2),e.Oqu(i.description)}}function I(t,c){if(1&t){var o=e.EpF();e.TgZ(0,"div",37),e.NdJ("click",function(){return e.CHM(o),e.oxw(3).editDoc(null)}),e.TgZ(1,"div",19)(2,"div",20),e._UZ(3,"i",38),e.qZA(),e.TgZ(4,"div",25)(5,"h6"),e._uU(6,"Upload Document"),e.qZA()()()()}}function J(t,c){if(1&t&&(e.TgZ(0,"div",14)(1,"div",15),e.YNc(2,w,19,6,"div",16),e.YNc(3,I,7,0,"div",17),e.qZA()()),2&t){var o=e.oxw(2);e.xp6(2),e.Q6J("ngForOf",o.docs),e.xp6(1),e.Q6J("ngIf",o.docs.length<1)}}function N(t,c){if(1&t){var o=e.EpF();e.TgZ(0,"div",2)(1,"div",3)(2,"div",4)(3,"div",5)(4,"div",6)(5,"div",7)(6,"h4"),e._uU(7,"My Documents "),e.TgZ(8,"button",8),e.NdJ("click",function(){return e.CHM(o),e.oxw().refresh()}),e._UZ(9,"i",9),e.qZA(),e.TgZ(10,"div",10),e.NdJ("click",function(){return e.CHM(o),e.oxw().editDoc(null)}),e.TgZ(11,"span",11),e._UZ(12,"i",12),e.qZA()()()()()(),e.YNc(13,J,4,2,"div",13),e.qZA()()()}if(2&t){var i=e.oxw();e.xp6(13),e.Q6J("ngIf",i.dataLoaded)}}function A(t,c){1&t&&(e.TgZ(0,"mat-error"),e._uU(1," Document Title is "),e.TgZ(2,"strong"),e._uU(3,"required"),e.qZA()())}function S(t,c){1&t&&(e.TgZ(0,"mat-error"),e._uU(1," Document Description is "),e.TgZ(2,"strong"),e._uU(3,"required"),e.qZA()())}function Y(t,c){1&t&&e._UZ(0,"i",60)}function L(t,c){1&t&&e._UZ(0,"i",61)}function Q(t,c){1&t&&e._UZ(0,"i",62)}function q(t,c){1&t&&e._UZ(0,"i",63)}function M(t,c){1&t&&e._UZ(0,"i",64)}function z(t,c){1&t&&(e.TgZ(0,"span"),e._uU(1,"Click to select file from your device"),e.qZA())}function O(t,c){if(1&t&&(e.TgZ(0,"span"),e._uU(1),e.qZA()),2&t){var o=e.oxw(2);e.xp6(1),e.Oqu(o.pendingUpload[0].name)}}function P(t,c){if(1&t&&(e.TgZ(0,"span"),e._uU(1),e.qZA()),2&t){var o=e.oxw(2);e.xp6(1),e.Oqu(o.curFile.name)}}function j(t,c){if(1&t){var o=e.EpF();e.TgZ(0,"div",2)(1,"div",3)(2,"div",4)(3,"div",5)(4,"div",6)(5,"div",7)(6,"h4"),e._uU(7),e.TgZ(8,"button",39),e.NdJ("click",function(){return e.CHM(o),e.oxw().view=1}),e._UZ(9,"i",40),e.qZA()()()()(),e.TgZ(10,"form",41)(11,"div",42)(12,"div",43)(13,"mat-form-field",44),e._UZ(14,"input",45),e.YNc(15,A,4,0,"mat-error",46),e.qZA(),e.TgZ(16,"mat-form-field",47),e._UZ(17,"textarea",48),e.YNc(18,S,4,0,"mat-error",46),e.qZA()()(),e.TgZ(19,"div",15)(20,"div",49),e.NdJ("click",function(){return e.CHM(o),e.MAs(31).click()}),e.TgZ(21,"div",50),e.YNc(22,Y,1,0,"i",51),e.YNc(23,L,1,0,"i",52),e.YNc(24,Q,1,0,"i",53),e.YNc(25,q,1,0,"i",54),e.YNc(26,M,1,0,"i",55),e.YNc(27,z,2,0,"span",46),e.YNc(28,O,2,1,"span",46),e.YNc(29,P,2,1,"span",46),e.qZA()(),e.TgZ(30,"input",56,57),e.NdJ("change",function(n){return e.CHM(o),e.oxw().readURL(n,"passport")}),e.qZA()(),e.TgZ(32,"div",15)(33,"div",58)(34,"button",59),e.NdJ("click",function(){return e.CHM(o),e.oxw().submitDoc()}),e._uU(35,"Save Document"),e.qZA()()()()()()()}if(2&t){var i=e.oxw();e.xp6(7),e.hij("",i.title," "),e.xp6(3),e.Q6J("formGroup",i.docForm),e.xp6(5),e.Q6J("ngIf",i.submitted&&i.f.name.hasError("required")),e.xp6(3),e.Q6J("ngIf",i.submitted&&i.f.description.hasError("required")),e.xp6(4),e.Q6J("ngIf",!i.selFileType),e.xp6(1),e.Q6J("ngIf",i.selFileType&&i.selFileType.toLowerCase().includes("pdf")),e.xp6(1),e.Q6J("ngIf",i.selFileType&&i.selFileType.toLowerCase().includes("doc")),e.xp6(1),e.Q6J("ngIf",i.selFileType&&i.selFileType.toLowerCase().includes("xls")),e.xp6(1),e.Q6J("ngIf",i.selFileType&&i.selFileType.toLowerCase().includes("image")),e.xp6(1),e.Q6J("ngIf",!i.selFileType),e.xp6(1),e.Q6J("ngIf",i.pendingUpload.length>0),e.xp6(1),e.Q6J("ngIf",i.pendingUpload.length<1&&i.curFile)}}var H=function(){var t=function(){function c(o,i,a,n,s){(0,_.Z)(this,c),this.http=o,this.dataService=i,this.formBuilder=a,this.messageService=n,this.confirmService=s,this.view=1,this.dataLoaded=!1,this.docs=[],this.title="Add New Document",this.submitted=!1,this.maxSize=1e7,this.fileUploaded=!1,this.fileType=["image","doc","docx","xls","xlsx","pdf"],this.pendingUpload=[]}return(0,g.Z)(c,[{key:"f",get:function(){return this.docForm.controls}},{key:"ngOnInit",value:function(){this.loginUser=this.dataService.getUser(),this.token=this.dataService.getToken(),this.refresh()}},{key:"refresh",value:function(){var i=this;this.http.getMyDocuments().pipe((0,u.P)()).subscribe(function(a){i.docs=a,i.dataLoaded=!0})}},{key:"togglePrivate",value:function(i){}},{key:"editDoc",value:function(i){this.docForm=this.formBuilder.group({name:[null==i?void 0:i.name,d.kI.required],description:[null==i?void 0:i.description,d.kI.required],private:[!1,d.kI.required]}),i?(this.curDoc=i,this.curFile=i.file,this.selFileType=i.file.fileType,this.fileUploaded=!0):(this.curDoc=null,this.curFile=null,this.selFileType=null,this.fileUploaded=!1),this.view=2}},{key:"deleteDoc",value:function(i){var a=this;this.confirmService.confirm({message:"Are you sure you want to delete from platform?",header:"Delete Document",icon:"pi pi-exclamation-triangle",accept:function(){a.docs=a.docs.filter(function(s){return s.id!==i.id}),a.http.deleteDoc(i.id).pipe((0,u.P)()).subscribe(function(){a.messageService.add({severity:"success",summary:"Remove Success",detail:"Document Deleted!"})})},reject:function(){}})}},{key:"validateFile",value:function(i){return"image/png"===i.type.toLowerCase()||"image/jpg"===i.type.toLowerCase()||"image/jpeg"===i.type.toLowerCase()||i.name.toLowerCase().includes("pdf")||i.name.toLowerCase().includes("doc")||i.name.toLowerCase().includes("xls")?this.validateFileSize(i):(this.messageService.add({severity:"error",summary:"File Format Not Supported"}),!1)}},{key:"validateFileSize",value:function(i){return this.selFileType=i.type.toLowerCase(),!(i.size>this.maxSize&&(this.messageService.add({severity:"error",summary:"File must not be larger than "+(this.maxSize/1e3).toFixed(0)+" kb"}),this.selFileType=null,1))}},{key:"readURL",value:function(i,a){var n=this;if(i.target.files&&i.target.files[0]){var s=i.target.files[0];if(!this.validateFile(s))return;this.uploadError=null,(0,p.pJ)(s).then(function(r){if(r.name)return n.pendingUpload=[],n.curFile&&(n.curFile.link=null),n.pendingUpload=[].concat((0,h.Z)(n.pendingUpload),[r]),void(n.fileUploaded=!1);n.messageService.add({severity:"error",summary:"An error occurred loading your file, please try again!"})})}}},{key:"passportUpload",value:function(){var i=this,a=this.curFile;a||((a=new p.TX).objID=0,a.tag="documents");var n=(0,p.Ah)(this.pendingUpload[0],a);this.http.saveFile(n).pipe((0,u.P)()).subscribe(function(s){i.curFile=s,i.fileUploaded=!0,i.pendingUpload=[];var r=i.docForm.value;r.file=s,r.private=!1,i.curDoc?(i.curDoc=Object.assign(Object.assign({},i.curDoc),r),i.updateDoc()):(i.curDoc=r,i.saveDoc())})}},{key:"saveDoc",value:function(){var i=this;this.http.saveDoc(this.curDoc).pipe((0,u.P)()).subscribe(function(a){i.messageService.add({severity:"success",summary:"Document Saved"}),i.docs=[].concat((0,h.Z)(i.docs),[a]),i.view=1})}},{key:"updateDoc",value:function(){var i=this;this.http.updateDoc(this.curDoc).pipe((0,u.P)()).subscribe(function(a){i.messageService.add({severity:"success",summary:"Document Updated"}),i.docs[i.docs.indexOf(i.docs.find(function(n){return n.id===i.curDoc.id}))]=a,i.view=1})}},{key:"submitDoc",value:function(){if(this.docForm.updateValueAndValidity(),this.pendingUpload.length<1&&!this.curFile||this.docForm.invalid)this.messageService.add({severity:"error",summary:"Please complete the document form!"});else if(this.fileUploaded&&this.curDoc){var i=this.docForm.value;i.private=!1,this.curDoc=Object.assign(Object.assign({},this.curDoc),i),this.updateDoc()}else this.passportUpload()}},{key:"download",value:function(i){return window.open(Z.A.mainUrl+"/api/v1/docs/dl/"+i.file.link+"?token="+encodeURIComponent(this.token),"_blank")}}]),c}();return t.\u0275fac=function(o){return new(o||t)(e.Y36(C.R),e.Y36(y.D),e.Y36(d.qu),e.Y36(D.ez),e.Y36(D.YP))},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-docs"]],decls:3,vars:3,consts:[[3,"ngSwitch"],["class","animated fadeIn",4,"ngSwitchCase"],[1,"animated","fadeIn"],[1,"row","py-3","px-4"],[1,"col-md-10","mx-auto"],[1,"bg-white","shadow","rounded","overflow-hidden"],[1,"card","pb-0","mb-0"],[1,"card-header"],[1,"btn","btn-sm","btn-dark","float-right",3,"click"],[1,"fa","fa-refresh"],[1,"file-options","float-right","mr-2",2,"cursor","pointer",3,"click"],[1,"btn-file"],[1,"fa","fa-cloud-upload"],["class","py-4",4,"ngIf"],[1,"py-4"],[1,"row","row-sm"],["class","col-6 col-sm-4 col-md-3 col-lg-4 col-xl-3",4,"ngFor","ngForOf"],["class","col-6 col-sm-4 col-md-3 col-lg-4 col-xl-3","style","cursor: pointer;",3,"click",4,"ngIf"],[1,"col-6","col-sm-4","col-md-3","col-lg-4","col-xl-3"],[1,"card","card-file","shadow"],[1,"card-file-thumb"],["class","fa fa-file-pdf-o",4,"ngIf"],["class","fa fa-file-word-o",4,"ngIf"],["class","fa fa-file-excel-o",4,"ngIf"],["class","fa fa-file-image-o",4,"ngIf"],[1,"card-body"],[1,"card-footer"],["tooltip","Download File",1,"btn","btn-ghost-primary",3,"click"],[1,"fa","fa-cloud-download"],["tooltip","Edit File",1,"btn","btn-ghost-warning",3,"click"],[1,"fa","fa-edit"],["tooltip","Delete File",1,"btn","btn-ghost-danger",3,"click"],[1,"fa","fa-trash-o"],[1,"fa","fa-file-pdf-o"],[1,"fa","fa-file-word-o"],[1,"fa","fa-file-excel-o"],[1,"fa","fa-file-image-o"],[1,"col-6","col-sm-4","col-md-3","col-lg-4","col-xl-3",2,"cursor","pointer",3,"click"],[1,"fa","fa-plus"],[1,"btn","btn-danger","btn-sm","float-right",3,"click"],[1,"fa","fa-close"],[1,"py-4",3,"formGroup"],[1,"row","row-sm","px-4"],[1,"col-12"],[1,"d-block"],["formControlName","name","matInput","","placeholder","Document Title","required",""],[4,"ngIf"],[1,"d-block","mt-3"],["formControlName","description","matInput","","rows","3","placeholder","Document Description","required",""],[1,"col-12","px-4",3,"click"],["id","drop-zone",1,"upload-drop-zone","py-5"],["class","fa fa-cloud-upload fa-4x d-block",4,"ngIf"],["class","fa fa-file-pdf-o fa-4x d-block",4,"ngIf"],["class","fa fa-file-word-o fa-4x d-block",4,"ngIf"],["class","fa fa-file-excel-o fa-4x d-block",4,"ngIf"],["class","fa fa-file-image-o fa-4x d-block",4,"ngIf"],["hidden","","id","imageUpload","type","file",3,"change"],["image",""],[1,"col-12","px-4"],[1,"btn","btn-sm","btn-success",3,"click"],[1,"fa","fa-cloud-upload","fa-4x","d-block"],[1,"fa","fa-file-pdf-o","fa-4x","d-block"],[1,"fa","fa-file-word-o","fa-4x","d-block"],[1,"fa","fa-file-excel-o","fa-4x","d-block"],[1,"fa","fa-file-image-o","fa-4x","d-block"]],template:function(o,i){1&o&&(e.TgZ(0,"div",0),e.YNc(1,N,14,1,"div",1),e.YNc(2,j,36,12,"div",1),e.qZA()),2&o&&(e.Q6J("ngSwitch",i.view),e.xp6(1),e.Q6J("ngSwitchCase",1),e.xp6(1),e.Q6J("ngSwitchCase",2))},directives:[f.RF,f.n9,f.O5,f.sg,x.i9,d._Y,d.JL,d.sg,m.KE,d.Fj,T.Nt,d.JJ,d.u,d.Q7,m.TO],styles:[".upload-drop-zone[_ngcontent-%COMP%]{border-width:2px;margin-bottom:20px}.upload-drop-zone[_ngcontent-%COMP%]{color:#ccc;border-style:dashed;border-color:#ccc;text-align:center;vertical-align:center;width:100%;line-height:2rem;min-height:200px}.upload-drop-zone.drop[_ngcontent-%COMP%]{color:#222;border-color:#222}"]}),t}(),E=l(325),R=[{path:"",data:{title:"Profile"},children:[{path:"",component:H,data:{title:""}}]}],B=function(){var t=(0,g.Z)(function c(){(0,_.Z)(this,c)});return t.\u0275fac=function(o){return new(o||t)},t.\u0275mod=e.oAB({type:t}),t.\u0275inj=e.cJS({imports:[[f.ez,E.Bz.forChild(R),x.z8.forRoot(),m.lN,d.UX,T.c]]}),t}()}}]);