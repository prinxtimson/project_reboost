(self.webpackChunksupreme=self.webpackChunksupreme||[]).push([[385],{3385:function(R,re,q){var S,V,te=q(182).default,B=q(6525).default,L=q(9754).default,X=q(1506).default,ce=q(9100).default,Ie=q(8585).default,Y=q(319).default,ee=q(3038).default,k=q(3269).default,G=q(7757),A=q(4575).default,C=q(3913).default,P=q(2205).default,M=q(9842).default,ih=q(5957).default;(V=(S=window.CKEDITOR_TRANSLATIONS||(window.CKEDITOR_TRANSLATIONS={})).en=S.en||{}).dictionary=Object.assign(V.dictionary||{},{"%0 of %1":"%0 of %1","Align center":"Align center","Align left":"Align left","Align right":"Align right",Aquamarine:"Aquamarine",Big:"Big",Black:"Black","Block quote":"Block quote",Blue:"Blue",Bold:"Bold","Bulleted List":"Bulleted List",Cancel:"Cancel","Cannot upload file:":"Cannot upload file:","Centered image":"Centered image","Change image text alternative":"Change image text alternative","Choose heading":"Choose heading",Column:"Column","Could not insert image at the current position.":"Could not insert image at the current position.","Could not obtain resized image URL.":"Could not obtain resized image URL.","Decrease indent":"Decrease indent",Default:"Default","Delete column":"Delete column","Delete row":"Delete row","Dim grey":"Dim grey","Document colors":"Document colors",Downloadable:"Downloadable","Dropdown toolbar":"Dropdown toolbar","Edit link":"Edit link","Editor toolbar":"Editor toolbar","Enter image caption":"Enter image caption","Font Background Color":"Font Background Color","Font Color":"Font Color","Font Family":"Font Family","Font Size":"Font Size","Full size image":"Full size image",Green:"Green",Grey:"Grey","Header column":"Header column","Header row":"Header row",Heading:"Heading","Heading 1":"Heading 1","Heading 2":"Heading 2","Heading 3":"Heading 3","Heading 4":"Heading 4","Heading 5":"Heading 5","Heading 6":"Heading 6",Huge:"Huge","Image toolbar":"Image toolbar","image widget":"image widget","Increase indent":"Increase indent",Insert:"Insert","Insert column left":"Insert column left","Insert column right":"Insert column right","Insert image":"Insert image","Insert image or file":"Insert image or file","Insert image via URL":"Insert image via URL","Insert media":"Insert media","Insert paragraph after block":"Insert paragraph after block","Insert paragraph before block":"Insert paragraph before block","Insert row above":"Insert row above","Insert row below":"Insert row below","Insert table":"Insert table","Inserting image failed":"Inserting image failed",Italic:"Italic",Justify:"Justify","Left aligned image":"Left aligned image","Light blue":"Light blue","Light green":"Light green","Light grey":"Light grey",Link:"Link","Link URL":"Link URL","Media URL":"Media URL","media widget":"media widget","Merge cell down":"Merge cell down","Merge cell left":"Merge cell left","Merge cell right":"Merge cell right","Merge cell up":"Merge cell up","Merge cells":"Merge cells",Next:"Next","Numbered List":"Numbered List","Open in a new tab":"Open in a new tab","Open link in new tab":"Open link in new tab",Orange:"Orange",Paragraph:"Paragraph","Paste the image source URL.":"Paste the image source URL.","Paste the media URL in the input.":"Paste the media URL in the input.",Previous:"Previous",Purple:"Purple",Red:"Red",Redo:"Redo","Remove color":"Remove color","Rich Text Editor, %0":"Rich Text Editor, %0","Right aligned image":"Right aligned image",Row:"Row",Save:"Save","Select all":"Select all","Select column":"Select column","Select row":"Select row","Selecting resized image failed":"Selecting resized image failed","Show more items":"Show more items","Side image":"Side image",Small:"Small","Split cell horizontally":"Split cell horizontally","Split cell vertically":"Split cell vertically",Strikethrough:"Strikethrough","Table toolbar":"Table toolbar","Text alignment":"Text alignment","Text alignment toolbar":"Text alignment toolbar","Text alternative":"Text alternative","The URL must not be empty.":"The URL must not be empty.","This link has no URL":"This link has no URL","This media URL is not supported.":"This media URL is not supported.",Tiny:"Tiny","Tip: Paste the URL into the content to embed faster.":"Tip: Paste the URL into the content to embed faster.",Turquoise:"Turquoise",Underline:"Underline",Undo:"Undo",Unlink:"Unlink",Update:"Update","Upload failed":"Upload failed","Upload in progress":"Upload in progress",White:"White","Widget toolbar":"Widget toolbar",Yellow:"Yellow"}),window,R.exports=function(S){var V={};function E(O){if(V[O])return V[O].exports;var b=V[O]={i:O,l:!1,exports:{}};return S[O].call(b.exports,b,b.exports,E),b.l=!0,b.exports}return E.m=S,E.c=V,E.d=function(O,b,j){E.o(O,b)||Object.defineProperty(O,b,{enumerable:!0,get:j})},E.r=function(O){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(O,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(O,"__esModule",{value:!0})},E.t=function(O,b){if(1&b&&(O=E(O)),8&b||4&b&&"object"==typeof O&&O&&O.__esModule)return O;var j=Object.create(null);if(E.r(j),Object.defineProperty(j,"default",{enumerable:!0,value:O}),2&b&&"string"!=typeof O)for(var he in O)E.d(j,he,function(ke){return O[ke]}.bind(null,he));return j},E.n=function(O){var b=O&&O.__esModule?function(){return O.default}:function(){return O};return E.d(b,"a",b),b},E.o=function(O,b){return Object.prototype.hasOwnProperty.call(O,b)},E.p="",E(E.s=102)}([function(S,V,E){"use strict";E.d(V,"b",function(){return O}),E.d(V,"a",function(){return b});var O=function(j){P(ke,j);var he=M(ke);function ke(je,Ne,st){var Fe;return A(this,ke),je=b(je),st&&(je+=" "+JSON.stringify(st)),(Fe=he.call(this,je)).name="CKEditorError",Fe.context=Ne,Fe.data=st,Fe}return C(ke,[{key:"is",value:function(Ne){return"CKEditorError"===Ne}}],[{key:"rethrowUnexpectedError",value:function(Ne,st){if(Ne.is&&Ne.is("CKEditorError"))throw Ne;var Fe=new ke(Ne.message,st);throw Fe.stack=Ne.stack,Fe}}]),ke}(ih(Error));function b(j){var he=j.match(/^([^:]+):/);return he?j+" Read more: https://ckeditor.com/docs/ckeditor5/latest/framework/guides/support/error-codes.html#error-".concat(he[1],"\n"):j}},function(S,V,E){"use strict";var O,le,j=(le={},function(de){if(void 0===le[de]){var ae=document.querySelector(de);if(window.HTMLIFrameElement&&ae instanceof window.HTMLIFrameElement)try{ae=ae.contentDocument.head}catch(Ae){ae=null}le[de]=ae}return le[de]}),he=[];function ke(le){for(var de=-1,ae=0;ae<he.length;ae++)if(he[ae].identifier===le){de=ae;break}return de}function je(le,de){for(var ae={},Ae=[],De=0;De<le.length;De++){var Le=le[De],Ue=de.base?Le[0]+de.base:Le[0],ut=ae[Ue]||0,qe="".concat(Ue," ").concat(ut);ae[Ue]=ut+1;var Rn=ke(qe),Vt={css:Le[1],media:Le[2],sourceMap:Le[3]};-1!==Rn?(he[Rn].references++,he[Rn].updater(Vt)):he.push({identifier:qe,updater:wt(Vt,de),references:1}),Ae.push(qe)}return Ae}function Ne(le){var de=document.createElement("style"),ae=le.attributes||{};if(void 0===ae.nonce){var Ae=E.nc;Ae&&(ae.nonce=Ae)}if(Object.keys(ae).forEach(function(Le){de.setAttribute(Le,ae[Le])}),"function"==typeof le.insert)le.insert(de);else{var De=j(le.insert||"head");if(!De)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");De.appendChild(de)}return de}var st,Fe=(st=[],function(le,de){return st[le]=de,st.filter(Boolean).join("\n")});function Yt(le,de,ae,Ae){var De=ae?"":Ae.media?"@media ".concat(Ae.media," {").concat(Ae.css,"}"):Ae.css;if(le.styleSheet)le.styleSheet.cssText=Fe(de,De);else{var Le=document.createTextNode(De),Ue=le.childNodes;Ue[de]&&le.removeChild(Ue[de]),Ue.length?le.insertBefore(Le,Ue[de]):le.appendChild(Le)}}function pi(le,de,ae){var Ae=ae.css,De=ae.media,Le=ae.sourceMap;if(De?le.setAttribute("media",De):le.removeAttribute("media"),Le&&btoa&&(Ae+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(Le))))," */")),le.styleSheet)le.styleSheet.cssText=Ae;else{for(;le.firstChild;)le.removeChild(le.firstChild);le.appendChild(document.createTextNode(Ae))}}var ar=null,sr=0;function wt(le,de){var ae,Ae,De;if(de.singleton){var Le=sr++;ae=ar||(ar=Ne(de)),Ae=Yt.bind(null,ae,Le,!1),De=Yt.bind(null,ae,Le,!0)}else ae=Ne(de),Ae=pi.bind(null,ae,de),De=function(){!function(ut){if(null===ut.parentNode)return!1;ut.parentNode.removeChild(ut)}(ae)};return Ae(le),function(Ue){if(Ue){if(Ue.css===le.css&&Ue.media===le.media&&Ue.sourceMap===le.sourceMap)return;Ae(le=Ue)}else De()}}S.exports=function(le,de){(de=de||{}).singleton||"boolean"==typeof de.singleton||(de.singleton=(void 0===O&&(O=Boolean(window&&document&&document.all&&!window.atob)),O));var ae=je(le=le||[],de);return function(Ae){if(Ae=Ae||[],"[object Array]"===Object.prototype.toString.call(Ae)){for(var De=0;De<ae.length;De++){var Le=ke(ae[De]);he[Le].references--}for(var Ue=je(Ae,de),ut=0;ut<ae.length;ut++){var qe=ke(ae[ut]);0===he[qe].references&&(he[qe].updater(),he.splice(qe,1))}ae=Ue}}}},,function(S,V,E){"use strict";var O=E(7),b="object"==typeof self&&self&&self.Object===Object&&self,j=O.a||b||Function("return this")();V.a=j},function(S,V,E){"use strict";(function(O){var b=E(3),j=E(12),he=re&&!re.nodeType&&re,ke=he&&"object"==typeof O&&O&&!O.nodeType&&O,je=ke&&ke.exports===he?b.a.Buffer:void 0;V.a=(je?je.isBuffer:void 0)||j.a}).call(this,E(9)(S))},function(S,V,E){"use strict";(function(O){var b=E(7),j=re&&!re.nodeType&&re,he=j&&"object"==typeof O&&O&&!O.nodeType&&O,ke=he&&he.exports===j&&b.a.process,je=function(){try{return he&&he.require&&he.require("util").types||ke&&ke.binding&&ke.binding("util")}catch(st){}}();V.a=je}).call(this,E(9)(S))},function(S,V,E){"use strict";(function(O){var b=E(0),j="object"==typeof window?window:O;if(j.CKEDITOR_VERSION)throw new b.b("ckeditor-duplicated-modules: Some CKEditor 5 modules are duplicated.",null);j.CKEDITOR_VERSION="22.0.0"}).call(this,E(10))},function(S,V,E){"use strict";(function(O){V.a="object"==typeof O&&O&&O.Object===Object&&O}).call(this,E(10))},function(S,V,E){"use strict";(function(O){var b=E(3),j=re&&!re.nodeType&&re,he=j&&"object"==typeof O&&O&&!O.nodeType&&O,ke=he&&he.exports===j?b.a.Buffer:void 0,je=ke?ke.allocUnsafe:void 0;V.a=function(Ne,st){if(st)return Ne.slice();var Fe=Ne.length,Yt=je?je(Fe):new Ne.constructor(Fe);return Ne.copy(Yt),Yt}}).call(this,E(9)(S))},function(S,V){S.exports=function(E){if(!E.webpackPolyfill){var O=Object.create(E);O.children||(O.children=[]),Object.defineProperty(O,"loaded",{enumerable:!0,get:function(){return O.l}}),Object.defineProperty(O,"id",{enumerable:!0,get:function(){return O.i}}),Object.defineProperty(O,"exports",{enumerable:!0}),O.webpackPolyfill=1}return O}},function(S,V){var E;E=function(){return this}();try{E=E||new Function("return this")()}catch(O){"object"==typeof window&&(E=window)}S.exports=E},function(S,V,E){var O=E(1),b=E(79);"string"==typeof(b=b.__esModule?b.default:b)&&(b=[[S.i,b,""]]),O(b,{injectType:"singletonStyleTag",attributes:{"data-cke":!0},insert:"head",singleton:!0}),S.exports=b.locals||{}},function(S,V,E){"use strict";V.a=function(){return!1}},function(S,V,E){var O=E(1),b=E(14);"string"==typeof(b=b.__esModule?b.default:b)&&(b=[[S.i,b,""]]),O(b,{injectType:"singletonStyleTag",attributes:{"data-cke":!0},insert:"head",singleton:!0}),S.exports=b.locals||{}},function(S,V){S.exports=".ck.ck-placeholder:before,.ck .ck-placeholder:before{content:attr(data-placeholder);pointer-events:none}.ck.ck-read-only .ck-placeholder:before{display:none}.ck.ck-placeholder:before,.ck .ck-placeholder:before{cursor:text;color:var(--ck-color-engine-placeholder-text)}"},function(S,V,E){var O=E(1),b=E(16);"string"==typeof(b=b.__esModule?b.default:b)&&(b=[[S.i,b,""]]),O(b,{injectType:"singletonStyleTag",attributes:{"data-cke":!0},insert:"head",singleton:!0}),S.exports=b.locals||{}},function(S,V){S.exports=".ck-hidden{display:none!important}.ck.ck-reset,.ck.ck-reset_all,.ck.ck-reset_all *{box-sizing:border-box;width:auto;height:auto;position:static}:root{--ck-z-default:1;--ck-z-modal:calc(var(--ck-z-default) + 999);--ck-color-base-foreground:#fafafa;--ck-color-base-background:#fff;--ck-color-base-border:#c4c4c4;--ck-color-base-action:#61b045;--ck-color-base-focus:#6cb5f9;--ck-color-base-text:#333;--ck-color-base-active:#198cf0;--ck-color-base-active-focus:#0e7fe1;--ck-color-base-error:#db3700;--ck-color-focus-border-coordinates:208,79%,51%;--ck-color-focus-border:hsl(var(--ck-color-focus-border-coordinates));--ck-color-focus-outer-shadow:#bcdefb;--ck-color-focus-disabled-shadow:rgba(119,186,248,0.3);--ck-color-focus-error-shadow:rgba(255,64,31,0.3);--ck-color-text:var(--ck-color-base-text);--ck-color-shadow-drop:rgba(0,0,0,0.15);--ck-color-shadow-drop-active:rgba(0,0,0,0.2);--ck-color-shadow-inner:rgba(0,0,0,0.1);--ck-color-button-default-background:transparent;--ck-color-button-default-hover-background:#e6e6e6;--ck-color-button-default-active-background:#d9d9d9;--ck-color-button-default-active-shadow:#bfbfbf;--ck-color-button-default-disabled-background:transparent;--ck-color-button-on-background:#dedede;--ck-color-button-on-hover-background:#c4c4c4;--ck-color-button-on-active-background:#bababa;--ck-color-button-on-active-shadow:#a1a1a1;--ck-color-button-on-disabled-background:#dedede;--ck-color-button-action-background:var(--ck-color-base-action);--ck-color-button-action-hover-background:#579e3d;--ck-color-button-action-active-background:#53973b;--ck-color-button-action-active-shadow:#498433;--ck-color-button-action-disabled-background:#7ec365;--ck-color-button-action-text:var(--ck-color-base-background);--ck-color-button-save:#008a00;--ck-color-button-cancel:#db3700;--ck-color-switch-button-off-background:#b0b0b0;--ck-color-switch-button-off-hover-background:#a3a3a3;--ck-color-switch-button-on-background:var(--ck-color-button-action-background);--ck-color-switch-button-on-hover-background:#579e3d;--ck-color-switch-button-inner-background:var(--ck-color-base-background);--ck-color-switch-button-inner-shadow:rgba(0,0,0,0.1);--ck-color-dropdown-panel-background:var(--ck-color-base-background);--ck-color-dropdown-panel-border:var(--ck-color-base-border);--ck-color-input-background:var(--ck-color-base-background);--ck-color-input-border:#c7c7c7;--ck-color-input-error-border:var(--ck-color-base-error);--ck-color-input-text:var(--ck-color-base-text);--ck-color-input-disabled-background:#f2f2f2;--ck-color-input-disabled-border:#c7c7c7;--ck-color-input-disabled-text:#5c5c5c;--ck-color-list-background:var(--ck-color-base-background);--ck-color-list-button-hover-background:var(--ck-color-button-default-hover-background);--ck-color-list-button-on-background:var(--ck-color-base-active);--ck-color-list-button-on-background-focus:var(--ck-color-base-active-focus);--ck-color-list-button-on-text:var(--ck-color-base-background);--ck-color-panel-background:var(--ck-color-base-background);--ck-color-panel-border:var(--ck-color-base-border);--ck-color-toolbar-background:var(--ck-color-base-foreground);--ck-color-toolbar-border:var(--ck-color-base-border);--ck-color-tooltip-background:var(--ck-color-base-text);--ck-color-tooltip-text:var(--ck-color-base-background);--ck-color-engine-placeholder-text:#707070;--ck-color-upload-bar-background:#6cb5f9;--ck-color-link-default:#0000f0;--ck-color-link-selected-background:rgba(31,177,255,0.1);--ck-color-link-fake-selection:rgba(31,177,255,0.3);--ck-disabled-opacity:.5;--ck-focus-outer-shadow-geometry:0 0 0 3px;--ck-focus-outer-shadow:var(--ck-focus-outer-shadow-geometry) var(--ck-color-focus-outer-shadow);--ck-focus-disabled-outer-shadow:var(--ck-focus-outer-shadow-geometry) var(--ck-color-focus-disabled-shadow);--ck-focus-error-outer-shadow:var(--ck-focus-outer-shadow-geometry) var(--ck-color-focus-error-shadow);--ck-focus-ring:1px solid var(--ck-color-focus-border);--ck-font-size-base:13px;--ck-line-height-base:1.84615;--ck-font-face:Helvetica,Arial,Tahoma,Verdana,Sans-Serif;--ck-font-size-tiny:0.7em;--ck-font-size-small:0.75em;--ck-font-size-normal:1em;--ck-font-size-big:1.4em;--ck-font-size-large:1.8em;--ck-ui-component-min-height:2.3em}.ck.ck-reset,.ck.ck-reset_all,.ck.ck-reset_all *{margin:0;padding:0;border:0;background:transparent;text-decoration:none;vertical-align:middle;transition:none;word-wrap:break-word}.ck.ck-reset_all,.ck.ck-reset_all *{border-collapse:collapse;font:normal normal normal var(--ck-font-size-base)/var(--ck-line-height-base) var(--ck-font-face);color:var(--ck-color-text);text-align:left;white-space:nowrap;cursor:auto;float:none}.ck.ck-reset_all .ck-rtl *{text-align:right}.ck.ck-reset_all iframe{vertical-align:inherit}.ck.ck-reset_all textarea{white-space:pre-wrap}.ck.ck-reset_all input[type=password],.ck.ck-reset_all input[type=text],.ck.ck-reset_all textarea{cursor:text}.ck.ck-reset_all input[type=password][disabled],.ck.ck-reset_all input[type=text][disabled],.ck.ck-reset_all textarea[disabled]{cursor:default}.ck.ck-reset_all fieldset{padding:10px;border:2px groove #dfdee3}.ck.ck-reset_all button::-moz-focus-inner{padding:0;border:0}.ck[dir=rtl],.ck[dir=rtl] .ck{text-align:right}:root{--ck-border-radius:2px;--ck-inner-shadow:2px 2px 3px var(--ck-color-shadow-inner) inset;--ck-drop-shadow:0 1px 2px 1px var(--ck-color-shadow-drop);--ck-drop-shadow-active:0 3px 6px 1px var(--ck-color-shadow-drop-active);--ck-spacing-unit:0.6em;--ck-spacing-large:calc(var(--ck-spacing-unit)*1.5);--ck-spacing-standard:var(--ck-spacing-unit);--ck-spacing-medium:calc(var(--ck-spacing-unit)*0.8);--ck-spacing-small:calc(var(--ck-spacing-unit)*0.5);--ck-spacing-tiny:calc(var(--ck-spacing-unit)*0.3);--ck-spacing-extra-tiny:calc(var(--ck-spacing-unit)*0.16)}"},function(S,V,E){var O=E(1),b=E(18);"string"==typeof(b=b.__esModule?b.default:b)&&(b=[[S.i,b,""]]),O(b,{injectType:"singletonStyleTag",attributes:{"data-cke":!0},insert:"head",singleton:!0}),S.exports=b.locals||{}},function(S,V){S.exports=":root{--ck-color-editable-blur-selection:#d9d9d9}.ck.ck-editor__editable:not(.ck-editor__nested-editable){border-radius:0}.ck-rounded-corners .ck.ck-editor__editable:not(.ck-editor__nested-editable),.ck.ck-editor__editable:not(.ck-editor__nested-editable).ck-rounded-corners{border-radius:var(--ck-border-radius)}.ck.ck-editor__editable:not(.ck-editor__nested-editable).ck-focused{outline:none;border:var(--ck-focus-ring);box-shadow:var(--ck-inner-shadow),0 0}.ck.ck-editor__editable_inline{overflow:auto;padding:0 var(--ck-spacing-standard);border:1px solid transparent}.ck.ck-editor__editable_inline[dir=ltr]{text-align:left}.ck.ck-editor__editable_inline[dir=rtl]{text-align:right}.ck.ck-editor__editable_inline>:first-child{margin-top:var(--ck-spacing-large)}.ck.ck-editor__editable_inline>:last-child{margin-bottom:var(--ck-spacing-large)}.ck.ck-editor__editable_inline.ck-blurred ::selection{background:var(--ck-color-editable-blur-selection)}.ck.ck-balloon-panel.ck-toolbar-container[class*=arrow_n]:after{border-bottom-color:var(--ck-color-base-foreground)}.ck.ck-balloon-panel.ck-toolbar-container[class*=arrow_s]:after{border-top-color:var(--ck-color-base-foreground)}"},function(S,V,E){var O=E(1),b=E(20);"string"==typeof(b=b.__esModule?b.default:b)&&(b=[[S.i,b,""]]),O(b,{injectType:"singletonStyleTag",attributes:{"data-cke":!0},insert:"head",singleton:!0}),S.exports=b.locals||{}},function(S,V){S.exports=".ck.ck-dropdown{display:inline-block;position:relative}.ck.ck-dropdown .ck-dropdown__arrow{pointer-events:none;z-index:var(--ck-z-default)}.ck.ck-dropdown .ck-button.ck-dropdown__button{width:100%}.ck.ck-dropdown .ck-button.ck-dropdown__button.ck-on .ck-tooltip{display:none}.ck.ck-dropdown .ck-dropdown__panel{-webkit-backface-visibility:hidden;display:none;z-index:var(--ck-z-modal);position:absolute}.ck.ck-dropdown .ck-dropdown__panel.ck-dropdown__panel-visible{display:inline-block}.ck.ck-dropdown .ck-dropdown__panel.ck-dropdown__panel_ne,.ck.ck-dropdown .ck-dropdown__panel.ck-dropdown__panel_nw{bottom:100%}.ck.ck-dropdown .ck-dropdown__panel.ck-dropdown__panel_se,.ck.ck-dropdown .ck-dropdown__panel.ck-dropdown__panel_sw{top:100%;bottom:auto}.ck.ck-dropdown .ck-dropdown__panel.ck-dropdown__panel_ne,.ck.ck-dropdown .ck-dropdown__panel.ck-dropdown__panel_se{left:0}.ck.ck-dropdown .ck-dropdown__panel.ck-dropdown__panel_nw,.ck.ck-dropdown .ck-dropdown__panel.ck-dropdown__panel_sw{right:0}.ck.ck-toolbar .ck-dropdown__panel{z-index:calc(var(--ck-z-modal) + 1)}:root{--ck-dropdown-arrow-size:calc(0.5*var(--ck-icon-size))}.ck.ck-dropdown{font-size:inherit}.ck.ck-dropdown .ck-dropdown__arrow{width:var(--ck-dropdown-arrow-size)}[dir=ltr] .ck.ck-dropdown .ck-dropdown__arrow{right:var(--ck-spacing-standard);margin-left:var(--ck-spacing-standard)}[dir=rtl] .ck.ck-dropdown .ck-dropdown__arrow{left:var(--ck-spacing-standard);margin-right:var(--ck-spacing-small)}.ck.ck-dropdown.ck-disabled .ck-dropdown__arrow{opacity:var(--ck-disabled-opacity)}[dir=ltr] .ck.ck-dropdown .ck-button.ck-dropdown__button:not(.ck-button_with-text){padding-left:var(--ck-spacing-small)}[dir=rtl] .ck.ck-dropdown .ck-button.ck-dropdown__button:not(.ck-button_with-text){padding-right:var(--ck-spacing-small)}.ck.ck-dropdown .ck-button.ck-dropdown__button .ck-button__label{width:7em;overflow:hidden;text-overflow:ellipsis}.ck.ck-dropdown .ck-button.ck-dropdown__button.ck-disabled .ck-button__label{opacity:var(--ck-disabled-opacity)}.ck.ck-dropdown .ck-button.ck-dropdown__button.ck-on{border-bottom-left-radius:0;border-bottom-right-radius:0}.ck.ck-dropdown .ck-button.ck-dropdown__button.ck-dropdown__button_label-width_auto .ck-button__label{width:auto}.ck.ck-dropdown__panel{border-radius:0}.ck-rounded-corners .ck.ck-dropdown__panel,.ck.ck-dropdown__panel.ck-rounded-corners{border-radius:var(--ck-border-radius)}.ck.ck-dropdown__panel{box-shadow:var(--ck-drop-shadow),0 0;background:var(--ck-color-dropdown-panel-background);border:1px solid var(--ck-color-dropdown-panel-border);bottom:0;min-width:100%}.ck.ck-dropdown__panel.ck-dropdown__panel_se{border-top-left-radius:0}.ck.ck-dropdown__panel.ck-dropdown__panel_sw{border-top-right-radius:0}.ck.ck-dropdown__panel.ck-dropdown__panel_ne{border-bottom-left-radius:0}.ck.ck-dropdown__panel.ck-dropdown__panel_nw{border-bottom-right-radius:0}"},function(S,V,E){var O=E(1),b=E(22);"string"==typeof(b=b.__esModule?b.default:b)&&(b=[[S.i,b,""]]),O(b,{injectType:"singletonStyleTag",attributes:{"data-cke":!0},insert:"head",singleton:!0}),S.exports=b.locals||{}},function(S,V){S.exports=".ck.ck-icon{vertical-align:middle}:root{--ck-icon-size:calc(var(--ck-line-height-base)*var(--ck-font-size-normal))}.ck.ck-icon{width:var(--ck-icon-size);height:var(--ck-icon-size);font-size:.8333350694em;will-change:transform}.ck.ck-icon,.ck.ck-icon *{color:inherit;cursor:inherit}.ck.ck-icon :not([fill]){fill:currentColor}"},function(S,V,E){var O=E(1),b=E(24);"string"==typeof(b=b.__esModule?b.default:b)&&(b=[[S.i,b,""]]),O(b,{injectType:"singletonStyleTag",attributes:{"data-cke":!0},insert:"head",singleton:!0}),S.exports=b.locals||{}},function(S,V){S.exports='.ck.ck-tooltip,.ck.ck-tooltip .ck-tooltip__text:after{position:absolute;pointer-events:none;-webkit-backface-visibility:hidden}.ck.ck-tooltip{visibility:hidden;opacity:0;display:none;z-index:var(--ck-z-modal)}.ck.ck-tooltip .ck-tooltip__text{display:inline-block}.ck.ck-tooltip .ck-tooltip__text:after{content:"";width:0;height:0}:root{--ck-tooltip-arrow-size:5px}.ck.ck-tooltip{left:50%;top:0;transition:opacity .2s ease-in-out .2s}.ck.ck-tooltip .ck-tooltip__text{border-radius:0}.ck-rounded-corners .ck.ck-tooltip .ck-tooltip__text,.ck.ck-tooltip .ck-tooltip__text.ck-rounded-corners{border-radius:var(--ck-border-radius)}.ck.ck-tooltip .ck-tooltip__text{font-size:.9em;line-height:1.5;color:var(--ck-color-tooltip-text);padding:var(--ck-spacing-small) var(--ck-spacing-medium);background:var(--ck-color-tooltip-background);position:relative;left:-50%}.ck.ck-tooltip .ck-tooltip__text:after{transition:opacity .2s ease-in-out .2s;border-style:solid;left:50%}.ck.ck-tooltip.ck-tooltip_s{bottom:calc(-1*var(--ck-tooltip-arrow-size));transform:translateY(100%)}.ck.ck-tooltip.ck-tooltip_s .ck-tooltip__text:after{top:calc(-1*var(--ck-tooltip-arrow-size));transform:translateX(-50%);border-left-color:transparent;border-bottom-color:var(--ck-color-tooltip-background);border-right-color:transparent;border-top-color:transparent;border-left-width:var(--ck-tooltip-arrow-size);border-bottom-width:var(--ck-tooltip-arrow-size);border-right-width:var(--ck-tooltip-arrow-size);border-top-width:0}.ck.ck-tooltip.ck-tooltip_n{top:calc(-1*var(--ck-tooltip-arrow-size));transform:translateY(-100%)}.ck.ck-tooltip.ck-tooltip_n .ck-tooltip__text:after{bottom:calc(-1*var(--ck-tooltip-arrow-size));transform:translateX(-50%);border-left-color:transparent;border-bottom-color:transparent;border-right-color:transparent;border-top-color:var(--ck-color-tooltip-background);border-left-width:var(--ck-tooltip-arrow-size);border-bottom-width:0;border-right-width:var(--ck-tooltip-arrow-size);border-top-width:var(--ck-tooltip-arrow-size)}'},function(S,V,E){var O=E(1),b=E(26);"string"==typeof(b=b.__esModule?b.default:b)&&(b=[[S.i,b,""]]),O(b,{injectType:"singletonStyleTag",attributes:{"data-cke":!0},insert:"head",singleton:!0}),S.exports=b.locals||{}},function(S,V){S.exports=".ck.ck-button,a.ck.ck-button{-moz-user-select:none;-webkit-user-select:none;-ms-user-select:none;user-select:none}.ck.ck-button .ck-tooltip,a.ck.ck-button .ck-tooltip{display:block}@media (hover:none){.ck.ck-button .ck-tooltip,a.ck.ck-button .ck-tooltip{display:none}}.ck.ck-button,a.ck.ck-button{position:relative;display:inline-flex;align-items:center;justify-content:left}.ck.ck-button .ck-button__label,a.ck.ck-button .ck-button__label{display:none}.ck.ck-button.ck-button_with-text .ck-button__label,a.ck.ck-button.ck-button_with-text .ck-button__label{display:inline-block}.ck.ck-button:not(.ck-button_with-text),a.ck.ck-button:not(.ck-button_with-text){justify-content:center}.ck.ck-button:hover .ck-tooltip,a.ck.ck-button:hover .ck-tooltip{visibility:visible;opacity:1}.ck.ck-button:focus:not(:hover) .ck-tooltip,a.ck.ck-button:focus:not(:hover) .ck-tooltip{display:none}.ck.ck-button,a.ck.ck-button{background:var(--ck-color-button-default-background)}.ck.ck-button:not(.ck-disabled):hover,a.ck.ck-button:not(.ck-disabled):hover{background:var(--ck-color-button-default-hover-background)}.ck.ck-button:not(.ck-disabled):active,a.ck.ck-button:not(.ck-disabled):active{background:var(--ck-color-button-default-active-background);box-shadow:inset 0 2px 2px var(--ck-color-button-default-active-shadow)}.ck.ck-button.ck-disabled,a.ck.ck-button.ck-disabled{background:var(--ck-color-button-default-disabled-background)}.ck.ck-button,a.ck.ck-button{border-radius:0}.ck-rounded-corners .ck.ck-button,.ck-rounded-corners a.ck.ck-button,.ck.ck-button.ck-rounded-corners,a.ck.ck-button.ck-rounded-corners{border-radius:var(--ck-border-radius)}.ck.ck-button,a.ck.ck-button{white-space:nowrap;cursor:default;vertical-align:middle;padding:var(--ck-spacing-tiny);text-align:center;min-width:var(--ck-ui-component-min-height);min-height:var(--ck-ui-component-min-height);line-height:1;font-size:inherit;border:1px solid transparent;transition:box-shadow .2s ease-in-out,border .2s ease-in-out;-webkit-appearance:none}.ck.ck-button:active,.ck.ck-button:focus,a.ck.ck-button:active,a.ck.ck-button:focus{outline:none;border:var(--ck-focus-ring);box-shadow:var(--ck-focus-outer-shadow),0 0}.ck.ck-button .ck-button__icon use,.ck.ck-button .ck-button__icon use *,a.ck.ck-button .ck-button__icon use,a.ck.ck-button .ck-button__icon use *{color:inherit}.ck.ck-button .ck-button__label,a.ck.ck-button .ck-button__label{font-size:inherit;font-weight:inherit;color:inherit;cursor:inherit;vertical-align:middle}[dir=ltr] .ck.ck-button .ck-button__label,[dir=ltr] a.ck.ck-button .ck-button__label{text-align:left}[dir=rtl] .ck.ck-button .ck-button__label,[dir=rtl] a.ck.ck-button .ck-button__label{text-align:right}.ck.ck-button .ck-button__keystroke,a.ck.ck-button .ck-button__keystroke{color:inherit}[dir=ltr] .ck.ck-button .ck-button__keystroke,[dir=ltr] a.ck.ck-button .ck-button__keystroke{margin-left:var(--ck-spacing-large)}[dir=rtl] .ck.ck-button .ck-button__keystroke,[dir=rtl] a.ck.ck-button .ck-button__keystroke{margin-right:var(--ck-spacing-large)}.ck.ck-button .ck-button__keystroke,a.ck.ck-button .ck-button__keystroke{font-weight:700;opacity:.7}.ck.ck-button.ck-disabled:active,.ck.ck-button.ck-disabled:focus,a.ck.ck-button.ck-disabled:active,a.ck.ck-button.ck-disabled:focus{box-shadow:var(--ck-focus-disabled-outer-shadow),0 0}.ck.ck-button.ck-disabled .ck-button__icon,a.ck.ck-button.ck-disabled .ck-button__icon{opacity:var(--ck-disabled-opacity)}.ck.ck-button.ck-disabled .ck-button__label,a.ck.ck-button.ck-disabled .ck-button__label{opacity:var(--ck-disabled-opacity)}.ck.ck-button.ck-disabled .ck-button__keystroke,a.ck.ck-button.ck-disabled .ck-button__keystroke{opacity:.3}.ck.ck-button.ck-button_with-text,a.ck.ck-button.ck-button_with-text{padding:var(--ck-spacing-tiny) var(--ck-spacing-standard)}[dir=ltr] .ck.ck-button.ck-button_with-text .ck-button__icon,[dir=ltr] a.ck.ck-button.ck-button_with-text .ck-button__icon{margin-left:calc(-1*var(--ck-spacing-small));margin-right:var(--ck-spacing-small)}[dir=rtl] .ck.ck-button.ck-button_with-text .ck-button__icon,[dir=rtl] a.ck.ck-button.ck-button_with-text .ck-button__icon{margin-right:calc(-1*var(--ck-spacing-small));margin-left:var(--ck-spacing-small)}.ck.ck-button.ck-button_with-keystroke .ck-button__label,a.ck.ck-button.ck-button_with-keystroke .ck-button__label{flex-grow:1}.ck.ck-button.ck-on,a.ck.ck-button.ck-on{background:var(--ck-color-button-on-background)}.ck.ck-button.ck-on:not(.ck-disabled):hover,a.ck.ck-button.ck-on:not(.ck-disabled):hover{background:var(--ck-color-button-on-hover-background)}.ck.ck-button.ck-on:not(.ck-disabled):active,a.ck.ck-button.ck-on:not(.ck-disabled):active{background:var(--ck-color-button-on-active-background);box-shadow:inset 0 2px 2px var(--ck-color-button-on-active-shadow)}.ck.ck-button.ck-on.ck-disabled,a.ck.ck-button.ck-on.ck-disabled{background:var(--ck-color-button-on-disabled-background)}.ck.ck-button.ck-button-save,a.ck.ck-button.ck-button-save{color:var(--ck-color-button-save)}.ck.ck-button.ck-button-cancel,a.ck.ck-button.ck-button-cancel{color:var(--ck-color-button-cancel)}.ck.ck-button-action,a.ck.ck-button-action{background:var(--ck-color-button-action-background)}.ck.ck-button-action:not(.ck-disabled):hover,a.ck.ck-button-action:not(.ck-disabled):hover{background:var(--ck-color-button-action-hover-background)}.ck.ck-button-action:not(.ck-disabled):active,a.ck.ck-button-action:not(.ck-disabled):active{background:var(--ck-color-button-action-active-background);box-shadow:inset 0 2px 2px var(--ck-color-button-action-active-shadow)}.ck.ck-button-action.ck-disabled,a.ck.ck-button-action.ck-disabled{background:var(--ck-color-button-action-disabled-background)}.ck.ck-button-action,a.ck.ck-button-action{color:var(--ck-color-button-action-text)}.ck.ck-button-bold,a.ck.ck-button-bold{font-weight:700}"},function(S,V,E){var O=E(1),b=E(28);"string"==typeof(b=b.__esModule?b.default:b)&&(b=[[S.i,b,""]]),O(b,{injectType:"singletonStyleTag",attributes:{"data-cke":!0},insert:"head",singleton:!0}),S.exports=b.locals||{}},function(S,V){S.exports=".ck.ck-list{-moz-user-select:none;-webkit-user-select:none;-ms-user-select:none;user-select:none;display:flex;flex-direction:column}.ck.ck-list .ck-list__item,.ck.ck-list .ck-list__separator{display:block}.ck.ck-list .ck-list__item>:focus{position:relative;z-index:var(--ck-z-default)}.ck.ck-list{border-radius:0}.ck-rounded-corners .ck.ck-list,.ck.ck-list.ck-rounded-corners{border-radius:var(--ck-border-radius)}.ck.ck-list{list-style-type:none;background:var(--ck-color-list-background)}.ck.ck-list__item{cursor:default;min-width:12em}.ck.ck-list__item .ck-button{min-height:unset;width:100%;text-align:left;border-radius:0;padding:calc(0.2*var(--ck-line-height-base)*var(--ck-font-size-base)) calc(0.4*var(--ck-line-height-base)*var(--ck-font-size-base))}.ck.ck-list__item .ck-button .ck-button__label{line-height:calc(1.2*var(--ck-line-height-base)*var(--ck-font-size-base))}.ck.ck-list__item .ck-button:active{box-shadow:none}.ck.ck-list__item .ck-button.ck-on{background:var(--ck-color-list-button-on-background);color:var(--ck-color-list-button-on-text)}.ck.ck-list__item .ck-button.ck-on:active{box-shadow:none}.ck.ck-list__item .ck-button.ck-on:hover:not(.ck-disabled){background:var(--ck-color-list-button-on-background-focus)}.ck.ck-list__item .ck-button.ck-on:focus:not(.ck-disabled){border-color:var(--ck-color-base-background)}.ck.ck-list__item .ck-button:hover:not(.ck-disabled){background:var(--ck-color-list-button-hover-background)}.ck.ck-list__item .ck-switchbutton.ck-on{background:var(--ck-color-list-background);color:inherit}.ck.ck-list__item .ck-switchbutton.ck-on:hover:not(.ck-disabled){background:var(--ck-color-list-button-hover-background);color:inherit}.ck.ck-list__separator{height:1px;width:100%;background:var(--ck-color-base-border)}"},function(S,V,E){var O=E(1),b=E(30);"string"==typeof(b=b.__esModule?b.default:b)&&(b=[[S.i,b,""]]),O(b,{injectType:"singletonStyleTag",attributes:{"data-cke":!0},insert:"head",singleton:!0}),S.exports=b.locals||{}},function(S,V){S.exports=".ck.ck-button.ck-switchbutton .ck-button__toggle,.ck.ck-button.ck-switchbutton .ck-button__toggle .ck-button__toggle__inner{display:block}:root{--ck-switch-button-toggle-width:2.6153846154em;--ck-switch-button-toggle-inner-size:1.0769230769em;--ck-switch-button-toggle-spacing:1px;--ck-switch-button-translation:calc(var(--ck-switch-button-toggle-width) - var(--ck-switch-button-toggle-inner-size) - 2*var(--ck-switch-button-toggle-spacing))}[dir=ltr] .ck.ck-button.ck-switchbutton .ck-button__label{margin-right:calc(2*var(--ck-spacing-large))}[dir=rtl] .ck.ck-button.ck-switchbutton .ck-button__label{margin-left:calc(2*var(--ck-spacing-large))}.ck.ck-button.ck-switchbutton .ck-button__toggle{border-radius:0}.ck-rounded-corners .ck.ck-button.ck-switchbutton .ck-button__toggle,.ck.ck-button.ck-switchbutton .ck-button__toggle.ck-rounded-corners{border-radius:var(--ck-border-radius)}[dir=ltr] .ck.ck-button.ck-switchbutton .ck-button__toggle{margin-left:auto}[dir=rtl] .ck.ck-button.ck-switchbutton .ck-button__toggle{margin-right:auto}.ck.ck-button.ck-switchbutton .ck-button__toggle{transition:background .4s ease;width:var(--ck-switch-button-toggle-width);background:var(--ck-color-switch-button-off-background)}.ck.ck-button.ck-switchbutton .ck-button__toggle .ck-button__toggle__inner{border-radius:0}.ck-rounded-corners .ck.ck-button.ck-switchbutton .ck-button__toggle .ck-button__toggle__inner,.ck.ck-button.ck-switchbutton .ck-button__toggle .ck-button__toggle__inner.ck-rounded-corners{border-radius:var(--ck-border-radius);border-radius:calc(0.5*var(--ck-border-radius))}.ck.ck-button.ck-switchbutton .ck-button__toggle .ck-button__toggle__inner{margin:var(--ck-switch-button-toggle-spacing);width:var(--ck-switch-button-toggle-inner-size);height:var(--ck-switch-button-toggle-inner-size);background:var(--ck-color-switch-button-inner-background);transition:all .3s ease}.ck.ck-button.ck-switchbutton .ck-button__toggle:hover{background:var(--ck-color-switch-button-off-hover-background)}.ck.ck-button.ck-switchbutton .ck-button__toggle:hover .ck-button__toggle__inner{box-shadow:0 0 0 5px var(--ck-color-switch-button-inner-shadow)}.ck.ck-button.ck-switchbutton.ck-disabled .ck-button__toggle{opacity:var(--ck-disabled-opacity)}.ck.ck-button.ck-switchbutton.ck-on .ck-button__toggle{background:var(--ck-color-switch-button-on-background)}.ck.ck-button.ck-switchbutton.ck-on .ck-button__toggle:hover{background:var(--ck-color-switch-button-on-hover-background)}[dir=ltr] .ck.ck-button.ck-switchbutton.ck-on .ck-button__toggle .ck-button__toggle__inner{transform:translateX(var(--ck-switch-button-translation))}[dir=rtl] .ck.ck-button.ck-switchbutton.ck-on .ck-button__toggle .ck-button__toggle__inner{transform:translateX(calc(-1*var(--ck-switch-button-translation)))}"},function(S,V,E){var O=E(1),b=E(32);"string"==typeof(b=b.__esModule?b.default:b)&&(b=[[S.i,b,""]]),O(b,{injectType:"singletonStyleTag",attributes:{"data-cke":!0},insert:"head",singleton:!0}),S.exports=b.locals||{}},function(S,V){S.exports=".ck.ck-toolbar-dropdown .ck.ck-toolbar .ck.ck-toolbar__items{flex-wrap:nowrap}.ck.ck-toolbar-dropdown .ck-dropdown__panel .ck-button:focus{z-index:calc(var(--ck-z-default) + 1)}.ck.ck-toolbar-dropdown .ck-toolbar{border:0}"},function(S,V,E){var O=E(1),b=E(34);"string"==typeof(b=b.__esModule?b.default:b)&&(b=[[S.i,b,""]]),O(b,{injectType:"singletonStyleTag",attributes:{"data-cke":!0},insert:"head",singleton:!0}),S.exports=b.locals||{}},function(S,V){S.exports=".ck.ck-dropdown .ck-dropdown__panel .ck-list{border-radius:0}.ck-rounded-corners .ck.ck-dropdown .ck-dropdown__panel .ck-list,.ck.ck-dropdown .ck-dropdown__panel .ck-list.ck-rounded-corners{border-radius:var(--ck-border-radius);border-top-left-radius:0}.ck.ck-dropdown .ck-dropdown__panel .ck-list .ck-list__item:first-child .ck-button{border-radius:0}.ck-rounded-corners .ck.ck-dropdown .ck-dropdown__panel .ck-list .ck-list__item:first-child .ck-button,.ck.ck-dropdown .ck-dropdown__panel .ck-list .ck-list__item:first-child .ck-button.ck-rounded-corners{border-radius:var(--ck-border-radius);border-top-left-radius:0;border-bottom-left-radius:0;border-bottom-right-radius:0}.ck.ck-dropdown .ck-dropdown__panel .ck-list .ck-list__item:last-child .ck-button{border-radius:0}.ck-rounded-corners .ck.ck-dropdown .ck-dropdown__panel .ck-list .ck-list__item:last-child .ck-button,.ck.ck-dropdown .ck-dropdown__panel .ck-list .ck-list__item:last-child .ck-button.ck-rounded-corners{border-radius:var(--ck-border-radius);border-top-left-radius:0;border-top-right-radius:0}"},function(S,V,E){var O=E(1),b=E(36);"string"==typeof(b=b.__esModule?b.default:b)&&(b=[[S.i,b,""]]),O(b,{injectType:"singletonStyleTag",attributes:{"data-cke":!0},insert:"head",singleton:!0}),S.exports=b.locals||{}},function(S,V){S.exports=".ck.ck-toolbar{-moz-user-select:none;-webkit-user-select:none;-ms-user-select:none;user-select:none;display:flex;flex-flow:row nowrap;align-items:center}.ck.ck-toolbar>.ck-toolbar__items{display:flex;flex-flow:row wrap;align-items:center;flex-grow:1}.ck.ck-toolbar .ck.ck-toolbar__separator{display:inline-block}.ck.ck-toolbar .ck.ck-toolbar__separator:first-child,.ck.ck-toolbar .ck.ck-toolbar__separator:last-child{display:none}.ck.ck-toolbar.ck-toolbar_grouping>.ck-toolbar__items{flex-wrap:nowrap}.ck.ck-toolbar.ck-toolbar_vertical>.ck-toolbar__items{flex-direction:column}.ck.ck-toolbar.ck-toolbar_floating>.ck-toolbar__items{flex-wrap:nowrap}.ck.ck-toolbar>.ck.ck-toolbar__grouped-dropdown>.ck-dropdown__button .ck-dropdown__arrow{display:none}.ck.ck-toolbar{border-radius:0}.ck-rounded-corners .ck.ck-toolbar,.ck.ck-toolbar.ck-rounded-corners{border-radius:var(--ck-border-radius)}.ck.ck-toolbar{background:var(--ck-color-toolbar-background);padding:0 var(--ck-spacing-small);border:1px solid var(--ck-color-toolbar-border)}.ck.ck-toolbar .ck.ck-toolbar__separator{align-self:stretch;width:1px;min-width:1px;background:var(--ck-color-toolbar-border);margin-top:var(--ck-spacing-small);margin-bottom:var(--ck-spacing-small)}.ck.ck-toolbar>.ck-toolbar__items>*{margin-top:var(--ck-spacing-small);margin-bottom:var(--ck-spacing-small);margin-right:var(--ck-spacing-small)}.ck.ck-toolbar>.ck-toolbar__items:empty+.ck.ck-toolbar__separator{display:none}.ck.ck-toolbar>.ck-toolbar__items>*,.ck.ck-toolbar>.ck.ck-toolbar__grouped-dropdown{margin-top:var(--ck-spacing-small);margin-bottom:var(--ck-spacing-small)}.ck.ck-toolbar.ck-toolbar_vertical{padding:0}.ck.ck-toolbar.ck-toolbar_vertical>.ck-toolbar__items>.ck{width:100%;margin:0;border-radius:0;border:0}.ck.ck-toolbar.ck-toolbar_compact{padding:0}.ck.ck-toolbar.ck-toolbar_compact>.ck-toolbar__items>*{margin:0}.ck.ck-toolbar.ck-toolbar_compact>.ck-toolbar__items>:not(:first-child):not(:last-child){border-radius:0}.ck.ck-toolbar>.ck.ck-toolbar__grouped-dropdown>.ck.ck-button.ck-dropdown__button{padding-left:var(--ck-spacing-tiny)}.ck-toolbar-container .ck.ck-toolbar{border:0}.ck.ck-toolbar[dir=rtl]>.ck-toolbar__items>.ck,[dir=rtl] .ck.ck-toolbar>.ck-toolbar__items>.ck{margin-right:0}.ck.ck-toolbar[dir=rtl]:not(.ck-toolbar_compact)>.ck-toolbar__items>.ck,[dir=rtl] .ck.ck-toolbar:not(.ck-toolbar_compact)>.ck-toolbar__items>.ck{margin-left:var(--ck-spacing-small)}.ck.ck-toolbar[dir=rtl]>.ck-toolbar__items>.ck:last-child,[dir=rtl] .ck.ck-toolbar>.ck-toolbar__items>.ck:last-child{margin-left:0}.ck.ck-toolbar[dir=rtl].ck-toolbar_compact>.ck-toolbar__items>.ck:first-child,[dir=rtl] .ck.ck-toolbar.ck-toolbar_compact>.ck-toolbar__items>.ck:first-child{border-top-left-radius:0;border-bottom-left-radius:0}.ck.ck-toolbar[dir=rtl].ck-toolbar_compact>.ck-toolbar__items>.ck:last-child,[dir=rtl] .ck.ck-toolbar.ck-toolbar_compact>.ck-toolbar__items>.ck:last-child{border-top-right-radius:0;border-bottom-right-radius:0}.ck.ck-toolbar[dir=rtl]>.ck.ck-toolbar__separator,[dir=rtl] .ck.ck-toolbar>.ck.ck-toolbar__separator{margin-left:var(--ck-spacing-small)}.ck.ck-toolbar[dir=rtl].ck-toolbar_grouping>.ck-toolbar__items:not(:empty):not(:only-child),[dir=rtl] .ck.ck-toolbar.ck-toolbar_grouping>.ck-toolbar__items:not(:empty):not(:only-child){margin-left:var(--ck-spacing-small)}.ck.ck-toolbar[dir=ltr]>.ck-toolbar__items>.ck:last-child,[dir=ltr] .ck.ck-toolbar>.ck-toolbar__items>.ck:last-child{margin-right:0}.ck.ck-toolbar[dir=ltr].ck-toolbar_compact>.ck-toolbar__items>.ck:first-child,[dir=ltr] .ck.ck-toolbar.ck-toolbar_compact>.ck-toolbar__items>.ck:first-child{border-top-right-radius:0;border-bottom-right-radius:0}.ck.ck-toolbar[dir=ltr].ck-toolbar_compact>.ck-toolbar__items>.ck:last-child,[dir=ltr] .ck.ck-toolbar.ck-toolbar_compact>.ck-toolbar__items>.ck:last-child{border-top-left-radius:0;border-bottom-left-radius:0}.ck.ck-toolbar[dir=ltr]>.ck.ck-toolbar__separator,[dir=ltr] .ck.ck-toolbar>.ck.ck-toolbar__separator{margin-right:var(--ck-spacing-small)}.ck.ck-toolbar[dir=ltr].ck-toolbar_grouping>.ck-toolbar__items:not(:empty):not(:only-child),[dir=ltr] .ck.ck-toolbar.ck-toolbar_grouping>.ck-toolbar__items:not(:empty):not(:only-child){margin-right:var(--ck-spacing-small)}"},function(S,V,E){var O=E(1),b=E(38);"string"==typeof(b=b.__esModule?b.default:b)&&(b=[[S.i,b,""]]),O(b,{injectType:"singletonStyleTag",attributes:{"data-cke":!0},insert:"head",singleton:!0}),S.exports=b.locals||{}},function(S,V){S.exports=".ck.ck-color-grid{display:grid}:root{--ck-color-grid-tile-size:24px;--ck-color-color-grid-check-icon:#000}.ck.ck-color-grid{grid-gap:5px;padding:8px}.ck.ck-color-grid__tile{width:var(--ck-color-grid-tile-size);height:var(--ck-color-grid-tile-size);min-width:var(--ck-color-grid-tile-size);min-height:var(--ck-color-grid-tile-size);padding:0;transition:box-shadow .2s ease;border:0}.ck.ck-color-grid__tile.ck-disabled{cursor:unset;transition:unset}.ck.ck-color-grid__tile.ck-color-table__color-tile_bordered{box-shadow:0 0 0 1px var(--ck-color-base-border)}.ck.ck-color-grid__tile .ck.ck-icon{display:none;color:var(--ck-color-color-grid-check-icon)}.ck.ck-color-grid__tile.ck-on{box-shadow:inset 0 0 0 1px var(--ck-color-base-background),0 0 0 2px var(--ck-color-base-text)}.ck.ck-color-grid__tile.ck-on .ck.ck-icon{display:block}.ck.ck-color-grid__tile.ck-on,.ck.ck-color-grid__tile:focus:not(.ck-disabled),.ck.ck-color-grid__tile:hover:not(.ck-disabled){border:0}.ck.ck-color-grid__tile:focus:not(.ck-disabled),.ck.ck-color-grid__tile:hover:not(.ck-disabled){box-shadow:inset 0 0 0 1px var(--ck-color-base-background),0 0 0 2px var(--ck-color-focus-border)}.ck.ck-color-grid__label{padding:0 var(--ck-spacing-standard)}"},function(S,V,E){var O=E(1),b=E(40);"string"==typeof(b=b.__esModule?b.default:b)&&(b=[[S.i,b,""]]),O(b,{injectType:"singletonStyleTag",attributes:{"data-cke":!0},insert:"head",singleton:!0}),S.exports=b.locals||{}},function(S,V){S.exports=".ck.ck-label{display:block}.ck.ck-voice-label{display:none}.ck.ck-label{font-weight:700}"},function(S,V,E){var O=E(1),b=E(42);"string"==typeof(b=b.__esModule?b.default:b)&&(b=[[S.i,b,""]]),O(b,{injectType:"singletonStyleTag",attributes:{"data-cke":!0},insert:"head",singleton:!0}),S.exports=b.locals||{}},function(S,V){S.exports=".ck .ck-button.ck-color-table__remove-color{display:flex;align-items:center;width:100%}label.ck.ck-color-grid__label{font-weight:unset}.ck .ck-button.ck-color-table__remove-color{padding:calc(var(--ck-spacing-standard)/2) var(--ck-spacing-standard);border-bottom-left-radius:0;border-bottom-right-radius:0}.ck .ck-button.ck-color-table__remove-color:not(:focus){border-bottom:1px solid var(--ck-color-base-border)}[dir=ltr] .ck .ck-button.ck-color-table__remove-color .ck.ck-icon{margin-right:var(--ck-spacing-standard)}[dir=rtl] .ck .ck-button.ck-color-table__remove-color .ck.ck-icon{margin-left:var(--ck-spacing-standard)}"},function(S,V,E){var O=E(1),b=E(44);"string"==typeof(b=b.__esModule?b.default:b)&&(b=[[S.i,b,""]]),O(b,{injectType:"singletonStyleTag",attributes:{"data-cke":!0},insert:"head",singleton:!0}),S.exports=b.locals||{}},function(S,V){S.exports=".ck-content .text-tiny{font-size:.7em}.ck-content .text-small{font-size:.85em}.ck-content .text-big{font-size:1.4em}.ck-content .text-huge{font-size:1.8em}"},function(S,V,E){var O=E(1),b=E(46);"string"==typeof(b=b.__esModule?b.default:b)&&(b=[[S.i,b,""]]),O(b,{injectType:"singletonStyleTag",attributes:{"data-cke":!0},insert:"head",singleton:!0}),S.exports=b.locals||{}},function(S,V){S.exports=".ck-content blockquote{overflow:hidden;padding-right:1.5em;padding-left:1.5em;margin-left:0;margin-right:0;font-style:italic;border-left:5px solid #ccc}.ck-content[dir=rtl] blockquote{border-left:0;border-right:5px solid #ccc}"},function(S,V,E){var O=E(1),b=E(48);"string"==typeof(b=b.__esModule?b.default:b)&&(b=[[S.i,b,""]]),O(b,{injectType:"singletonStyleTag",attributes:{"data-cke":!0},insert:"head",singleton:!0}),S.exports=b.locals||{}},function(S,V){S.exports=':root{--ck-balloon-panel-arrow-z-index:calc(var(--ck-z-default) - 3)}.ck.ck-balloon-panel{display:none;position:absolute;z-index:var(--ck-z-modal)}.ck.ck-balloon-panel.ck-balloon-panel_with-arrow:after,.ck.ck-balloon-panel.ck-balloon-panel_with-arrow:before{content:"";position:absolute}.ck.ck-balloon-panel.ck-balloon-panel_with-arrow:before{z-index:var(--ck-balloon-panel-arrow-z-index)}.ck.ck-balloon-panel.ck-balloon-panel_with-arrow:after{z-index:calc(var(--ck-balloon-panel-arrow-z-index) + 1)}.ck.ck-balloon-panel[class*=arrow_n]:before{z-index:var(--ck-balloon-panel-arrow-z-index)}.ck.ck-balloon-panel[class*=arrow_n]:after{z-index:calc(var(--ck-balloon-panel-arrow-z-index) + 1)}.ck.ck-balloon-panel[class*=arrow_s]:before{z-index:var(--ck-balloon-panel-arrow-z-index)}.ck.ck-balloon-panel[class*=arrow_s]:after{z-index:calc(var(--ck-balloon-panel-arrow-z-index) + 1)}.ck.ck-balloon-panel.ck-balloon-panel_visible{display:block}:root{--ck-balloon-arrow-offset:2px;--ck-balloon-arrow-height:10px;--ck-balloon-arrow-half-width:8px}.ck.ck-balloon-panel{border-radius:0}.ck-rounded-corners .ck.ck-balloon-panel,.ck.ck-balloon-panel.ck-rounded-corners{border-radius:var(--ck-border-radius)}.ck.ck-balloon-panel{box-shadow:var(--ck-drop-shadow),0 0;min-height:15px;background:var(--ck-color-panel-background);border:1px solid var(--ck-color-panel-border)}.ck.ck-balloon-panel.ck-balloon-panel_with-arrow:after,.ck.ck-balloon-panel.ck-balloon-panel_with-arrow:before{width:0;height:0;border-style:solid}.ck.ck-balloon-panel[class*=arrow_n]:after,.ck.ck-balloon-panel[class*=arrow_n]:before{border-left-width:var(--ck-balloon-arrow-half-width);border-bottom-width:var(--ck-balloon-arrow-height);border-right-width:var(--ck-balloon-arrow-half-width);border-top-width:0}.ck.ck-balloon-panel[class*=arrow_n]:before{border-bottom-color:var(--ck-color-panel-border)}.ck.ck-balloon-panel[class*=arrow_n]:after,.ck.ck-balloon-panel[class*=arrow_n]:before{border-left-color:transparent;border-right-color:transparent;border-top-color:transparent}.ck.ck-balloon-panel[class*=arrow_n]:after{border-bottom-color:var(--ck-color-panel-background);margin-top:var(--ck-balloon-arrow-offset)}.ck.ck-balloon-panel[class*=arrow_s]:after,.ck.ck-balloon-panel[class*=arrow_s]:before{border-left-width:var(--ck-balloon-arrow-half-width);border-bottom-width:0;border-right-width:var(--ck-balloon-arrow-half-width);border-top-width:var(--ck-balloon-arrow-height)}.ck.ck-balloon-panel[class*=arrow_s]:before{border-top-color:var(--ck-color-panel-border)}.ck.ck-balloon-panel[class*=arrow_s]:after,.ck.ck-balloon-panel[class*=arrow_s]:before{border-left-color:transparent;border-bottom-color:transparent;border-right-color:transparent}.ck.ck-balloon-panel[class*=arrow_s]:after{border-top-color:var(--ck-color-panel-background);margin-bottom:var(--ck-balloon-arrow-offset)}.ck.ck-balloon-panel.ck-balloon-panel_arrow_n:after,.ck.ck-balloon-panel.ck-balloon-panel_arrow_n:before{left:50%;margin-left:calc(-1*var(--ck-balloon-arrow-half-width));top:calc(-1*var(--ck-balloon-arrow-height))}.ck.ck-balloon-panel.ck-balloon-panel_arrow_nw:after,.ck.ck-balloon-panel.ck-balloon-panel_arrow_nw:before{left:calc(2*var(--ck-balloon-arrow-half-width));top:calc(-1*var(--ck-balloon-arrow-height))}.ck.ck-balloon-panel.ck-balloon-panel_arrow_ne:after,.ck.ck-balloon-panel.ck-balloon-panel_arrow_ne:before{right:calc(2*var(--ck-balloon-arrow-half-width));top:calc(-1*var(--ck-balloon-arrow-height))}.ck.ck-balloon-panel.ck-balloon-panel_arrow_s:after,.ck.ck-balloon-panel.ck-balloon-panel_arrow_s:before{left:50%;margin-left:calc(-1*var(--ck-balloon-arrow-half-width));bottom:calc(-1*var(--ck-balloon-arrow-height))}.ck.ck-balloon-panel.ck-balloon-panel_arrow_sw:after,.ck.ck-balloon-panel.ck-balloon-panel_arrow_sw:before{left:calc(2*var(--ck-balloon-arrow-half-width));bottom:calc(-1*var(--ck-balloon-arrow-height))}.ck.ck-balloon-panel.ck-balloon-panel_arrow_se:after,.ck.ck-balloon-panel.ck-balloon-panel_arrow_se:before{right:calc(2*var(--ck-balloon-arrow-half-width));bottom:calc(-1*var(--ck-balloon-arrow-height))}.ck.ck-balloon-panel.ck-balloon-panel_arrow_sme:after,.ck.ck-balloon-panel.ck-balloon-panel_arrow_sme:before{right:25%;margin-right:calc(2*var(--ck-balloon-arrow-half-width));bottom:calc(-1*var(--ck-balloon-arrow-height))}.ck.ck-balloon-panel.ck-balloon-panel_arrow_smw:after,.ck.ck-balloon-panel.ck-balloon-panel_arrow_smw:before{left:25%;margin-left:calc(2*var(--ck-balloon-arrow-half-width));bottom:calc(-1*var(--ck-balloon-arrow-height))}.ck.ck-balloon-panel.ck-balloon-panel_arrow_nme:after,.ck.ck-balloon-panel.ck-balloon-panel_arrow_nme:before{right:25%;margin-right:calc(2*var(--ck-balloon-arrow-half-width));top:calc(-1*var(--ck-balloon-arrow-height))}.ck.ck-balloon-panel.ck-balloon-panel_arrow_nmw:after,.ck.ck-balloon-panel.ck-balloon-panel_arrow_nmw:before{left:25%;margin-left:calc(2*var(--ck-balloon-arrow-half-width));top:calc(-1*var(--ck-balloon-arrow-height))}'},function(S,V,E){var O=E(1),b=E(50);"string"==typeof(b=b.__esModule?b.default:b)&&(b=[[S.i,b,""]]),O(b,{injectType:"singletonStyleTag",attributes:{"data-cke":!0},insert:"head",singleton:!0}),S.exports=b.locals||{}},function(S,V){S.exports=".ck .ck-link_selected{background:var(--ck-color-link-selected-background)}.ck .ck-fake-link-selection{background:var(--ck-color-link-fake-selection)}.ck .ck-fake-link-selection_collapsed{height:100%;border-right:1px solid var(--ck-color-base-text);margin-right:-1px;outline:1px solid hsla(0,0%,100%,.5)}"},function(S,V,E){var O=E(1),b=E(52);"string"==typeof(b=b.__esModule?b.default:b)&&(b=[[S.i,b,""]]),O(b,{injectType:"singletonStyleTag",attributes:{"data-cke":!0},insert:"head",singleton:!0}),S.exports=b.locals||{}},function(S,V){S.exports='.ck .ck-widget .ck-widget__type-around__button{display:block;position:absolute;overflow:hidden;z-index:var(--ck-z-default)}.ck .ck-widget .ck-widget__type-around__button svg{position:absolute;top:50%;left:50%;z-index:calc(var(--ck-z-default) + 2)}.ck .ck-widget .ck-widget__type-around__button.ck-widget__type-around__button_before{top:calc(-0.5*var(--ck-widget-outline-thickness));left:min(10%,30px);transform:translateY(-50%)}.ck .ck-widget .ck-widget__type-around__button.ck-widget__type-around__button_after{bottom:calc(-0.5*var(--ck-widget-outline-thickness));right:min(10%,30px);transform:translateY(50%)}.ck .ck-widget.ck-widget_selected>.ck-widget__type-around>.ck-widget__type-around__button:after,.ck .ck-widget>.ck-widget__type-around>.ck-widget__type-around__button:hover:after{content:"";display:block;position:absolute;top:1px;left:1px;z-index:calc(var(--ck-z-default) + 1)}.ck .ck-widget>.ck-widget__type-around>.ck-widget__type-around__fake-caret{display:none;position:absolute;left:0;right:0}.ck .ck-widget:hover>.ck-widget__type-around>.ck-widget__type-around__fake-caret{left:calc(-1*var(--ck-widget-outline-thickness));right:calc(-1*var(--ck-widget-outline-thickness))}.ck .ck-widget.ck-widget_type-around_show-fake-caret_before>.ck-widget__type-around>.ck-widget__type-around__fake-caret{top:calc(-1*var(--ck-widget-outline-thickness) - 1px);display:block}.ck .ck-widget.ck-widget_type-around_show-fake-caret_after>.ck-widget__type-around>.ck-widget__type-around__fake-caret{bottom:calc(-1*var(--ck-widget-outline-thickness) - 1px);display:block}.ck.ck-editor__editable.ck-read-only .ck-widget__type-around,.ck.ck-editor__editable.ck-restricted-editing_mode_restricted .ck-widget__type-around,.ck.ck-editor__editable.ck-widget__type-around_disabled .ck-widget__type-around{display:none}:root{--ck-widget-type-around-button-size:20px;--ck-color-widget-type-around-button-active:var(--ck-color-focus-border);--ck-color-widget-type-around-button-hover:var(--ck-color-widget-hover-border);--ck-color-widget-type-around-button-blurred-editable:var(--ck-color-widget-blurred-border);--ck-color-widget-type-around-button-radar-start-alpha:0;--ck-color-widget-type-around-button-radar-end-alpha:.3;--ck-color-widget-type-around-button-icon:var(--ck-color-base-background)}.ck .ck-widget .ck-widget__type-around__button{width:var(--ck-widget-type-around-button-size);height:var(--ck-widget-type-around-button-size);background:var(--ck-color-widget-type-around-button);border-radius:100px;transition:opacity var(--ck-widget-handler-animation-duration) var(--ck-widget-handler-animation-curve),background var(--ck-widget-handler-animation-duration) var(--ck-widget-handler-animation-curve);opacity:0;pointer-events:none}.ck .ck-widget .ck-widget__type-around__button svg{width:10px;height:8px;transform:translate(-50%,-50%);transition:transform .5s ease;margin-top:1px}.ck .ck-widget .ck-widget__type-around__button svg *{stroke-dasharray:10;stroke-dashoffset:0;fill:none;stroke:var(--ck-color-widget-type-around-button-icon);stroke-width:1.5px;stroke-linecap:round;stroke-linejoin:round}.ck .ck-widget .ck-widget__type-around__button svg line{stroke-dasharray:7}.ck .ck-widget .ck-widget__type-around__button:hover{animation:ck-widget-type-around-button-sonar 1s ease infinite}.ck .ck-widget .ck-widget__type-around__button:hover svg polyline{animation:ck-widget-type-around-arrow-dash 2s linear}.ck .ck-widget .ck-widget__type-around__button:hover svg line{animation:ck-widget-type-around-arrow-tip-dash 2s linear}.ck .ck-widget.ck-widget_selected>.ck-widget__type-around>.ck-widget__type-around__button,.ck .ck-widget:hover>.ck-widget__type-around>.ck-widget__type-around__button{opacity:1;pointer-events:auto}.ck .ck-widget:not(.ck-widget_selected)>.ck-widget__type-around>.ck-widget__type-around__button{background:var(--ck-color-widget-type-around-button-hover)}.ck .ck-widget.ck-widget_selected>.ck-widget__type-around>.ck-widget__type-around__button,.ck .ck-widget>.ck-widget__type-around>.ck-widget__type-around__button:hover{background:var(--ck-color-widget-type-around-button-active)}.ck .ck-widget.ck-widget_selected>.ck-widget__type-around>.ck-widget__type-around__button:after,.ck .ck-widget>.ck-widget__type-around>.ck-widget__type-around__button:hover:after{width:calc(var(--ck-widget-type-around-button-size) - 2px);height:calc(var(--ck-widget-type-around-button-size) - 2px);border-radius:100px;background:linear-gradient(135deg,hsla(0,0%,100%,0),hsla(0,0%,100%,.3))}.ck .ck-widget.ck-widget_with-selection-handle>.ck-widget__type-around>.ck-widget__type-around__button_before{margin-left:20px}.ck .ck-widget .ck-widget__type-around__fake-caret{pointer-events:none;height:1px;animation:ck-widget-type-around-fake-caret-pulse 1s linear infinite normal forwards;outline:1px solid hsla(0,0%,100%,.5);background:var(--ck-color-base-text)}.ck .ck-widget.ck-widget_selected.ck-widget_type-around_show-fake-caret_after,.ck .ck-widget.ck-widget_selected.ck-widget_type-around_show-fake-caret_before{outline-color:transparent}.ck .ck-widget.ck-widget_type-around_show-fake-caret_after.ck-widget_selected:hover,.ck .ck-widget.ck-widget_type-around_show-fake-caret_before.ck-widget_selected:hover{outline-color:var(--ck-color-widget-hover-border)}.ck .ck-widget.ck-widget_type-around_show-fake-caret_after>.ck-widget__type-around>.ck-widget__type-around__button,.ck .ck-widget.ck-widget_type-around_show-fake-caret_before>.ck-widget__type-around>.ck-widget__type-around__button{opacity:0;pointer-events:none}.ck .ck-widget.ck-widget_type-around_show-fake-caret_after.ck-widget_with-selection-handle.ck-widget_selected:hover>.ck-widget__selection-handle,.ck .ck-widget.ck-widget_type-around_show-fake-caret_after.ck-widget_with-selection-handle.ck-widget_selected>.ck-widget__selection-handle,.ck .ck-widget.ck-widget_type-around_show-fake-caret_before.ck-widget_with-selection-handle.ck-widget_selected:hover>.ck-widget__selection-handle,.ck .ck-widget.ck-widget_type-around_show-fake-caret_before.ck-widget_with-selection-handle.ck-widget_selected>.ck-widget__selection-handle{opacity:0}.ck .ck-widget.ck-widget_type-around_show-fake-caret_after.ck-widget_selected.ck-widget_with-resizer>.ck-widget__resizer,.ck .ck-widget.ck-widget_type-around_show-fake-caret_before.ck-widget_selected.ck-widget_with-resizer>.ck-widget__resizer{opacity:0}.ck-editor__nested-editable.ck-editor__editable_selected .ck-widget.ck-widget_selected>.ck-widget__type-around>.ck-widget__type-around__button,.ck-editor__nested-editable.ck-editor__editable_selected .ck-widget:hover>.ck-widget__type-around>.ck-widget__type-around__button{opacity:0;pointer-events:none}.ck-editor__editable.ck-blurred .ck-widget.ck-widget_selected>.ck-widget__type-around>.ck-widget__type-around__button:not(:hover){background:var(--ck-color-widget-type-around-button-blurred-editable)}.ck-editor__editable.ck-blurred .ck-widget.ck-widget_selected>.ck-widget__type-around>.ck-widget__type-around__button:not(:hover) svg *{stroke:#999}@keyframes ck-widget-type-around-arrow-dash{0%{stroke-dashoffset:10}20%,to{stroke-dashoffset:0}}@keyframes ck-widget-type-around-arrow-tip-dash{0%,20%{stroke-dashoffset:7}40%,to{stroke-dashoffset:0}}@keyframes ck-widget-type-around-button-sonar{0%{box-shadow:0 0 0 0 hsla(var(--ck-color-focus-border-coordinates),var(--ck-color-widget-type-around-button-radar-start-alpha))}50%{box-shadow:0 0 0 5px hsla(var(--ck-color-focus-border-coordinates),var(--ck-color-widget-type-around-button-radar-end-alpha))}to{box-shadow:0 0 0 5px hsla(var(--ck-color-focus-border-coordinates),var(--ck-color-widget-type-around-button-radar-start-alpha))}}@keyframes ck-widget-type-around-fake-caret-pulse{0%{opacity:1}49%{opacity:1}50%{opacity:0}99%{opacity:0}to{opacity:1}}'},function(S,V,E){var O=E(1),b=E(54);"string"==typeof(b=b.__esModule?b.default:b)&&(b=[[S.i,b,""]]),O(b,{injectType:"singletonStyleTag",attributes:{"data-cke":!0},insert:"head",singleton:!0}),S.exports=b.locals||{}},function(S,V){S.exports=":root{--ck-color-resizer:var(--ck-color-focus-border);--ck-resizer-size:10px;--ck-resizer-border-width:1px;--ck-resizer-border-radius:2px;--ck-resizer-offset:calc(var(--ck-resizer-size)/-2 - 2px);--ck-resizer-tooltip-offset:10px;--ck-color-resizer-tooltip-background:#262626;--ck-color-resizer-tooltip-text:#f2f2f2}.ck .ck-widget,.ck .ck-widget.ck-widget_with-selection-handle{position:relative}.ck .ck-widget.ck-widget_with-selection-handle .ck-widget__selection-handle{position:absolute}.ck .ck-widget.ck-widget_with-selection-handle .ck-widget__selection-handle .ck-icon{display:block}.ck .ck-widget.ck-widget_with-selection-handle.ck-widget_selected .ck-widget__selection-handle,.ck .ck-widget.ck-widget_with-selection-handle:hover .ck-widget__selection-handle{visibility:visible}.ck .ck-size-view{background:var(--ck-color-resizer-tooltip-background);color:var(--ck-color-resizer-tooltip-text);border:1px solid var(--ck-color-resizer-tooltip-text);border-radius:var(--ck-resizer-border-radius);font-size:var(--ck-font-size-tiny);display:block;padding:var(--ck-spacing-small)}.ck .ck-size-view.ck-orientation-bottom-left,.ck .ck-size-view.ck-orientation-bottom-right,.ck .ck-size-view.ck-orientation-top-left,.ck .ck-size-view.ck-orientation-top-right{position:absolute}.ck .ck-size-view.ck-orientation-top-left{top:var(--ck-resizer-tooltip-offset);left:var(--ck-resizer-tooltip-offset)}.ck .ck-size-view.ck-orientation-top-right{top:var(--ck-resizer-tooltip-offset);right:var(--ck-resizer-tooltip-offset)}.ck .ck-size-view.ck-orientation-bottom-right{bottom:var(--ck-resizer-tooltip-offset);right:var(--ck-resizer-tooltip-offset)}.ck .ck-size-view.ck-orientation-bottom-left{bottom:var(--ck-resizer-tooltip-offset);left:var(--ck-resizer-tooltip-offset)}:root{--ck-widget-outline-thickness:3px;--ck-widget-handler-icon-size:16px;--ck-widget-handler-animation-duration:200ms;--ck-widget-handler-animation-curve:ease;--ck-color-widget-blurred-border:#dedede;--ck-color-widget-hover-border:#ffc83d;--ck-color-widget-editable-focus-background:var(--ck-color-base-background);--ck-color-widget-drag-handler-icon-color:var(--ck-color-base-background)}.ck .ck-widget{outline-width:var(--ck-widget-outline-thickness);outline-style:solid;outline-color:transparent;transition:outline-color var(--ck-widget-handler-animation-duration) var(--ck-widget-handler-animation-curve)}.ck .ck-widget.ck-widget_selected,.ck .ck-widget.ck-widget_selected:hover{outline:var(--ck-widget-outline-thickness) solid var(--ck-color-focus-border)}.ck .ck-widget:hover{outline-color:var(--ck-color-widget-hover-border)}.ck .ck-editor__nested-editable{border:1px solid transparent}.ck .ck-editor__nested-editable.ck-editor__nested-editable_focused,.ck .ck-editor__nested-editable:focus{outline:none;border:var(--ck-focus-ring);box-shadow:var(--ck-inner-shadow),0 0;background-color:var(--ck-color-widget-editable-focus-background)}.ck .ck-widget.ck-widget_with-selection-handle .ck-widget__selection-handle{padding:4px;box-sizing:border-box;background-color:transparent;opacity:0;transition:background-color var(--ck-widget-handler-animation-duration) var(--ck-widget-handler-animation-curve),visibility var(--ck-widget-handler-animation-duration) var(--ck-widget-handler-animation-curve),opacity var(--ck-widget-handler-animation-duration) var(--ck-widget-handler-animation-curve);border-radius:var(--ck-border-radius) var(--ck-border-radius) 0 0;transform:translateY(-100%);left:calc(0px - var(--ck-widget-outline-thickness))}.ck .ck-widget.ck-widget_with-selection-handle .ck-widget__selection-handle .ck-icon{width:var(--ck-widget-handler-icon-size);height:var(--ck-widget-handler-icon-size);color:var(--ck-color-widget-drag-handler-icon-color)}.ck .ck-widget.ck-widget_with-selection-handle .ck-widget__selection-handle .ck-icon .ck-icon__selected-indicator{opacity:0;transition:opacity .3s var(--ck-widget-handler-animation-curve)}.ck .ck-widget.ck-widget_with-selection-handle .ck-widget__selection-handle:hover .ck-icon .ck-icon__selected-indicator{opacity:1}.ck .ck-widget.ck-widget_with-selection-handle:hover .ck-widget__selection-handle{opacity:1;background-color:var(--ck-color-widget-hover-border)}.ck .ck-widget.ck-widget_with-selection-handle.ck-widget_selected .ck-widget__selection-handle,.ck .ck-widget.ck-widget_with-selection-handle.ck-widget_selected:hover .ck-widget__selection-handle{opacity:1;background-color:var(--ck-color-focus-border)}.ck .ck-widget.ck-widget_with-selection-handle.ck-widget_selected .ck-widget__selection-handle .ck-icon .ck-icon__selected-indicator,.ck .ck-widget.ck-widget_with-selection-handle.ck-widget_selected:hover .ck-widget__selection-handle .ck-icon .ck-icon__selected-indicator{opacity:1}.ck[dir=rtl] .ck-widget.ck-widget_with-selection-handle .ck-widget__selection-handle{left:auto;right:calc(0px - var(--ck-widget-outline-thickness))}.ck.ck-editor__editable.ck-read-only .ck-widget{transition:none}.ck.ck-editor__editable.ck-read-only .ck-widget:not(.ck-widget_selected){--ck-widget-outline-thickness:0px}.ck.ck-editor__editable.ck-read-only .ck-widget.ck-widget_with-selection-handle .ck-widget__selection-handle,.ck.ck-editor__editable.ck-read-only .ck-widget.ck-widget_with-selection-handle .ck-widget__selection-handle:hover{background:var(--ck-color-widget-blurred-border)}.ck.ck-editor__editable.ck-blurred .ck-widget.ck-widget_selected,.ck.ck-editor__editable.ck-blurred .ck-widget.ck-widget_selected:hover{outline-color:var(--ck-color-widget-blurred-border)}.ck.ck-editor__editable.ck-blurred .ck-widget.ck-widget_selected.ck-widget_with-selection-handle .ck-widget__selection-handle,.ck.ck-editor__editable.ck-blurred .ck-widget.ck-widget_selected.ck-widget_with-selection-handle .ck-widget__selection-handle:hover,.ck.ck-editor__editable.ck-blurred .ck-widget.ck-widget_selected:hover.ck-widget_with-selection-handle .ck-widget__selection-handle,.ck.ck-editor__editable.ck-blurred .ck-widget.ck-widget_selected:hover.ck-widget_with-selection-handle .ck-widget__selection-handle:hover{background:var(--ck-color-widget-blurred-border)}.ck.ck-editor__editable>.ck-widget.ck-widget_with-selection-handle:first-child,.ck.ck-editor__editable blockquote>.ck-widget.ck-widget_with-selection-handle:first-child{margin-top:calc(1em + var(--ck-widget-handler-icon-size))}"},function(S,V,E){var O=E(1),b=E(56);"string"==typeof(b=b.__esModule?b.default:b)&&(b=[[S.i,b,""]]),O(b,{injectType:"singletonStyleTag",attributes:{"data-cke":!0},insert:"head",singleton:!0}),S.exports=b.locals||{}},function(S,V){S.exports=".ck.ck-labeled-field-view .ck-labeled-field-view__status{font-size:var(--ck-font-size-small);margin-top:var(--ck-spacing-small);white-space:normal}.ck.ck-labeled-field-view .ck-labeled-field-view__status_error{color:var(--ck-color-base-error)}.ck.ck-labeled-field-view>.ck.ck-label{width:100%;text-overflow:ellipsis;overflow:hidden}"},function(S,V,E){var O=E(1),b=E(58);"string"==typeof(b=b.__esModule?b.default:b)&&(b=[[S.i,b,""]]),O(b,{injectType:"singletonStyleTag",attributes:{"data-cke":!0},insert:"head",singleton:!0}),S.exports=b.locals||{}},function(S,V){S.exports=":root{--ck-input-text-width:18em}.ck.ck-input-text{border-radius:0}.ck-rounded-corners .ck.ck-input-text,.ck.ck-input-text.ck-rounded-corners{border-radius:var(--ck-border-radius)}.ck.ck-input-text{box-shadow:var(--ck-inner-shadow),0 0;background:var(--ck-color-input-background);border:1px solid var(--ck-color-input-border);padding:var(--ck-spacing-extra-tiny) var(--ck-spacing-medium);min-width:var(--ck-input-text-width);min-height:var(--ck-ui-component-min-height);transition:box-shadow .2s ease-in-out,border .2s ease-in-out}.ck.ck-input-text:focus{outline:none;border:var(--ck-focus-ring);box-shadow:var(--ck-focus-outer-shadow),var(--ck-inner-shadow)}.ck.ck-input-text[readonly]{border:1px solid var(--ck-color-input-disabled-border);background:var(--ck-color-input-disabled-background);color:var(--ck-color-input-disabled-text)}.ck.ck-input-text[readonly]:focus{box-shadow:var(--ck-focus-disabled-outer-shadow),var(--ck-inner-shadow)}.ck.ck-input-text.ck-error{border-color:var(--ck-color-input-error-border);animation:ck-text-input-shake .3s ease both}.ck.ck-input-text.ck-error:focus{box-shadow:var(--ck-focus-error-outer-shadow),var(--ck-inner-shadow)}@keyframes ck-text-input-shake{20%{transform:translateX(-2px)}40%{transform:translateX(2px)}60%{transform:translateX(-1px)}80%{transform:translateX(1px)}}"},function(S,V,E){var O=E(1),b=E(60);"string"==typeof(b=b.__esModule?b.default:b)&&(b=[[S.i,b,""]]),O(b,{injectType:"singletonStyleTag",attributes:{"data-cke":!0},insert:"head",singleton:!0}),S.exports=b.locals||{}},function(S,V){S.exports=".ck.ck-text-alternative-form{display:flex;flex-direction:row;flex-wrap:nowrap}.ck.ck-text-alternative-form .ck-labeled-field-view{display:inline-block}.ck.ck-text-alternative-form .ck-label{display:none}@media screen and (max-width:600px){.ck.ck-text-alternative-form{flex-wrap:wrap}.ck.ck-text-alternative-form .ck-labeled-field-view{flex-basis:100%}.ck.ck-text-alternative-form .ck-button{flex-basis:50%}}.ck.ck-text-alternative-form{padding:var(--ck-spacing-standard)}.ck.ck-text-alternative-form:focus{outline:none}[dir=ltr] .ck.ck-text-alternative-form>:not(:first-child),[dir=rtl] .ck.ck-text-alternative-form>:not(:last-child){margin-left:var(--ck-spacing-standard)}@media screen and (max-width:600px){.ck.ck-text-alternative-form{padding:0;width:calc(0.8*var(--ck-input-text-width))}.ck.ck-text-alternative-form .ck-labeled-field-view{margin:var(--ck-spacing-standard) var(--ck-spacing-standard) 0}.ck.ck-text-alternative-form .ck-labeled-field-view .ck-input-text{min-width:0;width:100%}.ck.ck-text-alternative-form .ck-button{padding:var(--ck-spacing-standard);margin-top:var(--ck-spacing-standard);border-radius:0;border:0;border-top:1px solid var(--ck-color-base-border)}[dir=ltr] .ck.ck-text-alternative-form .ck-button{margin-left:0}[dir=ltr] .ck.ck-text-alternative-form .ck-button:first-of-type{border-right:1px solid var(--ck-color-base-border)}[dir=rtl] .ck.ck-text-alternative-form .ck-button{margin-left:0}[dir=rtl] .ck.ck-text-alternative-form .ck-button:last-of-type{border-right:1px solid var(--ck-color-base-border)}}"},function(S,V,E){var O=E(1),b=E(62);"string"==typeof(b=b.__esModule?b.default:b)&&(b=[[S.i,b,""]]),O(b,{injectType:"singletonStyleTag",attributes:{"data-cke":!0},insert:"head",singleton:!0}),S.exports=b.locals||{}},function(S,V){S.exports=".ck .ck-balloon-rotator__navigation{display:flex;align-items:center;justify-content:center}.ck .ck-balloon-rotator__content .ck-toolbar{justify-content:center}.ck .ck-balloon-rotator__navigation{background:var(--ck-color-toolbar-background);border-bottom:1px solid var(--ck-color-toolbar-border);padding:0 var(--ck-spacing-small)}.ck .ck-balloon-rotator__navigation>*{margin-right:var(--ck-spacing-small);margin-top:var(--ck-spacing-small);margin-bottom:var(--ck-spacing-small)}.ck .ck-balloon-rotator__navigation .ck-balloon-rotator__counter{margin-right:var(--ck-spacing-standard);margin-left:var(--ck-spacing-small)}.ck .ck-balloon-rotator__content .ck.ck-annotation-wrapper{box-shadow:none}"},function(S,V,E){var O=E(1),b=E(64);"string"==typeof(b=b.__esModule?b.default:b)&&(b=[[S.i,b,""]]),O(b,{injectType:"singletonStyleTag",attributes:{"data-cke":!0},insert:"head",singleton:!0}),S.exports=b.locals||{}},function(S,V){S.exports=".ck .ck-fake-panel{position:absolute;z-index:calc(var(--ck-z-modal) - 1)}.ck .ck-fake-panel div{position:absolute}.ck .ck-fake-panel div:first-child{z-index:2}.ck .ck-fake-panel div:nth-child(2){z-index:1}:root{--ck-balloon-fake-panel-offset-horizontal:6px;--ck-balloon-fake-panel-offset-vertical:6px}.ck .ck-fake-panel div{box-shadow:var(--ck-drop-shadow),0 0;min-height:15px;background:var(--ck-color-panel-background);border:1px solid var(--ck-color-panel-border);border-radius:var(--ck-border-radius);width:100%;height:100%}.ck .ck-fake-panel div:first-child{margin-left:var(--ck-balloon-fake-panel-offset-horizontal);margin-top:var(--ck-balloon-fake-panel-offset-vertical)}.ck .ck-fake-panel div:nth-child(2){margin-left:calc(var(--ck-balloon-fake-panel-offset-horizontal)*2);margin-top:calc(var(--ck-balloon-fake-panel-offset-vertical)*2)}.ck .ck-fake-panel div:nth-child(3){margin-left:calc(var(--ck-balloon-fake-panel-offset-horizontal)*3);margin-top:calc(var(--ck-balloon-fake-panel-offset-vertical)*3)}.ck .ck-balloon-panel_arrow_s+.ck-fake-panel,.ck .ck-balloon-panel_arrow_se+.ck-fake-panel,.ck .ck-balloon-panel_arrow_sw+.ck-fake-panel{--ck-balloon-fake-panel-offset-vertical:-6px}"},function(S,V,E){var O=E(1),b=E(66);"string"==typeof(b=b.__esModule?b.default:b)&&(b=[[S.i,b,""]]),O(b,{injectType:"singletonStyleTag",attributes:{"data-cke":!0},insert:"head",singleton:!0}),S.exports=b.locals||{}},function(S,V){S.exports=".ck-content .image{display:table;clear:both;text-align:center;margin:1em auto}.ck-content .image img{display:block;margin:0 auto;max-width:100%;min-width:50px}"},function(S,V,E){var O=E(1),b=E(68);"string"==typeof(b=b.__esModule?b.default:b)&&(b=[[S.i,b,""]]),O(b,{injectType:"singletonStyleTag",attributes:{"data-cke":!0},insert:"head",singleton:!0}),S.exports=b.locals||{}},function(S,V){S.exports=".ck.ck-splitbutton{font-size:inherit}.ck.ck-splitbutton .ck-splitbutton__action:focus{z-index:calc(var(--ck-z-default) + 1)}.ck.ck-splitbutton.ck-splitbutton_open>.ck-button .ck-tooltip{display:none}:root{--ck-color-split-button-hover-background:#ebebeb;--ck-color-split-button-hover-border:#b3b3b3}[dir=ltr] .ck.ck-splitbutton>.ck-splitbutton__action{border-top-right-radius:unset;border-bottom-right-radius:unset}[dir=rtl] .ck.ck-splitbutton>.ck-splitbutton__action{border-top-left-radius:unset;border-bottom-left-radius:unset}.ck.ck-splitbutton>.ck-splitbutton__arrow{min-width:unset}[dir=ltr] .ck.ck-splitbutton>.ck-splitbutton__arrow{border-radius:0}.ck-rounded-corners [dir=ltr] .ck.ck-splitbutton>.ck-splitbutton__arrow,[dir=ltr] .ck.ck-splitbutton>.ck-splitbutton__arrow.ck-rounded-corners{border-radius:var(--ck-border-radius);border-top-left-radius:unset;border-bottom-left-radius:unset}[dir=rtl] .ck.ck-splitbutton>.ck-splitbutton__arrow{border-top-right-radius:unset;border-bottom-right-radius:unset}.ck.ck-splitbutton>.ck-splitbutton__arrow svg{width:var(--ck-dropdown-arrow-size)}.ck.ck-splitbutton.ck-splitbutton_open>.ck-button:not(.ck-on):not(.ck-disabled):not(:hover),.ck.ck-splitbutton:hover>.ck-button:not(.ck-on):not(.ck-disabled):not(:hover){background:var(--ck-color-split-button-hover-background)}[dir=ltr] .ck.ck-splitbutton.ck-splitbutton_open>.ck-splitbutton__arrow:not(.ck-disabled),[dir=ltr] .ck.ck-splitbutton:hover>.ck-splitbutton__arrow:not(.ck-disabled){border-left-color:var(--ck-color-split-button-hover-border)}[dir=rtl] .ck.ck-splitbutton.ck-splitbutton_open>.ck-splitbutton__arrow:not(.ck-disabled),[dir=rtl] .ck.ck-splitbutton:hover>.ck-splitbutton__arrow:not(.ck-disabled){border-right-color:var(--ck-color-split-button-hover-border)}.ck.ck-splitbutton.ck-splitbutton_open{border-radius:0}.ck-rounded-corners .ck.ck-splitbutton.ck-splitbutton_open,.ck.ck-splitbutton.ck-splitbutton_open.ck-rounded-corners{border-radius:var(--ck-border-radius)}.ck-rounded-corners .ck.ck-splitbutton.ck-splitbutton_open>.ck-splitbutton__action,.ck.ck-splitbutton.ck-splitbutton_open.ck-rounded-corners>.ck-splitbutton__action{border-bottom-left-radius:0}.ck-rounded-corners .ck.ck-splitbutton.ck-splitbutton_open>.ck-splitbutton__arrow,.ck.ck-splitbutton.ck-splitbutton_open.ck-rounded-corners>.ck-splitbutton__arrow{border-bottom-right-radius:0}"},function(S,V,E){var O=E(1),b=E(70);"string"==typeof(b=b.__esModule?b.default:b)&&(b=[[S.i,b,""]]),O(b,{injectType:"singletonStyleTag",attributes:{"data-cke":!0},insert:"head",singleton:!0}),S.exports=b.locals||{}},function(S,V){S.exports=".ck.ck-form__row{display:flex;flex-direction:row;flex-wrap:nowrap;justify-content:space-between}.ck.ck-form__row>:not(.ck-label){flex-grow:1}.ck.ck-form__row.ck-image-upload-form__action-row{margin-top:var(--ck-spacing-standard)}.ck.ck-form__row.ck-image-upload-form__action-row .ck-button-cancel,.ck.ck-form__row.ck-image-upload-form__action-row .ck-button-save{justify-content:center}.ck.ck-form__row.ck-image-upload-form__action-row .ck-button .ck-button__label{color:var(--ck-color-text)}"},function(S,V,E){var O=E(1),b=E(72);"string"==typeof(b=b.__esModule?b.default:b)&&(b=[[S.i,b,""]]),O(b,{injectType:"singletonStyleTag",attributes:{"data-cke":!0},insert:"head",singleton:!0}),S.exports=b.locals||{}},function(S,V){S.exports=".ck.ck-image-upload__panel{padding:var(--ck-spacing-standard)}.ck.ck-image-upload__ck-finder-button{display:block;width:100%;margin:var(--ck-spacing-standard) auto;border:1px solid #ccc;border-radius:var(--ck-border-radius)}"},function(S,V,E){var O=E(1),b=E(74);"string"==typeof(b=b.__esModule?b.default:b)&&(b=[[S.i,b,""]]),O(b,{injectType:"singletonStyleTag",attributes:{"data-cke":!0},insert:"head",singleton:!0}),S.exports=b.locals||{}},function(S,V){S.exports=".ck.ck-editor__editable .image{position:relative}.ck.ck-editor__editable .image .ck-progress-bar{position:absolute;top:0;left:0}.ck.ck-editor__editable .image.ck-appear{animation:fadeIn .7s}.ck.ck-editor__editable .image .ck-progress-bar{height:2px;width:0;background:var(--ck-color-upload-bar-background);transition:width .1s}@keyframes fadeIn{0%{opacity:0}to{opacity:1}}"},function(S,V,E){var O=E(1),b=E(76);"string"==typeof(b=b.__esModule?b.default:b)&&(b=[[S.i,b,""]]),O(b,{injectType:"singletonStyleTag",attributes:{"data-cke":!0},insert:"head",singleton:!0}),S.exports=b.locals||{}},function(S,V){S.exports='.ck-image-upload-complete-icon{display:block;position:absolute;top:10px;right:10px;border-radius:50%}.ck-image-upload-complete-icon:after{content:"";position:absolute}:root{--ck-color-image-upload-icon:#fff;--ck-color-image-upload-icon-background:#008a00;--ck-image-upload-icon-size:20px;--ck-image-upload-icon-width:2px}.ck-image-upload-complete-icon{width:var(--ck-image-upload-icon-size);height:var(--ck-image-upload-icon-size);opacity:0;background:var(--ck-color-image-upload-icon-background);animation-name:ck-upload-complete-icon-show,ck-upload-complete-icon-hide;animation-fill-mode:forwards,forwards;animation-duration:.5s,.5s;font-size:var(--ck-image-upload-icon-size);animation-delay:0ms,3s}.ck-image-upload-complete-icon:after{left:25%;top:50%;opacity:0;height:0;width:0;transform:scaleX(-1) rotate(135deg);transform-origin:left top;border-top:var(--ck-image-upload-icon-width) solid var(--ck-color-image-upload-icon);border-right:var(--ck-image-upload-icon-width) solid var(--ck-color-image-upload-icon);animation-name:ck-upload-complete-icon-check;animation-duration:.5s;animation-delay:.5s;animation-fill-mode:forwards;box-sizing:border-box}@keyframes ck-upload-complete-icon-show{0%{opacity:0}to{opacity:1}}@keyframes ck-upload-complete-icon-hide{0%{opacity:1}to{opacity:0}}@keyframes ck-upload-complete-icon-check{0%{opacity:1;width:0;height:0}33%{width:.3em;height:0}to{opacity:1;width:.3em;height:.45em}}'},function(S,V,E){var O=E(1),b=E(78);"string"==typeof(b=b.__esModule?b.default:b)&&(b=[[S.i,b,""]]),O(b,{injectType:"singletonStyleTag",attributes:{"data-cke":!0},insert:"head",singleton:!0}),S.exports=b.locals||{}},function(S,V){S.exports='.ck .ck-upload-placeholder-loader{position:absolute;display:flex;align-items:center;justify-content:center;top:0;left:0}.ck .ck-upload-placeholder-loader:before{content:"";position:relative}:root{--ck-color-upload-placeholder-loader:#b3b3b3;--ck-upload-placeholder-loader-size:32px}.ck .ck-image-upload-placeholder{width:100%;margin:0}.ck .ck-upload-placeholder-loader{width:100%;height:100%}.ck .ck-upload-placeholder-loader:before{width:var(--ck-upload-placeholder-loader-size);height:var(--ck-upload-placeholder-loader-size);border-radius:50%;border-top:3px solid var(--ck-color-upload-placeholder-loader);border-right:2px solid transparent;animation:ck-upload-placeholder-loader 1s linear infinite}@keyframes ck-upload-placeholder-loader{to{transform:rotate(1turn)}}'},function(S,V){S.exports=".ck.ck-heading_heading1{font-size:20px}.ck.ck-heading_heading2{font-size:17px}.ck.ck-heading_heading3{font-size:14px}.ck[class*=ck-heading_heading]{font-weight:700}.ck.ck-dropdown.ck-heading-dropdown .ck-dropdown__button .ck-button__label{width:8em}.ck.ck-dropdown.ck-heading-dropdown .ck-dropdown__panel .ck-list__item{min-width:18em}"},function(S,V,E){var O=E(1),b=E(81);"string"==typeof(b=b.__esModule?b.default:b)&&(b=[[S.i,b,""]]),O(b,{injectType:"singletonStyleTag",attributes:{"data-cke":!0},insert:"head",singleton:!0}),S.exports=b.locals||{}},function(S,V){S.exports=".ck-content .image>figcaption{display:table-caption;caption-side:bottom;word-break:break-word;color:#333;background-color:#f7f7f7;padding:.6em;font-size:.75em;outline-offset:-1px}"},function(S,V,E){var O=E(1),b=E(83);"string"==typeof(b=b.__esModule?b.default:b)&&(b=[[S.i,b,""]]),O(b,{injectType:"singletonStyleTag",attributes:{"data-cke":!0},insert:"head",singleton:!0}),S.exports=b.locals||{}},function(S,V){S.exports=":root{--ck-image-style-spacing:1.5em}.ck-content .image-style-side{float:right;margin-left:var(--ck-image-style-spacing);max-width:50%}.ck-content .image-style-align-left{float:left;margin-right:var(--ck-image-style-spacing)}.ck-content .image-style-align-center{margin-left:auto;margin-right:auto}.ck-content .image-style-align-right{float:right;margin-left:var(--ck-image-style-spacing)}"},function(S,V,E){var O=E(1),b=E(85);"string"==typeof(b=b.__esModule?b.default:b)&&(b=[[S.i,b,""]]),O(b,{injectType:"singletonStyleTag",attributes:{"data-cke":!0},insert:"head",singleton:!0}),S.exports=b.locals||{}},function(S,V){S.exports=".ck.ck-link-form{display:flex}.ck.ck-link-form .ck-label{display:none}@media screen and (max-width:600px){.ck.ck-link-form{flex-wrap:wrap}.ck.ck-link-form .ck-labeled-field-view{flex-basis:100%}.ck.ck-link-form .ck-button{flex-basis:50%}}.ck.ck-link-form_layout-vertical{display:block}.ck.ck-link-form{padding:var(--ck-spacing-standard)}.ck.ck-link-form:focus{outline:none}[dir=ltr] .ck.ck-link-form>:not(:first-child),[dir=rtl] .ck.ck-link-form>:not(:last-child){margin-left:var(--ck-spacing-standard)}@media screen and (max-width:600px){.ck.ck-link-form{padding:0;width:calc(0.8*var(--ck-input-text-width))}.ck.ck-link-form .ck-labeled-field-view{margin:var(--ck-spacing-standard) var(--ck-spacing-standard) 0}.ck.ck-link-form .ck-labeled-field-view .ck-input-text{min-width:0;width:100%}.ck.ck-link-form .ck-button{padding:var(--ck-spacing-standard);margin-top:var(--ck-spacing-standard);border-radius:0;border:0;border-top:1px solid var(--ck-color-base-border)}[dir=ltr] .ck.ck-link-form .ck-button{margin-left:0}[dir=ltr] .ck.ck-link-form .ck-button:first-of-type{border-right:1px solid var(--ck-color-base-border)}[dir=rtl] .ck.ck-link-form .ck-button{margin-left:0}[dir=rtl] .ck.ck-link-form .ck-button:last-of-type{border-right:1px solid var(--ck-color-base-border)}}.ck.ck-link-form_layout-vertical{padding:0;min-width:var(--ck-input-text-width)}.ck.ck-link-form_layout-vertical .ck-labeled-field-view{margin:var(--ck-spacing-standard) var(--ck-spacing-standard) var(--ck-spacing-small)}.ck.ck-link-form_layout-vertical .ck-labeled-field-view .ck-input-text{min-width:0;width:100%}.ck.ck-link-form_layout-vertical .ck-button{padding:var(--ck-spacing-standard);margin:0;border-radius:0;border:0;border-top:1px solid var(--ck-color-base-border);width:50%}[dir=ltr] .ck.ck-link-form_layout-vertical .ck-button{margin-left:0}[dir=ltr] .ck.ck-link-form_layout-vertical .ck-button:first-of-type{border-right:1px solid var(--ck-color-base-border)}[dir=rtl] .ck.ck-link-form_layout-vertical .ck-button{margin-left:0}[dir=rtl] .ck.ck-link-form_layout-vertical .ck-button:last-of-type{border-right:1px solid var(--ck-color-base-border)}.ck.ck-link-form_layout-vertical .ck.ck-list{margin-left:0}.ck.ck-link-form_layout-vertical .ck.ck-list .ck-button.ck-switchbutton{border:0;width:100%}.ck.ck-link-form_layout-vertical .ck.ck-list .ck-button.ck-switchbutton:hover{background:none}"},function(S,V,E){var O=E(1),b=E(87);"string"==typeof(b=b.__esModule?b.default:b)&&(b=[[S.i,b,""]]),O(b,{injectType:"singletonStyleTag",attributes:{"data-cke":!0},insert:"head",singleton:!0}),S.exports=b.locals||{}},function(S,V){S.exports=".ck.ck-link-actions{display:flex;flex-direction:row;flex-wrap:nowrap}.ck.ck-link-actions .ck-link-actions__preview{display:inline-block}.ck.ck-link-actions .ck-link-actions__preview .ck-button__label{overflow:hidden}@media screen and (max-width:600px){.ck.ck-link-actions{flex-wrap:wrap}.ck.ck-link-actions .ck-link-actions__preview{flex-basis:100%}.ck.ck-link-actions .ck-button:not(.ck-link-actions__preview){flex-basis:50%}}.ck.ck-link-actions{padding:var(--ck-spacing-standard)}.ck.ck-link-actions .ck-button.ck-link-actions__preview{padding-left:0;padding-right:0}.ck.ck-link-actions .ck-button.ck-link-actions__preview .ck-button__label{padding:0 var(--ck-spacing-medium);color:var(--ck-color-link-default);text-overflow:ellipsis;cursor:pointer;max-width:var(--ck-input-text-width);min-width:3em;text-align:center}.ck.ck-link-actions .ck-button.ck-link-actions__preview .ck-button__label:hover{text-decoration:underline}.ck.ck-link-actions .ck-button.ck-link-actions__preview,.ck.ck-link-actions .ck-button.ck-link-actions__preview:active,.ck.ck-link-actions .ck-button.ck-link-actions__preview:focus,.ck.ck-link-actions .ck-button.ck-link-actions__preview:hover{background:none}.ck.ck-link-actions .ck-button.ck-link-actions__preview:active{box-shadow:none}.ck.ck-link-actions .ck-button.ck-link-actions__preview:focus .ck-button__label{text-decoration:underline}.ck.ck-link-actions:focus{outline:none}[dir=ltr] .ck.ck-link-actions .ck-button:not(:first-child),[dir=rtl] .ck.ck-link-actions .ck-button:not(:last-child){margin-left:var(--ck-spacing-standard)}@media screen and (max-width:600px){.ck.ck-link-actions{padding:0;width:calc(0.8*var(--ck-input-text-width))}.ck.ck-link-actions .ck-button.ck-link-actions__preview{margin:var(--ck-spacing-standard) var(--ck-spacing-standard) 0}.ck.ck-link-actions .ck-button.ck-link-actions__preview .ck-button__label{min-width:0;max-width:100%}.ck.ck-link-actions .ck-button:not(.ck-link-actions__preview){padding:var(--ck-spacing-standard);margin-top:var(--ck-spacing-standard);border-radius:0;border:0;border-top:1px solid var(--ck-color-base-border)}[dir=ltr] .ck.ck-link-actions .ck-button:not(.ck-link-actions__preview){margin-left:0}[dir=ltr] .ck.ck-link-actions .ck-button:not(.ck-link-actions__preview):first-of-type{border-right:1px solid var(--ck-color-base-border)}[dir=rtl] .ck.ck-link-actions .ck-button:not(.ck-link-actions__preview){margin-left:0}[dir=rtl] .ck.ck-link-actions .ck-button:not(.ck-link-actions__preview):last-of-type{border-right:1px solid var(--ck-color-base-border)}}"},function(S,V,E){var O=E(1),b=E(89);"string"==typeof(b=b.__esModule?b.default:b)&&(b=[[S.i,b,""]]),O(b,{injectType:"singletonStyleTag",attributes:{"data-cke":!0},insert:"head",singleton:!0}),S.exports=b.locals||{}},function(S,V){S.exports='.ck-media__wrapper .ck-media__placeholder{display:flex;flex-direction:column;align-items:center}.ck-media__wrapper .ck-media__placeholder .ck-media__placeholder__url .ck-tooltip{display:block}@media (hover:none){.ck-media__wrapper .ck-media__placeholder .ck-media__placeholder__url .ck-tooltip{display:none}}.ck-media__wrapper .ck-media__placeholder .ck-media__placeholder__url{max-width:100%;position:relative}.ck-media__wrapper .ck-media__placeholder .ck-media__placeholder__url:hover .ck-tooltip{visibility:visible;opacity:1}.ck-media__wrapper .ck-media__placeholder .ck-media__placeholder__url .ck-media__placeholder__url__text{overflow:hidden;display:block}.ck-media__wrapper[data-oembed-url*="facebook.com"] .ck-media__placeholder__icon *,.ck-media__wrapper[data-oembed-url*="google.com/maps"] .ck-media__placeholder__icon *,.ck-media__wrapper[data-oembed-url*="instagram.com"] .ck-media__placeholder__icon *,.ck-media__wrapper[data-oembed-url*="twitter.com"] .ck-media__placeholder__icon *{display:none}.ck-editor__editable:not(.ck-read-only) .ck-media__wrapper>:not(.ck-media__placeholder),.ck-editor__editable:not(.ck-read-only) .ck-widget:not(.ck-widget_selected) .ck-media__placeholder{pointer-events:none}:root{--ck-media-embed-placeholder-icon-size:3em;--ck-color-media-embed-placeholder-url-text:#757575;--ck-color-media-embed-placeholder-url-text-hover:var(--ck-color-base-text)}.ck-media__wrapper{margin:0 auto}.ck-media__wrapper .ck-media__placeholder{padding:calc(3*var(--ck-spacing-standard));background:var(--ck-color-base-foreground)}.ck-media__wrapper .ck-media__placeholder .ck-media__placeholder__icon{min-width:var(--ck-media-embed-placeholder-icon-size);height:var(--ck-media-embed-placeholder-icon-size);margin-bottom:var(--ck-spacing-large);background-position:50%;background-size:cover}.ck-media__wrapper .ck-media__placeholder .ck-media__placeholder__icon .ck-icon{width:100%;height:100%}.ck-media__wrapper .ck-media__placeholder .ck-media__placeholder__url__text{color:var(--ck-color-media-embed-placeholder-url-text);white-space:nowrap;text-align:center;font-style:italic;text-overflow:ellipsis}.ck-media__wrapper .ck-media__placeholder .ck-media__placeholder__url__text:hover{color:var(--ck-color-media-embed-placeholder-url-text-hover);cursor:pointer;text-decoration:underline}.ck-media__wrapper[data-oembed-url*="open.spotify.com"]{max-width:300px;max-height:380px}.ck-media__wrapper[data-oembed-url*="google.com/maps"] .ck-media__placeholder__icon{background-image:url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyNTAuMzc4IiBoZWlnaHQ9IjI1NC4xNjciIHZpZXdCb3g9IjAgMCA2Ni4yNDYgNjcuMjQ4Ij48ZyB0cmFuc2Zvcm09InRyYW5zbGF0ZSgtMTcyLjUzMSAtMjE4LjQ1NSkgc2NhbGUoLjk4MDEyKSI+PHJlY3Qgcnk9IjUuMjM4IiByeD0iNS4yMzgiIHk9IjIzMS4zOTkiIHg9IjE3Ni4wMzEiIGhlaWdodD0iNjAuMDk5IiB3aWR0aD0iNjAuMDk5IiBmaWxsPSIjMzRhNjY4IiBwYWludC1vcmRlcj0ibWFya2VycyBzdHJva2UgZmlsbCIvPjxwYXRoIGQ9Ik0yMDYuNDc3IDI2MC45bC0yOC45ODcgMjguOTg3YTUuMjE4IDUuMjE4IDAgMDAzLjc4IDEuNjFoNDkuNjIxYzEuNjk0IDAgMy4xOS0uNzk4IDQuMTQ2LTIuMDM3eiIgZmlsbD0iIzVjODhjNSIvPjxwYXRoIGQ9Ik0yMjYuNzQyIDIyMi45ODhjLTkuMjY2IDAtMTYuNzc3IDcuMTctMTYuNzc3IDE2LjAxNC4wMDcgMi43NjIuNjYzIDUuNDc0IDIuMDkzIDcuODc1LjQzLjcwMy44MyAxLjQwOCAxLjE5IDIuMTA3LjMzMy41MDIuNjUgMS4wMDUuOTUgMS41MDguMzQzLjQ3Ny42NzMuOTU3Ljk4OCAxLjQ0IDEuMzEgMS43NjkgMi41IDMuNTAyIDMuNjM3IDUuMTY4Ljc5MyAxLjI3NSAxLjY4MyAyLjY0IDIuNDY2IDMuOTkgMi4zNjMgNC4wOTQgNC4wMDcgOC4wOTIgNC42IDEzLjkxNHYuMDEyYy4xODIuNDEyLjUxNi42NjYuODc5LjY2Ny40MDMtLjAwMS43NjgtLjMxNC45My0uNzk5LjYwMy01Ljc1NiAyLjIzOC05LjcyOSA0LjU4NS0xMy43OTQuNzgyLTEuMzUgMS42NzMtMi43MTUgMi40NjUtMy45OSAxLjEzNy0xLjY2NiAyLjMyOC0zLjQgMy42MzgtNS4xNjkuMzE1LS40ODIuNjQ1LS45NjIuOTg4LTEuNDM5LjMtLjUwMy42MTctMS4wMDYuOTUtMS41MDguMzU5LS43Ljc2LTEuNDA0IDEuMTktMi4xMDcgMS40MjYtMi40MDIgMi01LjExNCAyLjAwNC03Ljg3NSAwLTguODQ0LTcuNTExLTE2LjAxNC0xNi43NzYtMTYuMDE0eiIgZmlsbD0iI2RkNGIzZSIgcGFpbnQtb3JkZXI9Im1hcmtlcnMgc3Ryb2tlIGZpbGwiLz48ZWxsaXBzZSByeT0iNS41NjQiIHJ4PSI1LjgyOCIgY3k9IjIzOS4wMDIiIGN4PSIyMjYuNzQyIiBmaWxsPSIjODAyZDI3IiBwYWludC1vcmRlcj0ibWFya2VycyBzdHJva2UgZmlsbCIvPjxwYXRoIGQ9Ik0xOTAuMzAxIDIzNy4yODNjLTQuNjcgMC04LjQ1NyAzLjg1My04LjQ1NyA4LjYwNnMzLjc4NiA4LjYwNyA4LjQ1NyA4LjYwN2MzLjA0MyAwIDQuODA2LS45NTggNi4zMzctMi41MTYgMS41My0xLjU1NyAyLjA4Ny0zLjkxMyAyLjA4Ny02LjI5IDAtLjM2Mi0uMDIzLS43MjItLjA2NC0xLjA3OWgtOC4yNTd2My4wNDNoNC44NWMtLjE5Ny43NTktLjUzMSAxLjQ1LTEuMDU4IDEuOTg2LS45NDIuOTU4LTIuMDI4IDEuNTQ4LTMuOTAxIDEuNTQ4LTIuODc2IDAtNS4yMDgtMi4zNzItNS4yMDgtNS4yOTkgMC0yLjkyNiAyLjMzMi01LjI5OSA1LjIwOC01LjI5OSAxLjM5OSAwIDIuNjE4LjQwNyAzLjU4NCAxLjI5M2wyLjM4MS0yLjM4YzAtLjAwMi0uMDAzLS4wMDQtLjAwNC0uMDA1LTEuNTg4LTEuNTI0LTMuNjItMi4yMTUtNS45NTUtMi4yMTV6bTQuNDMgNS42NmwuMDAzLjAwNnYtLjAwM3oiIGZpbGw9IiNmZmYiIHBhaW50LW9yZGVyPSJtYXJrZXJzIHN0cm9rZSBmaWxsIi8+PHBhdGggZD0iTTIxNS4xODQgMjUxLjkyOWwtNy45OCA3Ljk3OSAyOC40NzcgMjguNDc1YTUuMjMzIDUuMjMzIDAgMDAuNDQ5LTIuMTIzdi0zMS4xNjVjLS40NjkuNjc1LS45MzQgMS4zNDktMS4zODIgMi4wMDUtLjc5MiAxLjI3NS0xLjY4MiAyLjY0LTIuNDY1IDMuOTktMi4zNDcgNC4wNjUtMy45ODIgOC4wMzgtNC41ODUgMTMuNzk0LS4xNjIuNDg1LS41MjcuNzk4LS45My43OTktLjM2My0uMDAxLS42OTctLjI1NS0uODc5LS42Njd2LS4wMTJjLS41OTMtNS44MjItMi4yMzctOS44Mi00LjYtMTMuOTE0LS43ODMtMS4zNS0xLjY3My0yLjcxNS0yLjQ2Ni0zLjk5LTEuMTM3LTEuNjY2LTIuMzI3LTMuNC0zLjYzNy01LjE2OWwtLjAwMi0uMDAzeiIgZmlsbD0iI2MzYzNjMyIvPjxwYXRoIGQ9Ik0yMTIuOTgzIDI0OC40OTVsLTM2Ljk1MiAzNi45NTN2LjgxMmE1LjIyNyA1LjIyNyAwIDAwNS4yMzggNS4yMzhoMS4wMTVsMzUuNjY2LTM1LjY2NmExMzYuMjc1IDEzNi4yNzUgMCAwMC0yLjc2NC0zLjkgMzcuNTc1IDM3LjU3NSAwIDAwLS45ODktMS40NCAzNS4xMjcgMzUuMTI3IDAgMDAtLjk1LTEuNTA4Yy0uMDgzLS4xNjItLjE3Ni0uMzI2LS4yNjQtLjQ4OXoiIGZpbGw9IiNmZGRjNGYiIHBhaW50LW9yZGVyPSJtYXJrZXJzIHN0cm9rZSBmaWxsIi8+PHBhdGggZD0iTTIxMS45OTggMjYxLjA4M2wtNi4xNTIgNi4xNTEgMjQuMjY0IDI0LjI2NGguNzgxYTUuMjI3IDUuMjI3IDAgMDA1LjIzOS01LjIzOHYtMS4wNDV6IiBmaWxsPSIjZmZmIiBwYWludC1vcmRlcj0ibWFya2VycyBzdHJva2UgZmlsbCIvPjwvZz48L3N2Zz4=)}.ck-media__wrapper[data-oembed-url*="facebook.com"] .ck-media__placeholder{background:#4268b3}.ck-media__wrapper[data-oembed-url*="facebook.com"] .ck-media__placeholder .ck-media__placeholder__icon{background-image:url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTAyNCIgaGVpZ2h0PSIxMDI0IiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciPjxwYXRoIGQ9Ik05NjcuNDg0IDBINTYuNTE3QzI1LjMwNCAwIDAgMjUuMzA0IDAgNTYuNTE3djkxMC45NjZDMCA5OTguNjk0IDI1LjI5NyAxMDI0IDU2LjUyMiAxMDI0SDU0N1Y2MjhINDE0VjQ3M2gxMzNWMzU5LjAyOWMwLTEzMi4yNjIgODAuNzczLTIwNC4yODIgMTk4Ljc1Ni0yMDQuMjgyIDU2LjUxMyAwIDEwNS4wODYgNC4yMDggMTE5LjI0NCA2LjA4OVYyOTlsLTgxLjYxNi4wMzdjLTYzLjk5MyAwLTc2LjM4NCAzMC40OTItNzYuMzg0IDc1LjIzNlY0NzNoMTUzLjQ4N2wtMTkuOTg2IDE1NUg3MDd2Mzk2aDI2MC40ODRjMzEuMjEzIDAgNTYuNTE2LTI1LjMwMyA1Ni41MTYtNTYuNTE2VjU2LjUxNUMxMDI0IDI1LjMwMyA5OTguNjk3IDAgOTY3LjQ4NCAwIiBmaWxsPSIjRkZGRkZFIiBmaWxsLXJ1bGU9ImV2ZW5vZGQiLz48L3N2Zz4=)}.ck-media__wrapper[data-oembed-url*="facebook.com"] .ck-media__placeholder .ck-media__placeholder__url__text{color:#cdf}.ck-media__wrapper[data-oembed-url*="facebook.com"] .ck-media__placeholder .ck-media__placeholder__url__text:hover{color:#fff}.ck-media__wrapper[data-oembed-url*="instagram.com"] .ck-media__placeholder{background:linear-gradient(-135deg,#1400c7,#b800b1,#f50000)}.ck-media__wrapper[data-oembed-url*="instagram.com"] .ck-media__placeholder .ck-media__placeholder__icon{background-image:url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNTA0IiBoZWlnaHQ9IjUwNCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayI+PGRlZnM+PHBhdGggaWQ9ImEiIGQ9Ik0wIC4xNTloNTAzLjg0MVY1MDMuOTRIMHoiLz48L2RlZnM+PGcgZmlsbD0ibm9uZSIgZmlsbC1ydWxlPSJldmVub2RkIj48bWFzayBpZD0iYiIgZmlsbD0iI2ZmZiI+PHVzZSB4bGluazpocmVmPSIjYSIvPjwvbWFzaz48cGF0aCBkPSJNMjUxLjkyMS4xNTljLTY4LjQxOCAwLTc2Ljk5Ny4yOS0xMDMuODY3IDEuNTE2LTI2LjgxNCAxLjIyMy00NS4xMjcgNS40ODItNjEuMTUxIDExLjcxLTE2LjU2NiA2LjQzNy0zMC42MTUgMTUuMDUxLTQ0LjYyMSAyOS4wNTYtMTQuMDA1IDE0LjAwNi0yMi42MTkgMjguMDU1LTI5LjA1NiA0NC42MjEtNi4yMjggMTYuMDI0LTEwLjQ4NyAzNC4zMzctMTEuNzEgNjEuMTUxQy4yOSAxNzUuMDgzIDAgMTgzLjY2MiAwIDI1Mi4wOGMwIDY4LjQxNy4yOSA3Ni45OTYgMS41MTYgMTAzLjg2NiAxLjIyMyAyNi44MTQgNS40ODIgNDUuMTI3IDExLjcxIDYxLjE1MSA2LjQzNyAxNi41NjYgMTUuMDUxIDMwLjYxNSAyOS4wNTYgNDQuNjIxIDE0LjAwNiAxNC4wMDUgMjguMDU1IDIyLjYxOSA0NC42MjEgMjkuMDU3IDE2LjAyNCA2LjIyNyAzNC4zMzcgMTAuNDg2IDYxLjE1MSAxMS43MDkgMjYuODcgMS4yMjYgMzUuNDQ5IDEuNTE2IDEwMy44NjcgMS41MTYgNjguNDE3IDAgNzYuOTk2LS4yOSAxMDMuODY2LTEuNTE2IDI2LjgxNC0xLjIyMyA0NS4xMjctNS40ODIgNjEuMTUxLTExLjcwOSAxNi41NjYtNi40MzggMzAuNjE1LTE1LjA1MiA0NC42MjEtMjkuMDU3IDE0LjAwNS0xNC4wMDYgMjIuNjE5LTI4LjA1NSAyOS4wNTctNDQuNjIxIDYuMjI3LTE2LjAyNCAxMC40ODYtMzQuMzM3IDExLjcwOS02MS4xNTEgMS4yMjYtMjYuODcgMS41MTYtMzUuNDQ5IDEuNTE2LTEwMy44NjYgMC02OC40MTgtLjI5LTc2Ljk5Ny0xLjUxNi0xMDMuODY3LTEuMjIzLTI2LjgxNC01LjQ4Mi00NS4xMjctMTEuNzA5LTYxLjE1MS02LjQzOC0xNi41NjYtMTUuMDUyLTMwLjYxNS0yOS4wNTctNDQuNjIxLTE0LjAwNi0xNC4wMDUtMjguMDU1LTIyLjYxOS00NC42MjEtMjkuMDU2LTE2LjAyNC02LjIyOC0zNC4zMzctMTAuNDg3LTYxLjE1MS0xMS43MUMzMjguOTE3LjQ0OSAzMjAuMzM4LjE1OSAyNTEuOTIxLjE1OXptMCA0NS4zOTFjNjcuMjY1IDAgNzUuMjMzLjI1NyAxMDEuNzk3IDEuNDY5IDI0LjU2MiAxLjEyIDM3LjkwMSA1LjIyNCA0Ni43NzggOC42NzQgMTEuNzU5IDQuNTcgMjAuMTUxIDEwLjAyOSAyOC45NjYgMTguODQ1IDguODE2IDguODE1IDE0LjI3NSAxNy4yMDcgMTguODQ1IDI4Ljk2NiAzLjQ1IDguODc3IDcuNTU0IDIyLjIxNiA4LjY3NCA0Ni43NzggMS4yMTIgMjYuNTY0IDEuNDY5IDM0LjUzMiAxLjQ2OSAxMDEuNzk4IDAgNjcuMjY1LS4yNTcgNzUuMjMzLTEuNDY5IDEwMS43OTctMS4xMiAyNC41NjItNS4yMjQgMzcuOTAxLTguNjc0IDQ2Ljc3OC00LjU3IDExLjc1OS0xMC4wMjkgMjAuMTUxLTE4Ljg0NSAyOC45NjYtOC44MTUgOC44MTYtMTcuMjA3IDE0LjI3NS0yOC45NjYgMTguODQ1LTguODc3IDMuNDUtMjIuMjE2IDcuNTU0LTQ2Ljc3OCA4LjY3NC0yNi41NiAxLjIxMi0zNC41MjcgMS40NjktMTAxLjc5NyAxLjQ2OS02Ny4yNzEgMC03NS4yMzctLjI1Ny0xMDEuNzk4LTEuNDY5LTI0LjU2Mi0xLjEyLTM3LjkwMS01LjIyNC00Ni43NzgtOC42NzQtMTEuNzU5LTQuNTctMjAuMTUxLTEwLjAyOS0yOC45NjYtMTguODQ1LTguODE1LTguODE1LTE0LjI3NS0xNy4yMDctMTguODQ1LTI4Ljk2Ni0zLjQ1LTguODc3LTcuNTU0LTIyLjIxNi04LjY3NC00Ni43NzgtMS4yMTItMjYuNTY0LTEuNDY5LTM0LjUzMi0xLjQ2OS0xMDEuNzk3IDAtNjcuMjY2LjI1Ny03NS4yMzQgMS40NjktMTAxLjc5OCAxLjEyLTI0LjU2MiA1LjIyNC0zNy45MDEgOC42NzQtNDYuNzc4IDQuNTctMTEuNzU5IDEwLjAyOS0yMC4xNTEgMTguODQ1LTI4Ljk2NiA4LjgxNS04LjgxNiAxNy4yMDctMTQuMjc1IDI4Ljk2Ni0xOC44NDUgOC44NzctMy40NSAyMi4yMTYtNy41NTQgNDYuNzc4LTguNjc0IDI2LjU2NC0xLjIxMiAzNC41MzItMS40NjkgMTAxLjc5OC0xLjQ2OXoiIGZpbGw9IiNGRkYiIG1hc2s9InVybCgjYikiLz48cGF0aCBkPSJNMjUxLjkyMSAzMzYuMDUzYy00Ni4zNzggMC04My45NzQtMzcuNTk2LTgzLjk3NC04My45NzMgMC00Ni4zNzggMzcuNTk2LTgzLjk3NCA4My45NzQtODMuOTc0IDQ2LjM3NyAwIDgzLjk3MyAzNy41OTYgODMuOTczIDgzLjk3NCAwIDQ2LjM3Ny0zNy41OTYgODMuOTczLTgzLjk3MyA4My45NzN6bTAtMjEzLjMzOGMtNzEuNDQ3IDAtMTI5LjM2NSA1Ny45MTgtMTI5LjM2NSAxMjkuMzY1IDAgNzEuNDQ2IDU3LjkxOCAxMjkuMzY0IDEyOS4zNjUgMTI5LjM2NCA3MS40NDYgMCAxMjkuMzY0LTU3LjkxOCAxMjkuMzY0LTEyOS4zNjQgMC03MS40NDctNTcuOTE4LTEyOS4zNjUtMTI5LjM2NC0xMjkuMzY1ek00MTYuNjI3IDExNy42MDRjMCAxNi42OTYtMTMuNTM1IDMwLjIzLTMwLjIzMSAzMC4yMy0xNi42OTUgMC0zMC4yMy0xMy41MzQtMzAuMjMtMzAuMjMgMC0xNi42OTYgMTMuNTM1LTMwLjIzMSAzMC4yMy0zMC4yMzEgMTYuNjk2IDAgMzAuMjMxIDEzLjUzNSAzMC4yMzEgMzAuMjMxIiBmaWxsPSIjRkZGIi8+PC9nPjwvc3ZnPg==)}.ck-media__wrapper[data-oembed-url*="instagram.com"] .ck-media__placeholder .ck-media__placeholder__url__text{color:#ffe0fe}.ck-media__wrapper[data-oembed-url*="instagram.com"] .ck-media__placeholder .ck-media__placeholder__url__text:hover{color:#fff}.ck-media__wrapper[data-oembed-url*="twitter.com"] .ck.ck-media__placeholder{background:linear-gradient(90deg,#71c6f4,#0d70a5)}.ck-media__wrapper[data-oembed-url*="twitter.com"] .ck.ck-media__placeholder .ck-media__placeholder__icon{background-image:url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA0MDAgNDAwIj48cGF0aCBkPSJNNDAwIDIwMGMwIDExMC41LTg5LjUgMjAwLTIwMCAyMDBTMCAzMTAuNSAwIDIwMCA4OS41IDAgMjAwIDBzMjAwIDg5LjUgMjAwIDIwMHpNMTYzLjQgMzA1LjVjODguNyAwIDEzNy4yLTczLjUgMTM3LjItMTM3LjIgMC0yLjEgMC00LjItLjEtNi4yIDkuNC02LjggMTcuNi0xNS4zIDI0LjEtMjUtOC42IDMuOC0xNy45IDYuNC0yNy43IDcuNiAxMC02IDE3LjYtMTUuNCAyMS4yLTI2LjctOS4zIDUuNS0xOS42IDkuNS0zMC42IDExLjctOC44LTkuNC0yMS4zLTE1LjItMzUuMi0xNS4yLTI2LjYgMC00OC4yIDIxLjYtNDguMiA0OC4yIDAgMy44LjQgNy41IDEuMyAxMS00MC4xLTItNzUuNi0yMS4yLTk5LjQtNTAuNC00LjEgNy4xLTYuNSAxNS40LTYuNSAyNC4yIDAgMTYuNyA4LjUgMzEuNSAyMS41IDQwLjEtNy45LS4yLTE1LjMtMi40LTIxLjgtNnYuNmMwIDIzLjQgMTYuNiA0Mi44IDM4LjcgNDcuMy00IDEuMS04LjMgMS43LTEyLjcgMS43LTMuMSAwLTYuMS0uMy05LjEtLjkgNi4xIDE5LjIgMjMuOSAzMy4xIDQ1IDMzLjUtMTYuNSAxMi45LTM3LjMgMjAuNi01OS45IDIwLjYtMy45IDAtNy43LS4yLTExLjUtLjcgMjEuMSAxMy44IDQ2LjUgMjEuOCA3My43IDIxLjgiIGZpbGw9IiNmZmYiLz48L3N2Zz4=)}.ck-media__wrapper[data-oembed-url*="twitter.com"] .ck.ck-media__placeholder .ck-media__placeholder__url__text{color:#b8e6ff}.ck-media__wrapper[data-oembed-url*="twitter.com"] .ck.ck-media__placeholder .ck-media__placeholder__url__text:hover{color:#fff}'},function(S,V,E){var O=E(1),b=E(91);"string"==typeof(b=b.__esModule?b.default:b)&&(b=[[S.i,b,""]]),O(b,{injectType:"singletonStyleTag",attributes:{"data-cke":!0},insert:"head",singleton:!0}),S.exports=b.locals||{}},function(S,V){S.exports=".ck.ck-media-form{display:flex;align-items:flex-start;flex-direction:row;flex-wrap:nowrap}.ck.ck-media-form .ck-labeled-field-view{display:inline-block}.ck.ck-media-form .ck-label{display:none}@media screen and (max-width:600px){.ck.ck-media-form{flex-wrap:wrap}.ck.ck-media-form .ck-labeled-field-view{flex-basis:100%}.ck.ck-media-form .ck-button{flex-basis:50%}}.ck.ck-media-form{padding:var(--ck-spacing-standard)}.ck.ck-media-form:focus{outline:none}[dir=ltr] .ck.ck-media-form>:not(:first-child),[dir=rtl] .ck.ck-media-form>:not(:last-child){margin-left:var(--ck-spacing-standard)}@media screen and (max-width:600px){.ck.ck-media-form{padding:0;width:calc(0.8*var(--ck-input-text-width))}.ck.ck-media-form .ck-labeled-field-view{margin:var(--ck-spacing-standard) var(--ck-spacing-standard) 0}.ck.ck-media-form .ck-labeled-field-view .ck-input-text{min-width:0;width:100%}.ck.ck-media-form .ck-labeled-field-view .ck-labeled-field-view__error{white-space:normal}.ck.ck-media-form .ck-button{padding:var(--ck-spacing-standard);margin-top:var(--ck-spacing-standard);border-radius:0;border:0;border-top:1px solid var(--ck-color-base-border)}[dir=ltr] .ck.ck-media-form .ck-button{margin-left:0}[dir=ltr] .ck.ck-media-form .ck-button:first-of-type{border-right:1px solid var(--ck-color-base-border)}[dir=rtl] .ck.ck-media-form .ck-button{margin-left:0}[dir=rtl] .ck.ck-media-form .ck-button:last-of-type{border-right:1px solid var(--ck-color-base-border)}}"},function(S,V,E){var O=E(1),b=E(93);"string"==typeof(b=b.__esModule?b.default:b)&&(b=[[S.i,b,""]]),O(b,{injectType:"singletonStyleTag",attributes:{"data-cke":!0},insert:"head",singleton:!0}),S.exports=b.locals||{}},function(S,V){S.exports=".ck-content .media{clear:both;margin:1em 0;display:block;min-width:15em}"},function(S,V,E){var O=E(1),b=E(95);"string"==typeof(b=b.__esModule?b.default:b)&&(b=[[S.i,b,""]]),O(b,{injectType:"singletonStyleTag",attributes:{"data-cke":!0},insert:"head",singleton:!0}),S.exports=b.locals||{}},function(S,V){S.exports=":root{--ck-color-table-focused-cell-background:rgba(158,207,250,0.3)}.ck-widget.table td.ck-editor__nested-editable.ck-editor__nested-editable_focused,.ck-widget.table td.ck-editor__nested-editable:focus,.ck-widget.table th.ck-editor__nested-editable.ck-editor__nested-editable_focused,.ck-widget.table th.ck-editor__nested-editable:focus{background:var(--ck-color-table-focused-cell-background);border-style:none;outline:1px solid var(--ck-color-focus-border);outline-offset:-1px}"},function(S,V,E){var O=E(1),b=E(97);"string"==typeof(b=b.__esModule?b.default:b)&&(b=[[S.i,b,""]]),O(b,{injectType:"singletonStyleTag",attributes:{"data-cke":!0},insert:"head",singleton:!0}),S.exports=b.locals||{}},function(S,V){S.exports=".ck .ck-insert-table-dropdown__grid{display:flex;flex-direction:row;flex-wrap:wrap}:root{--ck-insert-table-dropdown-padding:10px;--ck-insert-table-dropdown-box-height:11px;--ck-insert-table-dropdown-box-width:12px;--ck-insert-table-dropdown-box-margin:1px}.ck .ck-insert-table-dropdown__grid{width:calc(var(--ck-insert-table-dropdown-box-width)*10 + var(--ck-insert-table-dropdown-box-margin)*20 + var(--ck-insert-table-dropdown-padding)*2);padding:var(--ck-insert-table-dropdown-padding) var(--ck-insert-table-dropdown-padding) 0}.ck .ck-insert-table-dropdown__label{text-align:center}.ck .ck-insert-table-dropdown-grid-box{width:var(--ck-insert-table-dropdown-box-width);height:var(--ck-insert-table-dropdown-box-height);margin:var(--ck-insert-table-dropdown-box-margin);border:1px solid var(--ck-color-base-border);border-radius:1px}.ck .ck-insert-table-dropdown-grid-box.ck-on{border-color:var(--ck-color-focus-border);background:var(--ck-color-focus-outer-shadow)}"},function(S,V,E){var O=E(1),b=E(99);"string"==typeof(b=b.__esModule?b.default:b)&&(b=[[S.i,b,""]]),O(b,{injectType:"singletonStyleTag",attributes:{"data-cke":!0},insert:"head",singleton:!0}),S.exports=b.locals||{}},function(S,V){S.exports=':root{--ck-table-selected-cell-background:rgba(158,207,250,0.3)}.ck.ck-editor__editable .table table td.ck-editor__editable_selected,.ck.ck-editor__editable .table table th.ck-editor__editable_selected{position:relative;caret-color:transparent;outline:unset;box-shadow:unset}.ck.ck-editor__editable .table table td.ck-editor__editable_selected:after,.ck.ck-editor__editable .table table th.ck-editor__editable_selected:after{content:"";pointer-events:none;background-color:var(--ck-table-selected-cell-background);position:absolute;top:0;left:0;right:0;bottom:0}.ck.ck-editor__editable .table table td.ck-editor__editable_selected ::selection,.ck.ck-editor__editable .table table td.ck-editor__editable_selected:focus,.ck.ck-editor__editable .table table th.ck-editor__editable_selected ::selection,.ck.ck-editor__editable .table table th.ck-editor__editable_selected:focus{background-color:transparent}.ck.ck-editor__editable .table table td.ck-editor__editable_selected .ck-widget_selected,.ck.ck-editor__editable .table table th.ck-editor__editable_selected .ck-widget_selected{outline:unset}'},function(S,V,E){var O=E(1),b=E(101);"string"==typeof(b=b.__esModule?b.default:b)&&(b=[[S.i,b,""]]),O(b,{injectType:"singletonStyleTag",attributes:{"data-cke":!0},insert:"head",singleton:!0}),S.exports=b.locals||{}},function(S,V){S.exports=".ck-content .table{margin:1em auto;display:table}.ck-content .table table{border-collapse:collapse;border-spacing:0;width:100%;height:100%;border:1px double #b3b3b3}.ck-content .table table td,.ck-content .table table th{min-width:2em;padding:.4em;border:1px solid #bfbfbf}.ck-content .table table th{font-weight:700;background:hsla(0,0%,0%,5%)}.ck-content[dir=rtl] .table th{text-align:right}.ck-content[dir=ltr] .table th{text-align:left}"},function(S,V,E){"use strict";var O=G.mark(jr),b=G.mark(vo),j=G.mark(Po);E.r(V),E.d(V,"default",function(){return da});var he=E(3),ke=he.a.Symbol,je=Object.prototype,Ne=je.hasOwnProperty,st=je.toString,Fe=ke?ke.toStringTag:void 0,pi=Object.prototype.toString,sr=ke?ke.toStringTag:void 0,wt=function(i){return null==i?void 0===i?"[object Undefined]":"[object Null]":sr&&sr in Object(i)?function(i){var e=Ne.call(i,Fe),n=i[Fe];try{i[Fe]=void 0;var t=!0}catch(o){}var r=st.call(i);return t&&(e?i[Fe]=n:delete i[Fe]),r}(i):function(i){return pi.call(i)}(i)},le=function(i,e){return function(n){return i(e(n))}},de=le(Object.getPrototypeOf,Object),ae=function(i){return null!=i&&"object"==typeof i},Le=Function.prototype.toString,Ue=Object.prototype.hasOwnProperty,ut=Le.call(Object),qe=function(i){if(!ae(i)||"[object Object]"!=wt(i))return!1;var e=de(i);if(null===e)return!0;var n=Ue.call(e,"constructor")&&e.constructor;return"function"==typeof n&&n instanceof n&&Le.call(n)==ut},Vt=function(i,e){return i===e||i!=i&&e!=e},lr=function(i,e){for(var n=i.length;n--;)if(Vt(i[n][0],e))return n;return-1},oh=Array.prototype.splice;function cn(a){var i=-1,e=null==a?0:a.length;for(this.clear();++i<e;){var n=a[i];this.set(n[0],n[1])}}cn.prototype.clear=function(){this.__data__=[],this.size=0},cn.prototype.delete=function(i){var e=this.__data__,n=lr(e,i);return!(n<0||(n==e.length-1?e.pop():oh.call(e,n,1),--this.size,0))},cn.prototype.get=function(i){var e=this.__data__,n=lr(e,i);return n<0?void 0:e[n][1]},cn.prototype.has=function(i){return lr(this.__data__,i)>-1},cn.prototype.set=function(i,e){var n=this.__data__,t=lr(n,i);return t<0?(++this.size,n.push([i,e])):n[t][1]=e,this};var va,cr=cn,He=function(i){var e=typeof i;return null!=i&&("object"==e||"function"==e)},On=function(i){if(!He(i))return!1;var e=wt(i);return"[object Function]"==e||"[object GeneratorFunction]"==e||"[object AsyncFunction]"==e||"[object Proxy]"==e},ki=he.a["__core-js_shared__"],ga=(va=/[^.]+$/.exec(ki&&ki.keys&&ki.keys.IE_PROTO||""))?"Symbol(src)_1."+va:"",gh=Function.prototype.toString,$t=function(i){if(null!=i){try{return gh.call(i)}catch(e){}try{return i+""}catch(e){}}return""},mh=/^\[object .+?Constructor\]$/,wh=RegExp("^"+Function.prototype.toString.call(Object.prototype.hasOwnProperty).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),_h=function(i){return!(!He(i)||function(i){return!!ga&&ga in i}(i))&&(On(i)?wh:mh).test($t(i))},Kt=function(i,e){var n=function(i,e){return null==i?void 0:i[e]}(i,e);return _h(n)?n:void 0},Dn=Kt(he.a,"Map"),Ln=Kt(Object,"create"),xh=Object.prototype.hasOwnProperty,Ph=Object.prototype.hasOwnProperty;function un(a){var i=-1,e=null==a?0:a.length;for(this.clear();++i<e;){var n=a[i];this.set(n[0],n[1])}}un.prototype.clear=function(){this.__data__=Ln?Ln(null):{},this.size=0},un.prototype.delete=function(i){var e=this.has(i)&&delete this.__data__[i];return this.size-=e?1:0,e},un.prototype.get=function(i){var e=this.__data__;if(Ln){var n=e[i];return"__lodash_hash_undefined__"===n?void 0:n}return xh.call(e,i)?e[i]:void 0},un.prototype.has=function(i){var e=this.__data__;return Ln?void 0!==e[i]:Ph.call(e,i)},un.prototype.set=function(i,e){var n=this.__data__;return this.size+=this.has(i)?0:1,n[i]=Ln&&void 0===e?"__lodash_hash_undefined__":e,this};var ma=un,ur=function(i,e){var n=i.__data__;return function(i){var e=typeof i;return"string"==e||"number"==e||"symbol"==e||"boolean"==e?"__proto__"!==i:null===i}(e)?n["string"==typeof e?"string":"hash"]:n.map};function dn(a){var i=-1,e=null==a?0:a.length;for(this.clear();++i<e;){var n=a[i];this.set(n[0],n[1])}}dn.prototype.clear=function(){this.size=0,this.__data__={hash:new ma,map:new(Dn||cr),string:new ma}},dn.prototype.delete=function(i){var e=ur(this,i).delete(i);return this.size-=e?1:0,e},dn.prototype.get=function(i){return ur(this,i).get(i)},dn.prototype.has=function(i){return ur(this,i).has(i)},dn.prototype.set=function(i,e){var n=ur(this,i),t=n.size;return n.set(i,e),this.size+=n.size==t?0:1,this};var dr=dn;function hn(a){var i=this.__data__=new cr(a);this.size=i.size}hn.prototype.clear=function(){this.__data__=new cr,this.size=0},hn.prototype.delete=function(i){var e=this.__data__,n=e.delete(i);return this.size=e.size,n},hn.prototype.get=function(i){return this.__data__.get(i)},hn.prototype.has=function(i){return this.__data__.has(i)},hn.prototype.set=function(i,e){var n=this.__data__;if(n instanceof cr){var t=n.__data__;if(!Dn||t.length<199)return t.push([i,e]),this.size=++n.size,this;n=this.__data__=new dr(t)}return n.set(i,e),this.size=n.size,this};var Vn=hn,hr=function(){try{var a=Kt(Object,"defineProperty");return a({},"",{}),a}catch(i){}}(),yi=function(i,e,n){"__proto__"==e&&hr?hr(i,e,{configurable:!0,enumerable:!0,value:n,writable:!0}):i[e]=n},Bh=Object.prototype.hasOwnProperty,bi=function(i,e,n){var t=i[e];Bh.call(i,e)&&Vt(t,n)&&(void 0!==n||e in i)||yi(i,e,n)},fn=function(i,e,n,t){var r=!n;n||(n={});for(var o=-1,s=e.length;++o<s;){var l=e[o],c=t?t(n[l],i[l],l,n,i):void 0;void 0===c&&(c=i[l]),r?yi(n,l,c):bi(n,l,c)}return n},pa=function(i){return ae(i)&&"[object Arguments]"==wt(i)},ka=Object.prototype,Fh=ka.hasOwnProperty,Uh=ka.propertyIsEnumerable,wi=pa(function(){return arguments}())?pa:function(a){return ae(a)&&Fh.call(a,"callee")&&!Uh.call(a,"callee")},et=Array.isArray,jn=E(4),Hh=/^(?:0|[1-9]\d*)$/,_i=function(i,e){var n=typeof i;return!!(e=null==e?9007199254740991:e)&&("number"==n||"symbol"!=n&&Hh.test(i))&&i>-1&&i%1==0&&i<e},ya=function(i){return"number"==typeof i&&i>-1&&i%1==0&&i<=9007199254740991},xe={};xe["[object Float32Array]"]=xe["[object Float64Array]"]=xe["[object Int8Array]"]=xe["[object Int16Array]"]=xe["[object Int32Array]"]=xe["[object Uint8Array]"]=xe["[object Uint8ClampedArray]"]=xe["[object Uint16Array]"]=xe["[object Uint32Array]"]=!0,xe["[object Arguments]"]=xe["[object Array]"]=xe["[object ArrayBuffer]"]=xe["[object Boolean]"]=xe["[object DataView]"]=xe["[object Date]"]=xe["[object Error]"]=xe["[object Function]"]=xe["[object Map]"]=xe["[object Number]"]=xe["[object Object]"]=xe["[object RegExp]"]=xe["[object Set]"]=xe["[object String]"]=xe["[object WeakMap]"]=!1;var Ai=function(i){return function(e){return i(e)}},vn=E(5),ba=vn.a&&vn.a.isTypedArray,Ci=ba?Ai(ba):function(i){return ae(i)&&ya(i.length)&&!!xe[wt(i)]},qh=Object.prototype.hasOwnProperty,wa=function(i,e){var n=et(i),t=!n&&wi(i),r=!n&&!t&&Object(jn.a)(i),o=!n&&!t&&!r&&Ci(i),s=n||t||r||o,l=s?function(i,e){for(var n=-1,t=Array(i);++n<i;)t[n]=e(n);return t}(i.length,String):[],c=l.length;for(var u in i)!e&&!qh.call(i,u)||s&&("length"==u||r&&("offset"==u||"parent"==u)||o&&("buffer"==u||"byteLength"==u||"byteOffset"==u)||_i(u,c))||l.push(u);return l},Gh=Object.prototype,Ti=function(i){var e=i&&i.constructor;return i===("function"==typeof e&&e.prototype||Gh)},Yh=le(Object.keys,Object),$h=Object.prototype.hasOwnProperty,fr=function(i){return null!=i&&ya(i.length)&&!On(i)},xi=function(i){return fr(i)?wa(i):function(i){if(!Ti(i))return Yh(i);var e=[];for(var n in Object(i))$h.call(i,n)&&"constructor"!=n&&e.push(n);return e}(i)},Zh=Object.prototype.hasOwnProperty,Xh=function(i){if(!He(i))return function(i){var e=[];if(null!=i)for(var n in Object(i))e.push(n);return e}(i);var e=Ti(i),n=[];for(var t in i)("constructor"!=t||!e&&Zh.call(i,t))&&n.push(t);return n},Bn=function(i){return fr(i)?wa(i,!0):Xh(i)},_a=E(8),Aa=function(i,e){var n=-1,t=i.length;for(e||(e=Array(t));++n<t;)e[n]=i[n];return e},Ca=function(){return[]},nf=Object.prototype.propertyIsEnumerable,Ta=Object.getOwnPropertySymbols,Si=Ta?function(a){return null==a?[]:(a=Object(a),function(i,e){for(var n=-1,t=null==i?0:i.length,r=0,o=[];++n<t;){var s=i[n];e(s,n,i)&&(o[r++]=s)}return o}(Ta(a),function(i){return nf.call(a,i)}))}:Ca,xa=function(i,e){for(var n=-1,t=e.length,r=i.length;++n<t;)i[r+n]=e[n];return i},Sa=Object.getOwnPropertySymbols?function(a){for(var i=[];a;)xa(i,Si(a)),a=de(a);return i}:Ca,Pa=function(i,e,n){var t=e(i);return et(i)?t:xa(t,n(i))},Pi=function(i){return Pa(i,xi,Si)},af=function(i){return Pa(i,Bn,Sa)},Ei=Kt(he.a,"DataView"),Mi=Kt(he.a,"Promise"),Ii=Kt(he.a,"Set"),Ni=Kt(he.a,"WeakMap"),sf=$t(Ei),lf=$t(Dn),cf=$t(Mi),uf=$t(Ii),df=$t(Ni),Jt=wt;(Ei&&"[object DataView]"!=Jt(new Ei(new ArrayBuffer(1)))||Dn&&"[object Map]"!=Jt(new Dn)||Mi&&"[object Promise]"!=Jt(Mi.resolve())||Ii&&"[object Set]"!=Jt(new Ii)||Ni&&"[object WeakMap]"!=Jt(new Ni))&&(Jt=function(i){var e=wt(i),n="[object Object]"==e?i.constructor:void 0,t=n?$t(n):"";if(t)switch(t){case sf:return"[object DataView]";case lf:return"[object Map]";case cf:return"[object Promise]";case uf:return"[object Set]";case df:return"[object WeakMap]"}return e});var zn=Jt,hf=Object.prototype.hasOwnProperty,vr=he.a.Uint8Array,Ri=function(i){var e=new i.constructor(i.byteLength);return new vr(e).set(new vr(i)),e},gf=/\w*$/,Ea=ke?ke.prototype:void 0,Ma=Ea?Ea.valueOf:void 0,Ia=function(i,e){var n=e?Ri(i.buffer):i.buffer;return new i.constructor(n,i.byteOffset,i.length)},kf=function(i,e,n){var t=i.constructor;switch(e){case"[object ArrayBuffer]":return Ri(i);case"[object Boolean]":case"[object Date]":return new t(+i);case"[object DataView]":return function(i,e){var n=e?Ri(i.buffer):i.buffer;return new i.constructor(n,i.byteOffset,i.byteLength)}(i,n);case"[object Float32Array]":case"[object Float64Array]":case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return Ia(i,n);case"[object Map]":case"[object Set]":return new t;case"[object Number]":case"[object String]":return new t(i);case"[object RegExp]":return function(i){var e=new i.constructor(i.source,gf.exec(i));return e.lastIndex=i.lastIndex,e}(i);case"[object Symbol]":return function(i){return Ma?Object(Ma.call(i)):{}}(i)}},Na=Object.create,yf=function(){function a(){}return function(i){if(!He(i))return{};if(Na)return Na(i);a.prototype=i;var e=new a;return a.prototype=void 0,e}}(),Ra=function(i){return"function"!=typeof i.constructor||Ti(i)?{}:yf(de(i))},Oa=vn.a&&vn.a.isMap,wf=Oa?Ai(Oa):function(i){return ae(i)&&"[object Map]"==zn(i)},Da=vn.a&&vn.a.isSet,Af=Da?Ai(Da):function(i){return ae(i)&&"[object Set]"==zn(i)},Ce={};Ce["[object Arguments]"]=Ce["[object Array]"]=Ce["[object ArrayBuffer]"]=Ce["[object DataView]"]=Ce["[object Boolean]"]=Ce["[object Date]"]=Ce["[object Float32Array]"]=Ce["[object Float64Array]"]=Ce["[object Int8Array]"]=Ce["[object Int16Array]"]=Ce["[object Int32Array]"]=Ce["[object Map]"]=Ce["[object Number]"]=Ce["[object Object]"]=Ce["[object RegExp]"]=Ce["[object Set]"]=Ce["[object String]"]=Ce["[object Symbol]"]=Ce["[object Uint8Array]"]=Ce["[object Uint8ClampedArray]"]=Ce["[object Uint16Array]"]=Ce["[object Uint32Array]"]=!0,Ce["[object Error]"]=Ce["[object Function]"]=Ce["[object WeakMap]"]=!1;var Oi=function a(i,e,n,t,r,o){var s,l=1&e,c=2&e,u=4&e;if(n&&(s=r?n(i,t,r,o):n(i)),void 0!==s)return s;if(!He(i))return i;var d=et(i);if(d){if(s=function(i){var e=i.length,n=new i.constructor(e);return e&&"string"==typeof i[0]&&hf.call(i,"index")&&(n.index=i.index,n.input=i.input),n}(i),!l)return Aa(i,s)}else{var h=zn(i),f="[object Function]"==h||"[object GeneratorFunction]"==h;if(Object(jn.a)(i))return Object(_a.a)(i,l);if("[object Object]"==h||"[object Arguments]"==h||f&&!r){if(s=c||f?{}:Ra(i),!l)return c?function(i,e){return fn(i,Sa(i),e)}(i,function(i,e){return i&&fn(e,Bn(e),i)}(s,i)):function(i,e){return fn(i,Si(i),e)}(i,function(i,e){return i&&fn(e,xi(e),i)}(s,i))}else{if(!Ce[h])return r?i:{};s=kf(i,h,l)}}o||(o=new Vn);var v=o.get(i);if(v)return v;o.set(i,s),Af(i)?i.forEach(function(p){s.add(a(p,e,n,p,i,o))}):wf(i)&&i.forEach(function(p,y){s.set(y,a(p,e,n,y,i,o))});var g=u?c?af:Pi:c?keysIn:xi,m=d?void 0:g(i);return function(i,e){for(var n=-1,t=null==i?0:i.length;++n<t&&!1!==e(i[n],n,i););}(m||i,function(p,y){m&&(p=i[y=p]),bi(s,y,a(p,e,n,y,i,o))}),s},La=function(i,e){return Oi(i,5,e="function"==typeof e?e:void 0)},jt=function(i){return ae(i)&&1===i.nodeType&&!qe(i)},Va=function(){function a(i,e){A(this,a),this._config={},e&&this.define(ja(e)),i&&this._setObjectToTarget(this._config,i)}return C(a,[{key:"set",value:function(e,n){this._setToTarget(this._config,e,n)}},{key:"define",value:function(e,n){this._setToTarget(this._config,e,n,!0)}},{key:"get",value:function(e){return this._getFromSource(this._config,e)}},{key:"names",value:G.mark(function i(){var e,n,t;return G.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:e=0,n=Object.keys(this._config);case 1:if(!(e<n.length)){o.next=8;break}return t=n[e],o.next=5,t;case 5:e++,o.next=1;break;case 8:case"end":return o.stop()}},i,this)})},{key:"_setToTarget",value:function(e,n,t){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if(qe(n))this._setObjectToTarget(e,n,r);else{var o=n.split(".");n=o.pop();var l,s=k(o);try{for(s.s();!(l=s.n()).done;){var c=l.value;qe(e[c])||(e[c]={}),e=e[c]}}catch(u){s.e(u)}finally{s.f()}if(qe(t))return qe(e[n])||(e[n]={}),void this._setObjectToTarget(e=e[n],t,r);r&&void 0!==e[n]||(e[n]=t)}}},{key:"_getFromSource",value:function(e,n){var t=n.split(".");n=t.pop();var o,r=k(t);try{for(r.s();!(o=r.n()).done;){var s=o.value;if(!qe(e[s])){e=null;break}e=e[s]}}catch(l){r.e(l)}finally{r.f()}return e?ja(e[n]):void 0}},{key:"_setObjectToTarget",value:function(e,n,t){var r=this;Object.keys(n).forEach(function(o){r._setToTarget(e,o,n[o],t)})}}]),a}();function ja(a){return La(a,Cf)}function Cf(a){return jt(a)?a:void 0}var Fn=C(function a(i,e){A(this,a),this.source=i,this.name=e,this.path=[],this.stop=function i(){i.called=!0},this.off=function i(){i.called=!0}}),Je=new Array(256).fill().map(function(a,i){return("0"+i.toString(16)).slice(-2)});function Et(){var a=4294967296*Math.random()>>>0,i=4294967296*Math.random()>>>0,e=4294967296*Math.random()>>>0,n=4294967296*Math.random()>>>0;return"e"+Je[a>>0&255]+Je[a>>8&255]+Je[a>>16&255]+Je[a>>24&255]+Je[i>>0&255]+Je[i>>8&255]+Je[i>>16&255]+Je[i>>24&255]+Je[e>>0&255]+Je[e>>8&255]+Je[e>>16&255]+Je[e>>24&255]+Je[n>>0&255]+Je[n>>8&255]+Je[n>>16&255]+Je[n>>24&255]}var mt={get:function(i){return"number"!=typeof i?this[i]||this.normal:i},highest:1e5,high:1e3,normal:0,low:-1e3,lowest:-1e5},I=(E(6),E(0)),Bt=Symbol("listeningTo"),Di=Symbol("emitterId"),Se={on:function(i,e){this.listenTo(this,i,e,arguments.length>2&&void 0!==arguments[2]?arguments[2]:{})},once:function(i,e,n){var t=!1;this.listenTo(this,i,function(r){for(var o=arguments.length,s=new Array(o>1?o-1:0),l=1;l<o;l++)s[l-1]=arguments[l];t||(t=!0,r.off(),e.call.apply(e,[this,r].concat(s)))},n)},off:function(i,e){this.stopListening(this,i,e)},listenTo:function(i,e,n){var r,o,t=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};this[Bt]||(this[Bt]={});var s=this[Bt];Li(i)||za(i);var l=Li(i);(r=s[l])||(r=s[l]={emitter:i,callbacks:{}}),(o=r.callbacks[e])||(o=r.callbacks[e]=[]),o.push(n),function(p,y){var w=Fa(p);if(!w[y]){for(var _=y,T=null,x=[];""!==_&&!w[_];)w[_]={callbacks:[],childEvents:[]},x.push(w[_]),T&&w[_].childEvents.push(T),T=_,_=_.substr(0,_.lastIndexOf(":"));if(""!==_){var D,N=k(x);try{for(N.s();!(D=N.n()).done;)D.value.callbacks=w[_].callbacks.slice()}catch(J){N.e(J)}finally{N.f()}w[_].childEvents.push(T)}}}(i,e);var f,c=Vi(i,e),u=mt.get(t.priority),d={callback:n,priority:u},h=k(c);try{for(h.s();!(f=h.n()).done;){for(var v=f.value,g=!1,m=0;m<v.length;m++)if(v[m].priority<u){v.splice(m,0,d),g=!0;break}g||v.push(d)}}catch(p){h.e(p)}finally{h.f()}},stopListening:function(i,e,n){var t=this[Bt],r=i&&Li(i),o=t&&r&&t[r],s=o&&e&&o.callbacks[e];if(!(!t||i&&!o||e&&!s))if(n)ji(i,e,n);else if(s){for(;n=s.pop();)ji(i,e,n);delete o.callbacks[e]}else if(o){for(e in o.callbacks)this.stopListening(i,e);delete t[r]}else{for(r in t)this.stopListening(t[r].emitter);delete this[Bt]}},fire:function(i){try{for(var e=i instanceof Fn?i:new Fn(this,i),n=e.name,t=function h(f,v){var g;return f._events&&(g=f._events[v])&&g.callbacks.length?g.callbacks:v.indexOf(":")>-1?h(f,v.substr(0,v.lastIndexOf(":"))):null}(this,n),r=arguments.length,o=new Array(r>1?r-1:0),s=1;s<r;s++)o[s-1]=arguments[s];if(e.path.push(this),t){var l=[e].concat(o);t=Array.from(t);for(var c=0;c<t.length&&(t[c].callback.apply(this,l),e.off.called&&(delete e.off.called,ji(this,n,t[c].callback)),!e.stop.called);c++);}if(this._delegations){var u=this._delegations.get(n),d=this._delegations.get("*");u&&Ua(u,e,o),d&&Ua(d,e,o)}return e.return}catch(h){I.b.rethrowUnexpectedError(h,this)}},delegate:function(){for(var i=this,e=arguments.length,n=new Array(e),t=0;t<e;t++)n[t]=arguments[t];return{to:function(o,s){i._delegations||(i._delegations=new Map),n.forEach(function(l){var c=i._delegations.get(l);c?c.set(o,s):i._delegations.set(l,new Map([[o,s]]))})}}},stopDelegating:function(i,e){if(this._delegations)if(i)if(e){var n=this._delegations.get(i);n&&n.delete(e)}else this._delegations.delete(i);else this._delegations.clear()}};function za(a,i){a[Di]||(a[Di]=i||Et())}function Li(a){return a[Di]}function Fa(a){return a._events||Object.defineProperty(a,"_events",{value:{}}),a._events}function Vi(a,i){var e=Fa(a)[i];if(!e)return[];for(var n=[e.callbacks],t=0;t<e.childEvents.length;t++){var r=Vi(a,e.childEvents[t]);n=n.concat(r)}return n}function Ua(a,i,e){var t,n=k(a);try{for(n.s();!(t=n.n()).done;){var r=ee(t.value,2),o=r[0],s=r[1];s?"function"==typeof s&&(s=s(i.name)):s=i.name;var l=new Fn(i.source,s);l.path=Y(i.path),o.fire.apply(o,[l].concat(Y(e)))}}catch(c){n.e(c)}finally{n.f()}}function ji(a,i,e){var r,n=Vi(a,i),t=k(n);try{for(t.s();!(r=t.n()).done;)for(var o=r.value,s=0;s<o.length;s++)o[s].callback==e&&(o.splice(s,1),s--)}catch(l){t.e(l)}finally{t.f()}}function dt(a){return!(!a||!a[Symbol.iterator])}function se(a){for(var i=arguments.length,e=new Array(i>1?i-1:0),n=1;n<i;n++)e[n-1]=arguments[n];e.forEach(function(t){Object.getOwnPropertyNames(t).concat(Object.getOwnPropertySymbols(t)).forEach(function(r){if(!(r in a.prototype)){var o=Object.getOwnPropertyDescriptor(t,r);o.enumerable=!1,Object.defineProperty(a.prototype,r,o)}})})}var Qe=function(a){function i(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};A(this,i);var t=dt(e);if(t||(n=e),this._items=[],this._itemMap=new Map,this._idProperty=n.idProperty||"id",this._bindToExternalToInternalMap=new WeakMap,this._bindToInternalToExternalMap=new WeakMap,this._skippedIndexesFromExternal=[],t){var o,r=k(e);try{for(r.s();!(o=r.n()).done;){var s=o.value;this._items.push(s),this._itemMap.set(this._getItemIdBeforeAdding(s),s)}}catch(l){r.e(l)}finally{r.f()}}}return C(i,[{key:"length",get:function(){return this._items.length}},{key:"first",get:function(){return this._items[0]||null}},{key:"last",get:function(){return this._items[this.length-1]||null}},{key:"add",value:function(n,t){return this.addMany([n],t)}},{key:"addMany",value:function(n,t){if(void 0===t)t=this._items.length;else if(t>this._items.length||t<0)throw new I.b("collection-add-item-invalid-index: The index passed to Collection#addMany() is invalid.",this);for(var r=0;r<n.length;r++){var o=n[r],s=this._getItemIdBeforeAdding(o),l=t+r;this._items.splice(l,0,o),this._itemMap.set(s,o),this.fire("add",o,l)}return this.fire("change",{added:n,removed:[],index:t}),this}},{key:"get",value:function(n){var t;if("string"==typeof n)t=this._itemMap.get(n);else{if("number"!=typeof n)throw new I.b("collection-get-invalid-arg: Index or id must be given.",this);t=this._items[n]}return t||null}},{key:"has",value:function(n){return this._itemMap.has("string"==typeof n?n:n[this._idProperty])}},{key:"getIndex",value:function(n){var t;return t="string"==typeof n?this._itemMap.get(n):n,this._items.indexOf(t)}},{key:"remove",value:function(n){var t=this._remove(n),r=ee(t,2),o=r[0];return this.fire("change",{added:[],removed:[o],index:r[1]}),o}},{key:"map",value:function(n,t){return this._items.map(n,t)}},{key:"find",value:function(n,t){return this._items.find(n,t)}},{key:"filter",value:function(n,t){return this._items.filter(n,t)}},{key:"clear",value:function(){this._bindToCollection&&(this.stopListening(this._bindToCollection),this._bindToCollection=null);for(var n=Array.from(this._items);this.length;)this._remove(0);this.fire("change",{added:[],removed:n,index:0})}},{key:"bindTo",value:function(n){var t=this;if(this._bindToCollection)throw new I.b("collection-bind-to-rebind: The collection cannot be bound more than once.",this);return this._bindToCollection=n,{as:function(o){t._setUpBindToBinding(function(s){return new o(s)})},using:function(o){t._setUpBindToBinding("function"==typeof o?function(s){return o(s)}:function(s){return s[o]})}}}},{key:"_setUpBindToBinding",value:function(n){var l,t=this,r=this._bindToCollection,o=function(d,h,f){var v=r._bindToCollection==t,g=r._bindToInternalToExternalMap.get(h);if(v&&g)t._bindToExternalToInternalMap.set(h,g),t._bindToInternalToExternalMap.set(g,h);else{var m=n(h);if(!m)return void t._skippedIndexesFromExternal.push(f);var w,p=f,y=k(t._skippedIndexesFromExternal);try{for(y.s();!(w=y.n()).done;)f>w.value&&p--}catch(z){y.e(z)}finally{y.f()}var x,T=k(r._skippedIndexesFromExternal);try{for(T.s();!(x=T.n()).done;)p>=x.value&&p++}catch(z){T.e(z)}finally{T.f()}t._bindToExternalToInternalMap.set(h,m),t._bindToInternalToExternalMap.set(m,h),t.add(m,p);for(var D=0;D<r._skippedIndexesFromExternal.length;D++)p<=r._skippedIndexesFromExternal[D]&&r._skippedIndexesFromExternal[D]++}},s=k(r);try{for(s.s();!(l=s.n()).done;){var c=l.value;o(0,c,r.getIndex(c))}}catch(u){s.e(u)}finally{s.f()}this.listenTo(r,"add",o),this.listenTo(r,"remove",function(u,d,h){var f=t._bindToExternalToInternalMap.get(d);f&&t.remove(f),t._skippedIndexesFromExternal=t._skippedIndexesFromExternal.reduce(function(v,g){return h<g&&v.push(g-1),h>g&&v.push(g),v},[])})}},{key:"_getItemIdBeforeAdding",value:function(n){var r,t=this._idProperty;if(t in n){if("string"!=typeof(r=n[t]))throw new I.b("collection-add-invalid-id: This item's id should be a string.",this);if(this.get(r))throw new I.b("collection-add-item-already-exists: This item already exists in the collection.",this)}else n[t]=r=Et();return r}},{key:"_remove",value:function(n){var t,r,o,s=!1,l=this._idProperty;if("string"==typeof n?(s=!(o=this._itemMap.get(r=n)),o&&(t=this._items.indexOf(o))):"number"==typeof n?(s=!(o=this._items[t=n]),o&&(r=o[l])):(r=(o=n)[l],s=-1==(t=this._items.indexOf(o))||!this._itemMap.get(r)),s)throw new I.b("collection-remove-404: Item not found.",this);this._items.splice(t,1),this._itemMap.delete(r);var c=this._bindToInternalToExternalMap.get(o);return this._bindToInternalToExternalMap.delete(o),this._bindToExternalToInternalMap.delete(c),this.fire("remove",o,t),[o,t]}},{key:a,value:function(){return this._items[Symbol.iterator]()}}]),i}(Symbol.iterator);se(Qe,Se);var Bi=function(a){function i(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];A(this,i),this._context=e,this._plugins=new Map,this._availablePlugins=new Map;var o,r=k(n);try{for(r.s();!(o=r.n()).done;){var s=o.value;s.pluginName&&this._availablePlugins.set(s.pluginName,s)}}catch(f){r.e(f)}finally{r.f()}this._contextPlugins=new Map;var c,l=k(t);try{for(l.s();!(c=l.n()).done;){var u=ee(c.value,2),d=u[0],h=u[1];this._contextPlugins.set(d,h),this._contextPlugins.set(h,d),d.pluginName&&this._availablePlugins.set(d.pluginName,d)}}catch(f){l.e(f)}finally{l.f()}}return C(i,[{key:a,value:G.mark(function e(){var n,t,r;return G.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:n=k(this._plugins),s.prev=1,n.s();case 3:if((t=n.n()).done){s.next=11;break}if(s.t0="function"==typeof(r=t.value)[0],!s.t0){s.next=9;break}return s.next=9,r;case 9:s.next=3;break;case 11:s.next=16;break;case 13:s.prev=13,s.t1=s.catch(1),n.e(s.t1);case 16:return s.prev=16,n.f(),s.finish(16);case 19:case"end":return s.stop()}},e,this,[[1,13,16,19]])})},{key:"get",value:function(n){var t=this._plugins.get(n);if(!t){var o=n;throw"function"==typeof n&&(o=n.pluginName||n.name),new I.b("plugincollection-plugin-not-loaded: The requested plugin is not loaded.",this._context,{plugin:o})}return t}},{key:"has",value:function(n){return this._plugins.has(n)}},{key:"init",value:function(n){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=this,o=this._context,s=new Set,l=[],c=m(n),u=m(t),d=function(p){var _,y=[],w=k(p);try{for(w.s();!(_=w.n()).done;){var T=_.value;g(T)||y.push(T)}}catch(x){w.e(x)}finally{w.f()}return y.length?y:null}(n);if(d){var h="plugincollection-plugin-not-found: Some plugins are not available and could not be loaded.";return console.error(Object(I.a)(h),{plugins:d}),Promise.reject(new I.b(h,o,{plugins:d}))}return Promise.all(c.map(f)).then(function(){return v(l,"init")}).then(function(){return v(l,"afterInit")}).then(function(){return l});function f(p){if(!u.includes(p)&&!r._plugins.has(p)&&!s.has(p))return(y=p,new Promise(function(w){s.add(y),y.requires&&y.requires.forEach(function(T){var x=g(T);if(y.isContextPlugin&&!x.isContextPlugin)throw new I.b("plugincollection-context-required: Context plugin can not require plugin which is not a context plugin",null,{plugin:x.name,requiredBy:y.name});if(t.includes(x))throw new I.b("plugincollection-required: Cannot load a plugin because one of its dependencies is listed inthe `removePlugins` option.",o,{plugin:x.name,requiredBy:y.name});f(x)});var _=r._contextPlugins.get(y)||new y(o);r._add(y,_),l.push(_),w()})).catch(function(y){throw console.error(Object(I.a)("plugincollection-load: It was not possible to load the plugin."),{plugin:p}),y});var y}function v(p,y){return p.reduce(function(w,_){return _[y]?r._contextPlugins.has(_)?w:w.then(_[y].bind(_)):w},Promise.resolve())}function g(p){return"function"==typeof p?p:r._availablePlugins.get(p)}function m(p){return p.map(function(y){return g(y)}).filter(function(y){return!!y})}}},{key:"destroy",value:function(){var r,n=[],t=k(this);try{for(t.s();!(r=t.n()).done;){var s=ee(r.value,2)[1];"function"!=typeof s.destroy||this._contextPlugins.has(s)||n.push(s.destroy())}}catch(l){t.e(l)}finally{t.f()}return Promise.all(n)}},{key:"_add",value:function(n,t){this._plugins.set(n,t);var r=n.pluginName;if(r){if(this._plugins.has(r))throw new I.b("plugincollection-plugin-name-conflict: Two plugins with the same name were loaded.",null,{pluginName:r,plugin1:this._plugins.get(r).constructor,plugin2:n});this._plugins.set(r,t)}}}]),i}(Symbol.iterator);function Tf(a,i){var e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;if("number"!=typeof e)throw new I.b("translation-service-quantity-not-a-number: Expecting `quantity` to be a number.",null,{quantity:e});var n=Object.keys(window.CKEDITOR_TRANSLATIONS).length;1===n&&(a=Object.keys(window.CKEDITOR_TRANSLATIONS)[0]);var l,c,t=i.id||i.string;if(0===n||(l=a,c=t,!window.CKEDITOR_TRANSLATIONS[l]||!window.CKEDITOR_TRANSLATIONS[l].dictionary[c]))return 1!==e?i.plural:i.string;var r=window.CKEDITOR_TRANSLATIONS[a].dictionary,o=window.CKEDITOR_TRANSLATIONS[a].getPluralForm||function(l){return 1===l?0:1};if("string"==typeof r[t])return r[t];var s=Number(o(e));return r[t][s]}se(Bi,Se),window.CKEDITOR_TRANSLATIONS||(window.CKEDITOR_TRANSLATIONS={});var xf=["ar","fa","he","ku","ug"],Sf=function(){function a(){var i=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};A(this,a),this.uiLanguage=e.uiLanguage||"en",this.contentLanguage=e.contentLanguage||this.uiLanguage,this.uiLanguageDirection=Ha(this.uiLanguage),this.contentLanguageDirection=Ha(this.contentLanguage),this.t=function(n,t){return i._t(n,t)}}return C(a,[{key:"language",get:function(){return console.warn("locale-deprecated-language-property: The Locale#language property has been deprecated and will be removed in the near future. Please use #uiLanguage and #contentLanguage properties instead."),this.uiLanguage}},{key:"_t",value:function(e){var r,o,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return Array.isArray(n)||(n=[n]),"string"==typeof e&&(e={string:e}),r=Tf(this.uiLanguage,e,e.plural?n[0]:1),o=n,r.replace(/%(\d+)/g,function(s,l){return l<o.length?o[l]:s})}}]),a}();function Ha(a){return xf.includes(a)?"rtl":"ltr"}var Pf=function(){function a(i){A(this,a),this.config=new Va(i,this.constructor.defaultConfig);var e=this.constructor.builtinPlugins;this.config.define("plugins",e),this.plugins=new Bi(this,e);var n=this.config.get("language")||{};this.locale=new Sf({uiLanguage:"string"==typeof n?n:n.ui,contentLanguage:this.config.get("language.content")}),this.t=this.locale.t,this.editors=new Qe,this._contextOwner=null}return C(a,[{key:"initPlugins",value:function(){var t,e=this.config.get("plugins")||[],n=k(e);try{for(n.s();!(t=n.n()).done;){var r=t.value;if("function"!=typeof r)throw new I.b("context-initplugins-constructor-only: Only a constructor function is allowed as a context plugin.",null,{Plugin:r});if(!0!==r.isContextPlugin)throw new I.b("context-initplugins-invalid-plugin: Only a plugin marked as a context plugin is allowed to be used with a context.",null,{Plugin:r})}}catch(o){n.e(o)}finally{n.f()}return this.plugins.init(e)}},{key:"destroy",value:function(){var e=this;return Promise.all(Array.from(this.editors,function(n){return n.destroy()})).then(function(){return e.plugins.destroy()})}},{key:"_addEditor",value:function(e,n){if(this._contextOwner)throw new I.b("context-addEditor-private-context: Cannot add multiple editors to the context which is created by the editor.");this.editors.add(e),n&&(this._contextOwner=e)}},{key:"_removeEditor",value:function(e){return this.editors.has(e)&&this.editors.remove(e),this._contextOwner===e?this.destroy():Promise.resolve()}},{key:"_getEditorConfig",value:function(){var t,e={},n=k(this.config.names());try{for(n.s();!(t=n.n()).done;){var r=t.value;["plugins","removePlugins","extraPlugins"].includes(r)||(e[r]=this.config.get(r))}}catch(o){n.e(o)}finally{n.f()}return e}}],[{key:"create",value:function(e){var n=this;return new Promise(function(t){var r=new n(e);t(r.initPlugins().then(function(){return r}))})}}]),a}();function tt(a,i){for(var e=Math.min(a.length,i.length),n=0;n<e;n++)if(a[n]!=i[n])return n;return a.length==i.length?"same":a.length<i.length?"prefix":"extension"}var Wa=function(i){return Oi(i,4)},Qt=function(){function a(i){A(this,a),this.document=i,this.parent=null}return C(a,[{key:"index",get:function(){var e;if(!this.parent)return null;if(-1==(e=this.parent.getChildIndex(this)))throw new I.b("view-node-not-found-in-parent: The node's parent does not contain this node.",this);return e}},{key:"nextSibling",get:function(){var e=this.index;return null!==e&&this.parent.getChild(e+1)||null}},{key:"previousSibling",get:function(){var e=this.index;return null!==e&&this.parent.getChild(e-1)||null}},{key:"root",get:function(){for(var e=this;e.parent;)e=e.parent;return e}},{key:"isAttached",value:function(){return this.root.is("rootElement")}},{key:"getPath",value:function(){for(var e=[],n=this;n.parent;)e.unshift(n.index),n=n.parent;return e}},{key:"getAncestors",value:function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{includeSelf:!1,parentFirst:!1},n=[],t=e.includeSelf?this:this.parent;t;)n[e.parentFirst?"push":"unshift"](t),t=t.parent;return n}},{key:"getCommonAncestor",value:function(e){for(var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},t=this.getAncestors(n),r=e.getAncestors(n),o=0;t[o]==r[o]&&t[o];)o++;return 0===o?null:t[o-1]}},{key:"isBefore",value:function(e){if(this==e||this.root!==e.root)return!1;var n=this.getPath(),t=e.getPath(),r=tt(n,t);switch(r){case"prefix":return!0;case"extension":return!1;default:return n[r]<t[r]}}},{key:"isAfter",value:function(e){return this!=e&&this.root===e.root&&!this.isBefore(e)}},{key:"_remove",value:function(){this.parent._removeChildren(this.index)}},{key:"_fireChange",value:function(e,n){this.fire("change:"+e,n),this.parent&&this.parent._fireChange(e,n)}},{key:"toJSON",value:function(){var e=Wa(this);return delete e.parent,e}},{key:"is",value:function(e){return"node"===e||"view:node"===e}}]),a}();se(Qt,Se);var Pe=function(a){P(e,a);var i=M(e);function e(n,t){var r;return A(this,e),(r=i.call(this,n))._textData=t,r}return C(e,[{key:"is",value:function(t){return"$text"===t||"view:$text"===t||"text"===t||"view:text"===t||"node"===t||"view:node"===t}},{key:"data",get:function(){return this._textData}},{key:"_data",get:function(){return this.data},set:function(t){this._fireChange("text",this),this._textData=t}},{key:"isSimilar",value:function(t){return t instanceof e&&(this===t||this.data===t.data)}},{key:"_clone",value:function(){return new e(this.document,this.data)}}]),e}(Qt),Mt=function(){function a(i,e,n){if(A(this,a),this.textNode=i,e<0||e>i.data.length)throw new I.b("view-textproxy-wrong-offsetintext: Given offsetInText value is incorrect.",this);if(n<0||e+n>i.data.length)throw new I.b("view-textproxy-wrong-length: Given length value is incorrect.",this);this.data=i.data.substring(e,e+n),this.offsetInText=e}return C(a,[{key:"offsetSize",get:function(){return this.data.length}},{key:"isPartial",get:function(){return this.data.length!==this.textNode.data.length}},{key:"parent",get:function(){return this.textNode.parent}},{key:"root",get:function(){return this.textNode.root}},{key:"document",get:function(){return this.textNode.document}},{key:"is",value:function(e){return"$textProxy"===e||"view:$textProxy"===e||"textProxy"===e||"view:textProxy"===e}},{key:"getAncestors",value:function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{includeSelf:!1,parentFirst:!1},n=[],t=e.includeSelf?this.textNode:this.parent;null!==t;)n[e.parentFirst?"push":"unshift"](t),t=t.parent;return n}}]),a}();function It(a){return dt(a)?new Map(a):function(i){var e=new Map;for(var n in i)e.set(n,i[n]);return e}(a)}var Nt=function(){function a(){A(this,a),this._patterns=[],this.add.apply(this,arguments)}return C(a,[{key:"add",value:function(){for(var e=arguments.length,n=new Array(e),t=0;t<e;t++)n[t]=arguments[t];for(var r=0,o=n;r<o.length;r++){var s=o[r];("string"==typeof s||s instanceof RegExp)&&(s={name:s}),s.classes&&("string"==typeof s.classes||s.classes instanceof RegExp)&&(s.classes=[s.classes]),this._patterns.push(s)}}},{key:"match",value:function(){for(var e=arguments.length,n=new Array(e),t=0;t<e;t++)n[t]=arguments[t];for(var r=0,o=n;r<o.length;r++){var c,s=o[r],l=k(this._patterns);try{for(l.s();!(c=l.n()).done;){var u=c.value,d=qa(s,u);if(d)return{element:s,pattern:u,match:d}}}catch(h){l.e(h)}finally{l.f()}}return null}},{key:"matchAll",value:function(){for(var e=[],n=arguments.length,t=new Array(n),r=0;r<n;r++)t[r]=arguments[r];for(var o=0,s=t;o<s.length;o++){var u,l=s[o],c=k(this._patterns);try{for(c.s();!(u=c.n()).done;){var d=u.value,h=qa(l,d);h&&e.push({element:l,pattern:d,match:h})}}catch(f){c.e(f)}finally{c.f()}}return e.length>0?e:null}},{key:"getElementName",value:function(){if(1!==this._patterns.length)return null;var e=this._patterns[0],n=e.name;return"function"==typeof e||!n||n instanceof RegExp?null:n}}]),a}();function qa(a,i){if("function"==typeof i)return i(a);var n,t,e={};return i.name&&(e.name=(t=a.name,(n=i.name)instanceof RegExp?n.test(t):n===t),!e.name)||i.attributes&&(e.attributes=function(n,t){var r=[];for(var o in n){var s=n[o];if(!t.hasAttribute(o))return null;var l=t.getAttribute(o);if(!0===s)r.push(o);else if(s instanceof RegExp){if(!s.test(l))return null;r.push(o)}else{if(l!==s)return null;r.push(o)}}return r}(i.attributes,a),!e.attributes)?null:!(i.classes&&(e.classes=function(n,t){var s,r=[],o=k(n);try{for(o.s();!(s=o.n()).done;){var l=s.value;if(l instanceof RegExp){var d,c=t.getClassNames(),u=k(c);try{for(u.s();!(d=u.n()).done;){var h=d.value;l.test(h)&&r.push(h)}}catch(f){u.e(f)}finally{u.f()}if(0===r.length)return null}else{if(!t.hasClass(l))return null;r.push(l)}}}catch(f){o.e(f)}finally{o.f()}return r}(i.classes,a),!e.classes))&&!(i.styles&&(e.styles=function(n,t){var r=[];for(var o in n){var s=n[o];if(!t.hasStyle(o))return null;var l=t.getStyle(o);if(s instanceof RegExp){if(!s.test(l))return null;r.push(o)}else{if(l!==s)return null;r.push(o)}}return r}(i.styles,a),!e.styles))&&e}var gr=function(i){return"symbol"==typeof i||ae(i)&&"[object Symbol]"==wt(i)},Ef=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Mf=/^\w*$/;function zi(a,i){if("function"!=typeof a||null!=i&&"function"!=typeof i)throw new TypeError("Expected a function");var e=function n(){var t=arguments,r=i?i.apply(this,t):t[0],o=n.cache;if(o.has(r))return o.get(r);var s=a.apply(this,t);return n.cache=o.set(r,s)||o,s};return e.cache=new(zi.Cache||dr),e}zi.Cache=dr;var a,i,e,Rf=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Of=/\\(\\)?/g,Df=(a=function(a){var i=[];return 46===a.charCodeAt(0)&&i.push(""),a.replace(Rf,function(e,n,t,r){i.push(t?r.replace(Of,"$1"):n||e)}),i},i=zi(a,function(n){return 500===e.size&&e.clear(),n}),e=i.cache,i),Ga=ke?ke.prototype:void 0,Ya=Ga?Ga.toString:void 0,Vf=function a(i){if("string"==typeof i)return i;if(et(i))return function(i,e){for(var n=-1,t=null==i?0:i.length,r=Array(t);++n<t;)r[n]=e(i[n],n,i);return r}(i,a)+"";if(gr(i))return Ya?Ya.call(i):"";var e=i+"";return"0"==e&&1/i==-1/0?"-0":e},Fi=function(i){return null==i?"":Vf(i)},Ui=function(i,e){return et(i)?i:function(i,e){if(et(i))return!1;var n=typeof i;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=i&&!gr(i))||Mf.test(i)||!Ef.test(i)||null!=e&&i in Object(e)}(i,e)?[i]:Df(Fi(i))},Hi=function(i){if("string"==typeof i||gr(i))return i;var e=i+"";return"0"==e&&1/i==-1/0?"-0":e},$a=function(i,e){for(var n=0,t=(e=Ui(e,i)).length;null!=i&&n<t;)i=i[Hi(e[n++])];return n&&n==t?i:void 0},Ka=function(i,e,n){var t=-1,r=i.length;e<0&&(e=-e>r?0:r+e),(n=n>r?r:n)<0&&(n+=r),r=e>n?0:n-e>>>0,e>>>=0;for(var o=Array(r);++t<r;)o[t]=i[t+e];return o},zf=function(i,e){return null==(i=function(i,e){return e.length<2?i:$a(i,Ka(e,0,-1))}(i,e=Ui(e,i)))||delete i[Hi(function(i){var e=null==i?0:i.length;return e?i[e-1]:void 0}(e))]},mr=function(i,e,n){var t=null==i?void 0:$a(i,e);return void 0===t?n:t},Wi=function(i,e,n){(void 0!==n&&!Vt(i[e],n)||void 0===n&&!(e in i))&&yi(i,e,n)},Uf=function(i,e,n){for(var t=-1,r=Object(i),o=n(i),s=o.length;s--;){var l=o[++t];if(!1===e(r[l],l,r))break}return i},qi=function(i,e){if(("constructor"!==e||"function"!=typeof i[e])&&"__proto__"!=e)return i[e]},qf=function(i,e,n,t,r,o,s){var l=qi(i,n),c=qi(e,n),u=s.get(c);if(u)Wi(i,n,u);else{var d=o?o(l,c,n+"",i,e,s):void 0,h=void 0===d;if(h){var f=et(c),v=!f&&Object(jn.a)(c),g=!f&&!v&&Ci(c);d=c,f||v||g?et(l)?d=l:function(i){return ae(i)&&fr(i)}(l)?d=Aa(l):v?(h=!1,d=Object(_a.a)(c,!0)):g?(h=!1,d=Ia(c,!0)):d=[]:qe(c)||wi(c)?(d=l,wi(l)?d=function(i){return fn(i,Bn(i))}(l):He(l)&&!On(l)||(d=Ra(c))):h=!1}h&&(s.set(c,d),r(d,c,t,o,s),s.delete(c)),Wi(i,n,d)}},Gf=function a(i,e,n,t,r){i!==e&&Uf(e,function(o,s){if(r||(r=new Vn),He(o))qf(i,e,s,n,a,t,r);else{var l=t?t(qi(i,s),o,s+"",i,e,r):void 0;void 0===l&&(l=o),Wi(i,s,l)}},Bn)},Ja=function(i){return i},Yf=function(i,e,n){switch(n.length){case 0:return i.call(e);case 1:return i.call(e,n[0]);case 2:return i.call(e,n[0],n[1]);case 3:return i.call(e,n[0],n[1],n[2])}return i.apply(e,n)},Qa=Math.max,Kf=function(i){return function(){return i}},Jf=hr?function(a,i){return hr(a,"toString",{configurable:!0,enumerable:!1,value:Kf(i),writable:!0})}:Ja,Qf=Date.now,Zf=function(a){var i=0,e=0;return function(){var n=Qf(),t=16-(n-e);if(e=n,t>0){if(++i>=800)return arguments[0]}else i=0;return a.apply(void 0,arguments)}}(Jf),Xf=function(i,e){return Zf(function(i,e,n){return e=Qa(void 0===e?i.length-1:e,0),function(){for(var t=arguments,r=-1,o=Qa(t.length-e,0),s=Array(o);++r<o;)s[r]=t[e+r];r=-1;for(var l=Array(e+1);++r<e;)l[r]=t[r];return l[e]=n(s),Yf(i,this,l)}}(i,e,Ja),i+"")},Za=function(i){return Xf(function(e,n){var t=-1,r=n.length,o=r>1?n[r-1]:void 0,s=r>2?n[2]:void 0;for(o=i.length>3&&"function"==typeof o?(r--,o):void 0,s&&function(i,e,n){if(!He(n))return!1;var t=typeof e;return!!("number"==t?fr(n)&&_i(e,n.length):"string"==t&&e in n)&&Vt(n[e],i)}(n[0],n[1],s)&&(o=r<3?void 0:o,r=1),e=Object(e);++t<r;){var l=n[t];l&&i(e,l,t,o)}return e})},Xa=Za(function(a,i,e){Gf(a,i,e)}),nv=function(i,e,n){return null==i?i:function(i,e,n,t){if(!He(i))return i;for(var r=-1,o=(e=Ui(e,i)).length,s=o-1,l=i;null!=l&&++r<o;){var c=Hi(e[r]),u=n;if(r!=s){var d=l[c];void 0===(u=t?t(d,c,l):void 0)&&(u=He(d)?d:_i(e[r+1])?[]:{})}bi(l,c,u),l=l[c]}return i}(i,e,n)},rv=function(){function a(i){A(this,a),this._styles={},this._styleProcessor=i}return C(a,[{key:"isEmpty",get:function(){var e=Object.entries(this._styles);return!Array.from(e).length}},{key:"size",get:function(){return this.isEmpty?0:this.getStyleNames().length}},{key:"setTo",value:function(e){this.clear();for(var t=0,r=Array.from(function(c){var u=null,d=0,h=0,f=null,v=new Map;if(""===c)return v;";"!=c.charAt(c.length-1)&&(c+=";");for(var g=0;g<c.length;g++){var m=c.charAt(g);if(null===u)switch(m){case":":f||(f=c.substr(d,g-d),h=g+1);break;case'"':case"'":u=m;break;case";":var p=c.substr(h,g-h);f&&v.set(f.trim(),p.trim()),f=null,d=g+1}else m===u&&(u=null)}return v}(e).entries());t<r.length;t++){var o=ee(r[t],2);this._styleProcessor.toNormalizedForm(o[0],o[1],this._styles)}}},{key:"has",value:function(e){if(this.isEmpty)return!1;var n=this._styleProcessor.getReducedForm(e,this._styles).find(function(t){return ee(t,1)[0]===e});return Array.isArray(n)}},{key:"set",value:function(e,n){if(He(e))for(var t=0,r=Object.entries(e);t<r.length;t++){var o=ee(r[t],2);this._styleProcessor.toNormalizedForm(o[0],o[1],this._styles)}else this._styleProcessor.toNormalizedForm(e,n,this._styles)}},{key:"remove",value:function(e){var n=Gi(e);(function(i,e){null==i||zf(i,e)})(this._styles,n),delete this._styles[e],this._cleanEmptyObjectsOnPath(n)}},{key:"getNormalized",value:function(e){return this._styleProcessor.getNormalized(e,this._styles)}},{key:"toString",value:function(){return this.isEmpty?"":this._getStylesEntries().map(function(e){return e.join(":")}).sort().join(";")+";"}},{key:"getAsString",value:function(e){if(!this.isEmpty){if(this._styles[e]&&!He(this._styles[e]))return this._styles[e];var n=this._styleProcessor.getReducedForm(e,this._styles).find(function(t){return ee(t,1)[0]===e});return Array.isArray(n)?n[1]:void 0}}},{key:"getStyleNames",value:function(){return this.isEmpty?[]:this._getStylesEntries().map(function(e){return ee(e,1)[0]})}},{key:"clear",value:function(){this._styles={}}},{key:"_getStylesEntries",value:function(){for(var e=[],t=0,r=Object.keys(this._styles);t<r.length;t++)e.push.apply(e,Y(this._styleProcessor.getReducedForm(r[t],this._styles)));return e}},{key:"_cleanEmptyObjectsOnPath",value:function(e){var n=e.split(".");if(n.length>1){var t=n.splice(0,n.length-1).join("."),r=mr(this._styles,t);!r||!Array.from(Object.keys(r)).length&&this.remove(t)}}}]),a}(),iv=function(){function a(){A(this,a),this._normalizers=new Map,this._extractors=new Map,this._reducers=new Map,this._consumables=new Map}return C(a,[{key:"toNormalizedForm",value:function(e,n,t){if(He(n))Yi(t,Gi(e),n);else if(this._normalizers.has(e)){var o=this._normalizers.get(e)(n);Yi(t,o.path,o.value)}else Yi(t,e,n)}},{key:"getNormalized",value:function(e,n){if(!e)return Xa({},n);if(void 0!==n[e])return n[e];if(this._extractors.has(e)){var t=this._extractors.get(e);if("string"==typeof t)return mr(n,t);var r=t(e,n);if(r)return r}return mr(n,Gi(e))}},{key:"getReducedForm",value:function(e,n){var t=this.getNormalized(e,n);return void 0===t?[]:this._reducers.has(e)?this._reducers.get(e)(t):[[e,t]]}},{key:"getRelatedStyles",value:function(e){return this._consumables.get(e)||[]}},{key:"setNormalizer",value:function(e,n){this._normalizers.set(e,n)}},{key:"setExtractor",value:function(e,n){this._extractors.set(e,n)}},{key:"setReducer",value:function(e,n){this._reducers.set(e,n)}},{key:"setStyleRelation",value:function(e,n){this._mapStyleNames(e,n);var r,t=k(n);try{for(t.s();!(r=t.n()).done;)this._mapStyleNames(r.value,[e])}catch(s){t.e(s)}finally{t.f()}}},{key:"_mapStyleNames",value:function(e,n){var t;this._consumables.has(e)||this._consumables.set(e,[]),(t=this._consumables.get(e)).push.apply(t,Y(n))}}]),a}();function Gi(a){return a.replace("-",".")}function Yi(a,i,e){var n=e;He(e)&&(n=Xa({},mr(a,i),e)),nv(a,i,n)}var _t=function(a){P(e,a);var i=M(e);function e(n,t,r,o){var s;if(A(this,e),(s=i.call(this,n)).name=t,s._attrs=function(c){c=It(c);var d,u=k(c);try{for(u.s();!(d=u.n()).done;){var h=ee(d.value,2),f=h[0],v=h[1];null===v?c.delete(f):"string"!=typeof v&&c.set(f,String(v))}}catch(g){u.e(g)}finally{u.f()}return c}(r),s._children=[],o&&s._insertChild(0,o),s._classes=new Set,s._attrs.has("class")){var l=s._attrs.get("class");es(s._classes,l),s._attrs.delete("class")}return s._styles=new rv(s.document.stylesProcessor),s._attrs.has("style")&&(s._styles.setTo(s._attrs.get("style")),s._attrs.delete("style")),s._customProperties=new Map,Ie(s)}return C(e,[{key:"childCount",get:function(){return this._children.length}},{key:"isEmpty",get:function(){return 0===this._children.length}},{key:"is",value:function(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return r?r===this.name&&("element"===t||"view:element"===t):"element"===t||"view:element"===t||"node"===t||"view:node"===t}},{key:"getChild",value:function(t){return this._children[t]}},{key:"getChildIndex",value:function(t){return this._children.indexOf(t)}},{key:"getChildren",value:function(){return this._children[Symbol.iterator]()}},{key:"getAttributeKeys",value:G.mark(function n(){return G.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:if(r.t0=this._classes.size>0,!r.t0){r.next=4;break}return r.next=4,"class";case 4:if(r.t1=this._styles.isEmpty,r.t1){r.next=8;break}return r.next=8,"style";case 8:return r.delegateYield(this._attrs.keys(),"t2",9);case 9:case"end":return r.stop()}},n,this)})},{key:"getAttributes",value:G.mark(function n(){return G.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.delegateYield(this._attrs.entries(),"t0",1);case 1:if(r.t1=this._classes.size>0,!r.t1){r.next=5;break}return r.next=5,["class",this.getAttribute("class")];case 5:if(r.t2=this._styles.isEmpty,r.t2){r.next=9;break}return r.next=9,["style",this.getAttribute("style")];case 9:case"end":return r.stop()}},n,this)})},{key:"getAttribute",value:function(t){if("class"==t)return this._classes.size>0?Y(this._classes).join(" "):void 0;if("style"==t){var r=this._styles.toString();return""==r?void 0:r}return this._attrs.get(t)}},{key:"hasAttribute",value:function(t){return"class"==t?this._classes.size>0:"style"==t?!this._styles.isEmpty:this._attrs.has(t)}},{key:"isSimilar",value:function(t){if(!(t instanceof e))return!1;if(this===t)return!0;if(this.name!=t.name||this._attrs.size!==t._attrs.size||this._classes.size!==t._classes.size||this._styles.size!==t._styles.size)return!1;var o,r=k(this._attrs);try{for(r.s();!(o=r.n()).done;){var s=ee(o.value,2),l=s[0],c=s[1];if(!t._attrs.has(l)||t._attrs.get(l)!==c)return!1}}catch(m){r.e(m)}finally{r.f()}var d,u=k(this._classes);try{for(u.s();!(d=u.n()).done;)if(!t._classes.has(d.value))return!1}catch(m){u.e(m)}finally{u.f()}var v,f=k(this._styles.getStyleNames());try{for(f.s();!(v=f.n()).done;){var g=v.value;if(!t._styles.has(g)||t._styles.getAsString(g)!==this._styles.getAsString(g))return!1}}catch(m){f.e(m)}finally{f.f()}return!0}},{key:"hasClass",value:function(){for(var t=arguments.length,r=new Array(t),o=0;o<t;o++)r[o]=arguments[o];for(var s=0,l=r;s<l.length;s++)if(!this._classes.has(l[s]))return!1;return!0}},{key:"getClassNames",value:function(){return this._classes.keys()}},{key:"getStyle",value:function(t){return this._styles.getAsString(t)}},{key:"getNormalizedStyle",value:function(t){return this._styles.getNormalized(t)}},{key:"getStyleNames",value:function(){return this._styles.getStyleNames()}},{key:"hasStyle",value:function(){for(var t=arguments.length,r=new Array(t),o=0;o<t;o++)r[o]=arguments[o];for(var s=0,l=r;s<l.length;s++)if(!this._styles.has(l[s]))return!1;return!0}},{key:"findAncestor",value:function(){for(var t=arguments.length,r=new Array(t),o=0;o<t;o++)r[o]=arguments[o];for(var s=ce(Nt,r),l=this.parent;l;){if(s.match(l))return l;l=l.parent}return null}},{key:"getCustomProperty",value:function(t){return this._customProperties.get(t)}},{key:"getCustomProperties",value:G.mark(function n(){return G.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.delegateYield(this._customProperties.entries(),"t0",1);case 1:case"end":return r.stop()}},n,this)})},{key:"getIdentity",value:function(){var t=Array.from(this._classes).sort().join(","),r=this._styles.toString(),o=Array.from(this._attrs).map(function(s){return"".concat(s[0],'="').concat(s[1],'"')}).sort().join(" ");return this.name+(""==t?"":' class="'.concat(t,'"'))+(r?' style="'.concat(r,'"'):"")+(""==o?"":" "+o)}},{key:"_clone",value:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],r=[];if(t){var s,o=k(this.getChildren());try{for(o.s();!(s=o.n()).done;)r.push(s.value._clone(t))}catch(u){o.e(u)}finally{o.f()}}var c=new this.constructor(this.document,this.name,this._attrs,r);return c._classes=new Set(this._classes),c._styles.set(this._styles.getNormalized()),c._customProperties=new Map(this._customProperties),c.getFillerOffset=this.getFillerOffset,c}},{key:"_appendChild",value:function(t){return this._insertChild(this.childCount,t)}},{key:"_insertChild",value:function(t,r){this._fireChange("children",this);var c,d,h,o=0,s=(d=this.document,"string"==typeof(h=r)?[new Pe(d,h)]:(dt(h)||(h=[h]),Array.from(h).map(function(f){return"string"==typeof f?new Pe(d,f):f instanceof Mt?new Pe(d,f.data):f}))),l=k(s);try{for(l.s();!(c=l.n()).done;){var u=c.value;null!==u.parent&&u._remove(),u.parent=this,u.document=this.document,this._children.splice(t,0,u),t++,o++}}catch(d){l.e(d)}finally{l.f()}return o}},{key:"_removeChildren",value:function(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;this._fireChange("children",this);for(var o=t;o<t+r;o++)this._children[o].parent=null;return this._children.splice(t,r)}},{key:"_setAttribute",value:function(t,r){r=String(r),this._fireChange("attributes",this),"class"==t?es(this._classes,r):"style"==t?this._styles.setTo(r):this._attrs.set(t,r)}},{key:"_removeAttribute",value:function(t){return this._fireChange("attributes",this),"class"==t?this._classes.size>0&&(this._classes.clear(),!0):"style"==t?!this._styles.isEmpty&&(this._styles.clear(),!0):this._attrs.delete(t)}},{key:"_addClass",value:function(t){var r=this;this._fireChange("attributes",this),(t=Array.isArray(t)?t:[t]).forEach(function(o){return r._classes.add(o)})}},{key:"_removeClass",value:function(t){var r=this;this._fireChange("attributes",this),(t=Array.isArray(t)?t:[t]).forEach(function(o){return r._classes.delete(o)})}},{key:"_setStyle",value:function(t,r){this._fireChange("attributes",this),this._styles.set(t,r)}},{key:"_removeStyle",value:function(t){var r=this;this._fireChange("attributes",this),(t=Array.isArray(t)?t:[t]).forEach(function(o){return r._styles.remove(o)})}},{key:"_setCustomProperty",value:function(t,r){this._customProperties.set(t,r)}},{key:"_removeCustomProperty",value:function(t){return this._customProperties.delete(t)}}]),e}(Qt);function es(a,i){var e=i.split(/\s+/);a.clear(),e.forEach(function(n){return a.add(n)})}var pr=function(a){P(e,a);var i=M(e);function e(n,t,r,o){var s;return A(this,e),(s=i.call(this,n,t,r,o)).getFillerOffset=ts,s}return C(e,[{key:"is",value:function(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return r?r===this.name&&("containerElement"===t||"view:containerElement"===t||"element"===t||"view:element"===t):"containerElement"===t||"view:containerElement"===t||"element"===t||"view:element"===t||"node"===t||"view:node"===t}}]),e}(_t);function ts(){var a=Y(this.getChildren()),i=a[this.childCount-1];if(i&&i.is("element","br"))return this.childCount;var n,e=k(a);try{for(e.s();!(n=e.n()).done;)if(!n.value.is("uiElement"))return null}catch(r){e.e(r)}finally{e.f()}return this.childCount}var Un=Za(function(a,i){fn(i,Bn(i),a)}),kr=Symbol("observableProperties"),yr=Symbol("boundObservables"),br=Symbol("boundProperties"),ns={set:function(i,e){var n=this;if(He(i))Object.keys(i).forEach(function(r){n.set(r,i[r])},this);else{rs(this);var t=this[kr];if(i in this&&!t.has(i))throw new I.b("observable-set-cannot-override: Cannot override an existing property.",this);Object.defineProperty(this,i,{enumerable:!0,configurable:!0,get:function(){return t.get(i)},set:function(o){var s=t.get(i),l=this.fire("set:"+i,i,o,s);void 0===l&&(l=o),s===l&&t.has(i)||(t.set(i,l),this.fire("change:"+i,i,l,s))}}),this[i]=e}},bind:function(){for(var i=this,e=arguments.length,n=new Array(e),t=0;t<e;t++)n[t]=arguments[t];if(!n.length||!is(n))throw new I.b("observable-bind-wrong-properties: All properties must be strings.",this);if(new Set(n).size!==n.length)throw new I.b("observable-bind-duplicate-properties: Properties must be unique.",this);rs(this);var r=this[br];n.forEach(function(s){if(r.has(s))throw new I.b("observable-bind-rebind: Cannot bind the same property more than once.",i)});var o=new Map;return n.forEach(function(s){var l={property:s,to:[]};r.set(s,l),o.set(s,l)}),{to:ov,toMany:av,_observable:this,_bindProperties:n,_to:[],_bindings:o}},unbind:function(){var i=this;if(this[kr]){for(var e=this[br],n=this[yr],t=arguments.length,r=new Array(t),o=0;o<t;o++)r[o]=arguments[o];if(r.length){if(!is(r))throw new I.b("observable-unbind-wrong-properties: Properties must be strings.",this);r.forEach(function(s){var c,u,d,h,l=e.get(s);l&&(l.to.forEach(function(f){u=f[1],d=n.get(c=f[0]),(h=d[u]).delete(l),h.size||delete d[u],Object.keys(d).length||(n.delete(c),i.stopListening(c,"change"))}),e.delete(s))})}else n.forEach(function(s,l){i.stopListening(l,"change")}),n.clear(),e.clear()}},decorate:function(i){var e=this,n=this[i];if(!n)throw new I.b("observablemixin-cannot-decorate-undefined: Cannot decorate an undefined method.",this,{object:this,methodName:i});this.on(i,function(t,r){t.return=n.apply(e,r)}),this[i]=function(){for(var t=arguments.length,r=new Array(t),o=0;o<t;o++)r[o]=arguments[o];return this.fire(i,r)}}};Un(ns,Se);var Re=ns;function rs(a){a[kr]||(Object.defineProperty(a,kr,{value:new Map}),Object.defineProperty(a,yr,{value:new Map}),Object.defineProperty(a,br,{value:new Map}))}function ov(){var t,r,o,a=this,i=function(){for(var r=arguments.length,o=new Array(r),s=0;s<r;s++)o[s]=arguments[s];if(!o.length)throw new I.b("observable-bind-to-parse-error: Invalid argument syntax in `to()`.",null);var c,l={to:[]};return"function"==typeof o[o.length-1]&&(l.callback=o.pop()),o.forEach(function(u){if("string"==typeof u)c.properties.push(u);else{if("object"!=typeof u)throw new I.b("observable-bind-to-parse-error: Invalid argument syntax in `to()`.",null);l.to.push(c={observable:u,properties:[]})}}),l}.apply(void 0,arguments),e=Array.from(this._bindings.keys()),n=e.length;if(!i.callback&&i.to.length>1)throw new I.b("observable-bind-to-no-callback: Binding multiple observables only possible with callback.",this);if(n>1&&i.callback)throw new I.b("observable-bind-to-extra-callback: Cannot bind multiple properties and use a callback in one binding.",this);i.to.forEach(function(r){if(r.properties.length&&r.properties.length!==n)throw new I.b("observable-bind-to-properties-length: The number of properties must match.",a);r.properties.length||(r.properties=a._bindProperties)}),this._to=i.to,i.callback&&(this._bindings.get(e[0]).callback=i.callback),t=this._observable,this._to.forEach(function(r){var s,o=t[yr];o.get(r.observable)||t.listenTo(r.observable,"change",function(l,c){(s=o.get(r.observable)[c])&&s.forEach(function(u){os(t,u.property)})})}),(r=this)._bindings.forEach(function(s,l){r._to.forEach(function(c){var d,h,f,v,g,m;o=c.properties[s.callback?0:r._bindProperties.indexOf(l)],s.to.push([c.observable,o]),d=s,f=o,(m=(g=(v=r._observable[yr]).get(h=c.observable))||{})[f]||(m[f]=new Set),m[f].add(d),g||v.set(h,m)})}),this._bindProperties.forEach(function(r){os(a._observable,r)})}function av(a,i,e){if(this._bindings.size>1)throw new I.b("observable-bind-to-many-not-one-binding: Cannot bind multiple properties with toMany().",this);var n,t,r;this.to.apply(this,Y((n=a,t=i,r=n.map(function(o){return[o,t]}),Array.prototype.concat.apply([],r))).concat([e]))}function is(a){return a.every(function(i){return"string"==typeof i})}function os(a,i){var n,e=a[br].get(i);n=e.callback?e.callback.apply(a,e.to.map(function(t){return t[0][t[1]]})):(n=e.to[0])[0][n[1]],Object.prototype.hasOwnProperty.call(a,i)?a[i]=n:a.set(i,n)}var wr=function(a){P(e,a);var i=M(e);function e(n,t,r,o){var s;return A(this,e),(s=i.call(this,n,t,r,o)).set("isReadOnly",!1),s.set("isFocused",!1),s.bind("isReadOnly").to(n),s.bind("isFocused").to(n,"isFocused",function(l){return l&&n.selection.editableElement==X(s)}),s.listenTo(n.selection,"change",function(){s.isFocused=n.isFocused&&n.selection.editableElement==X(s)}),s}return C(e,[{key:"is",value:function(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return r?r===this.name&&("editableElement"===t||"view:editableElement"===t||"containerElement"===t||"view:containerElement"===t||"element"===t||"view:element"===t):"editableElement"===t||"view:editableElement"===t||"containerElement"===t||"view:containerElement"===t||"element"===t||"view:element"===t||"node"===t||"view:node"===t}},{key:"destroy",value:function(){this.stopListening()}}]),e}(pr);se(wr,Re);var as=Symbol("rootName"),sv=function(a){P(e,a);var i=M(e);function e(n,t){var r;return A(this,e),(r=i.call(this,n,t)).rootName="main",r}return C(e,[{key:"is",value:function(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return r?r===this.name&&("rootElement"===t||"view:rootElement"===t||"editableElement"===t||"view:editableElement"===t||"containerElement"===t||"view:containerElement"===t||"element"===t||"view:element"===t):"rootElement"===t||"view:rootElement"===t||"editableElement"===t||"view:editableElement"===t||"containerElement"===t||"view:containerElement"===t||"element"===t||"view:element"===t||"node"===t||"view:node"===t}},{key:"rootName",get:function(){return this.getCustomProperty(as)},set:function(t){this._setCustomProperty(as,t)}},{key:"_name",set:function(t){this.name=t}}]),e}(wr),Zt=function(a){function i(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(A(this,i),!e.boundaries&&!e.startPosition)throw new I.b("view-tree-walker-no-start-position: Neither boundaries nor starting position have been defined.",null);if(e.direction&&"forward"!=e.direction&&"backward"!=e.direction)throw new I.b("view-tree-walker-unknown-direction: Only `backward` and `forward` direction allowed.",e.startPosition,{direction:e.direction});this.boundaries=e.boundaries||null,this.position=Z._createAt(e.startPosition?e.startPosition:e.boundaries["backward"==e.direction?"end":"start"]),this.direction=e.direction||"forward",this.singleCharacters=!!e.singleCharacters,this.shallow=!!e.shallow,this.ignoreElementEnd=!!e.ignoreElementEnd,this._boundaryStartParent=this.boundaries?this.boundaries.start.parent:null,this._boundaryEndParent=this.boundaries?this.boundaries.end.parent:null}return C(i,[{key:a,value:function(){return this}},{key:"skip",value:function(n){var t,r,o;do{var s;o=this.position,t=(s=this.next()).done,r=s.value}while(!t&&n(r));t||(this.position=o)}},{key:"next",value:function(){return"forward"==this.direction?this._next():this._previous()}},{key:"_next",value:function(){var o,n=this.position.clone(),t=this.position,r=n.parent;if(null===r.parent&&n.offset===r.childCount)return{done:!0};if(r===this._boundaryEndParent&&n.offset==this.boundaries.end.offset)return{done:!0};if(r instanceof Pe){if(n.isAtEnd)return this.position=Z._createAfter(r),this._next();o=r.data[n.offset]}else o=r.getChild(n.offset);if(o instanceof _t)return this.shallow?n.offset++:n=new Z(o,0),this.position=n,this._formatReturnValue("elementStart",o,t,n,1);if(o instanceof Pe){if(this.singleCharacters)return n=new Z(o,0),this.position=n,this._next();var s,l=o.data.length;return o==this._boundaryEndParent?(s=new Mt(o,0,l=this.boundaries.end.offset),n=Z._createAfter(s)):(s=new Mt(o,0,o.data.length),n.offset++),this.position=n,this._formatReturnValue("text",s,t,n,l)}if("string"==typeof o){var c,u=new Mt(r,n.offset,c=this.singleCharacters?1:(r===this._boundaryEndParent?this.boundaries.end.offset:r.data.length)-n.offset);return n.offset+=c,this.position=n,this._formatReturnValue("text",u,t,n,c)}return n=Z._createAfter(r),this.position=n,this.ignoreElementEnd?this._next():this._formatReturnValue("elementEnd",r,t,n)}},{key:"_previous",value:function(){var o,n=this.position.clone(),t=this.position,r=n.parent;if(null===r.parent&&0===n.offset)return{done:!0};if(r==this._boundaryStartParent&&n.offset==this.boundaries.start.offset)return{done:!0};if(r instanceof Pe){if(n.isAtStart)return this.position=Z._createBefore(r),this._previous();o=r.data[n.offset-1]}else o=r.getChild(n.offset-1);if(o instanceof _t)return this.shallow?(n.offset--,this.position=n,this._formatReturnValue("elementStart",o,t,n,1)):(n=new Z(o,o.childCount),this.position=n,this.ignoreElementEnd?this._previous():this._formatReturnValue("elementEnd",o,t,n));if(o instanceof Pe){if(this.singleCharacters)return n=new Z(o,o.data.length),this.position=n,this._previous();var s,l=o.data.length;if(o==this._boundaryStartParent){var c=this.boundaries.start.offset;l=(s=new Mt(o,c,o.data.length-c)).data.length,n=Z._createBefore(s)}else s=new Mt(o,0,o.data.length),n.offset--;return this.position=n,this._formatReturnValue("text",s,t,n,l)}if("string"==typeof o){var u;n.offset-=u=this.singleCharacters?1:n.offset-(r===this._boundaryStartParent?this.boundaries.start.offset:0);var h=new Mt(r,n.offset,u);return this.position=n,this._formatReturnValue("text",h,t,n,u)}return n=Z._createBefore(r),this.position=n,this._formatReturnValue("elementStart",r,t,n,1)}},{key:"_formatReturnValue",value:function(n,t,r,o,s){return t instanceof Mt&&(t.offsetInText+t.data.length==t.textNode.data.length&&("forward"!=this.direction||this.boundaries&&this.boundaries.end.isEqual(this.position)?r=Z._createAfter(t.textNode):(o=Z._createAfter(t.textNode),this.position=o)),0===t.offsetInText&&("backward"!=this.direction||this.boundaries&&this.boundaries.start.isEqual(this.position)?r=Z._createBefore(t.textNode):(o=Z._createBefore(t.textNode),this.position=o))),{done:!1,value:{type:n,item:t,previousPosition:r,nextPosition:o,length:s}}}}]),i}(Symbol.iterator),Z=function(){function a(i,e){A(this,a),this.parent=i,this.offset=e}return C(a,[{key:"nodeAfter",get:function(){return this.parent.is("$text")?null:this.parent.getChild(this.offset)||null}},{key:"nodeBefore",get:function(){return this.parent.is("$text")?null:this.parent.getChild(this.offset-1)||null}},{key:"isAtStart",get:function(){return 0===this.offset}},{key:"isAtEnd",get:function(){var e=this.parent.is("$text")?this.parent.data.length:this.parent.childCount;return this.offset===e}},{key:"root",get:function(){return this.parent.root}},{key:"editableElement",get:function(){for(var e=this.parent;!(e instanceof wr);){if(!e.parent)return null;e=e.parent}return e}},{key:"getShiftedBy",value:function(e){var n=a._createAt(this),t=n.offset+e;return n.offset=t<0?0:t,n}},{key:"getLastMatchingPosition",value:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};n.startPosition=this;var t=new Zt(n);return t.skip(e),t.position}},{key:"getAncestors",value:function(){return this.parent.is("documentFragment")?[this.parent]:this.parent.getAncestors({includeSelf:!0})}},{key:"getCommonAncestor",value:function(e){for(var n=this.getAncestors(),t=e.getAncestors(),r=0;n[r]==t[r]&&n[r];)r++;return 0===r?null:n[r-1]}},{key:"is",value:function(e){return"position"===e||"view:position"===e}},{key:"isEqual",value:function(e){return this.parent==e.parent&&this.offset==e.offset}},{key:"isBefore",value:function(e){return"before"==this.compareWith(e)}},{key:"isAfter",value:function(e){return"after"==this.compareWith(e)}},{key:"compareWith",value:function(e){if(this.root!==e.root)return"different";if(this.isEqual(e))return"same";var n=this.parent.is("node")?this.parent.getPath():[],t=e.parent.is("node")?e.parent.getPath():[];n.push(this.offset),t.push(e.offset);var r=tt(n,t);switch(r){case"prefix":return"before";case"extension":return"after";default:return n[r]<t[r]?"before":"after"}}},{key:"getWalker",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return e.startPosition=this,new Zt(e)}},{key:"clone",value:function(){return new a(this.parent,this.offset)}}],[{key:"_createAt",value:function(e,n){if(e instanceof a)return new this(e.parent,e.offset);var t=e;if("end"==n)n=t.is("$text")?t.data.length:t.childCount;else{if("before"==n)return this._createBefore(t);if("after"==n)return this._createAfter(t);if(0!==n&&!n)throw new I.b("view-createPositionAt-offset-required: View#createPositionAt() requires the offset when the first parameter is a view item.",t)}return new a(t,n)}},{key:"_createAfter",value:function(e){if(e.is("$textProxy"))return new a(e.textNode,e.offsetInText+e.data.length);if(!e.parent)throw new I.b("view-position-after-root: You can not make position after root.",e,{root:e});return new a(e.parent,e.index+1)}},{key:"_createBefore",value:function(e){if(e.is("$textProxy"))return new a(e.textNode,e.offsetInText);if(!e.parent)throw new I.b("view-position-before-root: You can not make position before root.",e,{root:e});return new a(e.parent,e.index)}}]),a}(),fe=function(a){function i(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;A(this,i),this.start=e.clone(),this.end=n?n.clone():e.clone()}return C(i,[{key:a,value:G.mark(function e(){return G.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.delegateYield(new Zt({boundaries:this,ignoreElementEnd:!0}),"t0",1);case 1:case"end":return t.stop()}},e,this)})},{key:"isCollapsed",get:function(){return this.start.isEqual(this.end)}},{key:"isFlat",get:function(){return this.start.parent===this.end.parent}},{key:"root",get:function(){return this.start.root}},{key:"getEnlarged",value:function(){var n=this.start.getLastMatchingPosition(_r,{direction:"backward"}),t=this.end.getLastMatchingPosition(_r);return n.parent.is("$text")&&n.isAtStart&&(n=Z._createBefore(n.parent)),t.parent.is("$text")&&t.isAtEnd&&(t=Z._createAfter(t.parent)),new i(n,t)}},{key:"getTrimmed",value:function(){var n=this.start.getLastMatchingPosition(_r);if(n.isAfter(this.end)||n.isEqual(this.end))return new i(n,n);var t=this.end.getLastMatchingPosition(_r,{direction:"backward"}),r=n.nodeAfter,o=t.nodeBefore;return r&&r.is("$text")&&(n=new Z(r,0)),o&&o.is("$text")&&(t=new Z(o,o.data.length)),new i(n,t)}},{key:"isEqual",value:function(n){return this==n||this.start.isEqual(n.start)&&this.end.isEqual(n.end)}},{key:"containsPosition",value:function(n){return n.isAfter(this.start)&&n.isBefore(this.end)}},{key:"containsRange",value:function(n){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];n.isCollapsed&&(t=!1);var r=this.containsPosition(n.start)||t&&this.start.isEqual(n.start),o=this.containsPosition(n.end)||t&&this.end.isEqual(n.end);return r&&o}},{key:"getDifference",value:function(n){var t=[];return this.isIntersecting(n)?(this.containsPosition(n.start)&&t.push(new i(this.start,n.start)),this.containsPosition(n.end)&&t.push(new i(n.end,this.end))):t.push(this.clone()),t}},{key:"getIntersection",value:function(n){if(this.isIntersecting(n)){var t=this.start,r=this.end;return this.containsPosition(n.start)&&(t=n.start),this.containsPosition(n.end)&&(r=n.end),new i(t,r)}return null}},{key:"getWalker",value:function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return n.boundaries=this,new Zt(n)}},{key:"getCommonAncestor",value:function(){return this.start.getCommonAncestor(this.end)}},{key:"getContainedElement",value:function(){if(this.isCollapsed)return null;var n=this.start.nodeAfter,t=this.end.nodeBefore;return this.start.parent.is("$text")&&this.start.isAtEnd&&this.start.parent.nextSibling&&(n=this.start.parent.nextSibling),this.end.parent.is("$text")&&this.end.isAtStart&&this.end.parent.previousSibling&&(t=this.end.parent.previousSibling),n&&n.is("element")&&n===t?n:null}},{key:"clone",value:function(){return new i(this.start,this.end)}},{key:"getItems",value:G.mark(function e(){var n,t,r,o,s,l=arguments;return G.wrap(function(u){for(;;)switch(u.prev=u.next){case 0:(n=l.length>0&&void 0!==l[0]?l[0]:{}).boundaries=this,n.ignoreElementEnd=!0,t=new Zt(n),r=k(t),u.prev=4,r.s();case 6:if((o=r.n()).done){u.next=12;break}return s=o.value,u.next=10,s.item;case 10:u.next=6;break;case 12:u.next=17;break;case 14:u.prev=14,u.t0=u.catch(4),r.e(u.t0);case 17:return u.prev=17,r.f(),u.finish(17);case 20:case"end":return u.stop()}},e,this,[[4,14,17,20]])})},{key:"getPositions",value:G.mark(function e(){var n,t,r,o,s,l=arguments;return G.wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return(n=l.length>0&&void 0!==l[0]?l[0]:{}).boundaries=this,t=new Zt(n),u.next=5,t.position;case 5:r=k(t),u.prev=6,r.s();case 8:if((o=r.n()).done){u.next=14;break}return s=o.value,u.next=12,s.nextPosition;case 12:u.next=8;break;case 14:u.next=19;break;case 16:u.prev=16,u.t0=u.catch(6),r.e(u.t0);case 19:return u.prev=19,r.f(),u.finish(19);case 22:case"end":return u.stop()}},e,this,[[6,16,19,22]])})},{key:"is",value:function(n){return"range"===n||"view:range"===n}},{key:"isIntersecting",value:function(n){return this.start.isBefore(n.end)&&this.end.isAfter(n.start)}}],[{key:"_createFromParentsAndOffsets",value:function(n,t,r,o){return new this(new Z(n,t),new Z(r,o))}},{key:"_createFromPositionAndShift",value:function(n,t){var r=n,o=n.getShiftedBy(t);return t>0?new this(r,o):new this(o,r)}},{key:"_createIn",value:function(n){return this._createFromParentsAndOffsets(n,0,n,n.childCount)}},{key:"_createOn",value:function(n){var t=n.is("$textProxy")?n.offsetSize:1;return this._createFromPositionAndShift(Z._createBefore(n),t)}}]),i}(Symbol.iterator);function _r(a){return!(!a.item.is("attributeElement")&&!a.item.is("uiElement"))}function $i(a){var i=0,e=k(a);try{for(e.s();!e.n().done;)i++}catch(r){e.e(r)}finally{e.f()}return i}var Rt=function(){function a(){var i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,e=arguments.length>1?arguments[1]:void 0,n=arguments.length>2?arguments[2]:void 0;A(this,a),this._ranges=[],this._lastRangeBackward=!1,this._isFake=!1,this._fakeSelectionLabel="",this.setTo(i,e,n)}return C(a,[{key:"isFake",get:function(){return this._isFake}},{key:"fakeSelectionLabel",get:function(){return this._fakeSelectionLabel}},{key:"anchor",get:function(){if(!this._ranges.length)return null;var e=this._ranges[this._ranges.length-1];return(this._lastRangeBackward?e.end:e.start).clone()}},{key:"focus",get:function(){if(!this._ranges.length)return null;var e=this._ranges[this._ranges.length-1];return(this._lastRangeBackward?e.start:e.end).clone()}},{key:"isCollapsed",get:function(){return 1===this.rangeCount&&this._ranges[0].isCollapsed}},{key:"rangeCount",get:function(){return this._ranges.length}},{key:"isBackward",get:function(){return!this.isCollapsed&&this._lastRangeBackward}},{key:"editableElement",get:function(){return this.anchor?this.anchor.editableElement:null}},{key:"getRanges",value:G.mark(function i(){var e,n,t;return G.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:e=k(this._ranges),o.prev=1,e.s();case 3:if((n=e.n()).done){o.next=9;break}return t=n.value,o.next=7,t.clone();case 7:o.next=3;break;case 9:o.next=14;break;case 11:o.prev=11,o.t0=o.catch(1),e.e(o.t0);case 14:return o.prev=14,e.f(),o.finish(14);case 17:case"end":return o.stop()}},i,this,[[1,11,14,17]])})},{key:"getFirstRange",value:function(){var t,e=null,n=k(this._ranges);try{for(n.s();!(t=n.n()).done;){var r=t.value;e&&!r.start.isBefore(e.start)||(e=r)}}catch(o){n.e(o)}finally{n.f()}return e?e.clone():null}},{key:"getLastRange",value:function(){var t,e=null,n=k(this._ranges);try{for(n.s();!(t=n.n()).done;){var r=t.value;e&&!r.end.isAfter(e.end)||(e=r)}}catch(o){n.e(o)}finally{n.f()}return e?e.clone():null}},{key:"getFirstPosition",value:function(){var e=this.getFirstRange();return e?e.start.clone():null}},{key:"getLastPosition",value:function(){var e=this.getLastRange();return e?e.end.clone():null}},{key:"isEqual",value:function(e){if(this.isFake!=e.isFake||this.isFake&&this.fakeSelectionLabel!=e.fakeSelectionLabel||this.rangeCount!=e.rangeCount)return!1;if(0===this.rangeCount)return!0;if(!this.anchor.isEqual(e.anchor)||!this.focus.isEqual(e.focus))return!1;var t,n=k(this._ranges);try{for(n.s();!(t=n.n()).done;){var l,r=t.value,o=!1,s=k(e._ranges);try{for(s.s();!(l=s.n()).done;)if(r.isEqual(l.value)){o=!0;break}}catch(u){s.e(u)}finally{s.f()}if(!o)return!1}}catch(u){n.e(u)}finally{n.f()}return!0}},{key:"isSimilar",value:function(e){if(this.isBackward!=e.isBackward)return!1;var n=$i(this.getRanges());if(n!=$i(e.getRanges()))return!1;if(0==n)return!0;var r,t=k(this.getRanges());try{for(t.s();!(r=t.n()).done;){var o=r.value;o=o.getTrimmed();var c,s=!1,l=k(e.getRanges());try{for(l.s();!(c=l.n()).done;){var u=c.value;if(u=u.getTrimmed(),o.start.isEqual(u.start)&&o.end.isEqual(u.end)){s=!0;break}}}catch(d){l.e(d)}finally{l.f()}if(!s)return!1}}catch(d){t.e(d)}finally{t.f()}return!0}},{key:"getSelectedElement",value:function(){return 1!==this.rangeCount?null:this.getFirstRange().getContainedElement()}},{key:"setTo",value:function(e,n,t){if(null===e)this._setRanges([]),this._setFakeOptions(n);else if(e instanceof a||e instanceof Ki)this._setRanges(e.getRanges(),e.isBackward),this._setFakeOptions({fake:e.isFake,label:e.fakeSelectionLabel});else if(e instanceof fe)this._setRanges([e],n&&n.backward),this._setFakeOptions(n);else if(e instanceof Z)this._setRanges([new fe(e)]),this._setFakeOptions(n);else if(e instanceof Qt){var o,r=!!t&&!!t.backward;if(void 0===n)throw new I.b("view-selection-setTo-required-second-parameter: selection.setTo requires the second parameter when the first parameter is a node.",this);o="in"==n?fe._createIn(e):"on"==n?fe._createOn(e):new fe(Z._createAt(e,n)),this._setRanges([o],r),this._setFakeOptions(t)}else{if(!dt(e))throw new I.b("view-selection-setTo-not-selectable: Cannot set selection to given place.",this);this._setRanges(e,n&&n.backward),this._setFakeOptions(n)}this.fire("change")}},{key:"setFocus",value:function(e,n){if(null===this.anchor)throw new I.b("view-selection-setFocus-no-ranges: Cannot set selection focus if there are no ranges in selection.",this);var t=Z._createAt(e,n);if("same"!=t.compareWith(this.focus)){var r=this.anchor;this._ranges.pop(),"before"==t.compareWith(r)?this._addRange(new fe(t,r),!0):this._addRange(new fe(r,t)),this.fire("change")}}},{key:"is",value:function(e){return"selection"===e||"view:selection"===e}},{key:"_setRanges",value:function(e){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];e=Array.from(e),this._ranges=[];var r,t=k(e);try{for(t.s();!(r=t.n()).done;)this._addRange(r.value)}catch(s){t.e(s)}finally{t.f()}this._lastRangeBackward=!!n}},{key:"_setFakeOptions",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this._isFake=!!e.fake,this._fakeSelectionLabel=e.fake&&e.label||""}},{key:"_addRange",value:function(e){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!(e instanceof fe))throw new I.b("view-selection-add-range-not-range: Selection range set to an object that is not an instance of view.Range",this);this._pushRange(e),this._lastRangeBackward=!!n}},{key:"_pushRange",value:function(e){var t,n=k(this._ranges);try{for(n.s();!(t=n.n()).done;){var r=t.value;if(e.isIntersecting(r))throw new I.b("view-selection-range-intersects: Trying to add a range that intersects with another range from selection.",this,{addedRange:e,intersectingRange:r})}}catch(o){n.e(o)}finally{n.f()}this._ranges.push(new fe(e.start,e.end))}}]),a}();se(Rt,Se);var Ki=function(){function a(){var i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,e=arguments.length>1?arguments[1]:void 0,n=arguments.length>2?arguments[2]:void 0;A(this,a),this._selection=new Rt,this._selection.delegate("change").to(this),this._selection.setTo(i,e,n)}return C(a,[{key:"isFake",get:function(){return this._selection.isFake}},{key:"fakeSelectionLabel",get:function(){return this._selection.fakeSelectionLabel}},{key:"anchor",get:function(){return this._selection.anchor}},{key:"focus",get:function(){return this._selection.focus}},{key:"isCollapsed",get:function(){return this._selection.isCollapsed}},{key:"rangeCount",get:function(){return this._selection.rangeCount}},{key:"isBackward",get:function(){return this._selection.isBackward}},{key:"editableElement",get:function(){return this._selection.editableElement}},{key:"_ranges",get:function(){return this._selection._ranges}},{key:"getRanges",value:G.mark(function i(){return G.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.delegateYield(this._selection.getRanges(),"t0",1);case 1:case"end":return n.stop()}},i,this)})},{key:"getFirstRange",value:function(){return this._selection.getFirstRange()}},{key:"getLastRange",value:function(){return this._selection.getLastRange()}},{key:"getFirstPosition",value:function(){return this._selection.getFirstPosition()}},{key:"getLastPosition",value:function(){return this._selection.getLastPosition()}},{key:"getSelectedElement",value:function(){return this._selection.getSelectedElement()}},{key:"isEqual",value:function(e){return this._selection.isEqual(e)}},{key:"isSimilar",value:function(e){return this._selection.isSimilar(e)}},{key:"is",value:function(e){return"selection"===e||"documentSelection"==e||"view:selection"==e||"view:documentSelection"==e}},{key:"_setTo",value:function(e,n,t){this._selection.setTo(e,n,t)}},{key:"_setFocus",value:function(e,n){this._selection.setFocus(e,n)}}]),a}();se(Ki,Se);var Ar=function(){function a(i){A(this,a),this.selection=new Ki,this.roots=new Qe({idProperty:"rootName"}),this.stylesProcessor=i,this.set("isReadOnly",!1),this.set("isFocused",!1),this.set("isComposing",!1),this._postFixers=new Set}return C(a,[{key:"getRoot",value:function(){return this.roots.get(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"main")}},{key:"registerPostFixer",value:function(e){this._postFixers.add(e)}},{key:"destroy",value:function(){this.roots.map(function(e){return e.destroy()}),this.stopListening()}},{key:"_callPostFixers",value:function(e){var n=!1;do{var r,t=k(this._postFixers);try{for(t.s();!(r=t.n()).done&&!(n=(0,r.value)(e)););}catch(s){t.e(s)}finally{t.f()}}while(n)}}]),a}();se(Ar,Re);var gn=function(a){P(e,a);var i=M(e);function e(n,t,r,o){var s;return A(this,e),(s=i.call(this,n,t,r,o)).getFillerOffset=lv,s._priority=10,s._id=null,s._clonesGroup=null,s}return C(e,[{key:"priority",get:function(){return this._priority}},{key:"id",get:function(){return this._id}},{key:"getElementsWithSameId",value:function(){if(null===this.id)throw new I.b("attribute-element-get-elements-with-same-id-no-id: Cannot get elements with the same id for an attribute element without id.",this);return new Set(this._clonesGroup)}},{key:"is",value:function(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return r?r===this.name&&("attributeElement"===t||"view:attributeElement"===t||"element"===t||"view:element"===t):"attributeElement"===t||"view:attributeElement"===t||"element"===t||"view:element"===t||"node"===t||"view:node"===t}},{key:"isSimilar",value:function(t){return null!==this.id||null!==t.id?this.id===t.id:B(L(e.prototype),"isSimilar",this).call(this,t)&&this.priority==t.priority}},{key:"_clone",value:function(t){var r=B(L(e.prototype),"_clone",this).call(this,t);return r._priority=this._priority,r._id=this._id,r}}]),e}(_t);function lv(){if(Ji(this))return null;for(var a=this.parent;a&&a.is("attributeElement");){if(Ji(a)>1)return null;a=a.parent}return!a||Ji(a)>1?null:this.childCount}function Ji(a){return Array.from(a.getChildren()).filter(function(i){return!i.is("uiElement")}).length}gn.DEFAULT_PRIORITY=10;var ss=function(a){P(e,a);var i=M(e);function e(n,t,r,o){var s;return A(this,e),(s=i.call(this,n,t,r,o)).getFillerOffset=cv,s}return C(e,[{key:"is",value:function(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return r?r===this.name&&("emptyElement"===t||"view:emptyElement"===t||"element"===t||"view:element"===t):"emptyElement"===t||"view:emptyElement"===t||"element"===t||"view:element"===t||"node"===t||"view:node"===t}},{key:"_insertChild",value:function(t,r){if(r&&(r instanceof Qt||Array.from(r).length>0))throw new I.b("view-emptyelement-cannot-add: Cannot add child nodes to EmptyElement instance.",[this,r])}}]),e}(_t);function cv(){return null}var Cr=navigator.userAgent.toLowerCase(),At_isMac=function(a){return a.indexOf("macintosh")>-1}(Cr),At_isGecko=function(a){return!!a.match(/gecko\/\d+/)}(Cr),At_isSafari=function(a){return a.indexOf(" applewebkit/")>-1&&-1===a.indexOf("chrome")}(Cr),At_isAndroid=function(a){return a.indexOf("android")>-1}(Cr),uv=(function(){var a=!1;try{a=0==="\u0107".search(new RegExp("[\\p{L}]","u"))}catch(i){}}(),{"\u2318":"ctrl","\u21e7":"shift","\u2325":"alt"}),dv={ctrl:"\u2318",shift:"\u21e7",alt:"\u2325"},me=function(){for(var a={arrowleft:37,arrowup:38,arrowright:39,arrowdown:40,backspace:8,delete:46,enter:13,space:32,esc:27,tab:9,ctrl:1114112,cmd:1114112,shift:2228224,alt:4456448},i=65;i<=90;i++)a[String.fromCharCode(i).toLowerCase()]=i;for(var n=48;n<=57;n++)a[n-48]=n;for(var t=112;t<=123;t++)a["f"+(t-111)]=t;return a}();function Ot(a){var i;if("string"==typeof a){if(!(i=me[a.toLowerCase()]))throw new I.b("keyboard-unknown-key: Unknown key name.",null,{key:a})}else i=a.keyCode+(a.altKey?me.alt:0)+(a.ctrlKey?me.ctrl:0)+(a.shiftKey?me.shift:0);return i}function ls(a){return"string"==typeof a&&(a=hs(a)),a.map(function(i){return"string"==typeof i?Ot(i):i}).reduce(function(i,e){return e+i},0)}function cs(a){return At_isMac?hs(a).map(function(i){return dv[i.toLowerCase()]||i}).reduce(function(i,e){return i.slice(-1)in uv?i+e:i+"+"+e}):a}function Tr(a){return a==me.arrowright||a==me.arrowleft||a==me.arrowup||a==me.arrowdown}function us(a,i){var e="ltr"===i;switch(a){case me.arrowleft:return e?"left":"right";case me.arrowright:return e?"right":"left";case me.arrowup:return"up";case me.arrowdown:return"down"}}function ds(a,i){var e=us(a,i);return"down"===e||"right"===e}function hs(a){return a.split(/\s*\+\s*/)}var fs=function(a){P(e,a);var i=M(e);function e(n,t,r,o){var s;return A(this,e),(s=i.call(this,n,t,r,o)).getFillerOffset=fv,s}return C(e,[{key:"is",value:function(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return r?r===this.name&&("uiElement"===t||"view:uiElement"===t||"element"===t||"view:element"===t):"uiElement"===t||"view:uiElement"===t||"element"===t||"view:element"===t||"node"===t||"view:node"===t}},{key:"_insertChild",value:function(t,r){if(r&&(r instanceof Qt||Array.from(r).length>0))throw new I.b("view-uielement-cannot-add: Cannot add child nodes to UIElement instance.",this)}},{key:"render",value:function(t){return this.toDomElement(t)}},{key:"toDomElement",value:function(t){var s,r=t.createElement(this.name),o=k(this.getAttributeKeys());try{for(o.s();!(s=o.n()).done;){var l=s.value;r.setAttribute(l,this.getAttribute(l))}}catch(c){o.e(c)}finally{o.f()}return r}}]),e}(_t);function fv(){return null}var vs=function(a){P(e,a);var i=M(e);function e(n,t,r,o){var s;return A(this,e),(s=i.call(this,n,t,r,o)).getFillerOffset=vv,s}return C(e,[{key:"is",value:function(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return r?r===this.name&&("rawElement"===t||"view:rawElement"===t||"element"===t||"view:element"===t):"rawElement"===t||"view:rawElement"===t||t===this.name||t==="view:"+this.name||"element"===t||"view:element"===t||"node"===t||"view:node"===t}},{key:"_insertChild",value:function(t,r){if(r&&(r instanceof Qt||Array.from(r).length>0))throw new I.b("view-rawelement-cannot-add: Cannot add child nodes to a RawElement instance.",[this,r])}}]),e}(_t);function vv(){return null}var mn=function(a){function i(e,n){A(this,i),this.document=e,this._children=[],n&&this._insertChild(0,n)}return C(i,[{key:a,value:function(){return this._children[Symbol.iterator]()}},{key:"childCount",get:function(){return this._children.length}},{key:"isEmpty",get:function(){return 0===this.childCount}},{key:"root",get:function(){return this}},{key:"parent",get:function(){return null}},{key:"is",value:function(n){return"documentFragment"===n||"view:documentFragment"===n}},{key:"_appendChild",value:function(n){return this._insertChild(this.childCount,n)}},{key:"getChild",value:function(n){return this._children[n]}},{key:"getChildIndex",value:function(n){return this._children.indexOf(n)}},{key:"getChildren",value:function(){return this._children[Symbol.iterator]()}},{key:"_insertChild",value:function(n,t){this._fireChange("children",this);var l,u,d,r=0,o=(u=this.document,"string"==typeof(d=t)?[new Pe(u,d)]:(dt(d)||(d=[d]),Array.from(d).map(function(h){return"string"==typeof h?new Pe(u,h):h instanceof Mt?new Pe(u,h.data):h}))),s=k(o);try{for(s.s();!(l=s.n()).done;){var c=l.value;null!==c.parent&&c._remove(),c.parent=this,this._children.splice(n,0,c),n++,r++}}catch(u){s.e(u)}finally{s.f()}return r}},{key:"_removeChildren",value:function(n){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;this._fireChange("children",this);for(var r=n;r<n+t;r++)this._children[r].parent=null;return this._children.splice(n,t)}},{key:"_fireChange",value:function(n,t){this.fire("change:"+n,t)}}]),i}(Symbol.iterator);se(mn,Se);var gs=function(){function a(i){A(this,a),this.document=i,this._cloneGroups=new Map}return C(a,[{key:"setSelection",value:function(e,n,t){this.document.selection._setTo(e,n,t)}},{key:"setSelectionFocus",value:function(e,n){this.document.selection._setFocus(e,n)}},{key:"createText",value:function(e){return new Pe(this.document,e)}},{key:"createAttributeElement",value:function(e,n){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=new gn(this.document,e,n);return t.priority&&(r._priority=t.priority),t.id&&(r._id=t.id),r}},{key:"createContainerElement",value:function(e,n){return new pr(this.document,e,n)}},{key:"createEditableElement",value:function(e,n){var t=new wr(this.document,e,n);return t._document=this.document,t}},{key:"createEmptyElement",value:function(e,n){return new ss(this.document,e,n)}},{key:"createUIElement",value:function(e,n,t){var r=new fs(this.document,e,n);return t&&(r.render=t),r}},{key:"createRawElement",value:function(e,n,t){var r=new vs(this.document,e,n);return r.render=t||function(){},r}},{key:"setAttribute",value:function(e,n,t){t._setAttribute(e,n)}},{key:"removeAttribute",value:function(e,n){n._removeAttribute(e)}},{key:"addClass",value:function(e,n){n._addClass(e)}},{key:"removeClass",value:function(e,n){n._removeClass(e)}},{key:"setStyle",value:function(e,n,t){qe(e)&&void 0===t&&(t=n),t._setStyle(e,n)}},{key:"removeStyle",value:function(e,n){n._removeStyle(e)}},{key:"setCustomProperty",value:function(e,n,t){t._setCustomProperty(e,n)}},{key:"removeCustomProperty",value:function(e,n){return n._removeCustomProperty(e)}},{key:"breakAttributes",value:function(e){return e instanceof Z?this._breakAttributes(e):this._breakAttributesRange(e)}},{key:"breakContainer",value:function(e){var n=e.parent;if(!n.is("containerElement"))throw new I.b("view-writer-break-non-container-element: Trying to break an element which is not a container element.",this.document);if(!n.parent)throw new I.b("view-writer-break-root: Trying to break root element.",this.document);if(e.isAtStart)return Z._createBefore(n);if(!e.isAtEnd){var t=n._clone(!1);this.insert(Z._createAfter(n),t);var r=new fe(e,Z._createAt(n,"end")),o=new Z(t,0);this.move(r,o)}return Z._createAfter(n)}},{key:"mergeAttributes",value:function(e){var n=e.offset,t=e.parent;if(t.is("$text"))return e;if(t.is("attributeElement")&&0===t.childCount){var r=t.parent,o=t.index;return t._remove(),this._removeFromClonedElementsGroup(t),this.mergeAttributes(new Z(r,o))}var s=t.getChild(n-1),l=t.getChild(n);if(!s||!l)return e;if(s.is("$text")&&l.is("$text"))return ks(s,l);if(s.is("attributeElement")&&l.is("attributeElement")&&s.isSimilar(l)){var c=s.childCount;return s._appendChild(l.getChildren()),l._remove(),this._removeFromClonedElementsGroup(l),this.mergeAttributes(new Z(s,c))}return e}},{key:"mergeContainers",value:function(e){var n=e.nodeBefore,t=e.nodeAfter;if(!(n&&t&&n.is("containerElement")&&t.is("containerElement")))throw new I.b("view-writer-merge-containers-invalid-position: Element before and after given position cannot be merged.",this.document);var r=n.getChild(n.childCount-1),o=Z._createAt(r instanceof Pe?r:n,"end");return this.move(fe._createIn(t),Z._createAt(n,"end")),this.remove(fe._createOn(t)),o}},{key:"insert",value:function(e,n){!function f(v,g){var p,m=k(v);try{var y=function(){var _=p.value;if(!mv.some(function(T){return _ instanceof T}))throw new I.b("view-writer-insert-invalid-node-type: One of the nodes to be inserted is of invalid type.",g);_.is("$text")||f(_.getChildren(),g)};for(m.s();!(p=m.n()).done;)y()}catch(w){m.e(w)}finally{m.f()}}(n=dt(n)?Y(n):[n],this.document);var t=Qi(e);if(!t)throw new I.b("view-writer-invalid-position-container: Position's parent container cannot be found.",this.document);var l,r=this._breakAttributes(e,!0),o=t._insertChild(r.offset,n),s=k(n);try{for(s.s();!(l=s.n()).done;)this._addToClonedElementsGroup(l.value)}catch(f){s.e(f)}finally{s.f()}var u=r.getShiftedBy(o),d=this.mergeAttributes(r);if(0===o)return new fe(d,d);d.isEqual(r)||u.offset--;var h=this.mergeAttributes(u);return new fe(d,h)}},{key:"remove",value:function(e){var n=e instanceof fe?e:fe._createOn(e);if(Hn(n,this.document),n.isCollapsed)return new mn(this.document);var d,t=this._breakAttributesRange(n,!0),r=t.start,c=r.parent._removeChildren(r.offset,t.end.offset-r.offset),u=k(c);try{for(u.s();!(d=u.n()).done;)this._removeFromClonedElementsGroup(d.value)}catch(v){u.e(v)}finally{u.f()}var f=this.mergeAttributes(r);return n.start=f,n.end=f.clone(),new mn(this.document,c)}},{key:"clear",value:function(e,n){Hn(e,this.document);var o,t=e.getWalker({direction:"backward",ignoreElementEnd:!0}),r=k(t);try{for(r.s();!(o=r.n()).done;){var s=o.value,l=s.item,c=void 0;if(l.is("element")&&n.isSimilar(l))c=fe._createOn(l);else if(!s.nextPosition.isAfter(e.start)&&l.is("$textProxy")){var u=l.getAncestors().find(function(d){return d.is("element")&&n.isSimilar(d)});u&&(c=fe._createIn(u))}c&&(c.end.isAfter(e.end)&&(c.end=e.end),c.start.isBefore(e.start)&&(c.start=e.start),this.remove(c))}}catch(d){r.e(d)}finally{r.f()}}},{key:"move",value:function(e,n){var t;if(n.isAfter(e.end)){var r=(n=this._breakAttributes(n,!0)).parent,o=r.childCount;e=this._breakAttributesRange(e,!0),t=this.remove(e),n.offset+=r.childCount-o}else t=this.remove(e);return this.insert(n,t)}},{key:"wrap",value:function(e,n){if(!(n instanceof gn))throw new I.b("view-writer-wrap-invalid-attribute: DowncastWriter#wrap() must be called with an attribute element.",this.document);if(Hn(e,this.document),e.isCollapsed){var t=e.start;t.parent.is("element")&&!Array.from(t.parent.getChildren()).some(function(s){return!s.is("uiElement")})&&(t=t.getLastMatchingPosition(function(s){return s.item.is("uiElement")})),t=this._wrapPosition(t,n);var r=this.document.selection;return r.isCollapsed&&r.getFirstPosition().isEqual(e.start)&&this.setSelection(t),new fe(t)}return this._wrapRange(e,n)}},{key:"unwrap",value:function(e,n){if(!(n instanceof gn))throw new I.b("view-writer-unwrap-invalid-attribute: DowncastWriter#unwrap() must be called with an attribute element.",this.document);if(Hn(e,this.document),e.isCollapsed)return e;var t=this._breakAttributesRange(e,!0),r=t.start,l=this._unwrapChildren(r.parent,r.offset,t.end.offset,n),c=this.mergeAttributes(l.start);c.isEqual(l.start)||l.end.offset--;var u=this.mergeAttributes(l.end);return new fe(c,u)}},{key:"rename",value:function(e,n){var t=new pr(this.document,e,n.getAttributes());return this.insert(Z._createAfter(n),t),this.move(fe._createIn(n),Z._createAt(t,0)),this.remove(fe._createOn(n)),t}},{key:"clearClonedElementsGroup",value:function(e){this._cloneGroups.delete(e)}},{key:"createPositionAt",value:function(e,n){return Z._createAt(e,n)}},{key:"createPositionAfter",value:function(e){return Z._createAfter(e)}},{key:"createPositionBefore",value:function(e){return Z._createBefore(e)}},{key:"createRange",value:function(e,n){return new fe(e,n)}},{key:"createRangeOn",value:function(e){return fe._createOn(e)}},{key:"createRangeIn",value:function(e){return fe._createIn(e)}},{key:"createSelection",value:function(e,n,t){return new Rt(e,n,t)}},{key:"_wrapChildren",value:function(e,n,t,r){for(var o=n,s=[];o<t;){var l=e.getChild(o),c=l.is("$text"),u=l.is("attributeElement"),d=l.is("emptyElement"),h=l.is("uiElement"),f=l.is("rawElement");if(u&&this._wrapAttributeElement(r,l))s.push(new Z(e,o));else if(c||d||h||f||u&&gv(r,l)){var v=r._clone();l._remove(),v._appendChild(l),e._insertChild(o,v),this._addToClonedElementsGroup(v),s.push(new Z(e,o))}else u&&this._wrapChildren(l,0,l.childCount,r);o++}for(var g=0,m=0,p=s;m<p.length;m++){var y=p[m];y.offset-=g,y.offset!=n&&(this.mergeAttributes(y).isEqual(y)||(g++,t--))}return fe._createFromParentsAndOffsets(e,n,e,t)}},{key:"_unwrapChildren",value:function(e,n,t,r){for(var o=n,s=[];o<t;){var l=e.getChild(o);if(l.is("attributeElement"))if(l.isSimilar(r)){var c=l.getChildren(),u=l.childCount;l._remove(),e._insertChild(o,c),this._removeFromClonedElementsGroup(l),s.push(new Z(e,o),new Z(e,o+u)),o+=u,t+=u-1}else this._unwrapAttributeElement(r,l)?(s.push(new Z(e,o),new Z(e,o+1)),o++):(this._unwrapChildren(l,0,l.childCount,r),o++);else o++}for(var d=0,h=0,f=s;h<f.length;h++){var v=f[h];v.offset-=d,v.offset!=n&&v.offset!=t&&(this.mergeAttributes(v).isEqual(v)||(d++,t--))}return fe._createFromParentsAndOffsets(e,n,e,t)}},{key:"_wrapRange",value:function(e,n){var t=this._breakAttributesRange(e,!0),r=t.start,l=this._wrapChildren(r.parent,r.offset,t.end.offset,n),c=this.mergeAttributes(l.start);c.isEqual(l.start)||l.end.offset--;var u=this.mergeAttributes(l.end);return new fe(c,u)}},{key:"_wrapPosition",value:function(e,n){if(n.isSimilar(e.parent))return ms(e.clone());e.parent.is("$text")&&(e=ps(e));var t=this.createAttributeElement();t._priority=Number.POSITIVE_INFINITY,t.isSimilar=function(){return!1},e.parent._insertChild(e.offset,t);var r=new fe(e,e.getShiftedBy(1));this.wrap(r,n);var o=new Z(t.parent,t.index);t._remove();var s=o.nodeBefore,l=o.nodeAfter;return s instanceof Pe&&l instanceof Pe?ks(s,l):ms(o)}},{key:"_wrapAttributeElement",value:function(e,n){if(!ys(e,n)||e.name!==n.name||e.priority!==n.priority)return!1;var r,t=k(e.getAttributeKeys());try{for(t.s();!(r=t.n()).done;){var o=r.value;if("class"!==o&&"style"!==o&&n.hasAttribute(o)&&n.getAttribute(o)!==e.getAttribute(o))return!1}}catch(w){t.e(w)}finally{t.f()}var l,s=k(e.getStyleNames());try{for(s.s();!(l=s.n()).done;){var c=l.value;if(n.hasStyle(c)&&n.getStyle(c)!==e.getStyle(c))return!1}}catch(w){s.e(w)}finally{s.f()}var d,u=k(e.getAttributeKeys());try{for(u.s();!(d=u.n()).done;){var h=d.value;"class"!==h&&"style"!==h&&(n.hasAttribute(h)||this.setAttribute(h,e.getAttribute(h),n))}}catch(w){u.e(w)}finally{u.f()}var v,f=k(e.getStyleNames());try{for(f.s();!(v=f.n()).done;){var g=v.value;n.hasStyle(g)||this.setStyle(g,e.getStyle(g),n)}}catch(w){f.e(w)}finally{f.f()}var p,m=k(e.getClassNames());try{for(m.s();!(p=m.n()).done;){var y=p.value;n.hasClass(y)||this.addClass(y,n)}}catch(w){m.e(w)}finally{m.f()}return!0}},{key:"_unwrapAttributeElement",value:function(e,n){if(!ys(e,n)||e.name!==n.name||e.priority!==n.priority)return!1;var r,t=k(e.getAttributeKeys());try{for(t.s();!(r=t.n()).done;){var o=r.value;if("class"!==o&&"style"!==o&&(!n.hasAttribute(o)||n.getAttribute(o)!==e.getAttribute(o)))return!1}}catch(f){t.e(f)}finally{t.f()}if(!n.hasClass.apply(n,Y(e.getClassNames())))return!1;var l,s=k(e.getStyleNames());try{for(s.s();!(l=s.n()).done;){var c=l.value;if(!n.hasStyle(c)||n.getStyle(c)!==e.getStyle(c))return!1}}catch(f){s.e(f)}finally{s.f()}var d,u=k(e.getAttributeKeys());try{for(u.s();!(d=u.n()).done;){var h=d.value;"class"!==h&&"style"!==h&&this.removeAttribute(h,n)}}catch(f){u.e(f)}finally{u.f()}return this.removeClass(Array.from(e.getClassNames()),n),this.removeStyle(Array.from(e.getStyleNames()),n),!0}},{key:"_breakAttributesRange",value:function(e){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],t=e.start,r=e.end;if(Hn(e,this.document),e.isCollapsed){var o=this._breakAttributes(e.start,n);return new fe(o,o)}var s=this._breakAttributes(r,n),l=s.parent.childCount,c=this._breakAttributes(t,n);return s.offset+=s.parent.childCount-l,new fe(c,s)}},{key:"_breakAttributes",value:function(e){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],t=e.offset,r=e.parent;if(e.parent.is("emptyElement"))throw new I.b("view-writer-cannot-break-empty-element: Cannot break an EmptyElement instance.",this.document);if(e.parent.is("uiElement"))throw new I.b("view-writer-cannot-break-ui-element: Cannot break a UIElement instance.",this.document);if(e.parent.is("rawElement"))throw new I.b("view-writer-cannot-break-raw-element: Cannot break a RawElement instance.",this.document);if(!n&&r.is("$text")&&Zi(r.parent)||Zi(r))return e.clone();if(r.is("$text"))return this._breakAttributes(ps(e),n);if(t==r.childCount){var o=new Z(r.parent,r.index+1);return this._breakAttributes(o,n)}if(0===t){var s=new Z(r.parent,r.index);return this._breakAttributes(s,n)}var l=r.index+1,c=r._clone();r.parent._insertChild(l,c),this._addToClonedElementsGroup(c);var d=r._removeChildren(t,r.childCount-t);c._appendChild(d);var h=new Z(r.parent,l);return this._breakAttributes(h,n)}},{key:"_addToClonedElementsGroup",value:function(e){if(e.root.is("rootElement")){if(e.is("element")){var t,n=k(e.getChildren());try{for(n.s();!(t=n.n()).done;)this._addToClonedElementsGroup(t.value)}catch(l){n.e(l)}finally{n.f()}}var o=e.id;if(o){var s=this._cloneGroups.get(o);s||this._cloneGroups.set(o,s=new Set),s.add(e),e._clonesGroup=s}}}},{key:"_removeFromClonedElementsGroup",value:function(e){if(e.is("element")){var t,n=k(e.getChildren());try{for(n.s();!(t=n.n()).done;)this._removeFromClonedElementsGroup(t.value)}catch(l){n.e(l)}finally{n.f()}}var o=e.id;if(o){var s=this._cloneGroups.get(o);s&&s.delete(e)}}}]),a}();function Qi(a){for(var i=a.parent;!Zi(i);){if(!i)return;i=i.parent}return i}function gv(a,i){return a.priority<i.priority||!(a.priority>i.priority)&&a.getIdentity()<i.getIdentity()}function ms(a){var i=a.nodeBefore;if(i&&i.is("$text"))return new Z(i,i.data.length);var e=a.nodeAfter;return e&&e.is("$text")?new Z(e,0):a}function ps(a){if(a.offset==a.parent.data.length)return new Z(a.parent.parent,a.parent.index+1);if(0===a.offset)return new Z(a.parent.parent,a.parent.index);var i=a.parent.data.slice(a.offset);return a.parent._data=a.parent.data.slice(0,a.offset),a.parent.parent._insertChild(a.parent.index+1,new Pe(a.root.document,i)),new Z(a.parent.parent,a.parent.index+1)}function ks(a,i){var e=a.data.length;return a._data+=i.data,i._remove(),new Z(a,e)}var mv=[Pe,gn,pr,ss,vs,fs];function Zi(a){return a&&(a.is("containerElement")||a.is("documentFragment"))}function Hn(a,i){var e=Qi(a.start),n=Qi(a.end);if(!e||!n||e!==n)throw new I.b("view-writer-invalid-range-container: The container of the given range is invalid.",i)}function ys(a,i){return null===a.id&&null===i.id}function Ge(a){return"[object Text]"==Object.prototype.toString.call(a)}var pv=function(i){return i.createTextNode("\xa0")},bs=function(i){var e=i.createElement("br");return e.dataset.ckeFiller=!0,e},xr=function(){for(var a="",i=0;i<7;i++)a+="\u200b";return a}();function ct(a){return Ge(a)&&a.data.substr(0,7)===xr}function Sr(a){return 7==a.data.length&&ct(a)}function Xi(a){return ct(a)?a.data.slice(7):a.data}function kv(a,i){if(i.keyCode==me.arrowleft){var e=i.domTarget.ownerDocument.defaultView.getSelection();if(1==e.rangeCount&&e.getRangeAt(0).collapsed){var n=e.getRangeAt(0).startContainer,t=e.getRangeAt(0).startOffset;ct(n)&&t<=7&&e.collapse(n,0)}}}function ws(a,i,e){var n=arguments.length>3&&void 0!==arguments[3]&&arguments[3];e=e||function(r,o){return r===o},Array.isArray(a)||(a=Array.prototype.slice.call(a)),Array.isArray(i)||(i=Array.prototype.slice.call(i));var r,o,s,l,c,u,t=function(r,o,s){var l=_s(r,o,s);if(-1===l)return{firstIndex:-1,lastIndexOld:-1,lastIndexNew:-1};var d=_s(As(r,l),As(o,l),s);return{firstIndex:l,lastIndexOld:r.length-d,lastIndexNew:o.length-d}}(a,i,e);return n?function(r,o){var s=r.firstIndex,l=r.lastIndexOld,c=r.lastIndexNew;if(-1===s)return Array(o).fill("equal");var u=[];return s>0&&(u=u.concat(Array(s).fill("equal"))),c-s>0&&(u=u.concat(Array(c-s).fill("insert"))),l-s>0&&(u=u.concat(Array(l-s).fill("delete"))),c<o&&(u=u.concat(Array(o-c).fill("equal"))),u}(t,i.length):(r=i,s=[],c=(o=t).lastIndexOld,(u=o.lastIndexNew)-(l=o.firstIndex)>0&&s.push({index:l,type:"insert",values:r.slice(l,u)}),c-l>0&&s.push({index:l+(u-l),type:"delete",howMany:c-l}),s)}function _s(a,i,e){for(var n=0;n<Math.max(a.length,i.length);n++)if(void 0===a[n]||void 0===i[n]||!e(a[n],i[n]))return n;return-1}function As(a,i){return a.slice(i).reverse()}function zt(a,i,e){e=e||function(m,p){return m===p};var r,o,n=a.length,t=i.length;if(n>200||t>200||n+t>300)return zt.fastDiff(a,i,e,!0);if(t<n){var s=a;a=i,i=s,r="delete",o="insert"}else r="insert",o="delete";var l=a.length,c=i.length,u=c-l,d={},h={};function f(m){var p=(void 0!==h[m-1]?h[m-1]:-1)+1,y=void 0!==h[m+1]?h[m+1]:-1,w=p>y?-1:1;d[m+w]&&(d[m]=d[m+w].slice(0)),d[m]||(d[m]=[]),d[m].push(p>y?r:o);for(var _=Math.max(p,y),T=_-m;T<l&&_<c&&e(a[T],i[_]);)T++,_++,d[m].push("equal");return _}var v,g=0;do{for(v=-g;v<u;v++)h[v]=f(v);for(v=u+g;v>u;v--)h[v]=f(v);h[u]=f(u),g++}while(h[u]!==c);return d[u].slice(1)}function Cs(a,i,e){a.insertBefore(e,a.childNodes[i]||null)}function Ts(a){var i=a.parentNode;i&&i.removeChild(a)}function pn(a){if(a){if(a.defaultView)return a instanceof a.defaultView.Document;if(a.ownerDocument&&a.ownerDocument.defaultView)return a instanceof a.ownerDocument.defaultView.Node}return!1}zt.fastDiff=ws;var xs=function(){function a(i,e){A(this,a),this.domDocuments=new Set,this.domConverter=i,this.markedAttributes=new Set,this.markedChildren=new Set,this.markedTexts=new Set,this.selection=e,this.isFocused=!1,this._inlineFiller=null,this._fakeSelectionContainer=null}return C(a,[{key:"markToSync",value:function(e,n){if("text"===e)this.domConverter.mapViewToDom(n.parent)&&this.markedTexts.add(n);else{if(!this.domConverter.mapViewToDom(n))return;if("attributes"===e)this.markedAttributes.add(n);else{if("children"!==e)throw new I.b("view-renderer-unknown-type: Unknown type passed to Renderer.markToSync.",this);this.markedChildren.add(n)}}}},{key:"render",value:function(){var e,t,n=k(this.markedChildren);try{for(n.s();!(t=n.n()).done;)this._updateChildrenMappings(t.value)}catch(p){n.e(p)}finally{n.f()}this._inlineFiller&&!this._isSelectionInInlineFiller()&&this._removeInlineFiller(),this._inlineFiller?e=this._getInlineFillerPosition():this._needsInlineFillerAtSelection()&&(e=this.selection.getFirstPosition(),this.markedChildren.add(e.parent));var s,o=k(this.markedAttributes);try{for(o.s();!(s=o.n()).done;)this._updateAttrs(s.value)}catch(p){o.e(p)}finally{o.f()}var u,c=k(this.markedChildren);try{for(c.s();!(u=c.n()).done;)this._updateChildren(u.value,{inlineFillerPosition:e})}catch(p){c.e(p)}finally{c.f()}var f,h=k(this.markedTexts);try{for(h.s();!(f=h.n()).done;){var v=f.value;!this.markedChildren.has(v.parent)&&this.domConverter.mapViewToDom(v.parent)&&this._updateText(v,{inlineFillerPosition:e})}}catch(p){h.e(p)}finally{h.f()}if(e){var g=this.domConverter.viewPositionToDom(e),m=g.parent.ownerDocument;this._inlineFiller=ct(g.parent)?g.parent:Ss(m,g.parent,g.offset)}else this._inlineFiller=null;this._updateSelection(),this._updateFocus(),this.markedTexts.clear(),this.markedAttributes.clear(),this.markedChildren.clear()}},{key:"_updateChildrenMappings",value:function(e){var n=this.domConverter.mapViewToDom(e);if(n){var t=this.domConverter.mapViewToDom(e).childNodes,r=Array.from(this.domConverter.viewChildrenToDom(e,n.ownerDocument,{withChildren:!1})),o=this._diffNodeLists(t,r),s=this._findReplaceActions(o,t,r);if(-1!==s.indexOf("replace")){var u,l={equal:0,insert:0,delete:0},c=k(s);try{for(c.s();!(u=c.n()).done;){var d=u.value;if("replace"===d){var h=l.equal+l.insert,f=l.equal+l.delete,v=e.getChild(h);!v||v.is("uiElement")||v.is("rawElement")||this._updateElementMappings(v,t[f]),Ts(r[h]),l.equal++}else l[d]++}}catch(g){c.e(g)}finally{c.f()}}}}},{key:"_updateElementMappings",value:function(e,n){this.domConverter.unbindDomElement(n),this.domConverter.bindElements(n,e),this.markedChildren.add(e),this.markedAttributes.add(e)}},{key:"_getInlineFillerPosition",value:function(){var e=this.selection.getFirstPosition();return e.parent.is("$text")?Z._createBefore(this.selection.getFirstPosition().parent):e}},{key:"_isSelectionInInlineFiller",value:function(){if(1!=this.selection.rangeCount||!this.selection.isCollapsed)return!1;var e=this.selection.getFirstPosition(),n=this.domConverter.viewPositionToDom(e);return!!(n&&Ge(n.parent)&&ct(n.parent))}},{key:"_removeInlineFiller",value:function(){var e=this._inlineFiller;if(!ct(e))throw new I.b("view-renderer-filler-was-lost: The inline filler node was lost.",this);Sr(e)?e.parentNode.removeChild(e):e.data=e.data.substr(7),this._inlineFiller=null}},{key:"_needsInlineFillerAtSelection",value:function(){if(1!=this.selection.rangeCount||!this.selection.isCollapsed)return!1;var e=this.selection.getFirstPosition(),n=e.parent,t=e.offset;return!!(this.domConverter.mapViewToDom(n.root)&&n.is("element")&&function(s){if("false"==s.getAttribute("contenteditable"))return!1;var l=s.findAncestor(function(c){return c.hasAttribute("contenteditable")});return!l||"true"==l.getAttribute("contenteditable")}(n)&&t!==n.getFillerOffset())&&!(e.nodeBefore instanceof Pe||e.nodeAfter instanceof Pe)}},{key:"_updateText",value:function(e,n){var t=this.domConverter.findCorrespondingDomText(e),r=this.domConverter.viewToDom(e,t.ownerDocument),o=t.data,s=r.data,l=n.inlineFillerPosition;if(l&&l.parent==e.parent&&l.offset==e.index&&(s=xr+s),o!=s){var d,c=ws(o,s),u=k(c);try{for(u.s();!(d=u.n()).done;){var h=d.value;"insert"===h.type?t.insertData(h.index,h.values.join("")):t.deleteData(h.index,h.howMany)}}catch(f){u.e(f)}finally{u.f()}}}},{key:"_updateAttrs",value:function(e){var n=this.domConverter.mapViewToDom(e);if(n){var s,t=Array.from(n.attributes).map(function(h){return h.name}),r=e.getAttributeKeys(),o=k(r);try{for(o.s();!(s=o.n()).done;){var l=s.value;n.setAttribute(l,e.getAttribute(l))}}catch(h){o.e(h)}finally{o.f()}var u,c=k(t);try{for(c.s();!(u=c.n()).done;){var d=u.value;e.hasAttribute(d)||n.removeAttribute(d)}}catch(h){c.e(h)}finally{c.f()}}}},{key:"_updateChildren",value:function(e,n){var t=this.domConverter.mapViewToDom(e);if(t){var r=n.inlineFillerPosition,o=this.domConverter.mapViewToDom(e).childNodes,s=Array.from(this.domConverter.viewChildrenToDom(e,t.ownerDocument,{bind:!0,inlineFillerPosition:r}));r&&r.parent===e&&Ss(t.ownerDocument,s,r.offset);var h,l=this._diffNodeLists(o,s),c=0,u=new Set,d=k(l);try{for(d.s();!(h=d.n()).done;){var f=h.value;"delete"===f?(u.add(o[c]),Ts(o[c])):"equal"===f&&c++}}catch(_){d.e(_)}finally{d.f()}c=0;var g,v=k(l);try{for(v.s();!(g=v.n()).done;){var m=g.value;"insert"===m?(Cs(t,c,s[c]),c++):"equal"===m&&(this._markDescendantTextToSync(this.domConverter.domToView(s[c])),c++)}}catch(_){v.e(_)}finally{v.f()}var y,p=k(u);try{for(p.s();!(y=p.n()).done;){var w=y.value;w.parentNode||this.domConverter.unbindDomElement(w)}}catch(_){p.e(_)}finally{p.f()}}}},{key:"_diffNodeLists",value:function(e,n){return zt((r=this._fakeSelectionContainer,0==(o=Array.from(e)).length||!r||o[o.length-1]==r&&o.pop(),e=o),n,yv.bind(null,this.domConverter));var r,o}},{key:"_findReplaceActions",value:function(e,n,t){if(-1===e.indexOf("insert")||-1===e.indexOf("delete"))return e;var u,r=[],o=[],s=[],l={equal:0,insert:0,delete:0},c=k(e);try{for(c.s();!(u=c.n()).done;){var d=u.value;"insert"===d?s.push(t[l.equal+l.insert]):"delete"===d?o.push(n[l.equal+l.delete]):((r=r.concat(zt(o,s,Ps).map(function(h){return"equal"===h?"replace":h}))).push("equal"),o=[],s=[]),l[d]++}}catch(h){c.e(h)}finally{c.f()}return r.concat(zt(o,s,Ps).map(function(h){return"equal"===h?"replace":h}))}},{key:"_markDescendantTextToSync",value:function(e){if(e)if(e.is("$text"))this.markedTexts.add(e);else if(e.is("element")){var t,n=k(e.getChildren());try{for(n.s();!(t=n.n()).done;)this._markDescendantTextToSync(t.value)}catch(o){n.e(o)}finally{n.f()}}}},{key:"_updateSelection",value:function(){if(0===this.selection.rangeCount)return this._removeDomSelection(),void this._removeFakeSelection();var e=this.domConverter.mapViewToDom(this.selection.editableElement);this.isFocused&&e&&(this.selection.isFake?this._updateFakeSelection(e):(this._removeFakeSelection(),this._updateDomSelection(e)))}},{key:"_updateFakeSelection",value:function(e){var l,n=e.ownerDocument;this._fakeSelectionContainer||(this._fakeSelectionContainer=(l=n.createElement("div"),Object.assign(l.style,{position:"fixed",top:0,left:"-9999px",width:"42px"}),l.textContent="\xa0",l));var t=this._fakeSelectionContainer;if(this.domConverter.bindFakeSelection(t,this.selection),this._fakeSelectionNeedsUpdate(e)){t.parentElement&&t.parentElement==e||e.appendChild(t),t.textContent=this.selection.fakeSelectionLabel||"\xa0";var r=n.getSelection(),o=n.createRange();r.removeAllRanges(),o.selectNodeContents(t),r.addRange(o)}}},{key:"_updateDomSelection",value:function(e){var n=e.ownerDocument.defaultView.getSelection();if(this._domSelectionNeedsUpdate(n)){var t=this.domConverter.viewPositionToDom(this.selection.anchor),r=this.domConverter.viewPositionToDom(this.selection.focus);e.focus(),n.collapse(t.parent,t.offset),n.extend(r.parent,r.offset),At_isGecko&&function(o,s){var l=o.parent;if(l.nodeType==Node.ELEMENT_NODE&&o.offset==l.childNodes.length-1){var c=l.childNodes[o.offset];c&&"BR"==c.tagName&&s.addRange(s.getRangeAt(0))}}(r,n)}}},{key:"_domSelectionNeedsUpdate",value:function(e){if(!this.domConverter.isDomSelectionCorrect(e))return!0;var n=e&&this.domConverter.domSelectionToView(e);return!(n&&this.selection.isEqual(n)||!this.selection.isCollapsed&&this.selection.isSimilar(n))}},{key:"_fakeSelectionNeedsUpdate",value:function(e){var n=this._fakeSelectionContainer,t=e.ownerDocument.getSelection();return!n||n.parentElement!==e||t.anchorNode!==n&&!n.contains(t.anchorNode)||n.textContent!==this.selection.fakeSelectionLabel}},{key:"_removeDomSelection",value:function(){var n,e=k(this.domDocuments);try{for(e.s();!(n=e.n()).done;){var t=n.value;if(t.getSelection().rangeCount){var r=t.activeElement,o=this.domConverter.mapDomToView(r);r&&o&&t.getSelection().removeAllRanges()}}}catch(s){e.e(s)}finally{e.f()}}},{key:"_removeFakeSelection",value:function(){var e=this._fakeSelectionContainer;e&&e.remove()}},{key:"_updateFocus",value:function(){if(this.isFocused){var e=this.selection.editableElement;e&&this.domConverter.focus(e)}}}]),a}();function Ss(a,i,e){var n=i instanceof Array?i:i.childNodes,t=n[e];if(Ge(t))return t.data=xr+t.data,t;var r=a.createTextNode(xr);return Array.isArray(i)?n.splice(e,0,r):Cs(i,e,r),r}function Ps(a,i){return pn(a)&&pn(i)&&!Ge(a)&&!Ge(i)&&a.nodeType!==Node.COMMENT_NODE&&i.nodeType!==Node.COMMENT_NODE&&a.tagName.toLowerCase()===i.tagName.toLowerCase()}function yv(a,i,e){return i===e||(Ge(i)&&Ge(e)?i.data===e.data:!(!a.isBlockFiller(i)||!a.isBlockFiller(e)))}se(xs,Re);var We={window:window,document:document};function eo(a){for(var i=0;a.previousSibling;)a=a.previousSibling,i++;return i}function Wn(a){for(var i=[];a&&a.nodeType!=Node.DOCUMENT_NODE;)i.unshift(a),a=a.parentNode;return i}var bv=bs(document),Pr=function(){function a(i){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};A(this,a),this.document=i,this.blockFillerMode=e.blockFillerMode||"br",this.preElements=["pre"],this.blockElements=["p","div","h1","h2","h3","h4","h5","h6","li","dd","dt","figcaption","td","th"],this._blockFiller="br"==this.blockFillerMode?bs:pv,this._domToViewMapping=new WeakMap,this._viewToDomMapping=new WeakMap,this._fakeSelectionMapping=new WeakMap}return C(a,[{key:"bindFakeSelection",value:function(e,n){this._fakeSelectionMapping.set(e,new Rt(n))}},{key:"fakeSelectionToView",value:function(e){return this._fakeSelectionMapping.get(e)}},{key:"bindElements",value:function(e,n){this._domToViewMapping.set(e,n),this._viewToDomMapping.set(n,e)}},{key:"unbindDomElement",value:function(e){var n=this._domToViewMapping.get(e);if(n){this._domToViewMapping.delete(e),this._viewToDomMapping.delete(n);var r,t=k(e.childNodes);try{for(t.s();!(r=t.n()).done;)this.unbindDomElement(r.value)}catch(s){t.e(s)}finally{t.f()}}}},{key:"bindDocumentFragments",value:function(e,n){this._domToViewMapping.set(e,n),this._viewToDomMapping.set(n,e)}},{key:"viewToDom",value:function(e,n){var o,t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(e.is("$text")){var r=this._processDataFromViewText(e);return n.createTextNode(r)}if(this.mapViewToDom(e))return this.mapViewToDom(e);if(e.is("documentFragment"))o=n.createDocumentFragment(),t.bind&&this.bindDocumentFragments(o,e);else{if(e.is("uiElement"))return o=e.render(n),t.bind&&this.bindElements(o,e),o;o=e.hasAttribute("xmlns")?n.createElementNS(e.getAttribute("xmlns"),e.name):n.createElement(e.name),e.is("rawElement")&&e.render(o),t.bind&&this.bindElements(o,e);var l,s=k(e.getAttributeKeys());try{for(s.s();!(l=s.n()).done;){var c=l.value;o.setAttribute(c,e.getAttribute(c))}}catch(f){s.e(f)}finally{s.f()}}if(t.withChildren||void 0===t.withChildren){var d,u=k(this.viewChildrenToDom(e,n,t));try{for(u.s();!(d=u.n()).done;)o.appendChild(d.value)}catch(f){u.e(f)}finally{u.f()}}return o}},{key:"viewChildrenToDom",value:G.mark(function i(e,n){var t,r,o,s,l,c,u=arguments;return G.wrap(function(h){for(;;)switch(h.prev=h.next){case 0:t=u.length>2&&void 0!==u[2]?u[2]:{},r=e.getFillerOffset&&e.getFillerOffset(),o=0,s=k(e.getChildren()),h.prev=4,s.s();case 6:if((l=s.n()).done){h.next=17;break}if(c=l.value,h.t0=r===o,!h.t0){h.next=12;break}return h.next=12,this._blockFiller(n);case 12:return h.next=14,this.viewToDom(c,n,t);case 14:o++;case 15:h.next=6;break;case 17:h.next=22;break;case 19:h.prev=19,h.t1=h.catch(4),s.e(h.t1);case 22:return h.prev=22,s.f(),h.finish(22);case 25:if(h.t2=r===o,!h.t2){h.next=29;break}return h.next=29,this._blockFiller(n);case 29:case"end":return h.stop()}},i,this,[[4,19,22,25]])})},{key:"viewRangeToDom",value:function(e){var n=this.viewPositionToDom(e.start),t=this.viewPositionToDom(e.end),r=document.createRange();return r.setStart(n.parent,n.offset),r.setEnd(t.parent,t.offset),r}},{key:"viewPositionToDom",value:function(e){var o,s,l,n=e.parent;if(n.is("$text")){var t=this.findCorrespondingDomText(n);if(!t)return null;var r=e.offset;return ct(t)&&(r+=7),{parent:t,offset:r}}if(0===e.offset){if(!(o=this.mapViewToDom(n)))return null;l=o.childNodes[0]}else{var c=e.nodeBefore;if(!(s=c.is("$text")?this.findCorrespondingDomText(c):this.mapViewToDom(e.nodeBefore)))return null;o=s.parentNode,l=s.nextSibling}return Ge(l)&&ct(l)?{parent:l,offset:7}:{parent:o,offset:s?eo(s)+1:0}}},{key:"domToView",value:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this.isBlockFiller(e,this.blockFillerMode))return null;var o,t=this.getHostViewElement(e,this._domToViewMapping);if(t)return t;if(Ge(e)){if(Sr(e))return null;var r=this._processDataFromDomText(e);return""===r?null:new Pe(this.document,r)}if(this.isComment(e))return null;if(this.mapDomToView(e))return this.mapDomToView(e);if(this.isDocumentFragment(e))o=new mn(this.document),n.bind&&this.bindDocumentFragments(e,o);else{var s=n.keepOriginalCase?e.tagName:e.tagName.toLowerCase();o=new _t(this.document,s),n.bind&&this.bindElements(e,o);for(var l=e.attributes,c=l.length-1;c>=0;c--)o._setAttribute(l[c].name,l[c].value)}if(n.withChildren||void 0===n.withChildren){var d,u=k(this.domChildrenToView(e,n));try{for(u.s();!(d=u.n()).done;)o._appendChild(d.value)}catch(f){u.e(f)}finally{u.f()}}return o}},{key:"domChildrenToView",value:G.mark(function i(e){var n,t,o,s=arguments;return G.wrap(function(c){for(;;)switch(c.prev=c.next){case 0:n=s.length>1&&void 0!==s[1]?s[1]:{},t=0;case 2:if(!(t<e.childNodes.length)){c.next=11;break}if(o=this.domToView(e.childNodes[t],n),c.t0=null!==o,!c.t0){c.next=8;break}return c.next=8,o;case 8:t++,c.next=2;break;case 11:case"end":return c.stop()}},i,this)})},{key:"domSelectionToView",value:function(e){if(1===e.rangeCount){var n=e.getRangeAt(0).startContainer;Ge(n)&&(n=n.parentNode);var t=this.fakeSelectionToView(n);if(t)return t}for(var r=this.isDomSelectionBackward(e),o=[],s=0;s<e.rangeCount;s++){var l=e.getRangeAt(s),c=this.domRangeToView(l);c&&o.push(c)}return new Rt(o,{backward:r})}},{key:"domRangeToView",value:function(e){var n=this.domPositionToView(e.startContainer,e.startOffset),t=this.domPositionToView(e.endContainer,e.endOffset);return n&&t?new fe(n,t):null}},{key:"domPositionToView",value:function(e,n){if(this.isBlockFiller(e,this.blockFillerMode))return this.domPositionToView(e.parentNode,eo(e));var t=this.mapDomToView(e);if(t&&(t.is("uiElement")||t.is("rawElement")))return Z._createBefore(t);if(Ge(e)){if(Sr(e))return this.domPositionToView(e.parentNode,eo(e));var r=this.findCorrespondingViewText(e),o=n;return r?(ct(e)&&(o=(o-=7)<0?0:o),new Z(r,o)):null}if(0===n){var s=this.mapDomToView(e);if(s)return new Z(s,0)}else{var l=e.childNodes[n-1],c=Ge(l)?this.findCorrespondingViewText(l):this.mapDomToView(l);if(c&&c.parent)return new Z(c.parent,c.index+1)}return null}},{key:"mapDomToView",value:function(e){return this.getHostViewElement(e)||this._domToViewMapping.get(e)}},{key:"findCorrespondingViewText",value:function(e){if(Sr(e))return null;var n=this.getHostViewElement(e);if(n)return n;var t=e.previousSibling;if(t){if(!this.isElement(t))return null;var r=this.mapDomToView(t);if(r)return r.nextSibling instanceof Pe?r.nextSibling:null}else{var o=this.mapDomToView(e.parentNode);if(o){var s=o.getChild(0);return s instanceof Pe?s:null}}return null}},{key:"mapViewToDom",value:function(e){return this._viewToDomMapping.get(e)}},{key:"findCorrespondingDomText",value:function(e){var n=e.previousSibling;return n&&this.mapViewToDom(n)?this.mapViewToDom(n).nextSibling:!n&&e.parent&&this.mapViewToDom(e.parent)?this.mapViewToDom(e.parent).childNodes[0]:null}},{key:"focus",value:function(e){var n=this.mapViewToDom(e);if(n&&n.ownerDocument.activeElement!==n){var t=We.window,r=t.scrollX,o=t.scrollY,s=[];Es(n,function(l){s.push([l.scrollLeft,l.scrollTop])}),n.focus(),Es(n,function(l){var c=s.shift(),u=ee(c,2),h=u[1];l.scrollLeft=u[0],l.scrollTop=h}),We.window.scrollTo(r,o)}}},{key:"isElement",value:function(e){return e&&e.nodeType==Node.ELEMENT_NODE}},{key:"isDocumentFragment",value:function(e){return e&&e.nodeType==Node.DOCUMENT_FRAGMENT_NODE}},{key:"isComment",value:function(e){return e&&e.nodeType==Node.COMMENT_NODE}},{key:"isBlockFiller",value:function(e){return"br"==this.blockFillerMode?e.isEqualNode(bv):!("BR"!==e.tagName||!Ms(e,this.blockElements)||1!==e.parentNode.childNodes.length)||(t=this.blockElements,Ge(n=e)&&"\xa0"==n.data&&Ms(n,t)&&1===n.parentNode.childNodes.length);var n,t}},{key:"isDomSelectionBackward",value:function(e){if(e.isCollapsed)return!1;var n=document.createRange();n.setStart(e.anchorNode,e.anchorOffset),n.setEnd(e.focusNode,e.focusOffset);var t=n.collapsed;return n.detach(),t}},{key:"getHostViewElement",value:function(e){var n=Wn(e);for(n.pop();n.length;){var t=n.pop(),r=this._domToViewMapping.get(t);if(r&&(r.is("uiElement")||r.is("rawElement")))return r}return null}},{key:"isDomSelectionCorrect",value:function(e){return this._isDomSelectionPositionCorrect(e.anchorNode,e.anchorOffset)&&this._isDomSelectionPositionCorrect(e.focusNode,e.focusOffset)}},{key:"_isDomSelectionPositionCorrect",value:function(e,n){if(Ge(e)&&ct(e)&&n<7||this.isElement(e)&&ct(e.childNodes[n]))return!1;var t=this.mapDomToView(e);return!t||!t.is("uiElement")&&!t.is("rawElement")}},{key:"_processDataFromViewText",value:function(e){var n=this,t=e.data;if(e.getAncestors().some(function(s){return n.preElements.includes(s.name)}))return t;if(" "==t.charAt(0)){var r=this._getTouchingViewTextNode(e,!1);(!r||!this._nodeEndsWithSpace(r))&&r||(t="\xa0"+t.substr(1))}if(" "==t.charAt(t.length-1)){var o=this._getTouchingViewTextNode(e,!0);" "!=t.charAt(t.length-2)&&o&&" "!=o.data.charAt(0)||(t=t.substr(0,t.length-1)+"\xa0")}return t.replace(/ {2}/g," \xa0")}},{key:"_nodeEndsWithSpace",value:function(e){var n=this;if(e.getAncestors().some(function(r){return n.preElements.includes(r.name)}))return!1;var t=this._processDataFromViewText(e);return" "==t.charAt(t.length-1)}},{key:"_processDataFromDomText",value:function(e){var n=e.data;if(to(e,this.preElements))return Xi(e);n=n.replace(/[ \n\t\r]{1,}/g," ");var t=this._getTouchingInlineDomNode(e,!1),r=this._getTouchingInlineDomNode(e,!0),o=this._checkShouldLeftTrimDomText(t),s=this._checkShouldRightTrimDomText(e,r);return o&&(n=n.replace(/^ /,"")),s&&(n=n.replace(/ $/,"")),n=(n=Xi(new Text(n))).replace(/ \u00A0/g,"  "),(/( |\u00A0)\u00A0$/.test(n)||!r||r.data&&" "==r.data.charAt(0))&&(n=n.replace(/\u00A0$/," ")),o&&(n=n.replace(/^\u00A0/," ")),n}},{key:"_checkShouldLeftTrimDomText",value:function(e){return!e||!!jt(e)||/[^\S\u00A0]/.test(e.data.charAt(e.data.length-1))}},{key:"_checkShouldRightTrimDomText",value:function(e,n){return!n&&!ct(e)}},{key:"_getTouchingViewTextNode",value:function(e,n){var o,t=new Zt({startPosition:n?Z._createAfter(e):Z._createBefore(e),direction:n?"forward":"backward"}),r=k(t);try{for(r.s();!(o=r.n()).done;){var s=o.value;if(s.item.is("containerElement")||s.item.is("element","br"))return null;if(s.item.is("$textProxy"))return s.item}}catch(l){r.e(l)}finally{r.f()}return null}},{key:"_getTouchingInlineDomNode",value:function(e,n){if(!e.parentNode)return null;var t=n?"nextNode":"previousNode",r=e.ownerDocument,o=Wn(e)[0],s=r.createTreeWalker(o,NodeFilter.SHOW_TEXT|NodeFilter.SHOW_ELEMENT,{acceptNode:function(d){return Ge(d)||"BR"==d.tagName?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});s.currentNode=e;var l=s[t]();if(null!==l){var c=function(u,d){for(var h=Wn(u),f=Wn(d),v=0;h[v]==f[v]&&h[v];)v++;return 0===v?null:h[v-1]}(e,l);if(c&&!to(e,this.blockElements,c)&&!to(l,this.blockElements,c))return l}return null}}]),a}();function to(a,i,e){var n=Wn(a);return e&&(n=n.slice(n.indexOf(e)+1)),n.some(function(t){return t.tagName&&i.includes(t.tagName.toLowerCase())})}function Es(a,i){for(;a&&a!=We.document;)i(a),a=a.parentNode}function Ms(a,i){var e=a.parentNode;return e&&e.tagName&&i.includes(e.tagName.toLowerCase())}function Er(a){var i=Object.prototype.toString.apply(a);return"[object Window]"==i||"[object global]"==i}var qn=Un({},Se,{listenTo:function(i){for(var e,n=arguments.length,t=new Array(n>1?n-1:0),r=1;r<n;r++)t[r-1]=arguments[r];if(pn(i)||Er(i)){var o=this._getProxyEmitter(i)||new no(i);o.attach.apply(o,t),i=o}(e=Se.listenTo).call.apply(e,[this,i].concat(t))},stopListening:function(i,e,n){if(pn(i)||Er(i)){var t=this._getProxyEmitter(i);if(!t)return;i=t}Se.stopListening.call(this,i,e,n),i instanceof no&&i.detach(e)},_getProxyEmitter:function(i){return e=this,n=Is(i),e[Bt]&&e[Bt][n]?e[Bt][n].emitter:null;var e,n}}),no=C(function a(i){A(this,a),za(this,Is(i)),this._domNode=i});function Is(a){return a["data-ck-expando"]||(a["data-ck-expando"]=Et())}Un(no.prototype,Se,{attach:function(i,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(!this._domListeners||!this._domListeners[i]){var t={capture:!!n.useCapture,passive:!!n.usePassive},r=this._createDomListener(i,t);this._domNode.addEventListener(i,r,t),this._domListeners||(this._domListeners={}),this._domListeners[i]=r}},detach:function(i){var e;!this._domListeners[i]||(e=this._events[i])&&e.callbacks.length||this._domListeners[i].removeListener()},_createDomListener:function(i,e){var n=this,t=function(o){n.fire(i,o)};return t.removeListener=function(){n._domNode.removeEventListener(i,t,e),delete n._domListeners[i]},t}});var Ft=function(){function a(i){A(this,a),this.view=i,this.document=i.document,this.isEnabled=!1}return C(a,[{key:"enable",value:function(){this.isEnabled=!0}},{key:"disable",value:function(){this.isEnabled=!1}},{key:"destroy",value:function(){this.disable(),this.stopListening()}}]),a}();se(Ft,qn);function Mr(a){var i=-1,e=null==a?0:a.length;for(this.__data__=new dr;++i<e;)this.add(a[i])}Mr.prototype.add=Mr.prototype.push=function(i){return this.__data__.set(i,"__lodash_hash_undefined__"),this},Mr.prototype.has=function(i){return this.__data__.has(i)};var Av=Mr,Cv=function(i,e){for(var n=-1,t=null==i?0:i.length;++n<t;)if(e(i[n],n,i))return!0;return!1},Tv=function(i,e){return i.has(e)},Ns=function(i,e,n,t,r,o){var s=1&n,l=i.length,c=e.length;if(l!=c&&!(s&&c>l))return!1;var u=o.get(i);if(u&&o.get(e))return u==e;var d=-1,h=!0,f=2&n?new Av:void 0;for(o.set(i,e),o.set(e,i);++d<l;){var v=i[d],g=e[d];if(t)var m=s?t(g,v,d,e,i,o):t(v,g,d,i,e,o);if(void 0!==m){if(m)continue;h=!1;break}if(f){if(!Cv(e,function(p,y){if(!Tv(f,y)&&(v===p||r(v,p,n,t,o)))return f.push(y)})){h=!1;break}}else if(v!==g&&!r(v,g,n,t,o)){h=!1;break}}return o.delete(i),o.delete(e),h},xv=function(i){var e=-1,n=Array(i.size);return i.forEach(function(t,r){n[++e]=[r,t]}),n},Sv=function(i){var e=-1,n=Array(i.size);return i.forEach(function(t){n[++e]=t}),n},Rs=ke?ke.prototype:void 0,ro=Rs?Rs.valueOf:void 0,Ev=Object.prototype.hasOwnProperty,Os=Object.prototype.hasOwnProperty,Iv=function(i,e,n,t,r,o){var s=et(i),l=et(e),c=s?"[object Array]":zn(i),u=l?"[object Array]":zn(e),d="[object Object]"==(c="[object Arguments]"==c?"[object Object]":c),h="[object Object]"==(u="[object Arguments]"==u?"[object Object]":u),f=c==u;if(f&&Object(jn.a)(i)){if(!Object(jn.a)(e))return!1;s=!0,d=!1}if(f&&!d)return o||(o=new Vn),s||Ci(i)?Ns(i,e,n,t,r,o):function(i,e,n,t,r,o,s){switch(n){case"[object DataView]":if(i.byteLength!=e.byteLength||i.byteOffset!=e.byteOffset)return!1;i=i.buffer,e=e.buffer;case"[object ArrayBuffer]":return!(i.byteLength!=e.byteLength||!o(new vr(i),new vr(e)));case"[object Boolean]":case"[object Date]":case"[object Number]":return Vt(+i,+e);case"[object Error]":return i.name==e.name&&i.message==e.message;case"[object RegExp]":case"[object String]":return i==e+"";case"[object Map]":var l=xv;case"[object Set]":if(l||(l=Sv),i.size!=e.size&&!(1&t))return!1;var u=s.get(i);if(u)return u==e;t|=2,s.set(i,e);var d=Ns(l(i),l(e),t,r,o,s);return s.delete(i),d;case"[object Symbol]":if(ro)return ro.call(i)==ro.call(e)}return!1}(i,e,c,n,t,r,o);if(!(1&n)){var v=d&&Os.call(i,"__wrapped__"),g=h&&Os.call(e,"__wrapped__");if(v||g){var m=v?i.value():i,p=g?e.value():e;return o||(o=new Vn),r(m,p,n,t,o)}}return!!f&&(o||(o=new Vn),function(i,e,n,t,r,o){var s=1&n,l=Pi(i),c=l.length;if(c!=Pi(e).length&&!s)return!1;for(var u=c;u--;){var d=l[u];if(!(s?d in e:Ev.call(e,d)))return!1}var h=o.get(i);if(h&&o.get(e))return h==e;var f=!0;o.set(i,e),o.set(e,i);for(var v=s;++u<c;){var g=i[d=l[u]],m=e[d];if(t)var p=s?t(m,g,d,e,i,o):t(g,m,d,i,e,o);if(!(void 0===p?g===m||r(g,m,n,t,o):p)){f=!1;break}v||(v="constructor"==d)}if(f&&!v){var y=i.constructor,w=e.constructor;y==w||!("constructor"in i)||!("constructor"in e)||"function"==typeof y&&y instanceof y&&"function"==typeof w&&w instanceof w||(f=!1)}return o.delete(i),o.delete(e),f}(i,e,n,t,r,o))},Ds=function a(i,e,n,t,r){return i===e||(null==i||null==e||!ae(i)&&!ae(e)?i!=i&&e!=e:Iv(i,e,n,t,a,r))},Nv=function(i,e,n){var t=(n="function"==typeof n?n:void 0)?n(i,e):void 0;return void 0===t?Ds(i,e,void 0,n):!!t},Ls=function(a){P(e,a);var i=M(e);function e(n){var t;return A(this,e),(t=i.call(this,n))._config={childList:!0,characterData:!0,characterDataOldValue:!0,subtree:!0},t.domConverter=n.domConverter,t.renderer=n._renderer,t._domElements=[],t._mutationObserver=new window.MutationObserver(t._onMutations.bind(X(t))),t}return C(e,[{key:"flush",value:function(){this._onMutations(this._mutationObserver.takeRecords())}},{key:"observe",value:function(t){this._domElements.push(t),this.isEnabled&&this._mutationObserver.observe(t,this._config)}},{key:"enable",value:function(){B(L(e.prototype),"enable",this).call(this);var r,t=k(this._domElements);try{for(t.s();!(r=t.n()).done;)this._mutationObserver.observe(r.value,this._config)}catch(s){t.e(s)}finally{t.f()}}},{key:"disable",value:function(){B(L(e.prototype),"disable",this).call(this),this._mutationObserver.disconnect()}},{key:"destroy",value:function(){B(L(e.prototype),"destroy",this).call(this),this._mutationObserver.disconnect()}},{key:"_onMutations",value:function(t){if(0!==t.length){var c,r=this.domConverter,o=new Map,s=new Set,l=k(t);try{for(l.s();!(c=l.n()).done;){var u=c.value;if("childList"===u.type){var d=r.mapDomToView(u.target);if(d&&(d.is("uiElement")||d.is("rawElement")))continue;d&&!this._isBogusBrMutation(u)&&s.add(d)}}}catch(ne){l.e(ne)}finally{l.f()}var f,h=k(t);try{for(h.s();!(f=h.n()).done;){var v=f.value,g=r.mapDomToView(v.target);if((!g||!g.is("uiElement")&&!g.is("rawElement"))&&"characterData"===v.type){var m=r.findCorrespondingViewText(v.target);m&&!s.has(m.parent)?o.set(m,{type:"text",oldText:m.data,newText:Xi(v.target),node:m}):!m&&ct(v.target)&&s.add(r.mapDomToView(v.target.parentNode))}}}catch(ne){h.e(ne)}finally{h.f()}var w,p=[],y=k(o.values());try{for(y.s();!(w=y.n()).done;){var _=w.value;this.renderer.markToSync("text",_.node),p.push(_)}}catch(ne){y.e(ne)}finally{y.f()}var x,T=k(s);try{for(T.s();!(x=T.n()).done;){var N=x.value,D=r.mapViewToDom(N),z=Array.from(N.getChildren()),J=Array.from(r.domChildrenToView(D,{withChildren:!1}));Nv(z,J,ie)||(this.renderer.markToSync("children",N),p.push({type:"children",oldChildren:z,newChildren:J,node:N}))}}catch(ne){T.e(ne)}finally{T.f()}var $=t[0].target.ownerDocument.getSelection(),Q=null;if($&&$.anchorNode){var K=r.domPositionToView($.anchorNode,$.anchorOffset),W=r.domPositionToView($.focusNode,$.focusOffset);K&&W&&(Q=new Rt(K)).setFocus(W)}p.length&&(this.document.fire("mutations",p,Q),this.view.forceRender())}function ie(ne,oe){if(!Array.isArray(ne))return ne===oe||!(!ne.is("$text")||!oe.is("$text"))&&ne.data===oe.data}}},{key:"_isBogusBrMutation",value:function(t){var r=null;return null===t.nextSibling&&0===t.removedNodes.length&&1==t.addedNodes.length&&(r=this.domConverter.domToView(t.addedNodes[0],{withChildren:!1})),r&&r.is("element","br")}}]),e}(Ft),io=function(){function a(i,e,n){A(this,a),this.view=i,this.document=i.document,this.domEvent=e,this.domTarget=e.target,Un(this,n)}return C(a,[{key:"target",get:function(){return this.view.domConverter.mapDomToView(this.domTarget)}},{key:"preventDefault",value:function(){this.domEvent.preventDefault()}},{key:"stopPropagation",value:function(){this.domEvent.stopPropagation()}}]),a}(),Ut=function(a){P(e,a);var i=M(e);function e(n){var t;return A(this,e),(t=i.call(this,n)).useCapture=!1,t}return C(e,[{key:"observe",value:function(t){var r=this;("string"==typeof this.domEventType?[this.domEventType]:this.domEventType).forEach(function(o){r.listenTo(t,o,function(s,l){r.isEnabled&&r.onDomEvent(l)},{useCapture:r.useCapture})})}},{key:"fire",value:function(t,r,o){this.isEnabled&&this.document.fire(t,new io(this.view,r,o))}}]),e}(Ft),Rv=function(a){P(e,a);var i=M(e);function e(n){var t;return A(this,e),(t=i.call(this,n)).domEventType=["keydown","keyup"],t}return C(e,[{key:"onDomEvent",value:function(t){this.fire(t.type,t,{keyCode:t.keyCode,altKey:t.altKey,ctrlKey:t.ctrlKey||t.metaKey,shiftKey:t.shiftKey,get keystroke(){return Ot(this)}})}}]),e}(Ut),oo=function(){return he.a.Date.now()},Ov=/^\s+|\s+$/g,Dv=/^[-+]0x[0-9a-f]+$/i,Lv=/^0b[01]+$/i,Vv=/^0o[0-7]+$/i,jv=parseInt,Vs=function(i){if("number"==typeof i)return i;if(gr(i))return NaN;if(He(i)){var e="function"==typeof i.valueOf?i.valueOf():i;i=He(e)?e+"":e}if("string"!=typeof i)return 0===i?i:+i;i=i.replace(Ov,"");var n=Lv.test(i);return n||Vv.test(i)?jv(i.slice(2),n?2:8):Dv.test(i)?NaN:+i},Bv=Math.max,zv=Math.min,js=function(i,e,n){var t,r,o,s,l,c,u=0,d=!1,h=!1,f=!0;if("function"!=typeof i)throw new TypeError("Expected a function");function v(_){var T=t,x=r;return t=r=void 0,u=_,s=i.apply(x,T)}function g(_){return u=_,l=setTimeout(p,e),d?v(_):s}function m(_){var T=_-c;return void 0===c||T>=e||T<0||h&&_-u>=o}function p(){var T,x,_=oo();if(m(_))return y(_);l=setTimeout(p,(x=e-((T=_)-c),h?zv(x,o-(T-u)):x))}function y(_){return l=void 0,f&&t?v(_):(t=r=void 0,s)}function w(){var _=oo(),T=m(_);if(t=arguments,r=this,c=_,T){if(void 0===l)return g(c);if(h)return clearTimeout(l),l=setTimeout(p,e),v(c)}return void 0===l&&(l=setTimeout(p,e)),s}return e=Vs(e)||0,He(n)&&(d=!!n.leading,o=(h="maxWait"in n)?Bv(Vs(n.maxWait)||0,e):o,f="trailing"in n?!!n.trailing:f),w.cancel=function(){void 0!==l&&clearTimeout(l),u=0,t=c=r=l=void 0},w.flush=function(){return void 0===l?s:y(oo())},w},Fv=function(a){P(e,a);var i=M(e);function e(n){var t;return A(this,e),(t=i.call(this,n))._fireSelectionChangeDoneDebounced=js(function(r){return t.document.fire("selectionChangeDone",r)},200),t}return C(e,[{key:"observe",value:function(){var t=this,r=this.document;r.on("keydown",function(o,s){var l;r.selection.isFake&&((l=s.keyCode)==me.arrowright||l==me.arrowleft||l==me.arrowup||l==me.arrowdown)&&t.isEnabled&&(s.preventDefault(),t._handleSelectionMove(s.keyCode))},{priority:"lowest"})}},{key:"destroy",value:function(){B(L(e.prototype),"destroy",this).call(this),this._fireSelectionChangeDoneDebounced.cancel()}},{key:"_handleSelectionMove",value:function(t){var r=this.document.selection,o=new Rt(r.getRanges(),{backward:r.isBackward,fake:!1});t!=me.arrowleft&&t!=me.arrowup||o.setTo(o.getFirstPosition()),t!=me.arrowright&&t!=me.arrowdown||o.setTo(o.getLastPosition());var s={oldSelection:r,newSelection:o,domSelection:null};this.document.fire("selectionChange",s),this._fireSelectionChangeDoneDebounced(s)}}]),e}(Ft),Uv=function(a){P(e,a);var i=M(e);function e(n){var t;return A(this,e),(t=i.call(this,n)).mutationObserver=n.getObserver(Ls),t.selection=t.document.selection,t.domConverter=n.domConverter,t._documents=new WeakSet,t._fireSelectionChangeDoneDebounced=js(function(r){return t.document.fire("selectionChangeDone",r)},200),t._clearInfiniteLoopInterval=setInterval(function(){return t._clearInfiniteLoop()},1e3),t._loopbackCounter=0,t}return C(e,[{key:"observe",value:function(t){var r=this,o=t.ownerDocument;this._documents.has(o)||(this.listenTo(o,"selectionchange",function(){r._handleSelectionChange(o)}),this._documents.add(o))}},{key:"destroy",value:function(){B(L(e.prototype),"destroy",this).call(this),clearInterval(this._clearInfiniteLoopInterval),this._fireSelectionChangeDoneDebounced.cancel()}},{key:"_handleSelectionChange",value:function(t){if(this.isEnabled){this.mutationObserver.flush();var r=t.defaultView.getSelection(),o=this.domConverter.domSelectionToView(r);if(0!=o.rangeCount){if(this.view.hasDomSelection=!0,!(this.selection.isEqual(o)&&this.domConverter.isDomSelectionCorrect(r)||++this._loopbackCounter>60))if(this.selection.isSimilar(o))this.view.forceRender();else{var s={oldSelection:this.selection,newSelection:o,domSelection:r};this.document.fire("selectionChange",s),this._fireSelectionChangeDoneDebounced(s)}}else this.view.hasDomSelection=!1}}},{key:"_clearInfiniteLoop",value:function(){this._loopbackCounter=0}}]),e}(Ft),Hv=function(a){P(e,a);var i=M(e);function e(n){var t;A(this,e),(t=i.call(this,n)).domEventType=["focus","blur"],t.useCapture=!0;var r=t.document;return r.on("focus",function(){r.isFocused=!0,t._renderTimeoutId=setTimeout(function(){return n.forceRender()},50)}),r.on("blur",function(o,s){var l=r.selection.editableElement;null!==l&&l!==s.target||(r.isFocused=!1,n.forceRender())}),t}return C(e,[{key:"onDomEvent",value:function(t){this.fire(t.type,t)}},{key:"destroy",value:function(){this._renderTimeoutId&&clearTimeout(this._renderTimeoutId),B(L(e.prototype),"destroy",this).call(this)}}]),e}(Ut),Wv=function(a){P(e,a);var i=M(e);function e(n){var t;A(this,e),(t=i.call(this,n)).domEventType=["compositionstart","compositionupdate","compositionend"];var r=t.document;return r.on("compositionstart",function(){r.isComposing=!0}),r.on("compositionend",function(){r.isComposing=!1}),t}return C(e,[{key:"onDomEvent",value:function(t){this.fire(t.type,t)}}]),e}(Ut),qv=function(a){P(e,a);var i=M(e);function e(n){var t;return A(this,e),(t=i.call(this,n)).domEventType=["beforeinput"],t}return C(e,[{key:"onDomEvent",value:function(t){this.fire(t.type,t)}}]),e}(Ut);function Ir(a){return"[object Range]"==Object.prototype.toString.apply(a)}function Bs(a){var i=a.ownerDocument.defaultView.getComputedStyle(a);return{top:parseInt(i.borderTopWidth,10),right:parseInt(i.borderRightWidth,10),bottom:parseInt(i.borderBottomWidth,10),left:parseInt(i.borderLeftWidth,10)}}var zs=["top","right","bottom","left","width","height"],Ze=function(){function a(i){A(this,a);var e=Ir(i);if(Object.defineProperty(this,"_source",{value:i._source||i,writable:!0,enumerable:!1}),jt(i)||e)if(e){var n=a.getDomRangeRects(i);Nr(this,a.getBoundingRect(n))}else Nr(this,i.getBoundingClientRect());else if(Er(i)){var t=i.innerWidth,r=i.innerHeight;Nr(this,{top:0,right:t,bottom:r,left:0,width:t,height:r})}else Nr(this,i)}return C(a,[{key:"clone",value:function(){return new a(this)}},{key:"moveTo",value:function(e,n){return this.top=n,this.right=e+this.width,this.bottom=n+this.height,this.left=e,this}},{key:"moveBy",value:function(e,n){return this.top+=n,this.right+=e,this.left+=e,this.bottom+=n,this}},{key:"getIntersection",value:function(e){var n={top:Math.max(this.top,e.top),right:Math.min(this.right,e.right),bottom:Math.min(this.bottom,e.bottom),left:Math.max(this.left,e.left)};return n.width=n.right-n.left,n.height=n.bottom-n.top,n.width<0||n.height<0?null:new a(n)}},{key:"getIntersectionArea",value:function(e){var n=this.getIntersection(e);return n?n.getArea():0}},{key:"getArea",value:function(){return this.width*this.height}},{key:"getVisible",value:function(){var e=this._source,n=this.clone();if(!Fs(e))for(var t=e.parentNode||e.commonAncestorContainer;t&&!Fs(t);){var r=new a(t),o=n.getIntersection(r);if(!o)return null;o.getArea()<n.getArea()&&(n=o),t=t.parentNode}return n}},{key:"isEqual",value:function(e){var t,n=k(zs);try{for(n.s();!(t=n.n()).done;){var r=t.value;if(this[r]!==e[r])return!1}}catch(o){n.e(o)}finally{n.f()}return!0}},{key:"contains",value:function(e){var n=this.getIntersection(e);return!(!n||!n.isEqual(e))}},{key:"excludeScrollbarsAndBorders",value:function(){var n,t,r,e=this._source;if(Er(e))n=e.innerWidth-e.document.documentElement.clientWidth,t=e.innerHeight-e.document.documentElement.clientHeight,r=e.getComputedStyle(e.document.documentElement).direction;else{var o=Bs(this._source);n=e.offsetWidth-e.clientWidth-o.left-o.right,t=e.offsetHeight-e.clientHeight-o.top-o.bottom,r=e.ownerDocument.defaultView.getComputedStyle(e).direction,this.left+=o.left,this.top+=o.top,this.right-=o.right,this.bottom-=o.bottom,this.width=this.right-this.left,this.height=this.bottom-this.top}return this.width-=n,"ltr"===r?this.right-=n:this.left+=n,this.height-=t,this.bottom-=t,this}}],[{key:"getDomRangeRects",value:function(e){var n=[],t=Array.from(e.getClientRects());if(t.length){var o,r=k(t);try{for(r.s();!(o=r.n()).done;)n.push(new a(o.value))}catch(u){r.e(u)}finally{r.f()}}else{var l=e.startContainer;Ge(l)&&(l=l.parentNode);var c=new a(l.getBoundingClientRect());c.right=c.left,c.width=0,n.push(c)}return n}},{key:"getBoundingRect",value:function(e){var o,n={left:Number.POSITIVE_INFINITY,top:Number.POSITIVE_INFINITY,right:Number.NEGATIVE_INFINITY,bottom:Number.NEGATIVE_INFINITY},t=0,r=k(e);try{for(r.s();!(o=r.n()).done;){var s=o.value;t++,n.left=Math.min(n.left,s.left),n.top=Math.min(n.top,s.top),n.right=Math.max(n.right,s.right),n.bottom=Math.max(n.bottom,s.bottom)}}catch(l){r.e(l)}finally{r.f()}return 0==t?null:(n.width=n.right-n.left,n.height=n.bottom-n.top,new a(n))}}]),a}();function Nr(a,i){var n,e=k(zs);try{for(e.s();!(n=e.n()).done;){var t=n.value;a[t]=i[t]}}catch(r){e.e(r)}finally{e.f()}}function Fs(a){return!!jt(a)&&a===a.ownerDocument.body}function Us(a){for(var i=a.target,e=a.viewportOffset,n=void 0===e?0:e,t=ao(i),r=t,o=null;r;){Hs($s(r==t?i:o),function(){return Ks(i,r)});var l=Ks(i,r);if(Gv(r,l,n),r.parent!=r){if(o=r.frameElement,r=r.parent,!o)return}else r=null}}function Gv(a,i,e){var n=i.clone().moveBy(0,e),t=i.clone().moveBy(0,-e),r=new Ze(a).excludeScrollbarsAndBorders();if(![t,n].every(function(l){return r.contains(l)})){var o=a.scrollX,s=a.scrollY;qs(t,r)?s-=r.top-i.top+e:Ws(n,r)&&(s+=i.bottom-r.bottom+e),Gs(i,r)?o-=r.left-i.left+e:Ys(i,r)&&(o+=i.right-r.right+e),a.scrollTo(o,s)}}function Hs(a,i){for(var n,t,e=ao(a);a!=e.document.body;)t=i(),(n=new Ze(a).excludeScrollbarsAndBorders()).contains(t)||(qs(t,n)?a.scrollTop-=n.top-t.top:Ws(t,n)&&(a.scrollTop+=t.bottom-n.bottom),Gs(t,n)?a.scrollLeft-=n.left-t.left:Ys(t,n)&&(a.scrollLeft+=t.right-n.right)),a=a.parentNode}function Ws(a,i){return a.bottom>i.bottom}function qs(a,i){return a.top<i.top}function Gs(a,i){return a.left<i.left}function Ys(a,i){return a.right>i.right}function ao(a){return Ir(a)?a.startContainer.ownerDocument.defaultView:a.ownerDocument.defaultView}function $s(a){if(Ir(a)){var i=a.commonAncestorContainer;return Ge(i)&&(i=i.parentNode),i}return a.parentNode}function Ks(a,i){var e=ao(a),n=new Ze(a);if(e===i)return n;for(var t=e;t!=i;){var o=new Ze(t.frameElement).excludeScrollbarsAndBorders();n.moveBy(o.left,o.top),t=t.parent}return n}Object.assign({},{scrollViewportToShowTarget:Us,scrollAncestorsToShowTarget:function(i){Hs($s(i),function(){return new Ze(i)})}});var Js=function(){function a(i){var e=this;A(this,a),this.document=new Ar(i),this.domConverter=new Pr(this.document),this.domRoots=new Map,this.set("isRenderingInProgress",!1),this.set("hasDomSelection",!1),this._renderer=new xs(this.domConverter,this.document.selection),this._renderer.bind("isFocused").to(this.document),this._initialDomRootAttributes=new WeakMap,this._observers=new Map,this._ongoingChange=!1,this._postFixersInProgress=!1,this._renderingDisabled=!1,this._hasChangedSinceTheLastRendering=!1,this._writer=new gs(this.document),this.addObserver(Ls),this.addObserver(Uv),this.addObserver(Hv),this.addObserver(Rv),this.addObserver(Fv),this.addObserver(Wv),At_isAndroid&&this.addObserver(qv),this.document.on("keydown",kv),function hv(a){a.document.on("keydown",function(i,e){return function(n,t,r){if(t.keyCode==me.arrowright){var o=t.domTarget.ownerDocument.defaultView.getSelection(),s=1==o.rangeCount&&o.getRangeAt(0).collapsed;if(s||t.shiftKey){var u=r.domPositionToView(o.focusNode,o.focusOffset);if(null===u)return;var d=!1,h=u.getLastMatchingPosition(function(v){return v.item.is("uiElement")&&(d=!0),!(!v.item.is("uiElement")&&!v.item.is("attributeElement"))});if(d){var f=r.viewPositionToDom(h);s?o.collapse(f.parent,f.offset):o.extend(f.parent,f.offset)}}}}(0,e,a.domConverter)})}(this),this.on("render",function(){e._render(),e.document.fire("layoutChanged"),e._hasChangedSinceTheLastRendering=!1}),this.listenTo(this.document.selection,"change",function(){e._hasChangedSinceTheLastRendering=!0})}return C(a,[{key:"attachDomRoot",value:function(e){var n=this,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"main",r=this.document.getRoot(t);r._name=e.tagName.toLowerCase();for(var o={},s=0,l=Array.from(e.attributes);s<l.length;s++){var c=l[s],u=c.name,d=c.value;o[u]=d,"class"===u?this._writer.addClass(d.split(" "),r):this._writer.setAttribute(u,d,r)}this._initialDomRootAttributes.set(e,o);var h=function(){n._writer.setAttribute("contenteditable",!r.isReadOnly,r),r.isReadOnly?n._writer.addClass("ck-read-only",r):n._writer.removeClass("ck-read-only",r)};h(),this.domRoots.set(t,e),this.domConverter.bindElements(e,r),this._renderer.markToSync("children",r),this._renderer.markToSync("attributes",r),this._renderer.domDocuments.add(e.ownerDocument),r.on("change:children",function(m,p){return n._renderer.markToSync("children",p)}),r.on("change:attributes",function(m,p){return n._renderer.markToSync("attributes",p)}),r.on("change:text",function(m,p){return n._renderer.markToSync("text",p)}),r.on("change:isReadOnly",function(){return n.change(h)}),r.on("change",function(){n._hasChangedSinceTheLastRendering=!0});var v,f=k(this._observers.values());try{for(f.s();!(v=f.n()).done;)v.value.observe(e,t)}catch(m){f.e(m)}finally{f.f()}}},{key:"detachDomRoot",value:function(e){var n=this.domRoots.get(e);Array.from(n.attributes).forEach(function(o){return n.removeAttribute(o.name)});var t=this._initialDomRootAttributes.get(n);for(var r in t)n.setAttribute(r,t[r]);this.domRoots.delete(e),this.domConverter.unbindDomElement(n)}},{key:"getDomRoot",value:function(){return this.domRoots.get(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"main")}},{key:"addObserver",value:function(e){var n=this._observers.get(e);if(n)return n;n=new e(this),this._observers.set(e,n);var r,t=k(this.domRoots);try{for(t.s();!(r=t.n()).done;){var o=ee(r.value,2);n.observe(o[1],o[0])}}catch(c){t.e(c)}finally{t.f()}return n.enable(),n}},{key:"getObserver",value:function(e){return this._observers.get(e)}},{key:"disableObservers",value:function(){var n,e=k(this._observers.values());try{for(e.s();!(n=e.n()).done;)n.value.disable()}catch(r){e.e(r)}finally{e.f()}}},{key:"enableObservers",value:function(){var n,e=k(this._observers.values());try{for(e.s();!(n=e.n()).done;)n.value.enable()}catch(r){e.e(r)}finally{e.f()}}},{key:"scrollToTheSelection",value:function(){var e=this.document.selection.getFirstRange();e&&Us({target:this.domConverter.viewRangeToDom(e),viewportOffset:20})}},{key:"focus",value:function(){if(!this.document.isFocused){var e=this.document.selection.editableElement;e&&(this.domConverter.focus(e),this.forceRender())}}},{key:"change",value:function(e){if(this.isRenderingInProgress||this._postFixersInProgress)throw new I.b("cannot-change-view-tree: Attempting to make changes to the view when it is in an incorrect state: rendering or post-fixers are in progress. This may cause some unexpected behavior and inconsistency between the DOM and the view.",this);try{if(this._ongoingChange)return e(this._writer);this._ongoingChange=!0;var n=e(this._writer);return this._ongoingChange=!1,!this._renderingDisabled&&this._hasChangedSinceTheLastRendering&&(this._postFixersInProgress=!0,this.document._callPostFixers(this._writer),this._postFixersInProgress=!1,this.fire("render")),n}catch(t){I.b.rethrowUnexpectedError(t,this)}}},{key:"forceRender",value:function(){this._hasChangedSinceTheLastRendering=!0,this.change(function(){})}},{key:"destroy",value:function(){var n,e=k(this._observers.values());try{for(e.s();!(n=e.n()).done;)n.value.destroy()}catch(r){e.e(r)}finally{e.f()}this.document.destroy(),this.stopListening()}},{key:"createPositionAt",value:function(e,n){return Z._createAt(e,n)}},{key:"createPositionAfter",value:function(e){return Z._createAfter(e)}},{key:"createPositionBefore",value:function(e){return Z._createBefore(e)}},{key:"createRange",value:function(e,n){return new fe(e,n)}},{key:"createRangeOn",value:function(e){return fe._createOn(e)}},{key:"createRangeIn",value:function(e){return fe._createIn(e)}},{key:"createSelection",value:function(e,n,t){return new Rt(e,n,t)}},{key:"_disableRendering",value:function(e){this._renderingDisabled=e,0==e&&this.change(function(){})}},{key:"_render",value:function(){this.isRenderingInProgress=!0,this.disableObservers(),this._renderer.render(),this.enableObservers(),this.isRenderingInProgress=!1}}]),a}();se(Js,Re);var Gn=function(){function a(i){A(this,a),this.parent=null,this._attrs=It(i)}return C(a,[{key:"index",get:function(){var e;if(!this.parent)return null;if(null===(e=this.parent.getChildIndex(this)))throw new I.b("model-node-not-found-in-parent: The node's parent does not contain this node.",this);return e}},{key:"startOffset",get:function(){var e;if(!this.parent)return null;if(null===(e=this.parent.getChildStartOffset(this)))throw new I.b("model-node-not-found-in-parent: The node's parent does not contain this node.",this);return e}},{key:"offsetSize",get:function(){return 1}},{key:"endOffset",get:function(){return this.parent?this.startOffset+this.offsetSize:null}},{key:"nextSibling",get:function(){var e=this.index;return null!==e&&this.parent.getChild(e+1)||null}},{key:"previousSibling",get:function(){var e=this.index;return null!==e&&this.parent.getChild(e-1)||null}},{key:"root",get:function(){for(var e=this;e.parent;)e=e.parent;return e}},{key:"isAttached",value:function(){return this.root.is("rootElement")}},{key:"getPath",value:function(){for(var e=[],n=this;n.parent;)e.unshift(n.startOffset),n=n.parent;return e}},{key:"getAncestors",value:function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{includeSelf:!1,parentFirst:!1},n=[],t=e.includeSelf?this:this.parent;t;)n[e.parentFirst?"push":"unshift"](t),t=t.parent;return n}},{key:"getCommonAncestor",value:function(e){for(var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},t=this.getAncestors(n),r=e.getAncestors(n),o=0;t[o]==r[o]&&t[o];)o++;return 0===o?null:t[o-1]}},{key:"isBefore",value:function(e){if(this==e||this.root!==e.root)return!1;var n=this.getPath(),t=e.getPath(),r=tt(n,t);switch(r){case"prefix":return!0;case"extension":return!1;default:return n[r]<t[r]}}},{key:"isAfter",value:function(e){return this!=e&&this.root===e.root&&!this.isBefore(e)}},{key:"hasAttribute",value:function(e){return this._attrs.has(e)}},{key:"getAttribute",value:function(e){return this._attrs.get(e)}},{key:"getAttributes",value:function(){return this._attrs.entries()}},{key:"getAttributeKeys",value:function(){return this._attrs.keys()}},{key:"toJSON",value:function(){var e={};return this._attrs.size&&(e.attributes=Array.from(this._attrs).reduce(function(n,t){return n[t[0]]=t[1],n},{})),e}},{key:"is",value:function(e){return"node"===e||"model:node"===e}},{key:"_clone",value:function(){return new a(this._attrs)}},{key:"_remove",value:function(){this.parent._removeChildren(this.index)}},{key:"_setAttribute",value:function(e,n){this._attrs.set(e,n)}},{key:"_setAttributesTo",value:function(e){this._attrs=It(e)}},{key:"_removeAttribute",value:function(e){return this._attrs.delete(e)}},{key:"_clearAttributes",value:function(){this._attrs.clear()}}]),a}(),Ee=function(a){P(e,a);var i=M(e);function e(n,t){var r;return A(this,e),(r=i.call(this,t))._data=n||"",r}return C(e,[{key:"offsetSize",get:function(){return this.data.length}},{key:"data",get:function(){return this._data}},{key:"is",value:function(t){return"$text"===t||"model:$text"===t||"text"===t||"model:text"===t||"node"===t||"model:node"===t}},{key:"toJSON",value:function(){var t=B(L(e.prototype),"toJSON",this).call(this);return t.data=this.data,t}},{key:"_clone",value:function(){return new e(this.data,this.getAttributes())}}],[{key:"fromJSON",value:function(t){return new e(t.data,t.attributes)}}]),e}(Gn),Ct=function(){function a(i,e,n){if(A(this,a),this.textNode=i,e<0||e>i.offsetSize)throw new I.b("model-textproxy-wrong-offsetintext: Given offsetInText value is incorrect.",this);if(n<0||e+n>i.offsetSize)throw new I.b("model-textproxy-wrong-length: Given length value is incorrect.",this);this.data=i.data.substring(e,e+n),this.offsetInText=e}return C(a,[{key:"startOffset",get:function(){return null!==this.textNode.startOffset?this.textNode.startOffset+this.offsetInText:null}},{key:"offsetSize",get:function(){return this.data.length}},{key:"endOffset",get:function(){return null!==this.startOffset?this.startOffset+this.offsetSize:null}},{key:"isPartial",get:function(){return this.offsetSize!==this.textNode.offsetSize}},{key:"parent",get:function(){return this.textNode.parent}},{key:"root",get:function(){return this.textNode.root}},{key:"is",value:function(e){return"$textProxy"===e||"model:$textProxy"===e||"textProxy"===e||"model:textProxy"===e}},{key:"getPath",value:function(){var e=this.textNode.getPath();return e.length>0&&(e[e.length-1]+=this.offsetInText),e}},{key:"getAncestors",value:function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{includeSelf:!1,parentFirst:!1},n=[],t=e.includeSelf?this:this.parent;t;)n[e.parentFirst?"push":"unshift"](t),t=t.parent;return n}},{key:"hasAttribute",value:function(e){return this.textNode.hasAttribute(e)}},{key:"getAttribute",value:function(e){return this.textNode.getAttribute(e)}},{key:"getAttributes",value:function(){return this.textNode.getAttributes()}},{key:"getAttributeKeys",value:function(){return this.textNode.getAttributeKeys()}}]),a}(),kn=function(a){function i(e){A(this,i),this._nodes=[],e&&this._insertNodes(0,e)}return C(i,[{key:a,value:function(){return this._nodes[Symbol.iterator]()}},{key:"length",get:function(){return this._nodes.length}},{key:"maxOffset",get:function(){return this._nodes.reduce(function(n,t){return n+t.offsetSize},0)}},{key:"getNode",value:function(n){return this._nodes[n]||null}},{key:"getNodeIndex",value:function(n){var t=this._nodes.indexOf(n);return-1==t?null:t}},{key:"getNodeStartOffset",value:function(n){var t=this.getNodeIndex(n);return null===t?null:this._nodes.slice(0,t).reduce(function(r,o){return r+o.offsetSize},0)}},{key:"indexToOffset",value:function(n){if(n==this._nodes.length)return this.maxOffset;var t=this._nodes[n];if(!t)throw new I.b("model-nodelist-index-out-of-bounds: Given index cannot be found in the node list.",this);return this.getNodeStartOffset(t)}},{key:"offsetToIndex",value:function(n){var o,t=0,r=k(this._nodes);try{for(r.s();!(o=r.n()).done;){var s=o.value;if(n>=t&&n<t+s.offsetSize)return this.getNodeIndex(s);t+=s.offsetSize}}catch(l){r.e(l)}finally{r.f()}if(t!=n)throw new I.b("model-nodelist-offset-out-of-bounds: Given offset cannot be found in the node list.",this,{offset:n,nodeList:this});return this.length}},{key:"_insertNodes",value:function(n,t){var r,s,o=k(t);try{for(o.s();!(s=o.n()).done;)if(!(s.value instanceof Gn))throw new I.b("model-nodelist-insertNodes-not-node: Trying to insert an object which is not a Node instance.",this)}catch(c){o.e(c)}finally{o.f()}(r=this._nodes).splice.apply(r,[n,0].concat(Y(t)))}},{key:"_removeNodes",value:function(n){return this._nodes.splice(n,arguments.length>1&&void 0!==arguments[1]?arguments[1]:1)}},{key:"toJSON",value:function(){return this._nodes.map(function(n){return n.toJSON()})}}]),i}(Symbol.iterator),Oe=function(a){P(e,a);var i=M(e);function e(n,t,r){var o;return A(this,e),(o=i.call(this,t)).name=n,o._children=new kn,r&&o._insertChild(0,r),o}return C(e,[{key:"childCount",get:function(){return this._children.length}},{key:"maxOffset",get:function(){return this._children.maxOffset}},{key:"isEmpty",get:function(){return 0===this.childCount}},{key:"is",value:function(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return r?r===this.name&&("element"===t||"model:element"===t):"element"===t||"model:element"===t||"node"===t||"model:node"===t}},{key:"getChild",value:function(t){return this._children.getNode(t)}},{key:"getChildren",value:function(){return this._children[Symbol.iterator]()}},{key:"getChildIndex",value:function(t){return this._children.getNodeIndex(t)}},{key:"getChildStartOffset",value:function(t){return this._children.getNodeStartOffset(t)}},{key:"offsetToIndex",value:function(t){return this._children.offsetToIndex(t)}},{key:"getNodeByPath",value:function(t){var s,r=this,o=k(t);try{for(o.s();!(s=o.n()).done;)r=r.getChild(r.offsetToIndex(s.value))}catch(c){o.e(c)}finally{o.f()}return r}},{key:"findAncestor",value:function(t){for(var o=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{includeSelf:!1}).includeSelf?this:this.parent;o;){if(o.name===t)return o;o=o.parent}return null}},{key:"toJSON",value:function(){var t=B(L(e.prototype),"toJSON",this).call(this);if(t.name=this.name,this._children.length>0){t.children=[];var o,r=k(this._children);try{for(r.s();!(o=r.n()).done;)t.children.push(o.value.toJSON())}catch(l){r.e(l)}finally{r.f()}}return t}},{key:"_clone",value:function(){var r=arguments.length>0&&void 0!==arguments[0]&&arguments[0]?Array.from(this._children).map(function(o){return o._clone(!0)}):null;return new e(this.name,this.getAttributes(),r)}},{key:"_appendChild",value:function(t){this._insertChild(this.childCount,t)}},{key:"_insertChild",value:function(t,r){var l,u,o="string"==typeof(u=r)?[new Ee(u)]:(dt(u)||(u=[u]),Array.from(u).map(function(d){return"string"==typeof d?new Ee(d):d instanceof Ct?new Ee(d.data,d.getAttributes()):d})),s=k(o);try{for(s.s();!(l=s.n()).done;){var c=l.value;null!==c.parent&&c._remove(),c.parent=this}}catch(u){s.e(u)}finally{s.f()}this._children._insertNodes(t,o)}},{key:"_removeChildren",value:function(t){var l,o=this._children._removeNodes(t,arguments.length>1&&void 0!==arguments[1]?arguments[1]:1),s=k(o);try{for(s.s();!(l=s.n()).done;)l.value.parent=null}catch(u){s.e(u)}finally{s.f()}return o}}],[{key:"fromJSON",value:function(t){var r=null;if(t.children){r=[];var s,o=k(t.children);try{for(o.s();!(s=o.n()).done;){var l=s.value;r.push(l.name?e.fromJSON(l):Ee.fromJSON(l))}}catch(c){o.e(c)}finally{o.f()}}return new e(t.name,t.attributes,r)}}]),e}(Gn),Dt=function(a){function i(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(A(this,i),!e.boundaries&&!e.startPosition)throw new I.b("model-tree-walker-no-start-position: Neither boundaries nor starting position have been defined.",null);var n=e.direction||"forward";if("forward"!=n&&"backward"!=n)throw new I.b("model-tree-walker-unknown-direction: Only `backward` and `forward` direction allowed.",e,{direction:n});this.direction=n,this.boundaries=e.boundaries||null,this.position=e.startPosition?e.startPosition.clone():H._createAt(this.boundaries["backward"==this.direction?"end":"start"]),this.position.stickiness="toNone",this.singleCharacters=!!e.singleCharacters,this.shallow=!!e.shallow,this.ignoreElementEnd=!!e.ignoreElementEnd,this._boundaryStartParent=this.boundaries?this.boundaries.start.parent:null,this._boundaryEndParent=this.boundaries?this.boundaries.end.parent:null,this._visitedParent=this.position.parent}return C(i,[{key:a,value:function(){return this}},{key:"skip",value:function(n){var t,r,o,s;do{var l;o=this.position,s=this._visitedParent,t=(l=this.next()).done,r=l.value}while(!t&&n(r));t||(this.position=o,this._visitedParent=s)}},{key:"next",value:function(){return"forward"==this.direction?this._next():this._previous()}},{key:"_next",value:function(){var n=this.position,t=this.position.clone(),r=this._visitedParent;if(null===r.parent&&t.offset===r.maxOffset)return{done:!0};if(r===this._boundaryEndParent&&t.offset==this.boundaries.end.offset)return{done:!0};var o=t.parent,s=Yn(t,o),l=s||Qs(t,o,s);if(l instanceof Oe)return this.shallow?t.offset++:(t.path.push(0),this._visitedParent=l),this.position=t,Xt("elementStart",l,n,t,1);if(l instanceof Ee){var c;if(this.singleCharacters)c=1;else{var u=l.endOffset;this._boundaryEndParent==r&&this.boundaries.end.offset<u&&(u=this.boundaries.end.offset),c=u-t.offset}var h=new Ct(l,t.offset-l.startOffset,c);return t.offset+=c,this.position=t,Xt("text",h,n,t,c)}return t.path.pop(),t.offset++,this.position=t,this._visitedParent=r.parent,this.ignoreElementEnd?this._next():Xt("elementEnd",r,n,t)}},{key:"_previous",value:function(){var n=this.position,t=this.position.clone(),r=this._visitedParent;if(null===r.parent&&0===t.offset)return{done:!0};if(r==this._boundaryStartParent&&t.offset==this.boundaries.start.offset)return{done:!0};var o=t.parent,s=Yn(t,o),l=s||Zs(t,o,s);if(l instanceof Oe)return t.offset--,this.shallow?(this.position=t,Xt("elementStart",l,n,t,1)):(t.path.push(l.maxOffset),this.position=t,this._visitedParent=l,this.ignoreElementEnd?this._previous():Xt("elementEnd",l,n,t));if(l instanceof Ee){var c;if(this.singleCharacters)c=1;else{var u=l.startOffset;this._boundaryStartParent==r&&this.boundaries.start.offset>u&&(u=this.boundaries.start.offset),c=t.offset-u}var h=new Ct(l,t.offset-l.startOffset-c,c);return t.offset-=c,this.position=t,Xt("text",h,n,t,c)}return t.path.pop(),this.position=t,this._visitedParent=r.parent,Xt("elementStart",r,n,t,1)}}]),i}(Symbol.iterator);function Xt(a,i,e,n,t){return{done:!1,value:{type:a,item:i,previousPosition:e,nextPosition:n,length:t}}}var H=function(){function a(i,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"toNone";if(A(this,a),!i.is("element")&&!i.is("documentFragment"))throw new I.b("model-position-root-invalid: Position root invalid.",i);if(!(e instanceof Array)||0===e.length)throw new I.b("model-position-path-incorrect-format: Position path must be an array with at least one item.",i,{path:e});i.is("rootElement")?e=e.slice():(e=[].concat(Y(i.getPath()),Y(e)),i=i.root),this.root=i,this.path=e,this.stickiness=n}return C(a,[{key:"offset",get:function(){return this.path[this.path.length-1]},set:function(e){this.path[this.path.length-1]=e}},{key:"parent",get:function(){for(var e=this.root,n=0;n<this.path.length-1;n++)if(!(e=e.getChild(e.offsetToIndex(this.path[n]))))throw new I.b("model-position-path-incorrect: The position's path is incorrect.",this,{position:this});if(e.is("$text"))throw new I.b("model-position-path-incorrect: The position's path is incorrect.",this,{position:this});return e}},{key:"index",get:function(){return this.parent.offsetToIndex(this.offset)}},{key:"textNode",get:function(){return Yn(this,this.parent)}},{key:"nodeAfter",get:function(){var e=this.parent;return Qs(this,e,Yn(this,e))}},{key:"nodeBefore",get:function(){var e=this.parent;return Zs(this,e,Yn(this,e))}},{key:"isAtStart",get:function(){return 0===this.offset}},{key:"isAtEnd",get:function(){return this.offset==this.parent.maxOffset}},{key:"compareWith",value:function(e){if(this.root!=e.root)return"different";var n=tt(this.path,e.path);switch(n){case"same":return"same";case"prefix":return"before";case"extension":return"after";default:return this.path[n]<e.path[n]?"before":"after"}}},{key:"getLastMatchingPosition",value:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};n.startPosition=this;var t=new Dt(n);return t.skip(e),t.position}},{key:"getParentPath",value:function(){return this.path.slice(0,-1)}},{key:"getAncestors",value:function(){var e=this.parent;return e.is("documentFragment")?[e]:e.getAncestors({includeSelf:!0})}},{key:"findAncestor",value:function(e){var n=this.parent;return n.is("element")?n.findAncestor(e,{includeSelf:!0}):null}},{key:"getCommonPath",value:function(e){if(this.root!=e.root)return[];var n=tt(this.path,e.path),t="string"==typeof n?Math.min(this.path.length,e.path.length):n;return this.path.slice(0,t)}},{key:"getCommonAncestor",value:function(e){for(var n=this.getAncestors(),t=e.getAncestors(),r=0;n[r]==t[r]&&n[r];)r++;return 0===r?null:n[r-1]}},{key:"getShiftedBy",value:function(e){var n=this.clone(),t=n.offset+e;return n.offset=t<0?0:t,n}},{key:"isAfter",value:function(e){return"after"==this.compareWith(e)}},{key:"isBefore",value:function(e){return"before"==this.compareWith(e)}},{key:"isEqual",value:function(e){return"same"==this.compareWith(e)}},{key:"isTouching",value:function(e){var n=null,t=null;switch(this.compareWith(e)){case"same":return!0;case"before":n=a._createAt(this),t=a._createAt(e);break;case"after":n=a._createAt(e),t=a._createAt(this);break;default:return!1}for(var r=n.parent;n.path.length+t.path.length;){if(n.isEqual(t))return!0;if(n.path.length>t.path.length){if(n.offset!==r.maxOffset)return!1;n.path=n.path.slice(0,-1),r=r.parent,n.offset++}else{if(0!==t.offset)return!1;t.path=t.path.slice(0,-1)}}}},{key:"is",value:function(e){return"position"===e||"model:position"===e}},{key:"hasSameParentAs",value:function(e){return this.root===e.root&&"same"==tt(this.getParentPath(),e.getParentPath())}},{key:"getTransformedByOperation",value:function(e){var n;switch(e.type){case"insert":n=this._getTransformedByInsertOperation(e);break;case"move":case"remove":case"reinsert":n=this._getTransformedByMoveOperation(e);break;case"split":n=this._getTransformedBySplitOperation(e);break;case"merge":n=this._getTransformedByMergeOperation(e);break;default:n=a._createAt(this)}return n}},{key:"_getTransformedByInsertOperation",value:function(e){return this._getTransformedByInsertion(e.position,e.howMany)}},{key:"_getTransformedByMoveOperation",value:function(e){return this._getTransformedByMove(e.sourcePosition,e.targetPosition,e.howMany)}},{key:"_getTransformedBySplitOperation",value:function(e){var n=e.movedRange;return n.containsPosition(this)||n.start.isEqual(this)&&"toNext"==this.stickiness?this._getCombined(e.splitPosition,e.moveTargetPosition):e.graveyardPosition?this._getTransformedByMove(e.graveyardPosition,e.insertionPosition,1):this._getTransformedByInsertion(e.insertionPosition,1)}},{key:"_getTransformedByMergeOperation",value:function(e){var t,n=e.movedRange;return n.containsPosition(this)||n.start.isEqual(this)?(t=this._getCombined(e.sourcePosition,e.targetPosition),e.sourcePosition.isBefore(e.targetPosition)&&(t=t._getTransformedByDeletion(e.deletionPosition,1))):t=this.isEqual(e.deletionPosition)?a._createAt(e.deletionPosition):this._getTransformedByMove(e.deletionPosition,e.graveyardPosition,1),t}},{key:"_getTransformedByDeletion",value:function(e,n){var t=a._createAt(this);if(this.root!=e.root)return t;if("same"==tt(e.getParentPath(),this.getParentPath())){if(e.offset<this.offset){if(e.offset+n>this.offset)return null;t.offset-=n}}else if("prefix"==tt(e.getParentPath(),this.getParentPath())){var r=e.path.length-1;if(e.offset<=this.path[r]){if(e.offset+n>this.path[r])return null;t.path[r]-=n}}return t}},{key:"_getTransformedByInsertion",value:function(e,n){var t=a._createAt(this);if(this.root!=e.root)return t;if("same"==tt(e.getParentPath(),this.getParentPath()))(e.offset<this.offset||e.offset==this.offset&&"toPrevious"!=this.stickiness)&&(t.offset+=n);else if("prefix"==tt(e.getParentPath(),this.getParentPath())){var r=e.path.length-1;e.offset<=this.path[r]&&(t.path[r]+=n)}return t}},{key:"_getTransformedByMove",value:function(e,n,t){if(n=n._getTransformedByDeletion(e,t),e.isEqual(n))return a._createAt(this);var r=this._getTransformedByDeletion(e,t);return null===r||e.isEqual(this)&&"toNext"==this.stickiness||e.getShiftedBy(t).isEqual(this)&&"toPrevious"==this.stickiness?this._getCombined(e,n):r._getTransformedByInsertion(n,t)}},{key:"_getCombined",value:function(e,n){var t=e.path.length-1,r=a._createAt(n);return r.stickiness=this.stickiness,r.offset=r.offset+this.path[t]-e.offset,r.path=[].concat(Y(r.path),Y(this.path.slice(t+1))),r}},{key:"toJSON",value:function(){return{root:this.root.toJSON(),path:Array.from(this.path),stickiness:this.stickiness}}},{key:"clone",value:function(){return new this.constructor(this.root,this.path,this.stickiness)}}],[{key:"_createAt",value:function(e,n){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"toNone";if(e instanceof a)return new a(e.root,e.path,e.stickiness);var r=e;if("end"==n)n=r.maxOffset;else{if("before"==n)return this._createBefore(r,t);if("after"==n)return this._createAfter(r,t);if(0!==n&&!n)throw new I.b("model-createPositionAt-offset-required: Model#createPositionAt() requires the offset when the first parameter is a model item.",[this,e])}if(!r.is("element")&&!r.is("documentFragment"))throw new I.b("model-position-parent-incorrect: Position parent have to be a element or document fragment.",[this,e]);var o=r.getPath();return o.push(n),new this(r.root,o,t)}},{key:"_createAfter",value:function(e,n){if(!e.parent)throw new I.b("model-position-after-root: You cannot make a position after root.",[this,e],{root:e});return this._createAt(e.parent,e.endOffset,n)}},{key:"_createBefore",value:function(e,n){if(!e.parent)throw new I.b("model-position-before-root: You cannot make a position before root.",e,{root:e});return this._createAt(e.parent,e.startOffset,n)}},{key:"fromJSON",value:function(e,n){if("$graveyard"===e.root){var t=new a(n.graveyard,e.path);return t.stickiness=e.stickiness,t}if(!n.getRoot(e.root))throw new I.b("model-position-fromjson-no-root: Cannot create position for document. Root with specified name does not exist.",n,{rootName:e.root});return new a(n.getRoot(e.root),e.path,e.stickiness)}}]),a}();function Yn(a,i){var e=i.getChild(i.offsetToIndex(a.offset));return e&&e.is("$text")&&e.startOffset<a.offset?e:null}function Qs(a,i,e){return null!==e?null:i.getChild(i.offsetToIndex(a.offset))}function Zs(a,i,e){return null!==e?null:i.getChild(i.offsetToIndex(a.offset)-1)}var F=function(a){function i(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;A(this,i),this.start=H._createAt(e),this.end=H._createAt(n||e),this.start.stickiness=this.isCollapsed?"toNone":"toNext",this.end.stickiness=this.isCollapsed?"toNone":"toPrevious"}return C(i,[{key:a,value:G.mark(function e(){return G.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.delegateYield(new Dt({boundaries:this,ignoreElementEnd:!0}),"t0",1);case 1:case"end":return t.stop()}},e,this)})},{key:"isCollapsed",get:function(){return this.start.isEqual(this.end)}},{key:"isFlat",get:function(){return"same"==tt(this.start.getParentPath(),this.end.getParentPath())}},{key:"root",get:function(){return this.start.root}},{key:"containsPosition",value:function(n){return n.isAfter(this.start)&&n.isBefore(this.end)}},{key:"containsRange",value:function(n){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];n.isCollapsed&&(t=!1);var r=this.containsPosition(n.start)||t&&this.start.isEqual(n.start),o=this.containsPosition(n.end)||t&&this.end.isEqual(n.end);return r&&o}},{key:"containsItem",value:function(n){var t=H._createBefore(n);return this.containsPosition(t)||this.start.isEqual(t)}},{key:"is",value:function(n){return"range"===n||"model:range"===n}},{key:"isEqual",value:function(n){return this.start.isEqual(n.start)&&this.end.isEqual(n.end)}},{key:"isIntersecting",value:function(n){return this.start.isBefore(n.end)&&this.end.isAfter(n.start)}},{key:"getDifference",value:function(n){var t=[];return this.isIntersecting(n)?(this.containsPosition(n.start)&&t.push(new i(this.start,n.start)),this.containsPosition(n.end)&&t.push(new i(n.end,this.end))):t.push(new i(this.start,this.end)),t}},{key:"getIntersection",value:function(n){if(this.isIntersecting(n)){var t=this.start,r=this.end;return this.containsPosition(n.start)&&(t=n.start),this.containsPosition(n.end)&&(r=n.end),new i(t,r)}return null}},{key:"getJoined",value:function(n){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=this.isIntersecting(n);if(r||(r=this.start.isBefore(n.start)?t?this.end.isTouching(n.start):this.end.isEqual(n.start):t?n.end.isTouching(this.start):n.end.isEqual(this.start)),!r)return null;var o=this.start,s=this.end;return n.start.isBefore(o)&&(o=n.start),n.end.isAfter(s)&&(s=n.end),new i(o,s)}},{key:"getMinimalFlatRanges",value:function(){for(var n=[],t=this.start.getCommonPath(this.end).length,r=H._createAt(this.start),o=r.parent;r.path.length>t+1;){var s=o.maxOffset-r.offset;0!==s&&n.push(new i(r,r.getShiftedBy(s))),r.path=r.path.slice(0,-1),r.offset++,o=o.parent}for(;r.path.length<=this.end.path.length;){var l=this.end.path[r.path.length-1],c=l-r.offset;0!==c&&n.push(new i(r,r.getShiftedBy(c))),r.offset=l,r.path.push(0)}return n}},{key:"getWalker",value:function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return n.boundaries=this,new Dt(n)}},{key:"getItems",value:G.mark(function e(){var n,t,r,o,s,l=arguments;return G.wrap(function(u){for(;;)switch(u.prev=u.next){case 0:(n=l.length>0&&void 0!==l[0]?l[0]:{}).boundaries=this,n.ignoreElementEnd=!0,t=new Dt(n),r=k(t),u.prev=4,r.s();case 6:if((o=r.n()).done){u.next=12;break}return s=o.value,u.next=10,s.item;case 10:u.next=6;break;case 12:u.next=17;break;case 14:u.prev=14,u.t0=u.catch(4),r.e(u.t0);case 17:return u.prev=17,r.f(),u.finish(17);case 20:case"end":return u.stop()}},e,this,[[4,14,17,20]])})},{key:"getPositions",value:G.mark(function e(){var n,t,r,o,s,l=arguments;return G.wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return(n=l.length>0&&void 0!==l[0]?l[0]:{}).boundaries=this,t=new Dt(n),u.next=5,t.position;case 5:r=k(t),u.prev=6,r.s();case 8:if((o=r.n()).done){u.next=14;break}return s=o.value,u.next=12,s.nextPosition;case 12:u.next=8;break;case 14:u.next=19;break;case 16:u.prev=16,u.t0=u.catch(6),r.e(u.t0);case 19:return u.prev=19,r.f(),u.finish(19);case 22:case"end":return u.stop()}},e,this,[[6,16,19,22]])})},{key:"getTransformedByOperation",value:function(n){switch(n.type){case"insert":return this._getTransformedByInsertOperation(n);case"move":case"remove":case"reinsert":return this._getTransformedByMoveOperation(n);case"split":return[this._getTransformedBySplitOperation(n)];case"merge":return[this._getTransformedByMergeOperation(n)]}return[new i(this.start,this.end)]}},{key:"getTransformedByOperations",value:function(n){var o,t=[new i(this.start,this.end)],r=k(n);try{for(r.s();!(o=r.n()).done;)for(var s=o.value,l=0;l<t.length;l++){var c=t[l].getTransformedByOperation(s);t.splice.apply(t,[l,1].concat(Y(c))),l+=c.length-1}}catch(v){r.e(v)}finally{r.f()}for(var u=0;u<t.length;u++)for(var d=t[u],h=u+1;h<t.length;h++){var f=t[h];(d.containsRange(f)||f.containsRange(d)||d.isEqual(f))&&t.splice(h,1)}return t}},{key:"getCommonAncestor",value:function(){return this.start.getCommonAncestor(this.end)}},{key:"getContainedElement",value:function(){if(this.isCollapsed)return null;var n=this.start.nodeAfter,t=this.end.nodeBefore;return n&&n.is("element")&&n===t?n:null}},{key:"toJSON",value:function(){return{start:this.start.toJSON(),end:this.end.toJSON()}}},{key:"clone",value:function(){return new this.constructor(this.start,this.end)}},{key:"_getTransformedByInsertOperation",value:function(n){return this._getTransformedByInsertion(n.position,n.howMany,arguments.length>1&&void 0!==arguments[1]&&arguments[1])}},{key:"_getTransformedByMoveOperation",value:function(n){return this._getTransformedByMove(n.sourcePosition,n.targetPosition,n.howMany,arguments.length>1&&void 0!==arguments[1]&&arguments[1])}},{key:"_getTransformedBySplitOperation",value:function(n){var t=this.start._getTransformedBySplitOperation(n),r=this.end._getTransformedBySplitOperation(n);return this.end.isEqual(n.insertionPosition)&&(r=this.end.getShiftedBy(1)),t.root!=r.root&&(r=this.end.getShiftedBy(-1)),new i(t,r)}},{key:"_getTransformedByMergeOperation",value:function(n){if(this.start.isEqual(n.targetPosition)&&this.end.isEqual(n.deletionPosition))return new i(this.start);var t=this.start._getTransformedByMergeOperation(n),r=this.end._getTransformedByMergeOperation(n);return t.root!=r.root&&(r=this.end.getShiftedBy(-1)),t.isAfter(r)?(n.sourcePosition.isBefore(n.targetPosition)?(t=H._createAt(r)).offset=0:(n.deletionPosition.isEqual(t)||(r=n.deletionPosition),t=n.targetPosition),new i(t,r)):new i(t,r)}},{key:"_getTransformedByInsertion",value:function(n,t){if(arguments.length>2&&void 0!==arguments[2]&&arguments[2]&&this.containsPosition(n))return[new i(this.start,n),new i(n.getShiftedBy(t),this.end._getTransformedByInsertion(n,t))];var o=new i(this.start,this.end);return o.start=o.start._getTransformedByInsertion(n,t),o.end=o.end._getTransformedByInsertion(n,t),[o]}},{key:"_getTransformedByMove",value:function(n,t,r){var o=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if(this.isCollapsed)return[new i(this.start._getTransformedByMove(n,t,r))];var l=i._createFromPositionAndShift(n,r),c=t._getTransformedByDeletion(n,r);if(this.containsPosition(t)&&!o&&(l.containsPosition(this.start)||l.containsPosition(this.end)))return[new i(this.start._getTransformedByMove(n,t,r),this.end._getTransformedByMove(n,t,r))];var h,f=this.getDifference(l),v=null,g=this.getIntersection(l);if(1==f.length?v=new i(f[0].start._getTransformedByDeletion(n,r),f[0].end._getTransformedByDeletion(n,r)):2==f.length&&(v=new i(this.start,this.end._getTransformedByDeletion(n,r))),h=v?v._getTransformedByInsertion(c,r,null!==g||o):[],g){var m=new i(g.start._getCombined(l.start,c),g.end._getCombined(l.start,c));2==h.length?h.splice(1,0,m):h.push(m)}return h}},{key:"_getTransformedByDeletion",value:function(n,t){var r=this.start._getTransformedByDeletion(n,t),o=this.end._getTransformedByDeletion(n,t);return null==r&&null==o?null:(null==r&&(r=n),null==o&&(o=n),new i(r,o))}}],[{key:"_createFromPositionAndShift",value:function(n,t){var r=n,o=n.getShiftedBy(t);return t>0?new this(r,o):new this(o,r)}},{key:"_createIn",value:function(n){return new this(H._createAt(n,0),H._createAt(n,n.maxOffset))}},{key:"_createOn",value:function(n){return this._createFromPositionAndShift(H._createBefore(n),n.offsetSize)}},{key:"_createFromRanges",value:function(n){if(0===n.length)throw new I.b("range-create-from-ranges-empty-array: At least one range has to be passed.",null);if(1==n.length)return n[0].clone();var t=n[0];n.sort(function(c,u){return c.start.isAfter(u.start)?1:-1});var r=n.indexOf(t),o=new this(t.start,t.end);if(r>0)for(var s=r-1;n[s].end.isEqual(o.start);s++)o.start=H._createAt(n[s].start);for(var l=r+1;l<n.length&&n[l].start.isEqual(o.end);l++)o.end=H._createAt(n[l].end);return o}},{key:"fromJSON",value:function(n,t){return new this(H.fromJSON(n.start,t),H.fromJSON(n.end,t))}}]),i}(Symbol.iterator),so=function(){function a(){var i=this;A(this,a),this._modelToViewMapping=new WeakMap,this._viewToModelMapping=new WeakMap,this._viewToModelLengthCallbacks=new Map,this._markerNameToElements=new Map,this._elementToMarkerNames=new Map,this._unboundMarkerNames=new Set,this.on("modelToViewPosition",function(e,n){if(!n.viewPosition){var t=i._modelToViewMapping.get(n.modelPosition.parent);n.viewPosition=i.findPositionIn(t,n.modelPosition.offset)}},{priority:"low"}),this.on("viewToModelPosition",function(e,n){if(!n.modelPosition){var t=i.findMappedViewAncestor(n.viewPosition),r=i._viewToModelMapping.get(t),o=i._toModelOffset(n.viewPosition.parent,n.viewPosition.offset,t);n.modelPosition=H._createAt(r,o)}},{priority:"low"})}return C(a,[{key:"bindElements",value:function(e,n){this._modelToViewMapping.set(e,n),this._viewToModelMapping.set(n,e)}},{key:"unbindViewElement",value:function(e){var n=this.toModelElement(e);if(this._viewToModelMapping.delete(e),this._elementToMarkerNames.has(e)){var r,t=k(this._elementToMarkerNames.get(e));try{for(t.s();!(r=t.n()).done;)this._unboundMarkerNames.add(r.value)}catch(s){t.e(s)}finally{t.f()}}this._modelToViewMapping.get(n)==e&&this._modelToViewMapping.delete(n)}},{key:"unbindModelElement",value:function(e){var n=this.toViewElement(e);this._modelToViewMapping.delete(e),this._viewToModelMapping.get(n)==e&&this._viewToModelMapping.delete(n)}},{key:"bindElementToMarker",value:function(e,n){var t=this._markerNameToElements.get(n)||new Set;t.add(e);var r=this._elementToMarkerNames.get(e)||new Set;r.add(n),this._markerNameToElements.set(n,t),this._elementToMarkerNames.set(e,r)}},{key:"unbindElementFromMarkerName",value:function(e,n){var t=this._markerNameToElements.get(n);t&&(t.delete(e),0==t.size&&this._markerNameToElements.delete(n));var r=this._elementToMarkerNames.get(e);r&&(r.delete(n),0==r.size&&this._elementToMarkerNames.delete(e))}},{key:"flushUnboundMarkerNames",value:function(){var e=Array.from(this._unboundMarkerNames);return this._unboundMarkerNames.clear(),e}},{key:"clearBindings",value:function(){this._modelToViewMapping=new WeakMap,this._viewToModelMapping=new WeakMap,this._markerNameToElements=new Map,this._elementToMarkerNames=new Map,this._unboundMarkerNames=new Set}},{key:"toModelElement",value:function(e){return this._viewToModelMapping.get(e)}},{key:"toViewElement",value:function(e){return this._modelToViewMapping.get(e)}},{key:"toModelRange",value:function(e){return new F(this.toModelPosition(e.start),this.toModelPosition(e.end))}},{key:"toViewRange",value:function(e){return new fe(this.toViewPosition(e.start),this.toViewPosition(e.end))}},{key:"toModelPosition",value:function(e){var n={viewPosition:e,mapper:this};return this.fire("viewToModelPosition",n),n.modelPosition}},{key:"toViewPosition",value:function(e){var t={modelPosition:e,mapper:this,isPhantom:(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{isPhantom:!1}).isPhantom};return this.fire("modelToViewPosition",t),t.viewPosition}},{key:"markerNameToElements",value:function(e){var n=this._markerNameToElements.get(e);if(!n)return null;var o,t=new Set,r=k(n);try{for(r.s();!(o=r.n()).done;){var s=o.value;if(s.is("attributeElement")){var c,l=k(s.getElementsWithSameId());try{for(l.s();!(c=l.n()).done;)t.add(c.value)}catch(d){l.e(d)}finally{l.f()}}else t.add(s)}}catch(d){r.e(d)}finally{r.f()}return t}},{key:"registerViewToModelLength",value:function(e,n){this._viewToModelLengthCallbacks.set(e,n)}},{key:"findMappedViewAncestor",value:function(e){for(var n=e.parent;!this._viewToModelMapping.has(n);)n=n.parent;return n}},{key:"_toModelOffset",value:function(e,n,t){if(t!=e)return this._toModelOffset(e.parent,e.index,t)+this._toModelOffset(e,n,e);if(e.is("$text"))return n;for(var r=0,o=0;o<n;o++)r+=this.getModelLength(e.getChild(o));return r}},{key:"getModelLength",value:function(e){if(this._viewToModelLengthCallbacks.get(e.name))return this._viewToModelLengthCallbacks.get(e.name)(e);if(this._viewToModelMapping.has(e))return 1;if(e.is("$text"))return e.data.length;if(e.is("uiElement"))return 0;var r,n=0,t=k(e.getChildren());try{for(t.s();!(r=t.n()).done;)n+=this.getModelLength(r.value)}catch(s){t.e(s)}finally{t.f()}return n}},{key:"findPositionIn",value:function(e,n){var t,r=0,o=0,s=0;if(e.is("$text"))return new Z(e,n);for(;o<n;)t=e.getChild(s),o+=r=this.getModelLength(t),s++;return o==n?this._moveViewPositionToTextNode(new Z(e,s)):this.findPositionIn(t,n-(o-r))}},{key:"_moveViewPositionToTextNode",value:function(e){var n=e.nodeBefore,t=e.nodeAfter;return n instanceof Pe?new Z(n,n.data.length):t instanceof Pe?new Z(t,0):e}}]),a}();se(so,Se);var Rr=function(){function a(){A(this,a),this._consumable=new Map,this._textProxyRegistry=new Map}return C(a,[{key:"add",value:function(e,n){n=Or(n),e instanceof Ct&&(e=this._getSymbolForTextProxy(e)),this._consumable.has(e)||this._consumable.set(e,new Map),this._consumable.get(e).set(n,!0)}},{key:"consume",value:function(e,n){return n=Or(n),e instanceof Ct&&(e=this._getSymbolForTextProxy(e)),!!this.test(e,n)&&(this._consumable.get(e).set(n,!1),!0)}},{key:"test",value:function(e,n){n=Or(n),e instanceof Ct&&(e=this._getSymbolForTextProxy(e));var t=this._consumable.get(e);if(void 0===t)return null;var r=t.get(n);return void 0===r?null:r}},{key:"revert",value:function(e,n){n=Or(n),e instanceof Ct&&(e=this._getSymbolForTextProxy(e));var t=this.test(e,n);return!1===t?(this._consumable.get(e).set(n,!0),!0):!0!==t&&null}},{key:"_getSymbolForTextProxy",value:function(e){var n=null,t=this._textProxyRegistry.get(e.startOffset);if(t){var r=t.get(e.endOffset);r&&(n=r.get(e.parent))}return n||(n=this._addSymbolForTextProxy(e.startOffset,e.endOffset,e.parent)),n}},{key:"_addSymbolForTextProxy",value:function(e,n,t){var o,s,r=Symbol("textProxySymbol");return(o=this._textProxyRegistry.get(e))||this._textProxyRegistry.set(e,o=new Map),(s=o.get(n))||o.set(n,s=new Map),s.set(t,r),r}}]),a}();function Or(a){var i=a.split(":");return i.length>1?i[0]+":"+i[1]:i[0]}var lo=function(){function a(i){A(this,a),this.conversionApi=Object.assign({dispatcher:this},i)}return C(a,[{key:"convertChanges",value:function(e,n,t){var o,r=k(e.getMarkersToRemove());try{for(r.s();!(o=r.n()).done;){var s=o.value;this.convertMarkerRemove(s.name,s.range,t)}}catch(y){r.e(y)}finally{r.f()}var c,l=k(e.getChanges());try{for(l.s();!(c=l.n()).done;){var u=c.value;"insert"==u.type?this.convertInsert(F._createFromPositionAndShift(u.position,u.length),t):"remove"==u.type?this.convertRemove(u.position,u.length,u.name,t):this.convertAttribute(u.range,u.attributeKey,u.attributeOldValue,u.attributeNewValue,t)}}catch(y){l.e(y)}finally{l.f()}var h,d=k(this.conversionApi.mapper.flushUnboundMarkerNames());try{for(d.s();!(h=d.n()).done;){var f=h.value,v=n.get(f).getRange();this.convertMarkerRemove(f,v,t),this.convertMarkerAdd(f,v,t)}}catch(y){d.e(y)}finally{d.f()}var m,g=k(e.getMarkersToAdd());try{for(g.s();!(m=g.n()).done;){var p=m.value;this.convertMarkerAdd(p.name,p.range,t)}}catch(y){g.e(y)}finally{g.f()}}},{key:"convertInsert",value:function(e,n){this.conversionApi.writer=n,this.conversionApi.consumable=this._createInsertConsumable(e);var r,t=k(e);try{for(t.s();!(r=t.n()).done;){var o=r.value,s=o.item,l={item:s,range:F._createFromPositionAndShift(o.previousPosition,o.length)};this._testAndFire("insert",l);var u,c=k(s.getAttributeKeys());try{for(c.s();!(u=c.n()).done;){var d=u.value;l.attributeKey=d,l.attributeOldValue=null,l.attributeNewValue=s.getAttribute(d),this._testAndFire("attribute:"+d,l)}}catch(h){c.e(h)}finally{c.f()}}}catch(h){t.e(h)}finally{t.f()}this._clearConversionApi()}},{key:"convertRemove",value:function(e,n,t,r){this.conversionApi.writer=r,this.fire("remove:"+t,{position:e,length:n},this.conversionApi),this._clearConversionApi()}},{key:"convertAttribute",value:function(e,n,t,r,o){this.conversionApi.writer=o,this.conversionApi.consumable=this._createConsumableForRange(e,"attribute:"+n);var l,s=k(e);try{for(s.s();!(l=s.n()).done;){var c=l.value,u={item:c.item,range:F._createFromPositionAndShift(c.previousPosition,c.length),attributeKey:n,attributeOldValue:t,attributeNewValue:r};this._testAndFire("attribute:"+n,u)}}catch(d){s.e(d)}finally{s.f()}this._clearConversionApi()}},{key:"convertSelection",value:function(e,n,t){var r=Array.from(n.getMarkersAtPosition(e.getFirstPosition()));if(this.conversionApi.writer=t,this.conversionApi.consumable=this._createSelectionConsumable(e,r),this.fire("selection",{selection:e},this.conversionApi),e.isCollapsed){var s,o=k(r);try{for(o.s();!(s=o.n()).done;){var l=s.value,c=l.getRange();if(Yv(e.getFirstPosition(),l,this.conversionApi.mapper)){var u={item:e,markerName:l.name,markerRange:c};this.conversionApi.consumable.test(e,"addMarker:"+l.name)&&this.fire("addMarker:"+l.name,u,this.conversionApi)}}}catch(g){o.e(g)}finally{o.f()}var h,d=k(e.getAttributeKeys());try{for(d.s();!(h=d.n()).done;){var f=h.value,v={item:e,range:e.getFirstRange(),attributeKey:f,attributeOldValue:null,attributeNewValue:e.getAttribute(f)};this.conversionApi.consumable.test(e,"attribute:"+v.attributeKey)&&this.fire("attribute:"+v.attributeKey+":$text",v,this.conversionApi)}}catch(g){d.e(g)}finally{d.f()}this._clearConversionApi()}}},{key:"convertMarkerAdd",value:function(e,n,t){if(n.root.document&&"$graveyard"!=n.root.rootName){this.conversionApi.writer=t;var r="addMarker:"+e,o=new Rr;if(o.add(n,r),this.conversionApi.consumable=o,this.fire(r,{markerName:e,markerRange:n},this.conversionApi),o.test(n,r)){this.conversionApi.consumable=this._createConsumableForRange(n,r);var l,s=k(n.getItems());try{for(s.s();!(l=s.n()).done;){var c=l.value;if(this.conversionApi.consumable.test(c,r)){var u={item:c,range:F._createOn(c),markerName:e,markerRange:n};this.fire(r,u,this.conversionApi)}}}catch(d){s.e(d)}finally{s.f()}this._clearConversionApi()}}}},{key:"convertMarkerRemove",value:function(e,n,t){n.root.document&&"$graveyard"!=n.root.rootName&&(this.conversionApi.writer=t,this.fire("removeMarker:"+e,{markerName:e,markerRange:n},this.conversionApi),this._clearConversionApi())}},{key:"_createInsertConsumable",value:function(e){var r,n=new Rr,t=k(e);try{for(t.s();!(r=t.n()).done;){var s=r.value.item;n.add(s,"insert");var c,l=k(s.getAttributeKeys());try{for(l.s();!(c=l.n()).done;)n.add(s,"attribute:"+c.value)}catch(d){l.e(d)}finally{l.f()}}}catch(d){t.e(d)}finally{t.f()}return n}},{key:"_createConsumableForRange",value:function(e,n){var o,t=new Rr,r=k(e.getItems());try{for(r.s();!(o=r.n()).done;)t.add(o.value,n)}catch(l){r.e(l)}finally{r.f()}return t}},{key:"_createSelectionConsumable",value:function(e,n){var t=new Rr;t.add(e,"selection");var o,r=k(n);try{for(r.s();!(o=r.n()).done;)t.add(e,"addMarker:"+o.value.name)}catch(d){r.e(d)}finally{r.f()}var c,l=k(e.getAttributeKeys());try{for(l.s();!(c=l.n()).done;)t.add(e,"attribute:"+c.value)}catch(d){l.e(d)}finally{l.f()}return t}},{key:"_testAndFire",value:function(e,n){this.conversionApi.consumable.test(n.item,e)&&this.fire(e+":"+(n.item.name||"$text"),n,this.conversionApi)}},{key:"_clearConversionApi",value:function(){delete this.conversionApi.writer,delete this.conversionApi.consumable}}]),a}();function Yv(a,i,e){var n=i.getRange(),t=Array.from(a.getAncestors());return t.shift(),t.reverse(),!t.some(function(r){if(n.containsItem(r))return!!e.toViewElement(r).getCustomProperty("addHighlight")})}se(lo,Se);var en=function(){function a(i,e,n){A(this,a),this._lastRangeBackward=!1,this._ranges=[],this._attrs=new Map,i&&this.setTo(i,e,n)}return C(a,[{key:"anchor",get:function(){if(this._ranges.length>0){var e=this._ranges[this._ranges.length-1];return this._lastRangeBackward?e.end:e.start}return null}},{key:"focus",get:function(){if(this._ranges.length>0){var e=this._ranges[this._ranges.length-1];return this._lastRangeBackward?e.start:e.end}return null}},{key:"isCollapsed",get:function(){return 1===this._ranges.length&&this._ranges[0].isCollapsed}},{key:"rangeCount",get:function(){return this._ranges.length}},{key:"isBackward",get:function(){return!this.isCollapsed&&this._lastRangeBackward}},{key:"isEqual",value:function(e){if(this.rangeCount!=e.rangeCount)return!1;if(0===this.rangeCount)return!0;if(!this.anchor.isEqual(e.anchor)||!this.focus.isEqual(e.focus))return!1;var t,n=k(this._ranges);try{for(n.s();!(t=n.n()).done;){var l,r=t.value,o=!1,s=k(e._ranges);try{for(s.s();!(l=s.n()).done;)if(r.isEqual(l.value)){o=!0;break}}catch(u){s.e(u)}finally{s.f()}if(!o)return!1}}catch(u){n.e(u)}finally{n.f()}return!0}},{key:"getRanges",value:G.mark(function i(){var e,n,t;return G.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:e=k(this._ranges),o.prev=1,e.s();case 3:if((n=e.n()).done){o.next=9;break}return t=n.value,o.next=7,new F(t.start,t.end);case 7:o.next=3;break;case 9:o.next=14;break;case 11:o.prev=11,o.t0=o.catch(1),e.e(o.t0);case 14:return o.prev=14,e.f(),o.finish(14);case 17:case"end":return o.stop()}},i,this,[[1,11,14,17]])})},{key:"getFirstRange",value:function(){var t,e=null,n=k(this._ranges);try{for(n.s();!(t=n.n()).done;){var r=t.value;e&&!r.start.isBefore(e.start)||(e=r)}}catch(o){n.e(o)}finally{n.f()}return e?new F(e.start,e.end):null}},{key:"getLastRange",value:function(){var t,e=null,n=k(this._ranges);try{for(n.s();!(t=n.n()).done;){var r=t.value;e&&!r.end.isAfter(e.end)||(e=r)}}catch(o){n.e(o)}finally{n.f()}return e?new F(e.start,e.end):null}},{key:"getFirstPosition",value:function(){var e=this.getFirstRange();return e?e.start.clone():null}},{key:"getLastPosition",value:function(){var e=this.getLastRange();return e?e.end.clone():null}},{key:"setTo",value:function(e,n,t){if(null===e)this._setRanges([]);else if(e instanceof a)this._setRanges(e.getRanges(),e.isBackward);else if(e&&"function"==typeof e.getRanges)this._setRanges(e.getRanges(),e.isBackward);else if(e instanceof F)this._setRanges([e],!!n&&!!n.backward);else if(e instanceof H)this._setRanges([new F(e)]);else if(e instanceof Gn){var o,r=!!t&&!!t.backward;if("in"==n)o=F._createIn(e);else if("on"==n)o=F._createOn(e);else{if(void 0===n)throw new I.b("model-selection-setTo-required-second-parameter: selection.setTo requires the second parameter when the first parameter is a node.",[this,e]);o=new F(H._createAt(e,n))}this._setRanges([o],r)}else{if(!dt(e))throw new I.b("model-selection-setTo-not-selectable: Cannot set the selection to the given place.",[this,e]);this._setRanges(e,n&&!!n.backward)}}},{key:"_setRanges",value:function(e){var n=this,t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=(e=Array.from(e)).some(function(c){if(!(c instanceof F))throw new I.b("model-selection-set-ranges-not-range: Selection range set to an object that is not an instance of model.Range.",[n,e]);return n._ranges.every(function(u){return!u.isEqual(c)})});if(e.length!==this._ranges.length||r){this._removeAllRanges();var s,o=k(e);try{for(o.s();!(s=o.n()).done;)this._pushRange(s.value)}catch(c){o.e(c)}finally{o.f()}this._lastRangeBackward=!!t,this.fire("change:range",{directChange:!0})}}},{key:"setFocus",value:function(e,n){if(null===this.anchor)throw new I.b("model-selection-setFocus-no-ranges: Cannot set selection focus if there are no ranges in selection.",[this,e]);var t=H._createAt(e,n);if("same"!=t.compareWith(this.focus)){var r=this.anchor;this._ranges.length&&this._popRange(),"before"==t.compareWith(r)?(this._pushRange(new F(t,r)),this._lastRangeBackward=!0):(this._pushRange(new F(r,t)),this._lastRangeBackward=!1),this.fire("change:range",{directChange:!0})}}},{key:"getAttribute",value:function(e){return this._attrs.get(e)}},{key:"getAttributes",value:function(){return this._attrs.entries()}},{key:"getAttributeKeys",value:function(){return this._attrs.keys()}},{key:"hasAttribute",value:function(e){return this._attrs.has(e)}},{key:"removeAttribute",value:function(e){this.hasAttribute(e)&&(this._attrs.delete(e),this.fire("change:attribute",{attributeKeys:[e],directChange:!0}))}},{key:"setAttribute",value:function(e,n){this.getAttribute(e)!==n&&(this._attrs.set(e,n),this.fire("change:attribute",{attributeKeys:[e],directChange:!0}))}},{key:"getSelectedElement",value:function(){return 1!==this.rangeCount?null:this.getFirstRange().getContainedElement()}},{key:"is",value:function(e){return"selection"===e||"model:selection"===e}},{key:"getSelectedBlocks",value:G.mark(function i(){var e,n,t,r,o,s,l,c,u,d;return G.wrap(function(f){for(;;)switch(f.prev=f.next){case 0:e=new WeakSet,n=k(this.getRanges()),f.prev=2,n.s();case 4:if((t=n.n()).done){f.next=38;break}if(o=el((r=t.value).start,e),f.t0=o&&co(o,r),!f.t0){f.next=11;break}return f.next=11,o;case 11:s=k(r.getWalker()),f.prev=12,s.s();case 14:if((l=s.n()).done){f.next=23;break}if(u=(c=l.value).item,f.t1="elementEnd"==c.type&&$v(u,e,r),!f.t1){f.next=21;break}return f.next=21,u;case 21:f.next=14;break;case 23:f.next=28;break;case 25:f.prev=25,f.t2=f.catch(12),s.e(f.t2);case 28:return f.prev=28,s.f(),f.finish(28);case 31:if(d=el(r.end,e),f.t3=d&&!r.end.isTouching(H._createAt(d,0))&&co(d,r),!f.t3){f.next=36;break}return f.next=36,d;case 36:f.next=4;break;case 38:f.next=43;break;case 40:f.prev=40,f.t4=f.catch(2),n.e(f.t4);case 43:return f.prev=43,n.f(),f.finish(43);case 46:case"end":return f.stop()}},i,this,[[2,40,43,46],[12,25,28,31]])})},{key:"containsEntireContent",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.anchor.root,n=H._createAt(e,0),t=H._createAt(e,"end");return n.isTouching(this.getFirstPosition())&&t.isTouching(this.getLastPosition())}},{key:"_pushRange",value:function(e){this._checkRange(e),this._ranges.push(new F(e.start,e.end))}},{key:"_checkRange",value:function(e){for(var n=0;n<this._ranges.length;n++)if(e.isIntersecting(this._ranges[n]))throw new I.b("model-selection-range-intersects: Trying to add a range that intersects with another range in the selection.",[this,e],{addedRange:e,intersectingRange:this._ranges[n]})}},{key:"_removeAllRanges",value:function(){for(;this._ranges.length>0;)this._popRange()}},{key:"_popRange",value:function(){this._ranges.pop()}}]),a}();function Xs(a,i){return!i.has(a)&&(i.add(a),a.root.document.model.schema.isBlock(a)&&a.parent)}function $v(a,i,e){return Xs(a,i)&&co(a,e)}function el(a,i){var e=a.parent.root.document.model.schema,n=a.parent.getAncestors({parentFirst:!0,includeSelf:!0}),t=!1,r=n.find(function(o){return!t&&!(t=e.isLimit(o))&&Xs(o,i)});return n.forEach(function(o){return i.add(o)}),r}function co(a,i){var e=function(n){for(var t=n.root.document.model.schema,r=n.parent;r;){if(t.isBlock(r))return r;r=r.parent}}(a);return!e||!i.containsRange(F._createOn(e),!0)}se(en,Se);var yn=function(a){P(e,a);var i=M(e);function e(n,t){var r;return A(this,e),r=i.call(this,n,t),Kv.call(X(r)),r}return C(e,[{key:"detach",value:function(){this.stopListening()}},{key:"is",value:function(t){return"liveRange"===t||"model:liveRange"===t||"range"==t||"model:range"===t}},{key:"toRange",value:function(){return new F(this.start,this.end)}}],[{key:"fromRange",value:function(t){return new e(t.start,t.end)}}]),e}(F);function Kv(){var a=this;this.listenTo(this.root.document.model,"applyOperation",function(i,e){var n=e[0];n.isDocumentOperation&&Jv.call(a,n)},{priority:"low"})}function Jv(a){var i=this.getTransformedByOperation(a),e=F._createFromRanges(i),n=!e.isEqual(this),t=function(s,l){switch(l.type){case"insert":return s.containsPosition(l.position);case"move":case"remove":case"reinsert":case"merge":return s.containsPosition(l.sourcePosition)||s.start.isEqual(l.sourcePosition)||s.containsPosition(l.targetPosition);case"split":return s.containsPosition(l.splitPosition)||s.containsPosition(l.insertionPosition)}return!1}(this,a),r=null;if(n){"$graveyard"==e.root.rootName&&(r="remove"==a.type?a.sourcePosition:a.deletionPosition);var o=this.toRange();this.start=e.start,this.end=e.end,this.fire("change:range",o,{deletionPosition:r})}else t&&this.fire("change:content",this.toRange(),{deletionPosition:r})}se(yn,Se);var pt=function(){function a(i){A(this,a),this._selection=new Qv(i),this._selection.delegate("change:range").to(this),this._selection.delegate("change:attribute").to(this),this._selection.delegate("change:marker").to(this)}return C(a,[{key:"isCollapsed",get:function(){return this._selection.isCollapsed}},{key:"anchor",get:function(){return this._selection.anchor}},{key:"focus",get:function(){return this._selection.focus}},{key:"rangeCount",get:function(){return this._selection.rangeCount}},{key:"hasOwnRange",get:function(){return this._selection.hasOwnRange}},{key:"isBackward",get:function(){return this._selection.isBackward}},{key:"isGravityOverridden",get:function(){return this._selection.isGravityOverridden}},{key:"markers",get:function(){return this._selection.markers}},{key:"_ranges",get:function(){return this._selection._ranges}},{key:"getRanges",value:function(){return this._selection.getRanges()}},{key:"getFirstPosition",value:function(){return this._selection.getFirstPosition()}},{key:"getLastPosition",value:function(){return this._selection.getLastPosition()}},{key:"getFirstRange",value:function(){return this._selection.getFirstRange()}},{key:"getLastRange",value:function(){return this._selection.getLastRange()}},{key:"getSelectedBlocks",value:function(){return this._selection.getSelectedBlocks()}},{key:"getSelectedElement",value:function(){return this._selection.getSelectedElement()}},{key:"containsEntireContent",value:function(e){return this._selection.containsEntireContent(e)}},{key:"destroy",value:function(){this._selection.destroy()}},{key:"getAttributeKeys",value:function(){return this._selection.getAttributeKeys()}},{key:"getAttributes",value:function(){return this._selection.getAttributes()}},{key:"getAttribute",value:function(e){return this._selection.getAttribute(e)}},{key:"hasAttribute",value:function(e){return this._selection.hasAttribute(e)}},{key:"refresh",value:function(){this._selection._updateMarkers(),this._selection._updateAttributes(!1)}},{key:"is",value:function(e){return"selection"===e||"model:selection"==e||"documentSelection"==e||"model:documentSelection"==e}},{key:"_setFocus",value:function(e,n){this._selection.setFocus(e,n)}},{key:"_setTo",value:function(e,n,t){this._selection.setTo(e,n,t)}},{key:"_setAttribute",value:function(e,n){this._selection.setAttribute(e,n)}},{key:"_removeAttribute",value:function(e){this._selection.removeAttribute(e)}},{key:"_getStoredAttributes",value:function(){return this._selection._getStoredAttributes()}},{key:"_overrideGravity",value:function(){return this._selection.overrideGravity()}},{key:"_restoreGravity",value:function(e){this._selection.restoreGravity(e)}}],[{key:"_getStoreAttributeKey",value:function(e){return"selection:"+e}},{key:"_isStoreAttributeKey",value:function(e){return e.startsWith("selection:")}}]),a}();se(pt,Se);var Qv=function(a){P(e,a);var i=M(e);function e(n){var t;return A(this,e),(t=i.call(this)).markers=new Qe({idProperty:"name"}),t._model=n.model,t._document=n,t._attributePriority=new Map,t._selectionRestorePosition=null,t._hasChangedRange=!1,t._overriddenGravityRegister=new Set,t.listenTo(t._model,"applyOperation",function(r,o){var s=o[0];s.isDocumentOperation&&"marker"!=s.type&&"rename"!=s.type&&"noop"!=s.type&&(0==t._ranges.length&&t._selectionRestorePosition&&t._fixGraveyardSelection(t._selectionRestorePosition),t._selectionRestorePosition=null,t._hasChangedRange&&(t._hasChangedRange=!1,t.fire("change:range",{directChange:!1})))},{priority:"lowest"}),t.on("change:range",function(){var o,r=k(t.getRanges());try{for(r.s();!(o=r.n()).done;){var s=o.value;if(!t._document._validateSelectionRange(s))throw new I.b("document-selection-wrong-position: Range from document selection starts or ends at incorrect position.",X(t),{range:s})}}catch(l){r.e(l)}finally{r.f()}}),t.listenTo(t._model.markers,"update",function(){return t._updateMarkers()}),t.listenTo(t._document,"change",function(r,o){!function(s,l){var d,u=k(s.document.differ.getChanges());try{var h=function(){var g=d.value;if("insert"!=g.type)return"continue";var m=g.position.parent;g.length===m.maxOffset&&s.enqueueChange(l,function(p){var _,y=Array.from(m.getAttributeKeys()).filter(function(x){return x.startsWith("selection:")}),w=k(y);try{for(w.s();!(_=w.n()).done;)p.removeAttribute(_.value,m)}catch(x){w.e(x)}finally{w.f()}})};for(u.s();!(d=u.n()).done;)h()}catch(v){u.e(v)}finally{u.f()}}(t._model,o)}),t}return C(e,[{key:"isCollapsed",get:function(){return 0===this._ranges.length?this._document._getDefaultRange().isCollapsed:B(L(e.prototype),"isCollapsed",this)}},{key:"anchor",get:function(){return B(L(e.prototype),"anchor",this)||this._document._getDefaultRange().start}},{key:"focus",get:function(){return B(L(e.prototype),"focus",this)||this._document._getDefaultRange().end}},{key:"rangeCount",get:function(){return this._ranges.length?this._ranges.length:1}},{key:"hasOwnRange",get:function(){return this._ranges.length>0}},{key:"isGravityOverridden",get:function(){return!!this._overriddenGravityRegister.size}},{key:"destroy",value:function(){for(var t=0;t<this._ranges.length;t++)this._ranges[t].detach();this.stopListening()}},{key:"getRanges",value:G.mark(function n(){return G.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:if(!this._ranges.length){r.next=4;break}return r.delegateYield(B(L(e.prototype),"getRanges",this).call(this),"t0",2);case 2:r.next=6;break;case 4:return r.next=6,this._document._getDefaultRange();case 6:case"end":return r.stop()}},n,this)})},{key:"getFirstRange",value:function(){return B(L(e.prototype),"getFirstRange",this).call(this)||this._document._getDefaultRange()}},{key:"getLastRange",value:function(){return B(L(e.prototype),"getLastRange",this).call(this)||this._document._getDefaultRange()}},{key:"setTo",value:function(t,r,o){B(L(e.prototype),"setTo",this).call(this,t,r,o),this._updateAttributes(!0),this._updateMarkers()}},{key:"setFocus",value:function(t,r){B(L(e.prototype),"setFocus",this).call(this,t,r),this._updateAttributes(!0),this._updateMarkers()}},{key:"setAttribute",value:function(t,r){this._setAttribute(t,r)&&this.fire("change:attribute",{attributeKeys:[t],directChange:!0})}},{key:"removeAttribute",value:function(t){this._removeAttribute(t)&&this.fire("change:attribute",{attributeKeys:[t],directChange:!0})}},{key:"overrideGravity",value:function(){var t=Et();return this._overriddenGravityRegister.add(t),1===this._overriddenGravityRegister.size&&this._updateAttributes(!0),t}},{key:"restoreGravity",value:function(t){if(!this._overriddenGravityRegister.has(t))throw new I.b("document-selection-gravity-wrong-restore: Attempting to restore the selection gravity for an unknown UID.",this,{uid:t});this._overriddenGravityRegister.delete(t),this.isGravityOverridden||this._updateAttributes(!0)}},{key:"_popRange",value:function(){this._ranges.pop().detach()}},{key:"_pushRange",value:function(t){var r=this._prepareRange(t);r&&this._ranges.push(r)}},{key:"_prepareRange",value:function(t){var r=this;if(this._checkRange(t),t.root!=this._document.graveyard){var o=yn.fromRange(t);return o.on("change:range",function(s,l,c){if(r._hasChangedRange=!0,o.root==r._document.graveyard){r._selectionRestorePosition=c.deletionPosition;var u=r._ranges.indexOf(o);r._ranges.splice(u,1),o.detach()}}),o}}},{key:"_updateMarkers",value:function(){var s,t=[],r=!1,o=k(this._model.markers);try{for(o.s();!(s=o.n()).done;){var d,l=s.value,c=l.getRange(),u=k(this.getRanges());try{for(u.s();!(d=u.n()).done;){var h=d.value;c.containsRange(h,!h.isCollapsed)&&t.push(l)}}catch(_){u.e(_)}finally{u.f()}}}catch(_){o.e(_)}finally{o.f()}for(var f=Array.from(this.markers),v=0,g=t;v<g.length;v++){var m=g[v];this.markers.has(m)||(this.markers.add(m),r=!0)}for(var p=0,y=Array.from(this.markers);p<y.length;p++){var w=y[p];t.includes(w)||(this.markers.remove(w),r=!0)}r&&this.fire("change:marker",{oldMarkers:f,directChange:!1})}},{key:"_updateAttributes",value:function(t){var r=It(this._getSurroundingAttributes()),o=It(this.getAttributes());if(t)this._attributePriority=new Map,this._attrs=new Map;else{var l,s=k(this._attributePriority);try{for(s.s();!(l=s.n()).done;){var c=ee(l.value,2),u=c[0];"low"==c[1]&&(this._attrs.delete(u),this._attributePriority.delete(u))}}catch(x){s.e(x)}finally{s.f()}}this._setAttributesTo(r);var v,h=[],f=k(this.getAttributes());try{for(f.s();!(v=f.n()).done;){var g=ee(v.value,2),m=g[0],p=g[1];o.has(m)&&o.get(m)===p||h.push(m)}}catch(x){f.e(x)}finally{f.f()}var w,y=k(o);try{for(y.s();!(w=y.n()).done;){var T=ee(w.value,1)[0];this.hasAttribute(T)||h.push(T)}}catch(x){y.e(x)}finally{y.f()}h.length>0&&this.fire("change:attribute",{attributeKeys:h,directChange:!1})}},{key:"_setAttribute",value:function(t,r){var s=arguments.length>2&&void 0!==arguments[2]&&!arguments[2]?"low":"normal";return("low"!=s||"normal"!=this._attributePriority.get(t))&&B(L(e.prototype),"getAttribute",this).call(this,t)!==r&&(this._attrs.set(t,r),this._attributePriority.set(t,s),!0)}},{key:"_removeAttribute",value:function(t){var o=arguments.length>1&&void 0!==arguments[1]&&!arguments[1]?"low":"normal";return!("low"==o&&"normal"==this._attributePriority.get(t)||(this._attributePriority.set(t,o),!B(L(e.prototype),"hasAttribute",this).call(this,t)||(this._attrs.delete(t),0)))}},{key:"_setAttributesTo",value:function(t){var s,r=new Set,o=k(this.getAttributes());try{for(o.s();!(s=o.n()).done;){var l=ee(s.value,2),c=l[0],u=l[1];t.get(c)!==u&&this._removeAttribute(c,!1)}}catch(m){o.e(m)}finally{o.f()}var h,d=k(t);try{for(d.s();!(h=d.n()).done;){var f=ee(h.value,2),v=f[0];this._setAttribute(v,f[1],!1)&&r.add(v)}}catch(m){d.e(m)}finally{d.f()}return r}},{key:"_getStoredAttributes",value:G.mark(function n(){var t,r,o,s,l;return G.wrap(function(u){for(;;)switch(u.prev=u.next){case 0:if(t=this.getFirstPosition().parent,!this.isCollapsed||!t.isEmpty){u.next=21;break}r=k(t.getAttributeKeys()),u.prev=3,r.s();case 5:if((o=r.n()).done){u.next=13;break}if(!(s=o.value).startsWith("selection:")){u.next=11;break}return l=s.substr(10),u.next=11,[l,t.getAttribute(s)];case 11:u.next=5;break;case 13:u.next=18;break;case 15:u.prev=15,u.t0=u.catch(3),r.e(u.t0);case 18:return u.prev=18,r.f(),u.finish(18);case 21:case"end":return u.stop()}},n,this,[[3,15,18,21]])})},{key:"_getSurroundingAttributes",value:function(){var t=this.getFirstPosition(),r=this._model.schema,o=null;if(this.isCollapsed){var s=t.textNode?t.textNode:t.nodeBefore,l=t.textNode?t.textNode:t.nodeAfter;if(this.isGravityOverridden||(o=Dr(s)),o||(o=Dr(l)),!this.isGravityOverridden&&!o)for(var c=s;c&&!r.isInline(c)&&!o;)o=Dr(c=c.previousSibling);if(!o)for(var u=l;u&&!r.isInline(u)&&!o;)o=Dr(u=u.nextSibling);o||(o=this._getStoredAttributes())}else{var f,d=this.getFirstRange(),h=k(d);try{for(h.s();!(f=h.n()).done;){var v=f.value;if(v.item.is("element")&&r.isObject(v.item))break;if("text"==v.type){o=v.item.getAttributes();break}}}catch(g){h.e(g)}finally{h.f()}}return o}},{key:"_fixGraveyardSelection",value:function(t){var r=this._model.schema.getNearestSelectionRange(t);r&&this._pushRange(r)}}]),e}(en);function Dr(a){return a instanceof Ct||a instanceof Ee?a.getAttributes():null}var tl=function(){function a(i){A(this,a),this._dispatchers=i}return C(a,[{key:"add",value:function(e){var t,n=k(this._dispatchers);try{for(n.s();!(t=n.n()).done;)e(t.value)}catch(o){n.e(o)}finally{n.f()}return this}}]),a}(),Tt=function(i){return Oi(i,5)},Zv=function(a){P(e,a);var i=M(e);function e(){return A(this,e),i.apply(this,arguments)}return C(e,[{key:"elementToElement",value:function(t){return this.add(((r=Tt(r=t)).view=Lr(r.view,"container"),function(o){var s;o.on("insert:"+r.model,(s=r.view,function(l,c,u){var d=s(c.item,u);if(d&&u.consumable.consume(c.item,"insert")){var h=u.mapper.toViewPosition(c.range.start);u.mapper.bindElements(c.item,d),u.writer.insert(h,d)}}),{priority:r.converterPriority||"normal"})}));var r}},{key:"attributeToElement",value:function(t){return this.add(function(r){var o="attribute:"+((r=Tt(r)).model.key?r.model.key:r.model);if(r.model.name&&(o+=":"+r.model.name),r.model.values){var l,s=k(r.model.values);try{for(s.s();!(l=s.n()).done;){var c=l.value;r.view[c]=Lr(r.view[c],"attribute")}}catch(d){s.e(d)}finally{s.f()}}else r.view=Lr(r.view,"attribute");var u=il(r);return function(d){var h;d.on(o,(h=u,function(f,v,g){var m=h(v.attributeOldValue,g),p=h(v.attributeNewValue,g);if((m||p)&&g.consumable.consume(v.item,f.name)){var y=g.writer;if(v.item instanceof en||v.item instanceof pt)y.wrap(y.document.selection.getFirstRange(),p);else{var _=g.mapper.toViewRange(v.range);null!==v.attributeOldValue&&m&&(_=y.unwrap(_,m)),null!==v.attributeNewValue&&p&&y.wrap(_,p)}}}),{priority:r.converterPriority||"normal"})}}(t))}},{key:"attributeToAttribute",value:function(t){return this.add(function(r){var o="attribute:"+((r=Tt(r)).model.key?r.model.key:r.model);if(r.model.name&&(o+=":"+r.model.name),r.model.values){var l,s=k(r.model.values);try{for(s.s();!(l=s.n()).done;){var c=l.value;r.view[c]=ol(r.view[c])}}catch(d){s.e(d)}finally{s.f()}}else r.view=ol(r.view);var u=il(r);return function(d){var h;d.on(o,(h=u,function(f,v,g){var m=h(v.attributeOldValue,g),p=h(v.attributeNewValue,g);if((m||p)&&g.consumable.consume(v.item,f.name)){var y=g.mapper.toViewElement(v.item),w=g.writer;if(!y)throw new I.b("conversion-attribute-to-attribute-on-text: Trying to convert text node's attribute with attribute-to-attribute converter.",[v,g]);if(null!==v.attributeOldValue&&m)if("class"==m.key){var x,_=Array.isArray(m.value)?m.value:[m.value],T=k(_);try{for(T.s();!(x=T.n()).done;)w.removeClass(x.value,y)}catch(ze){T.e(ze)}finally{T.f()}}else if("style"==m.key)for(var z=0,J=Object.keys(m.value);z<J.length;z++)w.removeStyle(J[z],y);else w.removeAttribute(m.key,y);if(null!==v.attributeNewValue&&p)if("class"==p.key){var W,Q=Array.isArray(p.value)?p.value:[p.value],K=k(Q);try{for(K.s();!(W=K.n()).done;)w.addClass(W.value,y)}catch(ze){K.e(ze)}finally{K.f()}}else if("style"==p.key)for(var oe=0,ge=Object.keys(p.value);oe<ge.length;oe++){var Me=ge[oe];w.setStyle(Me,p.value[Me],y)}else w.setAttribute(p.key,p.value,y)}}),{priority:r.converterPriority||"normal"})}}(t))}},{key:"markerToElement",value:function(t){return this.add(((r=Tt(r=t)).view=Lr(r.view,"ui"),function(o){var s;o.on("addMarker:"+r.model,(s=r.view,function(l,c,u){c.isOpening=!0;var d=s(c,u);c.isOpening=!1;var h=s(c,u);if(d&&h){var f=c.markerRange;if(!f.isCollapsed||u.consumable.consume(f,l.name)){var g,v=k(f);try{for(v.s();!(g=v.n()).done;)if(!u.consumable.consume(g.value.item,l.name))return}catch(w){v.e(w)}finally{v.f()}var p=u.mapper,y=u.writer;y.insert(p.toViewPosition(f.start),d),u.mapper.bindElementToMarker(d,c.markerName),f.isCollapsed||(y.insert(p.toViewPosition(f.end),h),u.mapper.bindElementToMarker(h,c.markerName)),l.stop()}}}),{priority:r.converterPriority||"normal"}),o.on("removeMarker:"+r.model,function(l,c,u){var d=u.mapper.markerNameToElements(c.markerName);if(d){var f,h=k(d);try{for(h.s();!(f=h.n()).done;){var v=f.value;u.mapper.unbindElementFromMarkerName(v,c.markerName),u.writer.clear(u.writer.createRangeOn(v),v)}}catch(g){h.e(g)}finally{h.f()}u.writer.clearClonedElementsGroup(c.markerName),l.stop()}},{priority:r.converterPriority||"normal"})}));var r}},{key:"markerToHighlight",value:function(t){return this.add((r=t,function(o){var s,l;o.on("addMarker:"+r.model,(s=r.view,function(l,c,u){if(c.item&&(c.item instanceof en||c.item instanceof pt||c.item.is("$textProxy"))){var d=uo(s,c,u);if(d&&u.consumable.consume(c.item,l.name)){var h=u.writer,f=nl(h,d),v=h.document.selection;if(c.item instanceof en||c.item instanceof pt)h.wrap(v.getFirstRange(),f,v);else{var y,g=u.mapper.toViewRange(c.range),m=h.wrap(g,f),p=k(m.getItems());try{for(p.s();!(y=p.n()).done;){var w=y.value;if(w.is("attributeElement")&&w.isSimilar(f)){u.mapper.bindElementToMarker(w,c.markerName);break}}}catch(_){p.e(_)}finally{p.f()}}}}}),{priority:r.converterPriority||"normal"}),o.on("addMarker:"+r.model,(l=r.view,function(c,u,d){if(u.item&&u.item instanceof Oe){var h=uo(l,u,d);if(h&&d.consumable.test(u.item,c.name)){var f=d.mapper.toViewElement(u.item);if(f&&f.getCustomProperty("addHighlight")){d.consumable.consume(u.item,c.name);var g,v=k(F._createIn(u.item));try{for(v.s();!(g=v.n()).done;)d.consumable.consume(g.value.item,c.name)}catch(p){v.e(p)}finally{v.f()}f.getCustomProperty("addHighlight")(f,h,d.writer),d.mapper.bindElementToMarker(f,u.markerName)}}}}),{priority:r.converterPriority||"normal"}),o.on("removeMarker:"+r.model,function(l){return function(c,u,d){if(!u.markerRange.isCollapsed){var h=uo(l,u,d);if(h){var f=nl(d.writer,h),v=d.mapper.markerNameToElements(u.markerName);if(v){var m,g=k(v);try{for(g.s();!(m=g.n()).done;){var p=m.value;d.mapper.unbindElementFromMarkerName(p,u.markerName),p.is("attributeElement")?d.writer.unwrap(d.writer.createRangeOn(p),f):p.getCustomProperty("removeHighlight")(p,h.id,d.writer)}}catch(y){g.e(y)}finally{g.f()}d.writer.clearClonedElementsGroup(u.markerName),c.stop()}}}}}(r.view),{priority:r.converterPriority||"normal"})}));var r}},{key:"markerToData",value:function(t){return this.add((o=(r=Tt(r=t)).model,r.view||(r.view=function(s){return{group:o,name:s.substr(r.model.length+1)}}),function(s){var l,c;s.on("addMarker:"+o,(l=r.view,function(c,u,d){var h=l(u.markerName,d);if(h){var f=u.markerRange;d.consumable.consume(f,c.name)&&(rl(f,!1,d,u,h),rl(f,!0,d,u,h),c.stop())}}),{priority:r.converterPriority||"normal"}),s.on("removeMarker:"+o,(c=r.view,function(u,d,h){var f=c(d.markerName,h);if(f){var v=h.mapper.markerNameToElements(d.markerName);if(v){var m,g=k(v);try{for(g.s();!(m=g.n()).done;){var p=m.value;h.mapper.unbindElementFromMarkerName(p,d.markerName),p.is("containerElement")?(y("data-".concat(f.group,"-start-before"),p),y("data-".concat(f.group,"-start-after"),p),y("data-".concat(f.group,"-end-before"),p),y("data-".concat(f.group,"-end-after"),p)):h.writer.clear(h.writer.createRangeOn(p),p)}}catch(w){g.e(w)}finally{g.f()}h.writer.clearClonedElementsGroup(d.markerName),u.stop()}}function y(w,_){if(_.hasAttribute(w)){var T=new Set(_.getAttribute(w).split(","));T.delete(f.name),0==T.size?h.writer.removeAttribute(w,_):h.writer.setAttribute(w,Array.from(T).join(","),_)}}}),{priority:r.converterPriority||"normal"})}));var r,o}}]),e}(tl);function nl(a,i){var e=a.createAttributeElement("span",i.attributes);return i.classes&&e._addClass(i.classes),i.priority&&(e._priority=i.priority),e._id=i.id,e}function rl(a,i,e,n,t){var o,s,l,c,u,d,h,f,g,r=i?a.start:a.end;e.schema.checkChild(r,"$text")?(l=e.mapper.toViewPosition(r),c=i,u=e,d=n,f="".concat((h=t).group,"-").concat(c?"start":"end"),g=u.writer.createUIElement(f,h.name?{name:h.name}:null),u.writer.insert(l,g),u.mapper.bindElementToMarker(g,d.markerName)):(i&&r.nodeAfter||!i&&!r.nodeBefore?(o=r.nodeAfter,s=!0):(o=r.nodeBefore,s=!1),function(l,c,u,d,h,f){var v="data-".concat(f.group,"-").concat(c?"start":"end","-").concat(u?"before":"after"),g=l.hasAttribute(v)?l.getAttribute(v).split(","):[];g.unshift(f.name),d.writer.setAttribute(v,g.join(","),l),d.mapper.bindElementToMarker(l,h.markerName)}(e.mapper.toViewElement(o),i,s,e,n,t))}function Lr(a,i){return"function"==typeof a?a:function(e,n){return function(t,r,o){"string"==typeof t&&(t={name:t});var s,l=r.writer,c=Object.assign({},t.attributes);if(s="container"==o?l.createContainerElement(t.name,c):"attribute"==o?l.createAttributeElement(t.name,c,{priority:t.priority||gn.DEFAULT_PRIORITY}):l.createUIElement(t.name,c),t.styles)for(var h=0,f=Object.keys(t.styles);h<f.length;h++){var v=f[h];l.setStyle(v,t.styles[v],s)}if(t.classes){var g=t.classes;if("string"==typeof g)l.addClass(g,s);else{var p,m=k(g);try{for(m.s();!(p=m.n()).done;)l.addClass(p.value,s)}catch(w){m.e(w)}finally{m.f()}}}return s}(a,n,i)}}function il(a){return a.model.values?function(i,e){var n=a.view[i];return n?n(i,e):null}:a.view}function ol(a){return"string"==typeof a?function(i){return{key:a,value:i}}:"object"==typeof a?a.value?function(){return a}:function(i){return{key:a.key,value:i}}:a}function uo(a,i,e){var n="function"==typeof a?a(i,e):a;return n?(n.priority||(n.priority=10),n.id||(n.id=i.markerName),n):null}function al(a){var r,i=a.model,e=i.schema,n=i.document,t=k(n.getRootNames());try{for(t.s();!(r=t.n()).done;){var s=n.getRoot(r.value);if(s.isEmpty&&!e.checkChild(s,"$text")&&e.checkChild(s,"paragraph"))return a.insertElement("paragraph",s),!0}}catch(l){t.e(l)}finally{t.f()}return!1}function sl(a,i,e){var n=e.createContext(a);return!!e.checkChild(n,"paragraph")&&!!e.checkChild(n.push("paragraph"),i)}function ll(a,i){var e=i.createElement("paragraph");return i.insert(e,a),i.createPositionAt(e,0)}var Xv=function(a){P(e,a);var i=M(e);function e(){return A(this,e),i.apply(this,arguments)}return C(e,[{key:"elementToElement",value:function(t){return this.add(cl(t))}},{key:"elementToAttribute",value:function(t){return this.add(function(r){ul(r=Tt(r));var o=dl(r,!1),s=ho(r.view),l=s?"element:"+s:"element";return function(c){c.on(l,o,{priority:r.converterPriority||"low"})}}(t))}},{key:"attributeToAttribute",value:function(t){return this.add(function(r){var o=null;("string"==typeof(r=Tt(r)).view||r.view.key)&&(o=function(l){"string"==typeof l.view&&(l.view={key:l.view});var u,c=l.view.key;return u="class"==c||"style"==c?te({},"class"==c?"classes":"styles",l.view.value):{attributes:te({},c,void 0===l.view.value?/[\s\S]*/:l.view.value)},l.view.name&&(u.name=l.view.name),l.view=u,c}(r)),ul(r,o);var s=dl(r,!0);return function(l){l.on("element",s,{priority:r.converterPriority||"low"})}}(t))}},{key:"elementToMarker",value:function(t){return console.warn(Object(I.a)("upcast-helpers-element-to-marker-deprecated: The UpcastHelpers#elementToMarker() method was deprecated and will be removed in the near future. Please use UpcastHelpers#dataToMarker() instead.")),this.add((o=r=Tt(r=t),s=o.model,o.model=function(l,c){var u="string"==typeof s?s:s(l,c);return c.writer.createElement("$marker",{"data-name":u})},cl(r)));var r,o,s}},{key:"dataToMarker",value:function(t){return this.add(function(r){(r=Tt(r)).model||(r.model=function(l){return l?r.view+":"+l:r.view});var o=fo(hl(r,"start")),s=fo(hl(r,"end"));return function(l){l.on("element:"+r.view+"-start",o,{priority:r.converterPriority||"normal"}),l.on("element:"+r.view+"-end",s,{priority:r.converterPriority||"normal"});var h,c=mt.get("low"),u=mt.get("highest"),d=mt.get(r.converterPriority)/u;l.on("element",(h=r,function(f,v,g){var m="data-"+h.view;function p(y,w){var T,_=k(w);try{for(_.s();!(T=_.n()).done;){var N=h.model(T.value,g),D=g.writer.createElement("$marker",{"data-name":N});g.writer.insert(D,y),v.modelCursor=v.modelCursor.isEqual(y)?v.modelCursor.getShiftedBy(1):v.modelCursor._getTransformedByInsertion(y,1),v.modelRange=v.modelRange._getTransformedByInsertion(y,1)[0]}}catch(z){_.e(z)}finally{_.f()}}v.modelRange||(v=Object.assign(v,g.convertChildren(v.viewItem,v.modelCursor))),g.consumable.consume(v.viewItem,{attributes:m+"-end-after"})&&p(v.modelRange.end,v.viewItem.getAttribute(m+"-end-after").split(",")),g.consumable.consume(v.viewItem,{attributes:m+"-start-after"})&&p(v.modelRange.end,v.viewItem.getAttribute(m+"-start-after").split(",")),g.consumable.consume(v.viewItem,{attributes:m+"-end-before"})&&p(v.modelRange.start,v.viewItem.getAttribute(m+"-end-before").split(",")),g.consumable.consume(v.viewItem,{attributes:m+"-start-before"})&&p(v.modelRange.start,v.viewItem.getAttribute(m+"-start-before").split(","))}),{priority:c+d})}}(t))}}]),e}(tl);function cl(a){var i=fo(a=Tt(a)),e=ho(a.view),n=e?"element:"+e:"element";return function(t){t.on(n,i,{priority:a.converterPriority||"normal"})}}function ho(a){return"string"==typeof a?a:"object"==typeof a&&"string"==typeof a.name?a.name:null}function fo(a){var i=new Nt(a.view);return function(e,n,t){var l,u,r=i.match(n.viewItem);if(r){var o=r.match;if(o.name=!0,t.consumable.test(n.viewItem,o)){var s=(u=t,(l=a.model)instanceof Function?l(n.viewItem,u):u.writer.createElement(l));s&&t.safeInsert(s,n.modelCursor)&&(t.consumable.consume(n.viewItem,o),t.convertChildren(n.viewItem,s),t.updateConversionResult(s,n))}}}}function ul(a){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;a.model={key:"object"!=typeof a.model?a.model:a.model.key,value:"object"!=typeof a.model||void 0===a.model.value?null===i||function(r){return r.getAttribute(i)}:a.model.value}}function dl(a,i){var e=new Nt(a.view);return function(n,t,r){var c,d,o=e.match(t.viewItem);if(o){var s=a.model.key,l="function"==typeof a.model.value?a.model.value(t.viewItem,r):a.model.value;null!==l&&("object"==typeof(d="function"==typeof(c=a.view)?c(t.viewItem):c)&&!ho(d)||d.classes||d.attributes||d.styles?delete o.match.name:o.match.name=!0,r.consumable.test(t.viewItem,o.match)&&(t.modelRange||(t=Object.assign(t,r.convertChildren(t.viewItem,t.modelCursor))),function(c,u,d,h){for(var f=!1,v=0,g=Array.from(c.getItems({shallow:d}));v<g.length;v++){var m=g[v];h.schema.checkAttribute(m,u.key)&&(h.writer.setAttribute(u.key,u.value,m),f=!0)}return f}(t.modelRange,{key:s,value:l},i,r)&&r.consumable.consume(t.viewItem,o.match)))}}}function hl(a,i){var e={};return e.view=a.view+"-"+i,e.model=function(n,t){var r=n.getAttribute("name"),o=a.model(r,t);return t.writer.createElement("$marker",{"data-name":o})},e}var fl=function(){function a(i,e){var n=this;A(this,a),this.model=i,this.view=new Js(e),this.mapper=new so,this.downcastDispatcher=new lo({mapper:this.mapper,schema:i.schema});var s,l,t=this.model.document,r=t.selection,o=this.model.markers;this.listenTo(this.model,"_beforeChanges",function(){n.view._disableRendering(!0)},{priority:"highest"}),this.listenTo(this.model,"_afterChanges",function(){n.view._disableRendering(!1)},{priority:"lowest"}),this.listenTo(t,"change",function(){n.view.change(function(s){n.downcastDispatcher.convertChanges(t.differ,o,s),n.downcastDispatcher.convertSelection(r,o,s)})},{priority:"low"}),this.listenTo(this.view.document,"selectionChange",(s=this.model,l=this.mapper,function(c,u){var v,d=u.newSelection,h=[],f=k(d.getRanges());try{for(f.s();!(v=f.n()).done;)h.push(l.toModelRange(v.value))}catch(p){f.e(p)}finally{f.f()}var m=s.createSelection(h,{backward:d.isBackward});m.isEqual(s.document.selection)||s.change(function(p){p.setSelection(m)})})),this.downcastDispatcher.on("insert:$text",function(s,l,c){if(c.consumable.consume(l.item,"insert")){var u=c.writer,d=c.mapper.toViewPosition(l.range.start),h=u.createText(l.item.data);u.insert(d,h)}},{priority:"lowest"}),this.downcastDispatcher.on("remove",function(s,l,c){var m,u=c.mapper.toViewPosition(l.position),d=l.position.getShiftedBy(l.length),h=c.mapper.toViewPosition(d,{isPhantom:!0}),f=c.writer.createRange(u,h),v=c.writer.remove(f.getTrimmed()),g=k(c.writer.createRangeIn(v).getItems());try{for(g.s();!(m=g.n()).done;)c.mapper.unbindViewElement(m.value)}catch(y){g.e(y)}finally{g.f()}},{priority:"low"}),this.downcastDispatcher.on("selection",function(s,l,c){var f,u=c.writer,h=k(u.document.selection.getRanges());try{for(h.s();!(f=h.n()).done;){var v=f.value;v.isCollapsed&&v.end.parent.isAttached()&&c.writer.mergeAttributes(v.start)}}catch(g){h.e(g)}finally{h.f()}u.setSelection(null)},{priority:"low"}),this.downcastDispatcher.on("selection",function(s,l,c){var u=l.selection;if(!u.isCollapsed&&c.consumable.consume(u,"selection")){var f,d=[],h=k(u.getRanges());try{for(h.s();!(f=h.n()).done;){var g=c.mapper.toViewRange(f.value);d.push(g)}}catch(m){h.e(m)}finally{h.f()}c.writer.setSelection(d,{backward:u.isBackward})}},{priority:"low"}),this.downcastDispatcher.on("selection",function(s,l,c){var u=l.selection;if(u.isCollapsed&&c.consumable.consume(u,"selection")){var d=c.writer,h=u.getFirstPosition(),f=c.mapper.toViewPosition(h),v=d.breakAttributes(f);d.setSelection(v)}},{priority:"low"}),this.view.document.roots.bindTo(this.model.document.roots).using(function(s){if("$graveyard"==s.rootName)return null;var l=new sv(n.view.document,s.name);return l.rootName=s.rootName,n.mapper.bindElements(s,l),l})}return C(a,[{key:"destroy",value:function(){this.view.destroy(),this.stopListening()}}]),a}();se(fl,Re);var eg=function(a){function i(){A(this,i),this._commands=new Map}return C(i,[{key:"add",value:function(n,t){this._commands.set(n,t)}},{key:"get",value:function(n){return this._commands.get(n)}},{key:"execute",value:function(n){var t=this.get(n);if(!t)throw new I.b("commandcollection-command-not-found: Command does not exist.",this,{commandName:n});for(var r=arguments.length,o=new Array(r>1?r-1:0),s=1;s<r;s++)o[s-1]=arguments[s];return t.execute.apply(t,o)}},{key:"names",value:G.mark(function e(){return G.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.delegateYield(this._commands.keys(),"t0",1);case 1:case"end":return t.stop()}},e,this)})},{key:"commands",value:G.mark(function e(){return G.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.delegateYield(this._commands.values(),"t0",1);case 1:case"end":return t.stop()}},e,this)})},{key:a,value:function(){return this._commands[Symbol.iterator]()}},{key:"destroy",value:function(){var t,n=k(this.commands());try{for(n.s();!(t=n.n()).done;)t.value.destroy()}catch(o){n.e(o)}finally{n.f()}}}]),i}(Symbol.iterator),tg=function(){function a(){A(this,a),this._consumables=new Map}return C(a,[{key:"add",value:function(e,n){var t;e.is("$text")||e.is("documentFragment")?this._consumables.set(e,!0):(this._consumables.has(e)?t=this._consumables.get(e):(t=new ng(e),this._consumables.set(e,t)),t.add(n))}},{key:"test",value:function(e,n){var t=this._consumables.get(e);return void 0===t?null:e.is("$text")||e.is("documentFragment")?t:t.test(n)}},{key:"consume",value:function(e,n){return!!this.test(e,n)&&(e.is("$text")||e.is("documentFragment")?this._consumables.set(e,!1):this._consumables.get(e).consume(n),!0)}},{key:"revert",value:function(e,n){var t=this._consumables.get(e);void 0!==t&&(e.is("$text")||e.is("documentFragment")?this._consumables.set(e,!0):t.revert(n))}}],[{key:"consumablesFromElement",value:function(e){var o,n={element:e,name:!0,attributes:[],classes:[],styles:[]},t=e.getAttributeKeys(),r=k(t);try{for(r.s();!(o=r.n()).done;){var s=o.value;"style"!=s&&"class"!=s&&n.attributes.push(s)}}catch(m){r.e(m)}finally{r.f()}var u,l=e.getClassNames(),c=k(l);try{for(c.s();!(u=c.n()).done;)n.classes.push(u.value)}catch(m){c.e(m)}finally{c.f()}var v,h=e.getStyleNames(),f=k(h);try{for(f.s();!(v=f.n()).done;)n.styles.push(v.value)}catch(m){f.e(m)}finally{f.f()}return n}},{key:"createFrom",value:function(e,n){if(n||(n=new a(e)),e.is("$text"))return n.add(e),n;e.is("element")&&n.add(e,a.consumablesFromElement(e)),e.is("documentFragment")&&n.add(e);var r,t=k(e.getChildren());try{for(t.s();!(r=t.n()).done;)n=a.createFrom(r.value,n)}catch(s){t.e(s)}finally{t.f()}return n}}]),a}(),ng=function(){function a(i){A(this,a),this.element=i,this._canConsumeName=null,this._consumables={attributes:new Map,styles:new Map,classes:new Map}}return C(a,[{key:"add",value:function(e){for(var n in e.name&&(this._canConsumeName=!0),this._consumables)n in e&&this._add(n,e[n])}},{key:"test",value:function(e){if(e.name&&!this._canConsumeName)return this._canConsumeName;for(var n in this._consumables)if(n in e){var t=this._test(n,e[n]);if(!0!==t)return t}return!0}},{key:"consume",value:function(e){for(var n in e.name&&(this._canConsumeName=!1),this._consumables)n in e&&this._consume(n,e[n])}},{key:"revert",value:function(e){for(var n in e.name&&(this._canConsumeName=!0),this._consumables)n in e&&this._revert(n,e[n])}},{key:"_add",value:function(e,n){var s,t=et(n)?n:[n],r=this._consumables[e],o=k(t);try{for(o.s();!(s=o.n()).done;){var l=s.value;if("attributes"===e&&("class"===l||"style"===l))throw new I.b("viewconsumable-invalid-attribute: Classes and styles should be handled separately.",this);if(r.set(l,!0),"styles"===e){var u,c=k(this.element.document.stylesProcessor.getRelatedStyles(l));try{for(c.s();!(u=c.n()).done;)r.set(u.value,!0)}catch(h){c.e(h)}finally{c.f()}}}}catch(h){o.e(h)}finally{o.f()}}},{key:"_test",value:function(e,n){var s,t=et(n)?n:[n],r=this._consumables[e],o=k(t);try{for(o.s();!(s=o.n()).done;){var l=s.value;if("attributes"!==e||"class"!==l&&"style"!==l){var c=r.get(l);if(void 0===c)return null;if(!c)return!1}else{var u="class"==l?"classes":"styles",d=this._test(u,Y(this._consumables[u].keys()));if(!0!==d)return d}}}catch(h){o.e(h)}finally{o.f()}return!0}},{key:"_consume",value:function(e,n){var s,t=et(n)?n:[n],r=this._consumables[e],o=k(t);try{for(o.s();!(s=o.n()).done;){var l=s.value;if("attributes"!==e||"class"!==l&&"style"!==l){if(r.set(l,!1),"styles"==e){var u,c=k(this.element.document.stylesProcessor.getRelatedStyles(l));try{for(c.s();!(u=c.n()).done;)r.set(u.value,!1)}catch(f){c.e(f)}finally{c.f()}}}else{var h="class"==l?"classes":"styles";this._consume(h,Y(this._consumables[h].keys()))}}}catch(f){o.e(f)}finally{o.f()}}},{key:"_revert",value:function(e,n){var s,t=et(n)?n:[n],r=this._consumables[e],o=k(t);try{for(o.s();!(s=o.n()).done;){var l=s.value;if("attributes"!==e||"class"!==l&&"style"!==l)!1===r.get(l)&&r.set(l,!0);else{var c="class"==l?"classes":"styles";this._revert(c,Y(this._consumables[c].keys()))}}}catch(u){o.e(u)}finally{o.f()}}}]),a}(),vl=function(){function a(){var i=this;A(this,a),this._sourceDefinitions={},this._attributeProperties={},this.decorate("checkChild"),this.decorate("checkAttribute"),this.on("checkAttribute",function(e,n){n[0]=new Vr(n[0])},{priority:"highest"}),this.on("checkChild",function(e,n){n[0]=new Vr(n[0]),n[1]=i.getDefinition(n[1])},{priority:"highest"})}return C(a,[{key:"register",value:function(e,n){if(this._sourceDefinitions[e])throw new I.b("schema-cannot-register-item-twice: A single item cannot be registered twice in the schema.",this,{itemName:e});this._sourceDefinitions[e]=[Object.assign({},n)],this._clearCache()}},{key:"extend",value:function(e,n){if(!this._sourceDefinitions[e])throw new I.b("schema-cannot-extend-missing-item: Cannot extend an item which was not registered yet.",this,{itemName:e});this._sourceDefinitions[e].push(Object.assign({},n)),this._clearCache()}},{key:"getDefinitions",value:function(){return this._compiledDefinitions||this._compile(),this._compiledDefinitions}},{key:"getDefinition",value:function(e){var n;return n="string"==typeof e?e:e.is&&(e.is("$text")||e.is("$textProxy"))?"$text":e.name,this.getDefinitions()[n]}},{key:"isRegistered",value:function(e){return!!this.getDefinition(e)}},{key:"isBlock",value:function(e){var n=this.getDefinition(e);return!(!n||!n.isBlock)}},{key:"isLimit",value:function(e){var n=this.getDefinition(e);return!(!n||!n.isLimit&&!n.isObject)}},{key:"isObject",value:function(e){var n=this.getDefinition(e);return!!n&&!!(n.isObject||n.isLimit&&n.isSelectable&&n.isContent)}},{key:"isInline",value:function(e){var n=this.getDefinition(e);return!(!n||!n.isInline)}},{key:"isSelectable",value:function(e){var n=this.getDefinition(e);return!(!n||!n.isSelectable&&!n.isObject)}},{key:"isContent",value:function(e){var n=this.getDefinition(e);return!(!n||!n.isContent&&!n.isObject)}},{key:"checkChild",value:function(e,n){return!!n&&this._checkContextMatch(n,e)}},{key:"checkAttribute",value:function(e,n){var t=this.getDefinition(e.last);return!!t&&t.allowAttributes.includes(n)}},{key:"checkMerge",value:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(e instanceof H){var t=e.nodeBefore,r=e.nodeAfter;if(!(t instanceof Oe))throw new I.b("schema-check-merge-no-element-before: The node before the merge position must be an element.",this);if(!(r instanceof Oe))throw new I.b("schema-check-merge-no-element-after: The node after the merge position must be an element.",this);return this.checkMerge(t,r)}var s,o=k(n.getChildren());try{for(o.s();!(s=o.n()).done;)if(!this.checkChild(e,s.value))return!1}catch(c){o.e(c)}finally{o.f()}return!0}},{key:"addChildCheck",value:function(e){this.on("checkChild",function(n,t){var r=ee(t,2),s=r[1];if(s){var l=e(r[0],s);"boolean"==typeof l&&(n.stop(),n.return=l)}},{priority:"high"})}},{key:"addAttributeCheck",value:function(e){this.on("checkAttribute",function(n,t){var r=ee(t,2),l=e(r[0],r[1]);"boolean"==typeof l&&(n.stop(),n.return=l)},{priority:"high"})}},{key:"setAttributeProperties",value:function(e,n){this._attributeProperties[e]=Object.assign(this.getAttributeProperties(e),n)}},{key:"getAttributeProperties",value:function(e){return this._attributeProperties[e]||{}}},{key:"getLimitElement",value:function(e){var n;for(n=e instanceof H?e.parent:(e instanceof F?[e]:Array.from(e.getRanges())).reduce(function(t,r){var o=r.getCommonAncestor();return t?t.getCommonAncestor(o,{includeSelf:!0}):o},null);!this.isLimit(n)&&n.parent;)n=n.parent;return n}},{key:"checkAttributeInSelection",value:function(e,n){if(e.isCollapsed){var t=[].concat(Y(e.getFirstPosition().getAncestors()),[new Ee("",e.getAttributes())]);return this.checkAttribute(t,n)}var s,r=e.getRanges(),o=k(r);try{for(o.s();!(s=o.n()).done;){var u,c=k(s.value);try{for(c.s();!(u=c.n()).done;)if(this.checkAttribute(u.value.item,n))return!0}catch(h){c.e(h)}finally{c.f()}}}catch(h){o.e(h)}finally{o.f()}return!1}},{key:"getValidRanges",value:G.mark(function i(e,n){var t,r;return G.wrap(function(l){for(;;)switch(l.prev=l.next){case 0:e=G.mark(function c(u){var d,h;return G.wrap(function(g){for(;;)switch(g.prev=g.next){case 0:d=k(u),g.prev=1,d.s();case 3:if((h=d.n()).done){g.next=8;break}return g.delegateYield(h.value.getMinimalFlatRanges(),"t0",6);case 6:g.next=3;break;case 8:g.next=13;break;case 10:g.prev=10,g.t1=g.catch(1),d.e(g.t1);case 13:return g.prev=13,d.f(),g.finish(13);case 16:case"end":return g.stop()}},c,null,[[1,10,13,16]])})(e),t=k(e),l.prev=2,t.s();case 4:if((r=t.n()).done){l.next=9;break}return l.delegateYield(this._getValidRangesForRange(r.value,n),"t0",7);case 7:l.next=4;break;case 9:l.next=14;break;case 11:l.prev=11,l.t1=l.catch(2),t.e(l.t1);case 14:return l.prev=14,t.f(),l.finish(14);case 17:case"end":return l.stop()}},i,this,[[2,11,14,17]])})},{key:"getNearestSelectionRange",value:function(e){var n=this,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"both";if(this.checkChild(e,"$text"))return new F(e);var r,o,s=e.getAncestors().reverse().find(function(f){return n.isLimit(f)})||e.root;"both"!=t&&"backward"!=t||(r=new Dt({boundaries:F._createIn(s),startPosition:e,direction:"backward"})),"both"!=t&&"forward"!=t||(o=new Dt({boundaries:F._createIn(s),startPosition:e}));var c,l=k(G.mark(function f(v,g){var m,p,y;return G.wrap(function(_){for(;;)switch(_.prev=_.next){case 0:m=!1;case 1:if(m){_.next=18;break}if(m=!0,!v){_.next=9;break}if(p=v.next(),_.t0=p.done,_.t0){_.next=9;break}return m=!1,_.next=9,{walker:v,value:p.value};case 9:if(!g){_.next=16;break}if(y=g.next(),_.t1=y.done,_.t1){_.next=16;break}return m=!1,_.next=16,{walker:g,value:y.value};case 16:_.next=1;break;case 18:case"end":return _.stop()}},f)})(r,o));try{for(l.s();!(c=l.n()).done;){var u=c.value,h=u.value;if(h.type==(u.walker==r?"elementEnd":"elementStart")&&this.isObject(h.item))return F._createOn(h.item);if(this.checkChild(h.nextPosition,"$text"))return new F(h.nextPosition)}}catch(f){l.e(f)}finally{l.f()}return null}},{key:"findAllowedParent",value:function(e,n){for(var t=e.parent;t;){if(this.checkChild(t,n))return t;if(this.isLimit(t))return null;t=t.parent}return null}},{key:"removeDisallowedAttributes",value:function(e,n){var r,t=k(e);try{for(t.s();!(r=t.n()).done;){var o=r.value;if(o.is("$text"))gl(this,o,n);else{var c,s=F._createIn(o).getPositions(),l=k(s);try{for(l.s();!(c=l.n()).done;){var u=c.value;gl(this,u.nodeBefore||u.parent,n)}}catch(d){l.e(d)}finally{l.f()}}}}catch(d){t.e(d)}finally{t.f()}}},{key:"createContext",value:function(e){return new Vr(e)}},{key:"_clearCache",value:function(){this._compiledDefinitions=null}},{key:"_compile",value:function(){for(var e={},n=this._sourceDefinitions,t=Object.keys(n),r=0,o=t;r<o.length;r++){var s=o[r];e[s]=rg(n[s],s)}for(var l=0,c=t;l<c.length;l++)ig(e,c[l]);for(var d=0,h=t;d<h.length;d++)og(e,h[d]);for(var v=0,g=t;v<g.length;v++){var m=g[v];ag(e,m),sg(e,m)}for(var p=0,y=t;p<y.length;p++){var w=y[p];lg(e,w),cg(e,w)}this._compiledDefinitions=e}},{key:"_checkContextMatch",value:function(e,n){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:n.length-1,r=n.getItem(t);if(e.allowIn.includes(r.name)){if(0==t)return!0;var o=this.getDefinition(r);return this._checkContextMatch(o,n,t-1)}return!1}},{key:"_getValidRangesForRange",value:G.mark(function i(e,n){var t,r,o,s,l;return G.wrap(function(u){for(;;)switch(u.prev=u.next){case 0:t=e.start,r=e.start,o=k(e.getItems({shallow:!0})),u.prev=2,o.s();case 4:if((s=o.n()).done){u.next=19;break}if(u.t0=(l=s.value).is("element"),!u.t0){u.next=9;break}return u.delegateYield(this._getValidRangesForRange(F._createIn(l),n),"t1",9);case 9:if(u.t2=this.checkAttribute(l,n),u.t2){u.next=16;break}if(u.t3=t.isEqual(r),u.t3){u.next=15;break}return u.next=15,new F(t,r);case 15:t=H._createAfter(l);case 16:r=H._createAfter(l);case 17:u.next=4;break;case 19:u.next=24;break;case 21:u.prev=21,u.t4=u.catch(2),o.e(u.t4);case 24:return u.prev=24,o.f(),u.finish(24);case 27:if(u.t5=t.isEqual(r),u.t5){u.next=31;break}return u.next=31,new F(t,r);case 31:case"end":return u.stop()}},i,this,[[2,21,24,27]])})}]),a}();se(vl,Re);var Vr=function(a){function i(e){if(A(this,i),e instanceof i)return e;"string"==typeof e?e=[e]:Array.isArray(e)||(e=e.getAncestors({includeSelf:!0})),e[0]&&"string"!=typeof e[0]&&e[0].is("documentFragment")&&e.shift(),this._items=e.map(dg)}return C(i,[{key:"length",get:function(){return this._items.length}},{key:"last",get:function(){return this._items[this._items.length-1]}},{key:a,value:function(){return this._items[Symbol.iterator]()}},{key:"push",value:function(n){var t=new i([n]);return t._items=[].concat(Y(this._items),Y(t._items)),t}},{key:"getItem",value:function(n){return this._items[n]}},{key:"getNames",value:G.mark(function e(){return G.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.delegateYield(this._items.map(function(r){return r.name}),"t0",1);case 1:case"end":return t.stop()}},e,this)})},{key:"endsWith",value:function(n){return Array.from(this.getNames()).join(" ").endsWith(n)}},{key:"startsWith",value:function(n){return Array.from(this.getNames()).join(" ").startsWith(n)}}]),i}(Symbol.iterator);function rg(a,i){var e={name:i,allowIn:[],allowContentOf:[],allowWhere:[],allowAttributes:[],allowAttributesOf:[],inheritTypesFrom:[]};return function(n,t){var o,r=k(n);try{for(r.s();!(o=r.n()).done;){var u,s=o.value,l=Object.keys(s).filter(function(h){return h.startsWith("is")}),c=k(l);try{for(c.s();!(u=c.n()).done;){var d=u.value;t[d]=s[d]}}catch(h){c.e(h)}finally{c.f()}}}catch(h){r.e(h)}finally{r.f()}}(a,e),bn(a,e,"allowIn"),bn(a,e,"allowContentOf"),bn(a,e,"allowWhere"),bn(a,e,"allowAttributes"),bn(a,e,"allowAttributesOf"),bn(a,e,"inheritTypesFrom"),function(n,t){var o,r=k(n);try{for(r.s();!(o=r.n()).done;){var l=o.value.inheritAllFrom;l&&(t.allowContentOf.push(l),t.allowWhere.push(l),t.allowAttributesOf.push(l),t.inheritTypesFrom.push(l))}}catch(c){r.e(c)}finally{r.f()}}(a,e),e}function ig(a,i){var n,e=k(a[i].allowContentOf);try{for(e.s();!(n=e.n()).done;){var t=n.value;a[t]&&ug(a,t).forEach(function(r){r.allowIn.push(i)})}}catch(r){e.e(r)}finally{e.f()}delete a[i].allowContentOf}function og(a,i){var n,e=k(a[i].allowWhere);try{for(e.s();!(n=e.n()).done;){var o,r=a[n.value];r&&(o=a[i].allowIn).push.apply(o,Y(r.allowIn))}}catch(l){e.e(l)}finally{e.f()}delete a[i].allowWhere}function ag(a,i){var n,e=k(a[i].allowAttributesOf);try{for(e.s();!(n=e.n()).done;){var o,r=a[n.value];r&&(o=a[i].allowAttributes).push.apply(o,Y(r.allowAttributes))}}catch(l){e.e(l)}finally{e.f()}delete a[i].allowAttributesOf}function sg(a,i){var t,e=a[i],n=k(e.inheritTypesFrom);try{for(n.s();!(t=n.n()).done;){var o=a[t.value];if(o){var c,s=Object.keys(o).filter(function(d){return d.startsWith("is")}),l=k(s);try{for(l.s();!(c=l.n()).done;){var u=c.value;u in e||(e[u]=o[u])}}catch(d){l.e(d)}finally{l.f()}}}}catch(d){n.e(d)}finally{n.f()}delete e.inheritTypesFrom}function lg(a,i){var e=a[i],n=e.allowIn.filter(function(t){return a[t]});e.allowIn=Array.from(new Set(n))}function cg(a,i){var e=a[i];e.allowAttributes=Array.from(new Set(e.allowAttributes))}function bn(a,i,e){var t,n=k(a);try{for(n.s();!(t=n.n()).done;){var r,o=t.value;"string"==typeof o[e]?i[e].push(o[e]):Array.isArray(o[e])&&(r=i[e]).push.apply(r,Y(o[e]))}}catch(s){n.e(s)}finally{n.f()}}function ug(a,i){var n,e=a[i];return(n=a,Object.keys(n).map(function(t){return n[t]})).filter(function(t){return t.allowIn.includes(e.name)})}function dg(a){return"string"==typeof a?{name:a,getAttributeKeys:G.mark(function i(){return G.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:case"end":return n.stop()}},i)}),getAttribute:function(){}}:{name:a.is("element")?a.name:"$text",getAttributeKeys:G.mark(function i(){return G.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.delegateYield(a.getAttributeKeys(),"t0",1);case 1:case"end":return n.stop()}},i)}),getAttribute:function(e){return a.getAttribute(e)}}}function gl(a,i,e){var t,n=k(i.getAttributeKeys());try{for(n.s();!(t=n.n()).done;){var r=t.value;a.checkAttribute(i,r)||e.removeAttribute(r,i)}}catch(o){n.e(o)}finally{n.f()}}var ml=function(){function a(){var i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};A(this,a),this._splitParts=new Map,this._cursorParents=new Map,this._modelCursor=null,this.conversionApi=Object.assign({},i),this.conversionApi.convertItem=this._convertItem.bind(this),this.conversionApi.convertChildren=this._convertChildren.bind(this),this.conversionApi.safeInsert=this._safeInsert.bind(this),this.conversionApi.updateConversionResult=this._updateConversionResult.bind(this),this.conversionApi.splitToAllowedParent=this._splitToAllowedParent.bind(this),this.conversionApi.getSplitParts=this._getSplitParts.bind(this)}return C(a,[{key:"convert",value:function(e,n){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:["$root"];this.fire("viewCleanup",e),this._modelCursor=function(d,h){var f,g,v=k(new Vr(d));try{for(v.s();!(g=v.n()).done;){var w,m=g.value,p={},y=k(m.getAttributeKeys());try{for(y.s();!(w=y.n()).done;){var _=w.value;p[_]=m.getAttribute(_)}}catch(x){y.e(x)}finally{y.f()}var T=h.createElement(m.name,p);f&&h.append(T,f),f=H._createAt(T,0)}}catch(x){v.e(x)}finally{v.f()}return f}(t,n),this.conversionApi.writer=n,this.conversionApi.consumable=tg.createFrom(e),this.conversionApi.store={};var o=this._convertItem(e,this._modelCursor).modelRange,s=n.createDocumentFragment();if(o){this._removeEmptyElements();for(var l=0,c=Array.from(this._modelCursor.parent.getChildren());l<c.length;l++)n.append(c[l],s);s.markers=function(d,h){var p,f=new Set,v=new Map,g=F._createIn(d).getItems(),m=k(g);try{for(m.s();!(p=m.n()).done;){var y=p.value;"$marker"==y.name&&f.add(y)}}catch(D){m.e(D)}finally{m.f()}var _,w=k(f);try{for(w.s();!(_=w.n()).done;){var T=_.value,x=T.getAttribute("data-name"),N=h.createPositionBefore(T);v.has(x)?v.get(x).end=N.clone():v.set(x,new F(N.clone())),h.remove(T)}}catch(D){w.e(D)}finally{w.f()}return v}(s,n)}return this._modelCursor=null,this._splitParts.clear(),this._cursorParents.clear(),this.conversionApi.writer=null,this.conversionApi.store=null,s}},{key:"_convertItem",value:function(e,n){var t=Object.assign({viewItem:e,modelCursor:n,modelRange:null});if(e.is("element")?this.fire("element:"+e.name,t,this.conversionApi):e.is("$text")?this.fire("text",t,this.conversionApi):this.fire("documentFragment",t,this.conversionApi),t.modelRange&&!(t.modelRange instanceof F))throw new I.b("view-conversion-dispatcher-incorrect-result: Incorrect conversion result was dropped.",this);return{modelRange:t.modelRange,modelCursor:t.modelCursor}}},{key:"_convertChildren",value:function(e,n){for(var t=n.is("position")?n:H._createAt(n,0),r=new F(t),o=0,s=Array.from(e.getChildren());o<s.length;o++){var c=this._convertItem(s[o],t);c.modelRange instanceof F&&(r.end=c.modelRange.end,t=c.modelCursor)}return{modelRange:r,modelCursor:t}}},{key:"_safeInsert",value:function(e,n){var t=this._splitToAllowedParent(e,n);return!!t&&(this.conversionApi.writer.insert(e,t.position),!0)}},{key:"_updateConversionResult",value:function(e,n){var t=this._getSplitParts(e),r=this.conversionApi.writer;n.modelRange||(n.modelRange=r.createRange(r.createPositionBefore(e),r.createPositionAfter(t[t.length-1])));var o=this._cursorParents.get(e);n.modelCursor=o?r.createPositionAt(o,0):n.modelRange.end}},{key:"_splitToAllowedParent",value:function(e,n){var t=this.conversionApi,r=t.schema,o=t.writer,s=r.findAllowedParent(n,e);if(s){if(s===n.parent)return{position:n};this._modelCursor.parent.getAncestors().includes(s)&&(s=null)}if(!s)return sl(n,e,r)?{position:ll(n,o)}:null;var d,l=this.conversionApi.writer.split(n,s),c=[],u=k(l.range.getWalker());try{for(u.s();!(d=u.n()).done;){var h=d.value;if("elementEnd"==h.type)c.push(h.item);else{var f=c.pop();this._registerSplitPair(f,h.item)}}}catch(m){u.e(m)}finally{u.f()}var g=l.range.end.parent;return this._cursorParents.set(e,g),{position:l.position,cursorParent:g}}},{key:"_registerSplitPair",value:function(e,n){this._splitParts.has(e)||this._splitParts.set(e,[e]);var t=this._splitParts.get(e);this._splitParts.set(n,t),t.push(n)}},{key:"_getSplitParts",value:function(e){return this._splitParts.has(e)?this._splitParts.get(e):[e]}},{key:"_removeEmptyElements",value:function(){var t,e=!1,n=k(this._splitParts.keys());try{for(n.s();!(t=n.n()).done;){var r=t.value;r.isEmpty&&(this.conversionApi.writer.remove(r),this._splitParts.delete(r),e=!0)}}catch(o){n.e(o)}finally{n.f()}e&&this._removeEmptyElements()}}]),a}();se(ml,Se);var pl=function(){function a(i,e){var n=this;A(this,a),this.model=i,this.stylesProcessor=e,this.mapper=new so,this.downcastDispatcher=new lo({mapper:this.mapper,schema:i.schema}),this.downcastDispatcher.on("insert:$text",function(t,r,o){if(o.consumable.consume(r.item,"insert")){var s=o.writer,l=o.mapper.toViewPosition(r.range.start),c=s.createText(r.item.data);s.insert(l,c)}},{priority:"lowest"}),this.upcastDispatcher=new ml({schema:i.schema}),this.viewDocument=new Ar(e),this._viewWriter=new gs(this.viewDocument),this.upcastDispatcher.on("text",function(t,r,o){var s=o.schema,l=o.consumable,c=o.writer,u=r.modelCursor;if(l.test(r.viewItem)){if(!s.checkChild(u,"$text")){if(!sl(u,"$text",s))return;u=ll(u,c)}l.consume(r.viewItem);var d=c.createText(r.viewItem.data);c.insert(d,u),r.modelRange=c.createRange(u,u.getShiftedBy(d.offsetSize)),r.modelCursor=r.modelRange.end}},{priority:"lowest"}),this.upcastDispatcher.on("element",function(t,r,o){if(!r.modelRange&&o.consumable.consume(r.viewItem,{name:!0})){var s=o.convertChildren(r.viewItem,r.modelCursor),c=s.modelCursor;r.modelRange=s.modelRange,r.modelCursor=c}},{priority:"lowest"}),this.upcastDispatcher.on("documentFragment",function(t,r,o){if(!r.modelRange&&o.consumable.consume(r.viewItem,{name:!0})){var s=o.convertChildren(r.viewItem,r.modelCursor),c=s.modelCursor;r.modelRange=s.modelRange,r.modelCursor=c}},{priority:"lowest"}),this.decorate("init"),this.decorate("set"),this.on("init",function(){n.fire("ready")},{priority:"lowest"}),this.on("ready",function(){n.model.enqueueChange("transparent",al)},{priority:"lowest"})}return C(a,[{key:"get",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.rootName,t=void 0===n?"main":n,r=e.trim,o=void 0===r?"empty":r;if(!this._checkIfRootsExists([t]))throw new I.b("datacontroller-get-non-existent-root: Attempting to get data from a non-existing root.",this);var s=this.model.document.getRoot(t);return"empty"!==o||this.model.hasContent(s,{ignoreWhitespaces:!0})?this.stringify(s,e):""}},{key:"stringify",value:function(e,n){var t=this.toView(e,n);return this.processor.toData(t)}},{key:"toView",value:function(e,n){var t=this.viewDocument,r=this._viewWriter;this.mapper.clearBindings();var o=F._createIn(e),s=new mn(t);if(this.mapper.bindElements(e,s),this.downcastDispatcher.conversionApi.options=n,this.downcastDispatcher.convertInsert(o,r),!e.is("documentFragment")){var u,l=function(v){var g=[],m=v.root.document;if(!m)return[];var w,p=F._createIn(v),y=k(m.model.markers);try{for(y.s();!(w=y.n()).done;){var _=w.value,T=p.getIntersection(_.getRange());T&&g.push([_.name,T])}}catch(x){y.e(x)}finally{y.f()}return g}(e),c=k(l);try{for(c.s();!(u=c.n()).done;){var d=ee(u.value,2);this.downcastDispatcher.convertMarkerAdd(d[0],d[1],r)}}catch(v){c.e(v)}finally{c.f()}}return delete this.downcastDispatcher.conversionApi.options,s}},{key:"init",value:function(e){var n=this;if(this.model.document.version)throw new I.b("datacontroller-init-document-not-empty: Trying to set initial data to not empty document.",this);var t={};if("string"==typeof e?t.main=e:t=e,!this._checkIfRootsExists(Object.keys(t)))throw new I.b("datacontroller-init-non-existent-root: Attempting to init data on a non-existing root.",this);return this.model.enqueueChange("transparent",function(r){for(var o=0,s=Object.keys(t);o<s.length;o++){var l=s[o],c=n.model.document.getRoot(l);r.insert(n.parse(t[l],c),c,0)}}),Promise.resolve()}},{key:"set",value:function(e){var n=this,t={};if("string"==typeof e?t.main=e:t=e,!this._checkIfRootsExists(Object.keys(t)))throw new I.b("datacontroller-set-non-existent-root: Attempting to set data on a non-existing root.",this);this.model.enqueueChange("transparent",function(r){r.setSelection(null),r.removeSelectionAttribute(n.model.document.selection.getAttributeKeys());for(var o=0,s=Object.keys(t);o<s.length;o++){var l=s[o],c=n.model.document.getRoot(l);r.remove(r.createRangeIn(c)),r.insert(n.parse(t[l],c),c,0)}})}},{key:"parse",value:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"$root",t=this.processor.toView(e);return this.toModel(t,n)}},{key:"toModel",value:function(e){var n=this,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"$root";return this.model.change(function(r){return n.upcastDispatcher.convert(e,r,t)})}},{key:"addStyleProcessorRules",value:function(e){e(this.stylesProcessor)}},{key:"destroy",value:function(){this.stopListening()}},{key:"_checkIfRootsExists",value:function(e){var t,n=k(e);try{for(n.s();!(t=n.n()).done;){var r=t.value;if(!this.model.document.getRootNames().includes(r))return!1}}catch(o){n.e(o)}finally{n.f()}return!0}}]),a}();se(pl,Re);var hg=function(){function a(i,e){A(this,a),this._helpers=new Map,this._downcast=Array.isArray(i)?i:[i],this._createConversionHelpers({name:"downcast",dispatchers:this._downcast,isDowncast:!0}),this._upcast=Array.isArray(e)?e:[e],this._createConversionHelpers({name:"upcast",dispatchers:this._upcast,isDowncast:!1})}return C(a,[{key:"addAlias",value:function(e,n){var t=this._downcast.includes(n);if(!this._upcast.includes(n)&&!t)throw new I.b("conversion-add-alias-dispatcher-not-registered: Trying to register and alias for a dispatcher that nas not been registered.",this);this._createConversionHelpers({name:e,dispatchers:[n],isDowncast:t})}},{key:"for",value:function(e){if(!this._helpers.has(e))throw new I.b("conversion-for-unknown-group: Trying to add a converter to an unknown dispatchers group.",this);return this._helpers.get(e)}},{key:"elementToElement",value:function(e){this.for("downcast").elementToElement(e);var t,n=k(jr(e));try{for(n.s();!(t=n.n()).done;){var r=t.value,o=r.model,s=r.view;this.for("upcast").elementToElement({model:o,view:s,converterPriority:e.converterPriority})}}catch(l){n.e(l)}finally{n.f()}}},{key:"attributeToElement",value:function(e){this.for("downcast").attributeToElement(e);var t,n=k(jr(e));try{for(n.s();!(t=n.n()).done;){var r=t.value,o=r.model,s=r.view;this.for("upcast").elementToAttribute({view:s,model:o,converterPriority:e.converterPriority})}}catch(l){n.e(l)}finally{n.f()}}},{key:"attributeToAttribute",value:function(e){this.for("downcast").attributeToAttribute(e);var t,n=k(jr(e));try{for(n.s();!(t=n.n()).done;){var r=t.value,o=r.model,s=r.view;this.for("upcast").attributeToAttribute({view:s,model:o})}}catch(l){n.e(l)}finally{n.f()}}},{key:"_createConversionHelpers",value:function(e){var n=e.name,t=e.dispatchers,r=e.isDowncast;if(this._helpers.has(n))throw new I.b("conversion-group-exists: Trying to register a group name that has already been registered.",this);var o=r?new Zv(t):new Xv(t);this._helpers.set(n,o)}}]),a}();function jr(a){var i,e,n;return G.wrap(function(l){for(;;)switch(l.prev=l.next){case 0:if(!a.model.values){l.next=20;break}i=k(a.model.values),l.prev=2,i.s();case 4:if((e=i.n()).done){l.next=10;break}return l.delegateYield(vo({key:a.model.key,value:n=e.value},a.view[n],a.upcastAlso?a.upcastAlso[n]:void 0),"t0",8);case 8:l.next=4;break;case 10:l.next=15;break;case 12:l.prev=12,l.t1=l.catch(2),i.e(l.t1);case 15:return l.prev=15,i.f(),l.finish(15);case 18:l.next=21;break;case 20:return l.delegateYield(vo(a.model,a.view,a.upcastAlso),"t2",21);case 21:case"end":return l.stop()}},O,null,[[2,12,15,18]])}function vo(a,i,e){var n,t,r;return G.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.next=2,{model:a,view:i};case 2:if(!e){s.next=21;break}e=Array.isArray(e)?e:[e],n=k(e),s.prev=5,n.s();case 7:if((t=n.n()).done){s.next=13;break}return r=t.value,s.next=11,{model:a,view:r};case 11:s.next=7;break;case 13:s.next=18;break;case 15:s.prev=15,s.t0=s.catch(5),n.e(s.t0);case 18:return s.prev=18,n.f(),s.finish(18);case 21:case"end":return s.stop()}},b,null,[[5,15,18,21]])}var Br=function(){function a(){var i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"default";A(this,a),this.operations=[],this.type=i}return C(a,[{key:"baseVersion",get:function(){var n,e=k(this.operations);try{for(e.s();!(n=e.n()).done;){var t=n.value;if(null!==t.baseVersion)return t.baseVersion}}catch(r){e.e(r)}finally{e.f()}return null}},{key:"addOperation",value:function(e){return e.batch=this,this.operations.push(e),e}}]),a}(),ht=function(){function a(i){A(this,a),this.baseVersion=i,this.isDocumentOperation=null!==this.baseVersion,this.batch=null}return C(a,[{key:"_validate",value:function(){}},{key:"toJSON",value:function(){var e=Object.assign({},this);return e.__className=this.constructor.className,delete e.batch,delete e.isDocumentOperation,e}}],[{key:"className",get:function(){return"Operation"}},{key:"fromJSON",value:function(e){return new this(e.baseVersion)}}]),a}(),tn=function(a){function i(e){A(this,i),this.markers=new Map,this._children=new kn,e&&this._insertChild(0,e)}return C(i,[{key:a,value:function(){return this.getChildren()}},{key:"childCount",get:function(){return this._children.length}},{key:"maxOffset",get:function(){return this._children.maxOffset}},{key:"isEmpty",get:function(){return 0===this.childCount}},{key:"root",get:function(){return this}},{key:"parent",get:function(){return null}},{key:"is",value:function(n){return"documentFragment"===n||"model:documentFragment"===n}},{key:"getChild",value:function(n){return this._children.getNode(n)}},{key:"getChildren",value:function(){return this._children[Symbol.iterator]()}},{key:"getChildIndex",value:function(n){return this._children.getNodeIndex(n)}},{key:"getChildStartOffset",value:function(n){return this._children.getNodeStartOffset(n)}},{key:"getPath",value:function(){return[]}},{key:"getNodeByPath",value:function(n){var o,t=this,r=k(n);try{for(r.s();!(o=r.n()).done;)t=t.getChild(t.offsetToIndex(o.value))}catch(l){r.e(l)}finally{r.f()}return t}},{key:"offsetToIndex",value:function(n){return this._children.offsetToIndex(n)}},{key:"toJSON",value:function(){var r,n=[],t=k(this._children);try{for(t.s();!(r=t.n()).done;)n.push(r.value.toJSON())}catch(s){t.e(s)}finally{t.f()}return n}},{key:"_appendChild",value:function(n){this._insertChild(this.childCount,n)}},{key:"_insertChild",value:function(n,t){var s,c,r="string"==typeof(c=t)?[new Ee(c)]:(dt(c)||(c=[c]),Array.from(c).map(function(u){return"string"==typeof u?new Ee(u):u instanceof Ct?new Ee(u.data,u.getAttributes()):u})),o=k(r);try{for(o.s();!(s=o.n()).done;){var l=s.value;null!==l.parent&&l._remove(),l.parent=this}}catch(c){o.e(c)}finally{o.f()}this._children._insertNodes(n,r)}},{key:"_removeChildren",value:function(n){var s,r=this._children._removeNodes(n,arguments.length>1&&void 0!==arguments[1]?arguments[1]:1),o=k(r);try{for(o.s();!(s=o.n()).done;)s.value.parent=null}catch(c){o.e(c)}finally{o.f()}return r}}],[{key:"fromJSON",value:function(n){var o,t=[],r=k(n);try{for(r.s();!(o=r.n()).done;){var s=o.value;t.push(s.name?Oe.fromJSON(s):Ee.fromJSON(s))}}catch(l){r.e(l)}finally{r.f()}return new i(t)}}]),i}(Symbol.iterator);function go(a,i){var e=(i=yl(i)).reduce(function(r,o){return r+o.offsetSize},0),n=a.parent;Jn(a);var t=a.index;return n._insertChild(t,i),Kn(n,t+i.length),Kn(n,t),new F(a,a.getShiftedBy(e))}function kl(a){if(!a.isFlat)throw new I.b("operation-utils-remove-range-not-flat: Trying to remove a range which starts and ends in different element.",this);var i=a.start.parent;Jn(a.start),Jn(a.end);var e=i._removeChildren(a.start.index,a.end.index-a.start.index);return Kn(i,a.start.index),e}function $n(a,i){if(!a.isFlat)throw new I.b("operation-utils-move-range-not-flat: Trying to move a range which starts and ends in different element.",this);var e=kl(a);return go(i=i._getTransformedByDeletion(a.start,a.end.offset-a.start.offset),e)}function yl(a){var i=[];a instanceof Array||(a=[a]);for(var e=0;e<a.length;e++)if("string"==typeof a[e])i.push(new Ee(a[e]));else if(a[e]instanceof Ct)i.push(new Ee(a[e].data,a[e].getAttributes()));else if(a[e]instanceof tn||a[e]instanceof kn){var t,n=k(a[e]);try{for(n.s();!(t=n.n()).done;)i.push(t.value)}catch(c){n.e(c)}finally{n.f()}}else a[e]instanceof Gn&&i.push(a[e]);for(var o=1;o<i.length;o++){var s=i[o],l=i[o-1];s instanceof Ee&&l instanceof Ee&&bl(s,l)&&(i.splice(o-1,2,new Ee(l.data+s.data,l.getAttributes())),o--)}return i}function Kn(a,i){var e=a.getChild(i-1),n=a.getChild(i);if(e&&n&&e.is("$text")&&n.is("$text")&&bl(e,n)){var t=new Ee(e.data+n.data,e.getAttributes());a._removeChildren(i-1,2),a._insertChild(i-1,t)}}function Jn(a){var i=a.textNode,e=a.parent;if(i){var n=a.offset-i.startOffset,t=i.index;e._removeChildren(t,1);var r=new Ee(i.data.substr(0,n),i.getAttributes()),o=new Ee(i.data.substr(n),i.getAttributes());e._insertChild(t,[r,o])}}function bl(a,i){var r,e=a.getAttributes(),n=i.getAttributes(),t=k(e);try{for(t.s();!(r=t.n()).done;){var o=r.value;if(o[1]!==i.getAttribute(o[0]))return!1;n.next()}}catch(s){t.e(s)}finally{t.f()}return n.next().done}var wl=function(i,e){return Ds(i,e)},Ye=function(a){P(e,a);var i=M(e);function e(n,t,r,o,s){var l;return A(this,e),(l=i.call(this,s)).range=n.clone(),l.key=t,l.oldValue=void 0===r?null:r,l.newValue=void 0===o?null:o,l}return C(e,[{key:"type",get:function(){return null===this.oldValue?"addAttribute":null===this.newValue?"removeAttribute":"changeAttribute"}},{key:"clone",value:function(){return new e(this.range,this.key,this.oldValue,this.newValue,this.baseVersion)}},{key:"getReversed",value:function(){return new e(this.range,this.key,this.newValue,this.oldValue,this.baseVersion+1)}},{key:"toJSON",value:function(){var t=B(L(e.prototype),"toJSON",this).call(this);return t.range=this.range.toJSON(),t}},{key:"_validate",value:function(){if(!this.range.isFlat)throw new I.b("attribute-operation-range-not-flat: The range to change is not flat.",this);var r,t=k(this.range.getItems({shallow:!0}));try{for(t.s();!(r=t.n()).done;){var o=r.value;if(null!==this.oldValue&&!wl(o.getAttribute(this.key),this.oldValue))throw new I.b("attribute-operation-wrong-old-value: Changed node has different attribute value than operation's old attribute value.",this,{item:o,key:this.key,value:this.oldValue});if(null===this.oldValue&&null!==this.newValue&&o.hasAttribute(this.key))throw new I.b("attribute-operation-attribute-exists: The attribute with given key already exists.",this,{node:o,key:this.key})}}catch(s){t.e(s)}finally{t.f()}}},{key:"_execute",value:function(){wl(this.oldValue,this.newValue)||function(t,r,o){Jn(t.start),Jn(t.end);var l,s=k(t.getItems({shallow:!0}));try{for(s.s();!(l=s.n()).done;){var c=l.value,u=c.is("$textProxy")?c.textNode:c;null!==o?u._setAttribute(r,o):u._removeAttribute(r),Kn(u.parent,u.index)}}catch(d){s.e(d)}finally{s.f()}Kn(t.end.parent,t.end.index)}(this.range,this.key,this.newValue)}}],[{key:"className",get:function(){return"AttributeOperation"}},{key:"fromJSON",value:function(t,r){return new e(F.fromJSON(t.range,r),t.key,t.oldValue,t.newValue,t.baseVersion)}}]),e}(ht),fg=function(a){P(e,a);var i=M(e);function e(n,t){var r;return A(this,e),(r=i.call(this,null)).sourcePosition=n.clone(),r.howMany=t,r}return C(e,[{key:"type",get:function(){return"detach"}},{key:"toJSON",value:function(){var t=B(L(e.prototype),"toJSON",this).call(this);return t.sourcePosition=this.sourcePosition.toJSON(),t}},{key:"_validate",value:function(){if(this.sourcePosition.root.document)throw new I.b("detach-operation-on-document-node: Cannot detach document node.",this)}},{key:"_execute",value:function(){kl(F._createFromPositionAndShift(this.sourcePosition,this.howMany))}}],[{key:"className",get:function(){return"DetachOperation"}}]),e}(ht),_e=function(a){P(e,a);var i=M(e);function e(n,t,r,o){var s;return A(this,e),(s=i.call(this,o)).sourcePosition=n.clone(),s.sourcePosition.stickiness="toNext",s.howMany=t,s.targetPosition=r.clone(),s.targetPosition.stickiness="toNone",s}return C(e,[{key:"type",get:function(){return"$graveyard"==this.targetPosition.root.rootName?"remove":"$graveyard"==this.sourcePosition.root.rootName?"reinsert":"move"}},{key:"clone",value:function(){return new this.constructor(this.sourcePosition,this.howMany,this.targetPosition,this.baseVersion)}},{key:"getMovedRangeStart",value:function(){return this.targetPosition._getTransformedByDeletion(this.sourcePosition,this.howMany)}},{key:"getReversed",value:function(){var t=this.sourcePosition._getTransformedByInsertion(this.targetPosition,this.howMany);return new this.constructor(this.getMovedRangeStart(),this.howMany,t,this.baseVersion+1)}},{key:"_validate",value:function(){var t=this.sourcePosition.parent,r=this.targetPosition.parent,o=this.sourcePosition.offset,s=this.targetPosition.offset;if(o+this.howMany>t.maxOffset)throw new I.b("move-operation-nodes-do-not-exist: The nodes which should be moved do not exist.",this);if(t===r&&o<s&&s<o+this.howMany)throw new I.b("move-operation-range-into-itself: Trying to move a range of nodes to the inside of that range.",this);if(this.sourcePosition.root==this.targetPosition.root&&"prefix"==tt(this.sourcePosition.getParentPath(),this.targetPosition.getParentPath())){var l=this.sourcePosition.path.length-1;if(this.targetPosition.path[l]>=o&&this.targetPosition.path[l]<o+this.howMany)throw new I.b("move-operation-node-into-itself: Trying to move a range of nodes into one of nodes from that range.",this)}}},{key:"_execute",value:function(){$n(F._createFromPositionAndShift(this.sourcePosition,this.howMany),this.targetPosition)}},{key:"toJSON",value:function(){var t=B(L(e.prototype),"toJSON",this).call(this);return t.sourcePosition=this.sourcePosition.toJSON(),t.targetPosition=this.targetPosition.toJSON(),t}}],[{key:"className",get:function(){return"MoveOperation"}},{key:"fromJSON",value:function(t,r){var o=H.fromJSON(t.sourcePosition,r),s=H.fromJSON(t.targetPosition,r);return new this(o,t.howMany,s,t.baseVersion)}}]),e}(ht),nt=function(a){P(e,a);var i=M(e);function e(n,t,r){var o;return A(this,e),(o=i.call(this,r)).position=n.clone(),o.position.stickiness="toNone",o.nodes=new kn(yl(t)),o.shouldReceiveAttributes=!1,o}return C(e,[{key:"type",get:function(){return"insert"}},{key:"howMany",get:function(){return this.nodes.maxOffset}},{key:"clone",value:function(){var t=new kn(Y(this.nodes).map(function(o){return o._clone(!0)})),r=new e(this.position,t,this.baseVersion);return r.shouldReceiveAttributes=this.shouldReceiveAttributes,r}},{key:"getReversed",value:function(){var r=new H(this.position.root.document.graveyard,[0]);return new _e(this.position,this.nodes.maxOffset,r,this.baseVersion+1)}},{key:"_validate",value:function(){var t=this.position.parent;if(!t||t.maxOffset<this.position.offset)throw new I.b("insert-operation-position-invalid: Insertion position is invalid.",this)}},{key:"_execute",value:function(){var t=this.nodes;this.nodes=new kn(Y(t).map(function(r){return r._clone(!0)})),go(this.position,t)}},{key:"toJSON",value:function(){var t=B(L(e.prototype),"toJSON",this).call(this);return t.position=this.position.toJSON(),t.nodes=this.nodes.toJSON(),t}}],[{key:"className",get:function(){return"InsertOperation"}},{key:"fromJSON",value:function(t,r){var l,o=[],s=k(t.nodes);try{for(s.s();!(l=s.n()).done;){var c=l.value;o.push(c.name?Oe.fromJSON(c):Ee.fromJSON(c))}}catch(d){s.e(d)}finally{s.f()}var u=new e(H.fromJSON(t.position,r),o,t.baseVersion);return u.shouldReceiveAttributes=t.shouldReceiveAttributes,u}}]),e}(ht),xt=function(a){P(e,a);var i=M(e);function e(n,t,r,o,s,l){var c;return A(this,e),(c=i.call(this,l)).name=n,c.oldRange=t?t.clone():null,c.newRange=r?r.clone():null,c.affectsData=s,c._markers=o,c}return C(e,[{key:"type",get:function(){return"marker"}},{key:"clone",value:function(){return new e(this.name,this.oldRange,this.newRange,this._markers,this.affectsData,this.baseVersion)}},{key:"getReversed",value:function(){return new e(this.name,this.newRange,this.oldRange,this._markers,this.affectsData,this.baseVersion+1)}},{key:"_execute",value:function(){this._markers[this.newRange?"_set":"_remove"](this.name,this.newRange,!0,this.affectsData)}},{key:"toJSON",value:function(){var t=B(L(e.prototype),"toJSON",this).call(this);return this.oldRange&&(t.oldRange=this.oldRange.toJSON()),this.newRange&&(t.newRange=this.newRange.toJSON()),delete t._markers,t}}],[{key:"className",get:function(){return"MarkerOperation"}},{key:"fromJSON",value:function(t,r){return new e(t.name,t.oldRange?F.fromJSON(t.oldRange,r):null,t.newRange?F.fromJSON(t.newRange,r):null,r.model.markers,t.affectsData,t.baseVersion)}}]),e}(ht),St=function(a){P(e,a);var i=M(e);function e(n,t,r,o){var s;return A(this,e),(s=i.call(this,o)).position=n,s.position.stickiness="toNext",s.oldName=t,s.newName=r,s}return C(e,[{key:"type",get:function(){return"rename"}},{key:"clone",value:function(){return new e(this.position.clone(),this.oldName,this.newName,this.baseVersion)}},{key:"getReversed",value:function(){return new e(this.position.clone(),this.newName,this.oldName,this.baseVersion+1)}},{key:"_validate",value:function(){var t=this.position.nodeAfter;if(!(t instanceof Oe))throw new I.b("rename-operation-wrong-position: Given position is invalid or node after it is not an instance of Element.",this);if(t.name!==this.oldName)throw new I.b("rename-operation-wrong-name: Element to change has different name than operation's old name.",this)}},{key:"_execute",value:function(){this.position.nodeAfter.name=this.newName}},{key:"toJSON",value:function(){var t=B(L(e.prototype),"toJSON",this).call(this);return t.position=this.position.toJSON(),t}}],[{key:"className",get:function(){return"RenameOperation"}},{key:"fromJSON",value:function(t,r){return new e(H.fromJSON(t.position,r),t.oldName,t.newName,t.baseVersion)}}]),e}(ht),Qn=function(a){P(e,a);var i=M(e);function e(n,t,r,o,s){var l;return A(this,e),(l=i.call(this,s)).root=n,l.key=t,l.oldValue=r,l.newValue=o,l}return C(e,[{key:"type",get:function(){return null===this.oldValue?"addRootAttribute":null===this.newValue?"removeRootAttribute":"changeRootAttribute"}},{key:"clone",value:function(){return new e(this.root,this.key,this.oldValue,this.newValue,this.baseVersion)}},{key:"getReversed",value:function(){return new e(this.root,this.key,this.newValue,this.oldValue,this.baseVersion+1)}},{key:"_validate",value:function(){if(this.root!=this.root.root||this.root.is("documentFragment"))throw new I.b("rootattribute-operation-not-a-root: The element to change is not a root element.",this,{root:this.root,key:this.key});if(null!==this.oldValue&&this.root.getAttribute(this.key)!==this.oldValue)throw new I.b("rootattribute-operation-wrong-old-value: Changed node has different attribute value than operation's old attribute value.",this,{root:this.root,key:this.key});if(null===this.oldValue&&null!==this.newValue&&this.root.hasAttribute(this.key))throw new I.b("rootattribute-operation-attribute-exists: The attribute with given key already exists.",this,{root:this.root,key:this.key})}},{key:"_execute",value:function(){null!==this.newValue?this.root._setAttribute(this.key,this.newValue):this.root._removeAttribute(this.key)}},{key:"toJSON",value:function(){var t=B(L(e.prototype),"toJSON",this).call(this);return t.root=this.root.toJSON(),t}}],[{key:"className",get:function(){return"RootAttributeOperation"}},{key:"fromJSON",value:function(t,r){if(!r.getRoot(t.root))throw new I.b("rootattribute-operation-fromjson-no-root: Cannot create RootAttributeOperation. Root with specified name does not exist.",this,{rootName:t.root});return new e(r.getRoot(t.root),t.key,t.oldValue,t.newValue,t.baseVersion)}}]),e}(ht),Be=function(a){P(e,a);var i=M(e);function e(n,t,r,o,s){var l;return A(this,e),(l=i.call(this,s)).sourcePosition=n.clone(),l.sourcePosition.stickiness="toPrevious",l.howMany=t,l.targetPosition=r.clone(),l.targetPosition.stickiness="toNext",l.graveyardPosition=o.clone(),l}return C(e,[{key:"type",get:function(){return"merge"}},{key:"deletionPosition",get:function(){return new H(this.sourcePosition.root,this.sourcePosition.path.slice(0,-1))}},{key:"movedRange",get:function(){var t=this.sourcePosition.getShiftedBy(Number.POSITIVE_INFINITY);return new F(this.sourcePosition,t)}},{key:"clone",value:function(){return new this.constructor(this.sourcePosition,this.howMany,this.targetPosition,this.graveyardPosition,this.baseVersion)}},{key:"getReversed",value:function(){var t=this.targetPosition._getTransformedByMergeOperation(this),r=this.sourcePosition.path.slice(0,-1),o=new H(this.sourcePosition.root,r)._getTransformedByMergeOperation(this),s=new Te(t,this.howMany,this.graveyardPosition,this.baseVersion+1);return s.insertionPosition=o,s}},{key:"_validate",value:function(){var t=this.sourcePosition.parent,r=this.targetPosition.parent;if(!t.parent)throw new I.b("merge-operation-source-position-invalid: Merge source position is invalid.",this);if(!r.parent)throw new I.b("merge-operation-target-position-invalid: Merge target position is invalid.",this);if(this.howMany!=t.maxOffset)throw new I.b("merge-operation-how-many-invalid: Merge operation specifies wrong number of nodes to move.",this)}},{key:"_execute",value:function(){var t=this.sourcePosition.parent;$n(F._createIn(t),this.targetPosition),$n(F._createOn(t),this.graveyardPosition)}},{key:"toJSON",value:function(){var t=B(L(e.prototype),"toJSON",this).call(this);return t.sourcePosition=t.sourcePosition.toJSON(),t.targetPosition=t.targetPosition.toJSON(),t.graveyardPosition=t.graveyardPosition.toJSON(),t}}],[{key:"className",get:function(){return"MergeOperation"}},{key:"fromJSON",value:function(t,r){var o=H.fromJSON(t.sourcePosition,r),s=H.fromJSON(t.targetPosition,r),l=H.fromJSON(t.graveyardPosition,r);return new this(o,t.howMany,s,l,t.baseVersion)}}]),e}(ht),Te=function(a){P(e,a);var i=M(e);function e(n,t,r,o){var s;return A(this,e),(s=i.call(this,o)).splitPosition=n.clone(),s.splitPosition.stickiness="toNext",s.howMany=t,s.insertionPosition=e.getInsertionPosition(n),s.insertionPosition.stickiness="toNone",s.graveyardPosition=r?r.clone():null,s.graveyardPosition&&(s.graveyardPosition.stickiness="toNext"),s}return C(e,[{key:"type",get:function(){return"split"}},{key:"moveTargetPosition",get:function(){var t=this.insertionPosition.path.slice();return t.push(0),new H(this.insertionPosition.root,t)}},{key:"movedRange",get:function(){var t=this.splitPosition.getShiftedBy(Number.POSITIVE_INFINITY);return new F(this.splitPosition,t)}},{key:"clone",value:function(){var t=new this.constructor(this.splitPosition,this.howMany,this.graveyardPosition,this.baseVersion);return t.insertionPosition=this.insertionPosition,t}},{key:"getReversed",value:function(){var r=new H(this.splitPosition.root.document.graveyard,[0]);return new Be(this.moveTargetPosition,this.howMany,this.splitPosition,r,this.baseVersion+1)}},{key:"_validate",value:function(){var t=this.splitPosition.parent;if(!t||t.maxOffset<this.splitPosition.offset)throw new I.b("split-operation-position-invalid: Split position is invalid.",this);if(!t.parent)throw new I.b("split-operation-split-in-root: Cannot split root element.",this);if(this.howMany!=t.maxOffset-this.splitPosition.offset)throw new I.b("split-operation-how-many-invalid: Split operation specifies wrong number of nodes to move.",this);if(this.graveyardPosition&&!this.graveyardPosition.nodeAfter)throw new I.b("split-operation-graveyard-position-invalid: Graveyard position invalid.",this)}},{key:"_execute",value:function(){var t=this.splitPosition.parent;if(this.graveyardPosition)$n(F._createFromPositionAndShift(this.graveyardPosition,1),this.insertionPosition);else{var r=t._clone();go(this.insertionPosition,r)}$n(new F(H._createAt(t,this.splitPosition.offset),H._createAt(t,t.maxOffset)),this.moveTargetPosition)}},{key:"toJSON",value:function(){var t=B(L(e.prototype),"toJSON",this).call(this);return t.splitPosition=this.splitPosition.toJSON(),t.insertionPosition=this.insertionPosition.toJSON(),this.graveyardPosition&&(t.graveyardPosition=this.graveyardPosition.toJSON()),t}}],[{key:"className",get:function(){return"SplitOperation"}},{key:"getInsertionPosition",value:function(t){var r=t.path.slice(0,-1);return r[r.length-1]++,new H(t.root,r)}},{key:"fromJSON",value:function(t,r){var o=H.fromJSON(t.splitPosition,r),s=H.fromJSON(t.insertionPosition,r),l=t.graveyardPosition?H.fromJSON(t.graveyardPosition,r):null,c=new this(o,t.howMany,l,t.baseVersion);return c.insertionPosition=s,c}}]),e}(ht),mo=function(a){P(e,a);var i=M(e);function e(n,t){var r,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"main";return A(this,e),(r=i.call(this,t))._document=n,r.rootName=o,r}return C(e,[{key:"document",get:function(){return this._document}},{key:"is",value:function(t,r){return r?r===this.name&&("rootElement"===t||"model:rootElement"===t||"element"===t||"model:element"===t):"rootElement"===t||"model:rootElement"===t||"element"===t||"model:element"===t||"node"===t||"model:node"===t}},{key:"toJSON",value:function(){return this.rootName}}]),e}(Oe),vg=function(){function a(i,e){A(this,a),this.model=i,this.batch=e}return C(a,[{key:"createText",value:function(e,n){return new Ee(e,n)}},{key:"createElement",value:function(e,n){return new Oe(e,n)}},{key:"createDocumentFragment",value:function(){return new tn}},{key:"cloneElement",value:function(e){return e._clone(!(arguments.length>1&&void 0!==arguments[1])||arguments[1])}},{key:"insert",value:function(e,n){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;if(this._assertWriterUsedCorrectly(),!(e instanceof Ee&&""==e.data)){var r=H._createAt(n,t);if(e.parent){if(Cl(e.root,r.root))return void this.move(F._createOn(e),r);if(e.root.document)throw new I.b("model-writer-insert-forbidden-move: Cannot move a node from a document to a different tree. It is forbidden to move a node that was already in a document outside of it.",this);this.remove(e)}var s=new nt(r,e,r.root.document?r.root.document.version:null);if(e instanceof Ee&&(s.shouldReceiveAttributes=!0),this.batch.addOperation(s),this.model.applyOperation(s),e instanceof tn){var c,l=k(e.markers);try{for(l.s();!(c=l.n()).done;){var u=ee(c.value,2),d=u[0],h=u[1],f=H._createAt(h.root,0),v={range:new F(h.start._getCombined(f,r),h.end._getCombined(f,r)),usingOperation:!0,affectsData:!0};this.model.markers.has(d)?this.updateMarker(d,v):this.addMarker(d,v)}}catch(g){l.e(g)}finally{l.f()}}}}},{key:"insertText",value:function(e,n,t,r){n instanceof tn||n instanceof Oe||n instanceof H?this.insert(this.createText(e),n,t):this.insert(this.createText(e,n),t,r)}},{key:"insertElement",value:function(e,n,t,r){n instanceof tn||n instanceof Oe||n instanceof H?this.insert(this.createElement(e),n,t):this.insert(this.createElement(e,n),t,r)}},{key:"append",value:function(e,n){this.insert(e,n,"end")}},{key:"appendText",value:function(e,n,t){n instanceof tn||n instanceof Oe?this.insert(this.createText(e),n,"end"):this.insert(this.createText(e,n),t,"end")}},{key:"appendElement",value:function(e,n,t){n instanceof tn||n instanceof Oe?this.insert(this.createElement(e),n,"end"):this.insert(this.createElement(e,n),t,"end")}},{key:"setAttribute",value:function(e,n,t){if(this._assertWriterUsedCorrectly(),t instanceof F){var s,r=t.getMinimalFlatRanges(),o=k(r);try{for(o.s();!(s=o.n()).done;)_l(this,e,n,s.value)}catch(c){o.e(c)}finally{o.f()}}else Al(this,e,n,t)}},{key:"setAttributes",value:function(e,n){var r,t=k(It(e));try{for(t.s();!(r=t.n()).done;){var o=ee(r.value,2);this.setAttribute(o[0],o[1],n)}}catch(c){t.e(c)}finally{t.f()}}},{key:"removeAttribute",value:function(e,n){if(this._assertWriterUsedCorrectly(),n instanceof F){var o,t=n.getMinimalFlatRanges(),r=k(t);try{for(r.s();!(o=r.n()).done;)_l(this,e,null,o.value)}catch(l){r.e(l)}finally{r.f()}}else Al(this,e,null,n)}},{key:"clearAttributes",value:function(e){var n=this;this._assertWriterUsedCorrectly();var t=function(c){var d,u=k(c.getAttributeKeys());try{for(u.s();!(d=u.n()).done;)n.removeAttribute(d.value,c)}catch(f){u.e(f)}finally{u.f()}};if(e instanceof F){var o,r=k(e.getItems());try{for(r.s();!(o=r.n()).done;)t(o.value)}catch(l){r.e(l)}finally{r.f()}}else t(e)}},{key:"move",value:function(e,n,t){if(this._assertWriterUsedCorrectly(),!(e instanceof F))throw new I.b("writer-move-invalid-range: Invalid range to move.",this);if(!e.isFlat)throw new I.b("writer-move-range-not-flat: Range to move is not flat.",this);var r=H._createAt(n,t);if(!r.isEqual(e.start)){if(this._addOperationForAffectedMarkers("move",e),!Cl(e.root,r.root))throw new I.b("writer-move-different-document: Range is going to be moved between different documents.",this);var s=new _e(e.start,e.end.offset-e.start.offset,r,e.root.document?e.root.document.version:null);this.batch.addOperation(s),this.model.applyOperation(s)}}},{key:"remove",value:function(e){this._assertWriterUsedCorrectly();var r,n=(e instanceof F?e:F._createOn(e)).getMinimalFlatRanges().reverse(),t=k(n);try{for(t.s();!(r=t.n()).done;){var o=r.value;this._addOperationForAffectedMarkers("move",o),gg(o.start,o.end.offset-o.start.offset,this.batch,this.model)}}catch(s){t.e(s)}finally{t.f()}}},{key:"merge",value:function(e){this._assertWriterUsedCorrectly();var n=e.nodeBefore,t=e.nodeAfter;if(this._addOperationForAffectedMarkers("merge",e),!(n instanceof Oe))throw new I.b("writer-merge-no-element-before: Node before merge position must be an element.",this);if(!(t instanceof Oe))throw new I.b("writer-merge-no-element-after: Node after merge position must be an element.",this);e.root.document?this._merge(e):this._mergeDetached(e)}},{key:"createPositionFromPath",value:function(e,n,t){return this.model.createPositionFromPath(e,n,t)}},{key:"createPositionAt",value:function(e,n){return this.model.createPositionAt(e,n)}},{key:"createPositionAfter",value:function(e){return this.model.createPositionAfter(e)}},{key:"createPositionBefore",value:function(e){return this.model.createPositionBefore(e)}},{key:"createRange",value:function(e,n){return this.model.createRange(e,n)}},{key:"createRangeIn",value:function(e){return this.model.createRangeIn(e)}},{key:"createRangeOn",value:function(e){return this.model.createRangeOn(e)}},{key:"createSelection",value:function(e,n,t){return this.model.createSelection(e,n,t)}},{key:"_mergeDetached",value:function(e){var n=e.nodeBefore,t=e.nodeAfter;this.move(F._createIn(t),H._createAt(n,"end")),this.remove(t)}},{key:"_merge",value:function(e){var n=H._createAt(e.nodeBefore,"end"),t=H._createAt(e.nodeAfter,0),o=new H(e.root.document.graveyard,[0]),l=new Be(t,e.nodeAfter.maxOffset,n,o,e.root.document.version);this.batch.addOperation(l),this.model.applyOperation(l)}},{key:"rename",value:function(e,n){if(this._assertWriterUsedCorrectly(),!(e instanceof Oe))throw new I.b("writer-rename-not-element-instance: Trying to rename an object which is not an instance of Element.",this);var t=e.root.document?e.root.document.version:null,r=new St(H._createBefore(e),e.name,n,t);this.batch.addOperation(r),this.model.applyOperation(r)}},{key:"split",value:function(e,n){this._assertWriterUsedCorrectly();var t,r,o=e.parent;if(!o.parent)throw new I.b("writer-split-element-no-parent: Element with no parent can not be split.",this);if(n||(n=o.parent),!e.parent.getAncestors({includeSelf:!0}).includes(n))throw new I.b("writer-split-invalid-limit-element: Limit element is not a position ancestor.",this);do{var c=new Te(e,o.maxOffset-e.offset,null,o.root.document?o.root.document.version:null);this.batch.addOperation(c),this.model.applyOperation(c),t||r||(t=o,r=e.parent.nextSibling),o=(e=this.createPositionAfter(e.parent)).parent}while(o!==n);return{position:e,range:new F(H._createAt(t,"end"),H._createAt(r,0))}}},{key:"wrap",value:function(e,n){if(this._assertWriterUsedCorrectly(),!e.isFlat)throw new I.b("writer-wrap-range-not-flat: Range to wrap is not flat.",this);var t=n instanceof Oe?n:new Oe(n);if(t.childCount>0)throw new I.b("writer-wrap-element-not-empty: Element to wrap with is not empty.",this);if(null!==t.parent)throw new I.b("writer-wrap-element-attached: Element to wrap with is already attached to tree model.",this);this.insert(t,e.start);var r=new F(e.start.getShiftedBy(1),e.end.getShiftedBy(1));this.move(r,H._createAt(t,0))}},{key:"unwrap",value:function(e){if(this._assertWriterUsedCorrectly(),null===e.parent)throw new I.b("writer-unwrap-element-no-parent: Trying to unwrap an element which has no parent.",this);this.move(F._createIn(e),this.createPositionAfter(e)),this.remove(e)}},{key:"addMarker",value:function(e,n){if(this._assertWriterUsedCorrectly(),!n||"boolean"!=typeof n.usingOperation)throw new I.b("writer-addMarker-no-usingOperation: The options.usingOperation parameter is required when adding a new marker.",this);var t=n.usingOperation,r=n.range,o=void 0!==n.affectsData&&n.affectsData;if(this.model.markers.has(e))throw new I.b("writer-addMarker-marker-exists: Marker with provided name already exists.",this);if(!r)throw new I.b("writer-addMarker-no-range: Range parameter is required when adding a new marker.",this);return t?(Zn(this,e,null,r,o),this.model.markers.get(e)):this.model.markers._set(e,r,t,o)}},{key:"updateMarker",value:function(e,n){this._assertWriterUsedCorrectly();var t="string"==typeof e?e:e.name,r=this.model.markers.get(t);if(!r)throw new I.b("writer-updateMarker-marker-not-exists: Marker with provided name does not exists.",this);if(n){var o="boolean"==typeof n.usingOperation,s="boolean"==typeof n.affectsData,l=s?n.affectsData:r.affectsData;if(!o&&!n.range&&!s)throw new I.b("writer-updateMarker-wrong-options: One of the options is required - provide range, usingOperations or affectsData.",this);var c=r.getRange(),u=n.range?n.range:c;o&&n.usingOperation!==r.managedUsingOperations?n.usingOperation?Zn(this,t,null,u,l):(Zn(this,t,c,null,l),this.model.markers._set(t,u,void 0,l)):r.managedUsingOperations?Zn(this,t,c,u,l):this.model.markers._set(t,u,void 0,l)}else this.model.markers._refresh(r)}},{key:"removeMarker",value:function(e){this._assertWriterUsedCorrectly();var n="string"==typeof e?e:e.name;if(!this.model.markers.has(n))throw new I.b("writer-removeMarker-no-marker: Trying to remove marker which does not exist.",this);var t=this.model.markers.get(n);t.managedUsingOperations?Zn(this,n,t.getRange(),null,t.affectsData):this.model.markers._remove(n)}},{key:"setSelection",value:function(e,n,t){this._assertWriterUsedCorrectly(),this.model.document.selection._setTo(e,n,t)}},{key:"setSelectionFocus",value:function(e,n){this._assertWriterUsedCorrectly(),this.model.document.selection._setFocus(e,n)}},{key:"setSelectionAttribute",value:function(e,n){if(this._assertWriterUsedCorrectly(),"string"==typeof e)this._setSelectionAttribute(e,n);else{var r,t=k(It(e));try{for(t.s();!(r=t.n()).done;){var o=ee(r.value,2);this._setSelectionAttribute(o[0],o[1])}}catch(c){t.e(c)}finally{t.f()}}}},{key:"removeSelectionAttribute",value:function(e){if(this._assertWriterUsedCorrectly(),"string"==typeof e)this._removeSelectionAttribute(e);else{var t,n=k(e);try{for(n.s();!(t=n.n()).done;)this._removeSelectionAttribute(t.value)}catch(o){n.e(o)}finally{n.f()}}}},{key:"overrideSelectionGravity",value:function(){return this.model.document.selection._overrideGravity()}},{key:"restoreSelectionGravity",value:function(e){this.model.document.selection._restoreGravity(e)}},{key:"_setSelectionAttribute",value:function(e,n){var t=this.model.document.selection;if(t.isCollapsed&&t.anchor.parent.isEmpty){var r=pt._getStoreAttributeKey(e);this.setAttribute(r,n,t.anchor.parent)}t._setAttribute(e,n)}},{key:"_removeSelectionAttribute",value:function(e){var n=this.model.document.selection;if(n.isCollapsed&&n.anchor.parent.isEmpty){var t=pt._getStoreAttributeKey(e);this.removeAttribute(t,n.anchor.parent)}n._removeAttribute(e)}},{key:"_assertWriterUsedCorrectly",value:function(){if(this.model._currentWriter!==this)throw new I.b("writer-incorrect-use: Trying to use a writer outside the change() block.",this)}},{key:"_addOperationForAffectedMarkers",value:function(e,n){var r,t=k(this.model.markers);try{for(t.s();!(r=t.n()).done;){var o=r.value;if(o.managedUsingOperations){var s=o.getRange(),l=!1;if("move"===e)l=n.containsPosition(s.start)||n.start.isEqual(s.start)||n.containsPosition(s.end)||n.end.isEqual(s.end);else{var u=n.nodeAfter;l=s.start.parent==n.nodeBefore&&s.start.isAtEnd||s.end.parent==u&&0==s.end.offset||s.end.nodeAfter==u||s.start.nodeAfter==u}l&&this.updateMarker(o.name,{range:s})}}}catch(g){t.e(g)}finally{t.f()}}}]),a}();function _l(a,i,e,n){var o,s,l,d,t=a.model,r=t.document,c=n.start,u=k(n.getWalker({shallow:!0}));try{for(u.s();!(d=u.n()).done;){var h=d.value;l=h.item.getAttribute(i),o&&s!=l&&(s!=e&&f(),c=o),o=h.nextPosition,s=l}}catch(v){u.e(v)}finally{u.f()}function f(){var v=new F(c,o),m=new Ye(v,i,s,e,v.root.document?r.version:null);a.batch.addOperation(m),t.applyOperation(m)}o instanceof H&&o!=c&&s!=e&&f()}function Al(a,i,e,n){var s,l,t=a.model,r=t.document,o=n.getAttribute(i);o!=e&&(n.root===n?l=new Qn(n,i,o,e,n.document?r.version:null):(s=new F(H._createBefore(n),a.createPositionAfter(n)),l=new Ye(s,i,o,e,s.root.document?r.version:null)),a.batch.addOperation(l),t.applyOperation(l))}function Zn(a,i,e,n,t){var r=a.model,s=new xt(i,e,n,r.markers,t,r.document.version);a.batch.addOperation(s),r.applyOperation(s)}function gg(a,i,e,n){var t;if(a.root.document){var r=n.document,o=new H(r.graveyard,[0]);t=new _e(a,i,o,r.version)}else t=new fg(a,i);e.addOperation(t),n.applyOperation(t)}function Cl(a,i){return a===i||a instanceof mo&&i instanceof mo}var mg=function(){function a(i){A(this,a),this._markerCollection=i,this._changesInElement=new Map,this._elementSnapshots=new Map,this._changedMarkers=new Map,this._changeCount=0,this._cachedChanges=null,this._cachedChangesWithGraveyard=null}return C(a,[{key:"isEmpty",get:function(){return 0==this._changesInElement.size&&0==this._changedMarkers.size}},{key:"refreshItem",value:function(e){if(!this._isInInsertedElement(e.parent)){this._markRemove(e.parent,e.startOffset,e.offsetSize),this._markInsert(e.parent,e.startOffset,e.offsetSize);var r,n=F._createOn(e),t=k(this._markerCollection.getMarkersIntersectingRange(n));try{for(t.s();!(r=t.n()).done;){var o=r.value,s=o.getRange();this.bufferMarkerChange(o.name,s,s,o.affectsData)}}catch(l){t.e(l)}finally{t.f()}this._cachedChanges=null}}},{key:"bufferOperation",value:function(e){switch(e.type){case"insert":if(this._isInInsertedElement(e.position.parent))return;this._markInsert(e.position.parent,e.position.offset,e.nodes.maxOffset);break;case"addAttribute":case"removeAttribute":case"changeAttribute":var t,n=k(e.range.getItems({shallow:!0}));try{for(n.s();!(t=n.n()).done;){var r=t.value;this._isInInsertedElement(r.parent)||this._markAttribute(r)}}catch(p){n.e(p)}finally{n.f()}break;case"remove":case"move":case"reinsert":if(e.sourcePosition.isEqual(e.targetPosition)||e.sourcePosition.getShiftedBy(e.howMany).isEqual(e.targetPosition))return;var o=this._isInInsertedElement(e.sourcePosition.parent),s=this._isInInsertedElement(e.targetPosition.parent);o||this._markRemove(e.sourcePosition.parent,e.sourcePosition.offset,e.howMany),s||this._markInsert(e.targetPosition.parent,e.getMovedRangeStart().offset,e.howMany);break;case"rename":if(this._isInInsertedElement(e.position.parent))return;this._markRemove(e.position.parent,e.position.offset,1),this._markInsert(e.position.parent,e.position.offset,1);var u,l=F._createFromPositionAndShift(e.position,1),c=k(this._markerCollection.getMarkersIntersectingRange(l));try{for(c.s();!(u=c.n()).done;){var d=u.value,h=d.getRange();this.bufferMarkerChange(d.name,h,h,d.affectsData)}}catch(p){c.e(p)}finally{c.f()}break;case"split":var f=e.splitPosition.parent;this._isInInsertedElement(f)||this._markRemove(f,e.splitPosition.offset,e.howMany),this._isInInsertedElement(e.insertionPosition.parent)||this._markInsert(e.insertionPosition.parent,e.insertionPosition.offset,1),e.graveyardPosition&&this._markRemove(e.graveyardPosition.parent,e.graveyardPosition.offset,1);break;case"merge":var v=e.sourcePosition.parent;this._isInInsertedElement(v.parent)||this._markRemove(v.parent,v.startOffset,1),this._markInsert(e.graveyardPosition.parent,e.graveyardPosition.offset,1);var m=e.targetPosition.parent;this._isInInsertedElement(m)||this._markInsert(m,e.targetPosition.offset,v.maxOffset)}this._cachedChanges=null}},{key:"bufferMarkerChange",value:function(e,n,t,r){var o=this._changedMarkers.get(e);o?(o.newRange=t,o.affectsData=r,null==o.oldRange&&null==o.newRange&&this._changedMarkers.delete(e)):this._changedMarkers.set(e,{oldRange:n,newRange:t,affectsData:r})}},{key:"getMarkersToRemove",value:function(){var t,e=[],n=k(this._changedMarkers);try{for(n.s();!(t=n.n()).done;){var r=ee(t.value,2),s=r[1];null!=s.oldRange&&e.push({name:r[0],range:s.oldRange})}}catch(l){n.e(l)}finally{n.f()}return e}},{key:"getMarkersToAdd",value:function(){var t,e=[],n=k(this._changedMarkers);try{for(n.s();!(t=n.n()).done;){var r=ee(t.value,2),s=r[1];null!=s.newRange&&e.push({name:r[0],range:s.newRange})}}catch(l){n.e(l)}finally{n.f()}return e}},{key:"getChangedMarkers",value:function(){return Array.from(this._changedMarkers).map(function(e){return{name:e[0],data:{oldRange:e[1].oldRange,newRange:e[1].newRange}}})}},{key:"hasDataChanges",value:function(){var n,e=k(this._changedMarkers);try{for(e.s();!(n=e.n()).done;)if(ee(n.value,2)[1].affectsData)return!0}catch(o){e.e(o)}finally{e.f()}return this._changesInElement.size>0}},{key:"getChanges",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{includeChangesInGraveyard:!1};if(this._cachedChanges)return e.includeChangesInGraveyard?this._cachedChangesWithGraveyard.slice():this._cachedChanges.slice();var r,n=[],t=k(this._changesInElement.keys());try{for(t.s();!(r=t.n()).done;){var v,o=r.value,s=this._changesInElement.get(o).sort(function(K,W){return K.offset===W.offset?K.type!=W.type?"remove"==K.type?-1:1:0:K.offset<W.offset?-1:1}),l=this._elementSnapshots.get(o),c=Tl(o.getChildren()),u=pg(l.length,s),d=0,h=0,f=k(u);try{for(f.s();!(v=f.n()).done;){var g=v.value;if("i"===g)n.push(this._getInsertDiff(o,d,c[d].name)),d++;else if("r"===g)n.push(this._getRemoveDiff(o,d,l[h].name)),h++;else if("a"===g){var m=c[d].attributes,p=l[h].attributes,y=void 0;if("$text"==c[d].name)y=new F(H._createAt(o,d),H._createAt(o,d+1));else{var w=o.offsetToIndex(d);y=new F(H._createAt(o,d),H._createAt(o.getChild(w),0))}n.push.apply(n,Y(this._getAttributesDiff(y,p,m))),d++,h++}else d++,h++}}catch(K){f.e(K)}finally{f.f()}}}catch(K){t.e(K)}finally{t.f()}n.sort(function(K,W){return K.position.root!=W.position.root?K.position.root.rootName<W.position.root.rootName?-1:1:K.position.isEqual(W.position)?K.changeCount-W.changeCount:K.position.isBefore(W.position)?-1:1});for(var _=1;_<n.length;_++){var T=n[_-1],x=n[_],N="remove"==T.type&&"remove"==x.type&&"$text"==T.name&&"$text"==x.name&&T.position.isEqual(x.position),z="attribute"==T.type&&"attribute"==x.type&&T.position.parent==x.position.parent&&T.range.isFlat&&x.range.isFlat&&T.position.offset+T.length==x.position.offset&&T.attributeKey==x.attributeKey&&T.attributeOldValue==x.attributeOldValue&&T.attributeNewValue==x.attributeNewValue;(N||"insert"==T.type&&"insert"==x.type&&"$text"==T.name&&"$text"==x.name&&T.position.parent==x.position.parent&&T.position.offset+T.length==x.position.offset||z)&&(n[_-1].length++,z&&(n[_-1].range.end=n[_-1].range.end.getShiftedBy(1)),n.splice(_,1),_--)}for(var J=0,$=n;J<$.length;J++){var Q=$[J];delete Q.changeCount,"attribute"==Q.type&&(delete Q.position,delete Q.length)}return this._changeCount=0,this._cachedChangesWithGraveyard=n.slice(),this._cachedChanges=n.slice().filter(kg),e.includeChangesInGraveyard?this._cachedChangesWithGraveyard:this._cachedChanges}},{key:"reset",value:function(){this._changesInElement.clear(),this._elementSnapshots.clear(),this._changedMarkers.clear(),this._cachedChanges=null}},{key:"_markInsert",value:function(e,n,t){var r={type:"insert",offset:n,howMany:t,count:this._changeCount++};this._markChange(e,r)}},{key:"_markRemove",value:function(e,n,t){var r={type:"remove",offset:n,howMany:t,count:this._changeCount++};this._markChange(e,r),this._removeAllNestedChanges(e,n,t)}},{key:"_markAttribute",value:function(e){var n={type:"attribute",offset:e.startOffset,howMany:e.offsetSize,count:this._changeCount++};this._markChange(e.parent,n)}},{key:"_markChange",value:function(e,n){this._makeSnapshot(e);var t=this._getChangesForElement(e);this._handleChange(n,t),t.push(n);for(var r=0;r<t.length;r++)t[r].howMany<1&&(t.splice(r,1),r--)}},{key:"_getChangesForElement",value:function(e){var n;return this._changesInElement.has(e)?n=this._changesInElement.get(e):this._changesInElement.set(e,n=[]),n}},{key:"_makeSnapshot",value:function(e){this._elementSnapshots.has(e)||this._elementSnapshots.set(e,Tl(e.getChildren()))}},{key:"_handleChange",value:function(e,n){e.nodesToHandle=e.howMany;var r,t=k(n);try{for(t.s();!(r=t.n()).done;){var o=r.value,s=e.offset+e.howMany,l=o.offset+o.howMany;if("insert"==e.type&&("insert"==o.type&&(e.offset<=o.offset?o.offset+=e.howMany:e.offset<l&&(o.howMany+=e.nodesToHandle,e.nodesToHandle=0)),"remove"==o.type&&e.offset<o.offset&&(o.offset+=e.howMany),"attribute"==o.type))if(e.offset<=o.offset)o.offset+=e.howMany;else if(e.offset<l){var c=o.howMany;o.howMany=e.offset-o.offset,n.unshift({type:"attribute",offset:s,howMany:c-o.howMany,count:this._changeCount++})}if("remove"==e.type){if("insert"==o.type)if(s<=o.offset)o.offset-=e.howMany;else if(s<=l)if(e.offset<o.offset){var u=s-o.offset;o.offset=e.offset,o.howMany-=u,e.nodesToHandle-=u}else o.howMany-=e.nodesToHandle,e.nodesToHandle=0;else if(e.offset<=o.offset)e.nodesToHandle-=o.howMany,o.howMany=0;else if(e.offset<l){var d=l-e.offset;o.howMany-=d,e.nodesToHandle-=d}if("remove"==o.type&&(s<=o.offset?o.offset-=e.howMany:e.offset<o.offset&&(e.nodesToHandle+=o.howMany,o.howMany=0)),"attribute"==o.type)if(s<=o.offset)o.offset-=e.howMany;else if(e.offset<o.offset){var h=s-o.offset;o.offset=e.offset,o.howMany-=h}else if(e.offset<l)if(s<=l){var f=o.howMany;o.howMany=e.offset-o.offset,n.unshift({type:"attribute",offset:e.offset,howMany:f-o.howMany-e.nodesToHandle,count:this._changeCount++})}else o.howMany-=l-e.offset}if("attribute"==e.type){if("insert"==o.type)if(e.offset<o.offset&&s>o.offset){if(s>l){var g={type:"attribute",offset:l,howMany:s-l,count:this._changeCount++};this._handleChange(g,n),n.push(g)}e.nodesToHandle=o.offset-e.offset,e.howMany=e.nodesToHandle}else e.offset>=o.offset&&e.offset<l&&(s>l?(e.nodesToHandle=s-l,e.offset=l):e.nodesToHandle=0);if("remove"==o.type&&e.offset<o.offset&&s>o.offset){var m={type:"attribute",offset:o.offset,howMany:s-o.offset,count:this._changeCount++};this._handleChange(m,n),n.push(m),e.nodesToHandle=o.offset-e.offset,e.howMany=e.nodesToHandle}"attribute"==o.type&&(e.offset>=o.offset&&s<=l?(e.nodesToHandle=0,e.howMany=0,e.offset=0):e.offset<=o.offset&&s>=l&&(o.howMany=0))}}}catch(p){t.e(p)}finally{t.f()}e.howMany=e.nodesToHandle,delete e.nodesToHandle}},{key:"_getInsertDiff",value:function(e,n,t){return{type:"insert",position:H._createAt(e,n),name:t,length:1,changeCount:this._changeCount++}}},{key:"_getRemoveDiff",value:function(e,n,t){return{type:"remove",position:H._createAt(e,n),name:t,length:1,changeCount:this._changeCount++}}},{key:"_getAttributesDiff",value:function(e,n,t){var r=[];t=new Map(t);var s,o=k(n);try{for(o.s();!(s=o.n()).done;){var l=ee(s.value,2),c=l[0],u=l[1],d=t.has(c)?t.get(c):null;d!==u&&r.push({type:"attribute",position:e.start,range:e.clone(),length:1,attributeKey:c,attributeOldValue:u,attributeNewValue:d,changeCount:this._changeCount++}),t.delete(c)}}catch(p){o.e(p)}finally{o.f()}var f,h=k(t);try{for(h.s();!(f=h.n()).done;){var v=ee(f.value,2),g=v[0],m=v[1];r.push({type:"attribute",position:e.start,range:e.clone(),length:1,attributeKey:g,attributeOldValue:null,attributeNewValue:m,changeCount:this._changeCount++})}}catch(p){h.e(p)}finally{h.f()}return r}},{key:"_isInInsertedElement",value:function(e){var n=e.parent;if(!n)return!1;var t=this._changesInElement.get(n),r=e.startOffset;if(t){var s,o=k(t);try{for(o.s();!(s=o.n()).done;){var l=s.value;if("insert"==l.type&&r>=l.offset&&r<l.offset+l.howMany)return!0}}catch(c){o.e(c)}finally{o.f()}}return this._isInInsertedElement(n)}},{key:"_removeAllNestedChanges",value:function(e,n,t){var s,r=new F(H._createAt(e,n),H._createAt(e,n+t)),o=k(r.getItems({shallow:!0}));try{for(o.s();!(s=o.n()).done;){var l=s.value;l.is("element")&&(this._elementSnapshots.delete(l),this._changesInElement.delete(l),this._removeAllNestedChanges(l,0,l.maxOffset))}}catch(c){o.e(c)}finally{o.f()}}}]),a}();function Tl(a){var n,i=[],e=k(a);try{for(e.s();!(n=e.n()).done;){var t=n.value;if(t.is("$text"))for(var r=0;r<t.data.length;r++)i.push({name:"$text",attributes:new Map(t.getAttributes())});else i.push({name:t.name,attributes:new Map(t.getAttributes())})}}catch(o){e.e(o)}finally{e.f()}return i}function pg(a,i){var o,e=[],n=0,t=0,r=k(i);try{for(r.s();!(o=r.n()).done;){var s=o.value;if(s.offset>n){for(var l=0;l<s.offset-n;l++)e.push("e");t+=s.offset-n}if("insert"==s.type){for(var c=0;c<s.howMany;c++)e.push("i");n=s.offset+s.howMany}else if("remove"==s.type){for(var u=0;u<s.howMany;u++)e.push("r");n=s.offset,t+=s.howMany}else e.push.apply(e,Y("a".repeat(s.howMany).split(""))),n=s.offset+s.howMany,t+=s.howMany}}catch(h){r.e(h)}finally{r.f()}if(t<a)for(var d=0;d<a-t-n;d++)e.push("e");return e}function kg(a){return!(a.position&&"$graveyard"==a.position.root.rootName||a.range&&"$graveyard"==a.range.root.rootName)}var yg=function(){function a(){A(this,a),this._operations=[],this._undoPairs=new Map,this._undoneOperations=new Set}return C(a,[{key:"addOperation",value:function(e){this._operations.includes(e)||this._operations.push(e)}},{key:"getOperations",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return e<0?[]:this._operations.slice(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:Number.POSITIVE_INFINITY)}},{key:"getOperation",value:function(e){return this._operations[e]}},{key:"setOperationAsUndone",value:function(e,n){this._undoPairs.set(n,e),this._undoneOperations.add(e)}},{key:"isUndoingOperation",value:function(e){return this._undoPairs.has(e)}},{key:"isUndoneOperation",value:function(e){return this._undoneOperations.has(e)}},{key:"getUndoneOperation",value:function(e){return this._undoPairs.get(e)}}]),a}();function xl(a,i){return!!(e=a.charAt(i-1))&&1==e.length&&/[\ud800-\udbff]/.test(e)&&!!(n=a.charAt(i))&&1==n.length&&/[\udc00-\udfff]/.test(n);var n,e}function Sl(a,i){return!!(e=a.charAt(i))&&1==e.length&&/[\u0300-\u036f\u1ab0-\u1aff\u1dc0-\u1dff\u20d0-\u20ff\ufe20-\ufe2f]/.test(e);var e}var Pl=function(){function a(i){var e=this;A(this,a),this.model=i,this.version=0,this.history=new yg(this),this.selection=new pt(this),this.roots=new Qe({idProperty:"rootName"}),this.differ=new mg(i.markers),this._postFixers=new Set,this._hasSelectionChangedFromTheLastChangeBlock=!1,this.createRoot("$root","$graveyard"),this.listenTo(i,"applyOperation",function(n,t){var r=t[0];if(r.isDocumentOperation&&r.baseVersion!==e.version)throw new I.b("model-document-applyOperation-wrong-version: Only operations with matching versions can be applied.",e,{operation:r})},{priority:"highest"}),this.listenTo(i,"applyOperation",function(n,t){var r=t[0];r.isDocumentOperation&&e.differ.bufferOperation(r)},{priority:"high"}),this.listenTo(i,"applyOperation",function(n,t){var r=t[0];r.isDocumentOperation&&(e.version++,e.history.addOperation(r))},{priority:"low"}),this.listenTo(this.selection,"change",function(){e._hasSelectionChangedFromTheLastChangeBlock=!0}),this.listenTo(i.markers,"update",function(n,t,r,o){e.differ.bufferMarkerChange(t.name,r,o,t.affectsData),null===r&&t.on("change",function(s,l){e.differ.bufferMarkerChange(t.name,l,t.getRange(),t.affectsData)})})}return C(a,[{key:"graveyard",get:function(){return this.getRoot("$graveyard")}},{key:"createRoot",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"$root",n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"main";if(this.roots.get(n))throw new I.b("model-document-createRoot-name-exists: Root with specified name already exists.",this,{name:n});var t=new mo(this,e,n);return this.roots.add(t),t}},{key:"destroy",value:function(){this.selection.destroy(),this.stopListening()}},{key:"getRoot",value:function(){return this.roots.get(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"main")}},{key:"getRootNames",value:function(){return Array.from(this.roots,function(e){return e.rootName}).filter(function(e){return"$graveyard"!=e})}},{key:"registerPostFixer",value:function(e){this._postFixers.add(e)}},{key:"toJSON",value:function(){var e=Wa(this);return e.selection="[engine.model.DocumentSelection]",e.model="[engine.model.Model]",e}},{key:"_handleChangeBlock",value:function(e){this._hasDocumentChangedFromTheLastChangeBlock()&&(this._callPostFixers(e),this.selection.refresh(),this.differ.hasDataChanges()?this.fire("change:data",e.batch):this.fire("change",e.batch),this.selection.refresh(),this.differ.reset()),this._hasSelectionChangedFromTheLastChangeBlock=!1}},{key:"_hasDocumentChangedFromTheLastChangeBlock",value:function(){return!this.differ.isEmpty||this._hasSelectionChangedFromTheLastChangeBlock}},{key:"_getDefaultRoot",value:function(){var n,e=k(this.roots);try{for(e.s();!(n=e.n()).done;){var t=n.value;if(t!==this.graveyard)return t}}catch(r){e.e(r)}finally{e.f()}return this.graveyard}},{key:"_getDefaultRange",value:function(){var e=this._getDefaultRoot(),n=this.model,t=n.schema,r=n.createPositionFromPath(e,[0]);return t.getNearestSelectionRange(r)||n.createRange(r)}},{key:"_validateSelectionRange",value:function(e){return El(e.start)&&El(e.end)}},{key:"_callPostFixers",value:function(e){var n=!1;do{var r,t=k(this._postFixers);try{for(t.s();!(r=t.n()).done;){var o=r.value;if(this.selection.refresh(),n=o(e))break}}catch(s){t.e(s)}finally{t.f()}}while(n)}}]),a}();function El(a){var i=a.textNode;if(i){var e=i.data,n=a.offset-i.startOffset;return!xl(e,n)&&!Sl(e,n)}return!0}se(Pl,Se);var Ml=function(a){function i(){A(this,i),this._markers=new Map}return C(i,[{key:a,value:function(){return this._markers.values()}},{key:"has",value:function(n){return this._markers.has(n)}},{key:"get",value:function(n){return this._markers.get(n)||null}},{key:"_set",value:function(n,t){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],o=arguments.length>3&&void 0!==arguments[3]&&arguments[3],s=n instanceof Xn?n.name:n;if(s.includes(","))throw new I.b('markercollection-incorrect-marker-name: Marker name cannot contain the "," character.',this);var l=this._markers.get(s);if(l){var c=l.getRange(),u=!1;return c.isEqual(t)||(l._attachLiveRange(yn.fromRange(t)),u=!0),r!=l.managedUsingOperations&&(l._managedUsingOperations=r,u=!0),"boolean"==typeof o&&o!=l.affectsData&&(l._affectsData=o,u=!0),u&&this.fire("update:"+s,l,c,t),l}var d=yn.fromRange(t),h=new Xn(s,d,r,o);return this._markers.set(s,h),this.fire("update:"+s,h,null,t),h}},{key:"_remove",value:function(n){var t=n instanceof Xn?n.name:n,r=this._markers.get(t);return!!r&&(this._markers.delete(t),this.fire("update:"+t,r,r.getRange(),null),this._destroyMarker(r),!0)}},{key:"_refresh",value:function(n){var t=n instanceof Xn?n.name:n,r=this._markers.get(t);if(!r)throw new I.b("markercollection-refresh-marker-not-exists: Marker with provided name does not exists.",this);var o=r.getRange();this.fire("update:"+t,r,o,o,r.managedUsingOperations,r.affectsData)}},{key:"getMarkersAtPosition",value:G.mark(function e(n){var t,r,o;return G.wrap(function(l){for(;;)switch(l.prev=l.next){case 0:t=k(this),l.prev=1,t.s();case 3:if((r=t.n()).done){l.next=11;break}if(l.t0=(o=r.value).getRange().containsPosition(n),!l.t0){l.next=9;break}return l.next=9,o;case 9:l.next=3;break;case 11:l.next=16;break;case 13:l.prev=13,l.t1=l.catch(1),t.e(l.t1);case 16:return l.prev=16,t.f(),l.finish(16);case 19:case"end":return l.stop()}},e,this,[[1,13,16,19]])})},{key:"getMarkersIntersectingRange",value:G.mark(function e(n){var t,r,o;return G.wrap(function(l){for(;;)switch(l.prev=l.next){case 0:t=k(this),l.prev=1,t.s();case 3:if((r=t.n()).done){l.next=11;break}if(l.t0=null!==(o=r.value).getRange().getIntersection(n),!l.t0){l.next=9;break}return l.next=9,o;case 9:l.next=3;break;case 11:l.next=16;break;case 13:l.prev=13,l.t1=l.catch(1),t.e(l.t1);case 16:return l.prev=16,t.f(),l.finish(16);case 19:case"end":return l.stop()}},e,this,[[1,13,16,19]])})},{key:"destroy",value:function(){var t,n=k(this._markers.values());try{for(n.s();!(t=n.n()).done;)this._destroyMarker(t.value)}catch(o){n.e(o)}finally{n.f()}this._markers=null,this.stopListening()}},{key:"getMarkersGroup",value:G.mark(function e(n){var t,r,o;return G.wrap(function(l){for(;;)switch(l.prev=l.next){case 0:t=k(this._markers.values()),l.prev=1,t.s();case 3:if((r=t.n()).done){l.next=11;break}if(l.t0=(o=r.value).name.startsWith(n+":"),!l.t0){l.next=9;break}return l.next=9,o;case 9:l.next=3;break;case 11:l.next=16;break;case 13:l.prev=13,l.t1=l.catch(1),t.e(l.t1);case 16:return l.prev=16,t.f(),l.finish(16);case 19:case"end":return l.stop()}},e,this,[[1,13,16,19]])})},{key:"_destroyMarker",value:function(n){n.stopListening(),n._detachLiveRange()}}]),i}(Symbol.iterator);se(Ml,Se);var Xn=function(){function a(i,e,n,t){A(this,a),this.name=i,this._liveRange=this._attachLiveRange(e),this._managedUsingOperations=n,this._affectsData=t}return C(a,[{key:"managedUsingOperations",get:function(){if(!this._liveRange)throw new I.b("marker-destroyed: Cannot use a destroyed marker instance.",this);return this._managedUsingOperations}},{key:"affectsData",get:function(){if(!this._liveRange)throw new I.b("marker-destroyed: Cannot use a destroyed marker instance.",this);return this._affectsData}},{key:"getStart",value:function(){if(!this._liveRange)throw new I.b("marker-destroyed: Cannot use a destroyed marker instance.",this);return this._liveRange.start.clone()}},{key:"getEnd",value:function(){if(!this._liveRange)throw new I.b("marker-destroyed: Cannot use a destroyed marker instance.",this);return this._liveRange.end.clone()}},{key:"getRange",value:function(){if(!this._liveRange)throw new I.b("marker-destroyed: Cannot use a destroyed marker instance.",this);return this._liveRange.toRange()}},{key:"is",value:function(e){return"marker"===e||"model:marker"===e}},{key:"_attachLiveRange",value:function(e){return this._liveRange&&this._detachLiveRange(),e.delegate("change:range").to(this),e.delegate("change:content").to(this),this._liveRange=e,e}},{key:"_detachLiveRange",value:function(){this._liveRange.stopDelegating("change:range",this),this._liveRange.stopDelegating("change:content",this),this._liveRange.detach(),this._liveRange=null}}]),a}();se(Xn,Se);var rt=function(a){P(e,a);var i=M(e);function e(){return A(this,e),i.apply(this,arguments)}return C(e,[{key:"type",get:function(){return"noop"}},{key:"clone",value:function(){return new e(this.baseVersion)}},{key:"getReversed",value:function(){return new e(this.baseVersion+1)}},{key:"_execute",value:function(){}}],[{key:"className",get:function(){return"NoOperation"}}]),e}(ht),kt={};kt[Ye.className]=Ye,kt[nt.className]=nt,kt[xt.className]=xt,kt[_e.className]=_e,kt[rt.className]=rt,kt[ht.className]=ht,kt[St.className]=St,kt[Qn.className]=Qn,kt[Te.className]=Te,kt[Be.className]=Be;var $e=function(a){P(e,a);var i=M(e);function e(n,t){var r,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"toNone";if(A(this,e),!(r=i.call(this,n,t,o)).root.is("rootElement"))throw new I.b("model-liveposition-root-not-rootelement: LivePosition's root has to be an instance of RootElement.",n);return bg.call(X(r)),Ie(r)}return C(e,[{key:"detach",value:function(){this.stopListening()}},{key:"is",value:function(t){return"livePosition"===t||"model:livePosition"===t||"position"==t||"model:position"===t}},{key:"toPosition",value:function(){return new H(this.root,this.path.slice(),this.stickiness)}}],[{key:"fromPosition",value:function(t,r){return new this(t.root,t.path.slice(),r||t.stickiness)}}]),e}(H);function bg(){var a=this;this.listenTo(this.root.document.model,"applyOperation",function(i,e){var n=e[0];n.isDocumentOperation&&wg.call(a,n)},{priority:"low"})}function wg(a){var i=this.getTransformedByOperation(a);if(!this.isEqual(i)){var e=this.toPosition();this.path=i.path,this.root=i.root,this.fire("change",e)}}se($e,Se);var _g=function(){function a(i,e,n){A(this,a),this.model=i,this.writer=e,this.position=n,this.canMergeWith=new Set([this.position.parent]),this.schema=i.schema,this._filterAttributesOf=[],this._affectedStart=null,this._affectedEnd=null}return C(a,[{key:"handleNodes",value:function(e,n){e=Array.from(e);for(var t=0;t<e.length;t++)this._handleNode(e[t],{isFirst:0===t&&n.isFirst,isLast:t===e.length-1&&n.isLast});this.schema.removeDisallowedAttributes(this._filterAttributesOf,this.writer),this._filterAttributesOf=[]}},{key:"getSelectionRange",value:function(){return this.nodeToSelect?F._createOn(this.nodeToSelect):this.model.schema.getNearestSelectionRange(this.position)}},{key:"getAffectedRange",value:function(){return this._affectedStart?new F(this._affectedStart,this._affectedEnd):null}},{key:"destroy",value:function(){this._affectedStart&&this._affectedStart.detach(),this._affectedEnd&&this._affectedEnd.detach()}},{key:"_handleNode",value:function(e,n){this.schema.isObject(e)?this._handleObject(e,n):this._checkAndSplitToAllowedPosition(e,n)?(this._insert(e),this._mergeSiblingsOf(e,n)):this._handleDisallowedNode(e,n)}},{key:"_handleObject",value:function(e,n){this._checkAndSplitToAllowedPosition(e)?this._insert(e):this._tryAutoparagraphing(e,n)}},{key:"_handleDisallowedNode",value:function(e,n){e.is("element")?this.handleNodes(e.getChildren(),n):this._tryAutoparagraphing(e,n)}},{key:"_insert",value:function(e){if(!this.schema.checkChild(this.position,e))throw new I.b("insertcontent-wrong-position: Given node cannot be inserted on the given position.",this,{node:e,position:this.position});var n=$e.fromPosition(this.position,"toNext");this._setAffectedBoundaries(this.position),this.writer.insert(e,this.position),this.position=n.toPosition(),n.detach(),this.nodeToSelect=this.schema.isObject(e)&&!this.schema.checkChild(this.position,"$text")?e:null,this._filterAttributesOf.push(e)}},{key:"_setAffectedBoundaries",value:function(e){this._affectedStart||(this._affectedStart=$e.fromPosition(e,"toPrevious")),this._affectedEnd&&!this._affectedEnd.isBefore(e)||(this._affectedEnd&&this._affectedEnd.detach(),this._affectedEnd=$e.fromPosition(e,"toNext"))}},{key:"_mergeSiblingsOf",value:function(e,n){if(e instanceof Oe){var t=this._canMergeLeft(e,n),r=this._canMergeRight(e,n),o=$e._createBefore(e);o.stickiness="toNext";var s=$e._createAfter(e);if(s.stickiness="toNext",t){var l=$e.fromPosition(this.position);l.stickiness="toNext",this._affectedStart.isEqual(o)&&(this._affectedStart.detach(),this._affectedStart=$e._createAt(o.nodeBefore,"end","toPrevious")),this.writer.merge(o),o.isEqual(this._affectedEnd)&&n.isLast&&(this._affectedEnd.detach(),this._affectedEnd=$e._createAt(o.nodeBefore,"end","toNext")),this.position=l.toPosition(),l.detach()}if(r){if(!this.position.isEqual(s))throw new I.b("insertcontent-invalid-insertion-position: An internal error occurred during insertContent().",this);this.position=H._createAt(s.nodeBefore,"end");var c=$e.fromPosition(this.position,"toPrevious");this._affectedEnd.isEqual(s)&&(this._affectedEnd.detach(),this._affectedEnd=$e._createAt(s.nodeBefore,"end","toNext")),this.writer.merge(s),s.getShiftedBy(-1).isEqual(this._affectedStart)&&n.isFirst&&(this._affectedStart.detach(),this._affectedStart=$e._createAt(s.nodeBefore,0,"toPrevious")),this.position=c.toPosition(),c.detach()}(t||r)&&this._filterAttributesOf.push(this.position.parent),o.detach(),s.detach()}}},{key:"_canMergeLeft",value:function(e,n){var t=e.previousSibling;return n.isFirst&&t instanceof Oe&&this.canMergeWith.has(t)&&this.model.schema.checkMerge(t,e)}},{key:"_canMergeRight",value:function(e,n){var t=e.nextSibling;return n.isLast&&t instanceof Oe&&this.canMergeWith.has(t)&&this.model.schema.checkMerge(e,t)}},{key:"_tryAutoparagraphing",value:function(e,n){var t=this.writer.createElement("paragraph");this._getAllowedIn(t,this.position.parent)&&this.schema.checkChild(t,e)&&(t._appendChild(e),this._handleNode(t,n))}},{key:"_checkAndSplitToAllowedPosition",value:function(e){var n=this._getAllowedIn(e,this.position.parent);if(!n)return!1;for(;n!=this.position.parent;){if(this.schema.isLimit(this.position.parent))return!1;if(this.position.isAtStart){var t=this.position.parent;this.position=this.writer.createPositionBefore(t),t.isEmpty&&t.parent===n&&this.writer.remove(t)}else if(this.position.isAtEnd)this.position=this.writer.createPositionAfter(this.position.parent);else{var r=this.writer.createPositionAfter(this.position.parent);this._setAffectedBoundaries(this.position),this.writer.split(this.position),this.position=r,this.canMergeWith.add(this.position.nodeAfter)}}return!0}},{key:"_getAllowedIn",value:function(e,n){return this.schema.checkChild(n,e)?n:n.parent?this._getAllowedIn(e,n.parent):null}}]),a}();function po(a,i,e){var n=i.parent,t=e.parent;return n!=t&&!a.isLimit(n)&&!a.isLimit(t)&&function(r,o,s){var u,l=new F(r,o),c=k(l.getWalker());try{for(c.s();!(u=c.n()).done;)if(s.isLimit(u.value.item))return!1}catch(h){c.e(h)}finally{c.f()}return!0}(i,e,a)}function Il(a,i,e){var n=a.createElement("paragraph");a.insert(n,i),Nl(a,e,a.createPositionAt(n,0))}function Nl(a,i,e){i instanceof pt?a.setSelection(e):i.setTo(e)}function Cg(a,i){var e=a.isForward,n=a.walker,t=a.unit,r=a.schema,o=i.type,s=i.item,l=i.nextPosition;if("text"==o)return"word"===a.unit?function(c,u){var d=c.position.textNode;if(d)for(var h=c.position.offset-d.startOffset;!xg(d.data,h,u)&&!Sg(d,h,u);){c.next();var f=u?c.position.nodeAfter:c.position.nodeBefore;if(f&&f.is("$text")){var v=f.data.charAt(u?0:f.data.length-1);' ,.?!:;"-()'.includes(v)||(c.next(),d=c.position.textNode)}h=c.position.offset-d.startOffset}return c.position}(n,e):function(c,u){var d=c.position.textNode;if(d)for(var h=d.data,f=c.position.offset-d.startOffset;xl(h,f)||"character"==u&&Sl(h,f);)c.next(),f=c.position.offset-d.startOffset;return c.position}(n,t);if(o==(e?"elementStart":"elementEnd")){if(r.isSelectable(s))return H._createAt(s,e?"after":"before");if(r.checkChild(l,"$text"))return l}else{if(r.isLimit(s))return void n.skip(function(){return!0});if(r.checkChild(l,"$text"))return l}}function Tg(a,i){var n=H._createAt(a.root,i?"end":0);return i?new F(a,n):new F(n,a)}function xg(a,i,e){return' ,.?!:;"-()'.includes(a.charAt(i+(e?0:-1)))}function Sg(a,i,e){return i===(e?a.endOffset:0)}function Rl(a,i){var e=[];Array.from(a.getItems({direction:"backward"})).map(function(n){return i.createRangeOn(n)}).filter(function(n){return(n.start.isAfter(a.start)||n.start.isEqual(a.start))&&(n.end.isBefore(a.end)||n.end.isEqual(a.end))}).forEach(function(n){e.push(n.start.parent),i.remove(n)}),e.forEach(function(n){for(var t=n;t.parent&&t.isEmpty;){var r=i.createRangeOn(t);t=t.parent,i.remove(r)}})}function Eg(a,i){return a.isCollapsed?function(e,n){var t=e.start,r=n.getNearestSelectionRange(t);if(!r)return null;if(!r.isCollapsed)return r;var o=r.start;return t.isEqual(o)?null:new F(o)}(a,i):function(e,n){var T,x,N,D,z,t=e.start,r=e.end,o=n.checkChild(t,"$text"),s=n.checkChild(r,"$text"),l=n.getLimitElement(t),c=n.getLimitElement(r);if(l===c){if(o&&s)return null;if(x=r,N=n,D=(T=t).nodeAfter&&!N.isLimit(T.nodeAfter)||N.checkChild(T,"$text"),z=x.nodeBefore&&!N.isLimit(x.nodeBefore)||N.checkChild(x,"$text"),D||z){var u=t.nodeAfter&&n.isSelectable(t.nodeAfter)?null:n.getNearestSelectionRange(t,"forward"),d=r.nodeBefore&&n.isSelectable(r.nodeBefore)?null:n.getNearestSelectionRange(r,"backward");return new F(u?u.start:t,d?d.start:r)}}var v=l&&!l.is("rootElement"),g=c&&!c.is("rootElement");if(v||g){var m=t.nodeAfter&&r.nodeBefore&&t.nodeAfter.parent===r.nodeBefore.parent,p=v&&(!m||!Dl(t.nodeAfter,n)),y=g&&(!m||!Dl(r.nodeBefore,n)),w=t,_=r;return p&&(w=H._createBefore(Ol(l,n))),y&&(_=H._createAfter(Ol(c,n))),new F(w,_)}return null}(a,i)}function Ol(a,i){for(var e=a,n=e;i.isLimit(n)&&n.parent;)e=n,n=n.parent;return e}function Dl(a,i){return a&&i.isSelectable(a)}var Ll=function(){function a(){var i=this;A(this,a),this.markers=new Ml,this.document=new Pl(this),this.schema=new vl,this._pendingChanges=[],this._currentWriter=null,["insertContent","deleteContent","modifySelection","getSelectedContent","applyOperation"].forEach(function(e){return i.decorate(e)}),this.on("applyOperation",function(e,n){n[0]._validate()},{priority:"highest"}),this.schema.register("$root",{isLimit:!0}),this.schema.register("$block",{allowIn:"$root",isBlock:!0}),this.schema.register("$text",{allowIn:"$block",isInline:!0,isContent:!0}),this.schema.register("$clipboardHolder",{allowContentOf:"$root",isLimit:!0}),this.schema.extend("$text",{allowIn:"$clipboardHolder"}),this.schema.register("$marker"),this.schema.addChildCheck(function(e,n){if("$marker"===n.name)return!0}),function Pg(a){a.document.registerPostFixer(function(i){return function(e,n){var c,t=n.document.selection,r=n.schema,o=[],s=!1,l=k(t.getRanges());try{for(l.s();!(c=l.n()).done;){var u=c.value,d=Eg(u,r);d&&!d.isEqual(u)?(o.push(d),s=!0):o.push(u)}}catch(h){l.e(h)}finally{l.f()}s&&e.setSelection(function(h){var f=[];f.push(h.shift());var g,v=k(h);try{for(v.s();!(g=v.n()).done;){var m=g.value,p=f.pop();if(m.isIntersecting(p)){var y=p.start.isAfter(m.start)?m.start:p.start,w=p.end.isAfter(m.end)?p.end:m.end,_=new F(y,w);f.push(_)}else f.push(p),f.push(m)}}catch(T){v.e(T)}finally{v.f()}return f}(o),{backward:t.isBackward})}(i,a)})}(this),this.document.registerPostFixer(al)}return C(a,[{key:"change",value:function(e){try{return 0===this._pendingChanges.length?(this._pendingChanges.push({batch:new Br,callback:e}),this._runPendingChanges()[0]):e(this._currentWriter)}catch(n){I.b.rethrowUnexpectedError(n,this)}}},{key:"enqueueChange",value:function(e,n){try{"string"==typeof e?e=new Br(e):"function"==typeof e&&(n=e,e=new Br),this._pendingChanges.push({batch:e,callback:n}),1==this._pendingChanges.length&&this._runPendingChanges()}catch(t){I.b.rethrowUnexpectedError(t,this)}}},{key:"applyOperation",value:function(e){e._execute()}},{key:"insertContent",value:function(e,n,t){return o=e,s=n,l=t,(r=this).change(function(c){var u;(u=s?s instanceof en||s instanceof pt?s:c.createSelection(s,l):r.document.selection).isCollapsed||r.deleteContent(u,{doNotAutoparagraph:!0});var h,d=new _g(r,c,u.anchor);h=o.is("documentFragment")?o.getChildren():[o],d.handleNodes(h,{isFirst:!0,isLast:!0});var f=d.getSelectionRange();f&&(u instanceof pt?c.setSelection(f):u.setTo(f));var v=d.getAffectedRange()||r.createRange(u.anchor);return d.destroy(),v});var r,o,s,l}},{key:"deleteContent",value:function(e,n){!function Ag(a,i){var e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(!i.isCollapsed){var n=i.getFirstRange();if("$graveyard"!=n.root.rootName){var t=a.schema;a.change(function(r){if(!e.doNotResetEntireContent&&function(u,d){var h=u.getLimitElement(d);if(!d.containsEntireContent(h))return!1;var f=d.getFirstRange();return f.start.parent!=f.end.parent&&u.checkChild(h,"paragraph")}(t,i))return h=(u=r).model.schema.getLimitElement(d=i),u.remove(u.createRangeIn(h)),void Il(u,u.createPositionAt(h,0),d);var u,d,h,o=function(u){var d=u.root.document.model,h=u.start,f=u.end;if(d.hasContent(u,{ignoreMarkers:!0})){var v=function(m){var T,p=m.parent,y=p.root.document.model.schema,w=p.getAncestors({parentFirst:!0,includeSelf:!0}),_=k(w);try{for(_.s();!(T=_.n()).done;){var x=T.value;if(y.isLimit(x))return null;if(y.isBlock(x))return x}}catch(N){_.e(N)}finally{_.f()}}(f);if(v&&f.isTouching(d.createPositionAt(v,0))){var g=d.createSelection(u);d.modifySelection(g,{direction:"backward"}),f=g.getLastPosition()}}return[$e.fromPosition(h,"toPrevious"),$e.fromPosition(f,"toNext")]}(n),s=ee(o,2),l=s[0],c=s[1];n.start.isTouching(n.end)||r.remove(n),e.leaveUnmerged||(function(u,d,h){var f=u.model;if(po(u.model.schema,d,h)){var v=function(y,w){for(var _=y.getAncestors(),T=w.getAncestors(),x=0;_[x]&&_[x]==T[x];)x++;return[_[x],T[x]]}(d,h),g=ee(v,2),m=g[0],p=g[1];!f.hasContent(m,{ignoreMarkers:!0})&&f.hasContent(p,{ignoreMarkers:!0})?function y(w,_,T,x){var J,$,Q,K,N=_.parent,D=T.parent;if(N!=x&&D!=x){for(_=w.createPositionAfter(N),(T=w.createPositionBefore(D)).isEqual(_)||w.insert(N,T);_.parent.isEmpty;){var z=_.parent;_=w.createPositionBefore(z),w.remove(z)}T=w.createPositionBefore(D),J=w,(Q=($=T).nodeBefore).name!=(K=$.nodeAfter).name&&J.rename(Q,K.name),J.clearAttributes(Q),J.setAttributes(Object.fromEntries(K.getAttributes()),Q),J.merge($),po(w.model.schema,_,T)&&y(w,_,T,x)}}(u,d,h,m.parent):function y(w,_,T,x){var N=_.parent,D=T.parent;if(N!=x&&D!=x){for(_=w.createPositionAfter(N),(T=w.createPositionBefore(D)).isEqual(_)||w.insert(D,_),w.merge(_);T.parent.isEmpty;){var z=T.parent;T=w.createPositionBefore(z),w.remove(z)}!po(w.model.schema,_,T)||y(w,_,T,x)}}(u,d,h,m.parent)}}(r,l,c),t.removeDisallowedAttributes(l.parent.getChildren(),r)),Nl(r,i,l),!e.doNotAutoparagraph&&function(u,d){var h=u.checkChild(d,"$text"),f=u.checkChild(d,"paragraph");return!h&&f}(t,l)&&Il(r,l,i),l.detach(),c.detach()})}}}(this,e,n)}},{key:"modifySelection",value:function(e,n){!function(t,r){for(var f,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},s=t.schema,l="backward"!=o.direction,c=o.unit?o.unit:"character",d=new Dt({boundaries:Tg(r.focus,l),singleCharacters:!0,direction:l?"forward":"backward"}),h={walker:d,schema:s,isForward:l,unit:c},v=function(){if(f.done)return{v:void 0};var p=Cg(h,f.value);return p?{v:void(r instanceof pt?t.change(function(y){y.setSelectionFocus(p)}):r.setFocus(p))}:void 0};f=d.next();){var g=v();if("object"==typeof g)return g.v}}(this,e,n)}},{key:"getSelectedContent",value:function(e){return t=e,this.change(function(r){var o=r.createDocumentFragment(),s=t.getFirstRange();if(!s||s.isCollapsed)return o;var d,v,l=s.start.root,c=s.start.getCommonPath(s.end),u=l.getNodeByPath(c),h=(d=s.start.parent==s.end.parent?s:r.createRange(r.createPositionAt(u,s.start.path[c.length]),r.createPositionAt(u,s.end.path[c.length]+1))).end.offset-d.start.offset,f=k(d.getItems({shallow:!0}));try{for(f.s();!(v=f.n()).done;){var g=v.value;g.is("$textProxy")?r.appendText(g.data,g.getAttributes(),o):r.append(r.cloneElement(g,!0),o)}}catch(y){f.e(y)}finally{f.f()}if(d!=s){var m=s._getTransformedByMove(d.start,r.createPositionAt(o,0),h)[0],p=r.createRange(r.createPositionAt(o,0),m.start);Rl(r.createRange(m.end,r.createPositionAt(o,"end")),r),Rl(p,r)}return o});var t}},{key:"hasContent",value:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},t=e instanceof Oe?F._createIn(e):e;if(t.isCollapsed)return!1;var r=n.ignoreWhitespaces,o=void 0!==r&&r,s=n.ignoreMarkers;if(void 0===s||!s){var u,c=k(this.markers.getMarkersIntersectingRange(t));try{for(c.s();!(u=c.n()).done;)if(u.value.affectsData)return!0}catch(g){c.e(g)}finally{c.f()}}var f,h=k(t.getItems());try{for(h.s();!(f=h.n()).done;){var v=f.value;if(this.schema.isContent(v)&&(!v.is("$textProxy")||!o||-1!==v.data.search(/\S/)))return!0}}catch(g){h.e(g)}finally{h.f()}return!1}},{key:"createPositionFromPath",value:function(e,n,t){return new H(e,n,t)}},{key:"createPositionAt",value:function(e,n){return H._createAt(e,n)}},{key:"createPositionAfter",value:function(e){return H._createAfter(e)}},{key:"createPositionBefore",value:function(e){return H._createBefore(e)}},{key:"createRange",value:function(e,n){return new F(e,n)}},{key:"createRangeIn",value:function(e){return F._createIn(e)}},{key:"createRangeOn",value:function(e){return F._createOn(e)}},{key:"createSelection",value:function(e,n,t){return new en(e,n,t)}},{key:"createBatch",value:function(e){return new Br(e)}},{key:"createOperationFromJSON",value:function(e){return function(){function n(){A(this,n)}return C(n,null,[{key:"fromJSON",value:function(r,o){return kt[r.__className].fromJSON(r,o)}}]),n}().fromJSON(e,this.document)}},{key:"destroy",value:function(){this.document.destroy(),this.stopListening()}},{key:"_runPendingChanges",value:function(){var e=[];for(this.fire("_beforeChanges");this._pendingChanges.length;){this._currentWriter=new vg(this,this._pendingChanges[0].batch);var t=this._pendingChanges[0].callback(this._currentWriter);e.push(t),this.document._handleChangeBlock(this._currentWriter),this._pendingChanges.shift(),this._currentWriter=null}return this.fire("_afterChanges"),e}}]),a}();se(Ll,Re);var ft=function(){function a(){A(this,a),this._listener=Object.create(qn)}return C(a,[{key:"listenTo",value:function(e){var n=this;this._listener.listenTo(e,"keydown",function(t,r){n._listener.fire("_keydown:"+Ot(r),r)})}},{key:"set",value:function(e,n){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=ls(e);this._listener.listenTo(this._listener,"_keydown:"+r,function(s,l){n(l,function(){l.preventDefault(),l.stopPropagation(),s.stop()}),s.return=!0},{priority:t.priority})}},{key:"press",value:function(e){return!!this._listener.fire("_keydown:"+Ot(e),e)}},{key:"destroy",value:function(){this._listener.stopListening()}}]),a}(),Mg=function(a){P(e,a);var i=M(e);function e(n){var t;return A(this,e),(t=i.call(this)).editor=n,t}return C(e,[{key:"set",value:function(t,r){var o=this,s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if("string"==typeof r){var l=r;r=function(u,d){o.editor.execute(l),d()}}B(L(e.prototype),"set",this).call(this,t,r,s)}}]),e}(ft),Vl=function(){function a(){var i=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};A(this,a),this._context=e.context||new Pf({language:e.language}),this._context._addEditor(this,!e.context);var n=Array.from(this.constructor.builtinPlugins||[]);this.config=new Va(e,this.constructor.defaultConfig),this.config.define("plugins",n),this.config.define(this._context._getEditorConfig()),this.plugins=new Bi(this,n,this._context.plugins),this.locale=this._context.locale,this.t=this.locale.t,this.commands=new eg,this.set("state","initializing"),this.once("ready",function(){return i.state="ready"},{priority:"high"}),this.once("destroy",function(){return i.state="destroyed"},{priority:"high"}),this.set("isReadOnly",!1),this.model=new Ll;var t=new iv;this.data=new pl(this.model,t),this.editing=new fl(this.model,t),this.editing.view.document.bind("isReadOnly").to(this),this.conversion=new hg([this.editing.downcastDispatcher,this.data.downcastDispatcher],this.data.upcastDispatcher),this.conversion.addAlias("dataDowncast",this.data.downcastDispatcher),this.conversion.addAlias("editingDowncast",this.editing.downcastDispatcher),this.keystrokes=new Mg(this),this.keystrokes.listenTo(this.editing.view.document)}return C(a,[{key:"initPlugins",value:function(){var e=this.config,n=e.get("plugins"),t=e.get("removePlugins")||[],r=e.get("extraPlugins")||[];return this.plugins.init(n.concat(r),t)}},{key:"destroy",value:function(){var e=this,n=Promise.resolve();return"initializing"==this.state&&(n=new Promise(function(t){return e.once("ready",t)})),n.then(function(){e.fire("destroy"),e.stopListening(),e.commands.destroy()}).then(function(){return e.plugins.destroy()}).then(function(){e.model.destroy(),e.data.destroy(),e.editing.destroy(),e.keystrokes.destroy()}).then(function(){return e._context._removeEditor(e)})}},{key:"execute",value:function(){try{var e;return(e=this.commands).execute.apply(e,arguments)}catch(n){I.b.rethrowUnexpectedError(n,this)}}}]),a}();se(Vl,Re);var Ng=function(){function a(){A(this,a)}return C(a,[{key:"getHtml",value:function(e){var n=document.implementation.createHTMLDocument("").createElement("div");return n.appendChild(e),n.innerHTML}}]),a}(),jl=function(){function a(i){A(this,a),this._domParser=new DOMParser,this._domConverter=new Pr(i,{blockFillerMode:"nbsp"}),this._htmlWriter=new Ng}return C(a,[{key:"toData",value:function(e){var n=this._domConverter.viewToDom(e,document);return this._htmlWriter.getHtml(n)}},{key:"toView",value:function(e){var n=this._toDom(e);return this._domConverter.domToView(n)}},{key:"_toDom",value:function(e){for(var n=this._domParser.parseFromString(e,"text/html"),t=n.createDocumentFragment(),r=n.body.childNodes;r.length>0;)t.appendChild(r[0]);return t}}]),a}(),Rg=function(){function a(i){A(this,a),this.editor=i,this._components=new Map}return C(a,[{key:"names",value:G.mark(function i(){var e,n,t;return G.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:e=k(this._components.values()),o.prev=1,e.s();case 3:if((n=e.n()).done){o.next=9;break}return t=n.value,o.next=7,t.originalName;case 7:o.next=3;break;case 9:o.next=14;break;case 11:o.prev=11,o.t0=o.catch(1),e.e(o.t0);case 14:return o.prev=14,e.f(),o.finish(14);case 17:case"end":return o.stop()}},i,this,[[1,11,14,17]])})},{key:"add",value:function(e,n){this._components.set(ko(e),{callback:n,originalName:e})}},{key:"create",value:function(e){if(!this.has(e))throw new I.b("componentfactory-item-missing: The required component is not registered in the factory.",this,{name:e});return this._components.get(ko(e)).callback(this.editor.locale)}},{key:"has",value:function(e){return this._components.has(ko(e))}}]),a}();function ko(a){return String(a).toLowerCase()}var lt=function(){function a(){A(this,a),this.set("isFocused",!1),this.set("focusedElement",null),this._elements=new Set,this._nextEventLoopTimeout=null}return C(a,[{key:"add",value:function(e){var n=this;if(this._elements.has(e))throw new I.b("focusTracker-add-element-already-exist: This element is already tracked by FocusTracker.",this);this.listenTo(e,"focus",function(){return n._focus(e)},{useCapture:!0}),this.listenTo(e,"blur",function(){return n._blur()},{useCapture:!0}),this._elements.add(e)}},{key:"remove",value:function(e){e===this.focusedElement&&this._blur(e),this._elements.has(e)&&(this.stopListening(e),this._elements.delete(e))}},{key:"destroy",value:function(){this.stopListening()}},{key:"_focus",value:function(e){clearTimeout(this._nextEventLoopTimeout),this.focusedElement=e,this.isFocused=!0}},{key:"_blur",value:function(){var e=this;clearTimeout(this._nextEventLoopTimeout),this._nextEventLoopTimeout=setTimeout(function(){e.focusedElement=null,e.isFocused=!1},0)}}]),a}();se(lt,qn),se(lt,Re);var Bl=function(){function a(i){var e=this;A(this,a),this.editor=i,this.componentFactory=new Rg(i),this.focusTracker=new lt,this._editableElementsMap=new Map,this.listenTo(i.editing.view.document,"layoutChanged",function(){return e.update()})}return C(a,[{key:"element",get:function(){return null}},{key:"update",value:function(){this.fire("update")}},{key:"destroy",value:function(){this.stopListening(),this.focusTracker.destroy();var n,e=k(this._editableElementsMap.values());try{for(e.s();!(n=e.n()).done;)n.value.ckeditorInstance=null}catch(r){e.e(r)}finally{e.f()}this._editableElementsMap=new Map}},{key:"setEditableElement",value:function(e,n){this._editableElementsMap.set(e,n),n.ckeditorInstance||(n.ckeditorInstance=this.editor)}},{key:"getEditableElement",value:function(){return this._editableElementsMap.get(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"main")}},{key:"getEditableElementsNames",value:function(){return this._editableElementsMap.keys()}},{key:"_editableElements",get:function(){return console.warn("editor-ui-deprecated-editable-elements: The EditorUI#_editableElements property has been deprecated and will be removed in the near future.",{editorUI:this}),this._editableElementsMap}}]),a}();se(Bl,Se),E(13);var zr=new WeakMap;function zl(a){var i=a.view,e=a.element,n=a.text,t=a.isDirectHost,r=void 0===t||t,o=i.document;zr.has(o)||(zr.set(o,new Map),o.registerPostFixer(function(s){return Fl(o,s)})),zr.get(o).set(e,{text:n,isDirectHost:r}),i.change(function(s){return Fl(o,s)})}function Fl(a,i){var r,e=zr.get(a),n=!1,t=k(e);try{for(t.s();!(r=t.n()).done;){var o=ee(r.value,2);Dg(i,o[0],o[1])&&(n=!0)}}catch(c){t.e(c)}finally{t.f()}return n}function Dg(a,i,e){var s,l,n=e.text,r=e.isDirectHost?i:function(s){if(1===s.childCount){var l=s.getChild(0);if(l.is("element")&&!l.is("uiElement"))return l}return null}(i),o=!1;return!!r&&(e.hostElement=r,r.getAttribute("data-placeholder")!==n&&(a.setAttribute("data-placeholder",n,r),o=!0),function(s){if(!s.isAttached())return!1;var l=!Array.from(s.getChildren()).some(function(d){return!d.is("uiElement")}),c=s.document;if(!c.isFocused&&l)return!0;var u=c.selection.anchor;return!(!l||!u||u.parent===s)}(r)?(s=a,!(l=r).hasClass("ck-placeholder")&&(s.addClass("ck-placeholder",l),!0)&&(o=!0)):function Og(a,i){return!!i.hasClass("ck-placeholder")&&(a.removeClass("ck-placeholder",i),!0)}(a,r)&&(o=!0),o)}var Lg=function(a){P(e,a);var i=M(e);function e(n,t){var r,o;return A(this,e),(r=i.call(this,n)).view=t,r._toolbarConfig=(o=n.config.get("toolbar"),Array.isArray(o)?{items:o}:o?Object.assign({items:[]},o):{items:[]}),r}return C(e,[{key:"init",value:function(){var r=this.view,o=this.editor.editing.view,s=r.editable,l=o.document.getRoot();r.editable.name=l.rootName,r.render();var c=s.element;this.setEditableElement(s.name,c),this.focusTracker.add(c),r.editable.bind("isFocused").to(this.focusTracker),o.attachDomRoot(c),this._initPlaceholder(),this._initToolbar(),this.fire("ready")}},{key:"destroy",value:function(){var t=this.view;this.editor.editing.view.detachDomRoot(t.editable.name),t.destroy(),B(L(e.prototype),"destroy",this).call(this)}},{key:"_initToolbar",value:function(){var o,s,l,c,u,d,h,t=this.editor,r=this.view.toolbar;r.fillFromConfig(this._toolbarConfig.items,this.componentFactory),s=(o={origin:t.editing.view,originFocusTracker:this.focusTracker,originKeystrokeHandler:t.keystrokes,toolbar:r}).origin,l=o.originKeystrokeHandler,d=o.beforeFocus,h=o.afterBlur,(c=o.originFocusTracker).add((u=o.toolbar).element),l.set("Alt+F10",function(f,v){c.isFocused&&!u.focusTracker.isFocused&&(d&&d(),u.focus(),v())}),u.keystrokes.set("Esc",function(f,v){u.focusTracker.isFocused&&(s.focus(),h&&h(),v())})}},{key:"_initPlaceholder",value:function(){var t=this.editor,r=t.editing.view,o=r.document.getRoot(),s=t.sourceElement,l=t.config.get("placeholder")||s&&"textarea"===s.tagName.toLowerCase()&&s.getAttribute("placeholder");l&&zl({view:r,element:o,text:l,isDirectHost:!1})}}]),e}(Bl),Ht=function(a){P(e,a);var i=M(e);function e(){var n,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return A(this,e),(n=i.call(this,t,{idProperty:"viewUid"})).on("add",function(r,o,s){n._renderViewIntoCollectionParent(o,s)}),n.on("remove",function(r,o){o.element&&n._parentElement&&o.element.remove()}),n._parentElement=null,n}return C(e,[{key:"destroy",value:function(){this.map(function(t){return t.destroy()})}},{key:"setParent",value:function(t){this._parentElement=t;var o,r=k(this);try{for(r.s();!(o=r.n()).done;)this._renderViewIntoCollectionParent(o.value)}catch(l){r.e(l)}finally{r.f()}}},{key:"delegate",value:function(){for(var t=this,r=arguments.length,o=new Array(r),s=0;s<r;s++)o[s]=arguments[s];if(!o.length||!o.every(function(l){return"string"==typeof l}))throw new I.b("ui-viewcollection-delegate-wrong-events: All event names must be strings.",this);return{to:function(c){var d,u=k(t);try{for(u.s();!(d=u.n()).done;){var v,h=d.value,f=k(o);try{for(f.s();!(v=f.n()).done;)h.delegate(v.value).to(c)}catch(m){f.e(m)}finally{f.f()}}}catch(m){u.e(m)}finally{u.f()}t.on("add",function(m,p){var w,y=k(o);try{for(y.s();!(w=y.n()).done;)p.delegate(w.value).to(c)}catch(T){y.e(T)}finally{y.f()}}),t.on("remove",function(m,p){var w,y=k(o);try{for(y.s();!(w=y.n()).done;)p.stopDelegating(w.value,c)}catch(T){y.e(T)}finally{y.f()}})}}}},{key:"_renderViewIntoCollectionParent",value:function(t,r){t.isRendered||t.render(),t.element&&this._parentElement&&this._parentElement.insertBefore(t.element,this._parentElement.children[r])}}]),e}(Qe),vt=function(){function a(i){A(this,a),Object.assign(this,ql(Wl(i))),this._isRendered=!1,this._revertData=null}return C(a,[{key:"render",value:function(){var e=this._renderNode({intoFragment:!0});return this._isRendered=!0,e}},{key:"apply",value:function(e){return this._revertData={children:[],bindings:[],attributes:{}},this._renderNode({node:e,isApplying:!0,revertData:this._revertData}),e}},{key:"revert",value:function(e){if(!this._revertData)throw new I.b("ui-template-revert-not-applied: Attempting to revert a template which has not been applied yet.",[this,e]);this._revertTemplateFromNode(e,this._revertData)}},{key:"getViews",value:G.mark(function i(){return G.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.delegateYield(G.mark(function t(r){var o,s,l;return G.wrap(function(u){for(;;)switch(u.prev=u.next){case 0:if(!r.children){u.next=24;break}o=k(r.children),u.prev=2,o.s();case 4:if((s=o.n()).done){u.next=16;break}if(!Ur(l=s.value)){u.next=11;break}return u.next=9,l;case 9:u.next=14;break;case 11:if(u.t0=yo(l),!u.t0){u.next=14;break}return u.delegateYield(t(l),"t1",14);case 14:u.next=4;break;case 16:u.next=21;break;case 18:u.prev=18,u.t2=u.catch(2),o.e(u.t2);case 21:return u.prev=21,o.f(),u.finish(21);case 24:case"end":return u.stop()}},t,null,[[2,18,21,24]])})(this),"t0",1);case 1:case"end":return n.stop()}},i,this)})},{key:"_renderNode",value:function(e){if(e.node?this.tag&&this.text:this.tag?this.text:!this.text)throw new I.b('ui-template-wrong-syntax: Node definition must have either "tag" or "text" when rendering a new Node.',this);return this.text?this._renderText(e):this._renderElement(e)}},{key:"_renderElement",value:function(e){var n=e.node;return n||(n=e.node=document.createElementNS(this.ns||"http://www.w3.org/1999/xhtml",this.tag)),this._renderAttributes(e),this._renderElementChildren(e),this._setUpListeners(e),n}},{key:"_renderText",value:function(e){var n=e.node;return n?e.revertData.text=n.textContent:n=e.node=document.createTextNode(""),Fr(this.text)?this._bindToObservable({schema:this.text,updater:jg(n),data:e}):n.textContent=this.text.join(""),n}},{key:"_renderAttributes",value:function(e){var n,t,r,o;if(this.attributes){var s=e.node,l=e.revertData;for(n in this.attributes)if(r=s.getAttribute(n),t=this.attributes[n],l&&(l.attributes[n]=r),o=He(t[0])&&t[0].ns?t[0].ns:null,Fr(t)){var c=o?t[0].value:t;l&&Kl(n)&&c.unshift(r),this._bindToObservable({schema:c,updater:Bg(s,n,o),data:e})}else"style"==n&&"string"!=typeof t[0]?this._renderStyleAttribute(t[0],e):(l&&r&&Kl(n)&&t.unshift(r),wn(t=t.map(function(u){return u&&u.value||u}).reduce(function(u,d){return u.concat(d)},[]).reduce(Yl,""))||s.setAttributeNS(o,n,t))}}},{key:"_renderStyleAttribute",value:function(e,n){var t=n.node;for(var r in e){var o=e[r];Fr(o)?this._bindToObservable({schema:[o],updater:zg(t,r),data:n}):t.style[r]=o}}},{key:"_renderElementChildren",value:function(e){var l,n=e.node,t=e.intoFragment?document.createDocumentFragment():n,r=e.isApplying,o=0,s=k(this.children);try{for(s.s();!(l=s.n()).done;){var c=l.value;if(bo(c)){if(!r){c.setParent(n);var d,u=k(c);try{for(u.s();!(d=u.n()).done;)t.appendChild(d.value.element)}catch(v){u.e(v)}finally{u.f()}}}else if(Ur(c))r||(c.isRendered||c.render(),t.appendChild(c.element));else if(pn(c))t.appendChild(c);else if(r){var f={children:[],bindings:[],attributes:{}};e.revertData.children.push(f),c._renderNode({node:t.childNodes[o++],isApplying:!0,revertData:f})}else t.appendChild(c.render())}}catch(v){s.e(v)}finally{s.f()}e.intoFragment&&n.appendChild(t)}},{key:"_setUpListeners",value:function(e){var n=this;if(this.eventListeners){var t=function(s){var l=n.eventListeners[s].map(function(c){var u=s.split("@"),d=ee(u,2);return c.activateDomEventListener(d[0],d[1],e)});e.revertData&&e.revertData.bindings.push(l)};for(var r in this.eventListeners)t(r)}}},{key:"_bindToObservable",value:function(e){var n=e.schema,t=e.updater,r=e.data,o=r.revertData;Hl(n,t,r);var s=n.filter(function(l){return!wn(l)}).filter(function(l){return l.observable}).map(function(l){return l.activateAttributeListener(n,t,r)});o&&o.bindings.push(s)}},{key:"_revertTemplateFromNode",value:function(e,n){var r,t=k(n.bindings);try{for(t.s();!(r=t.n()).done;){var l,s=k(r.value);try{for(s.s();!(l=s.n()).done;)(0,l.value)()}catch(f){s.e(f)}finally{s.f()}}}catch(f){t.e(f)}finally{t.f()}if(n.text)e.textContent=n.text;else{for(var u in n.attributes){var d=n.attributes[u];null===d?e.removeAttribute(u):e.setAttribute(u,d)}for(var h=0;h<n.children.length;++h)this._revertTemplateFromNode(e.childNodes[h],n.children[h])}}}],[{key:"bind",value:function(e,n){return{to:function(r,o){return new Vg({eventNameOrFunction:r,attribute:r,observable:e,emitter:n,callback:o})},if:function(r,o,s){return new Ul({observable:e,emitter:n,attribute:r,valueIfTrue:o,callback:s})}}}},{key:"extend",value:function(e,n){if(e._isRendered)throw new I.b("template-extend-render: Attempting to extend a template which has already been rendered.",[this,e]);!function t(r,o){var s;if(o.attributes&&(r.attributes||(r.attributes={}),$l(r.attributes,o.attributes)),o.eventListeners&&(r.eventListeners||(r.eventListeners={}),$l(r.eventListeners,o.eventListeners)),o.text&&(s=r.text).push.apply(s,Y(o.text)),o.children&&o.children.length){if(r.children.length!=o.children.length)throw new I.b("ui-template-extend-children-mismatch: The number of children in extended definition does not match.",r);var u,l=0,c=k(o.children);try{for(c.s();!(u=c.n()).done;)t(r.children[l++],u.value)}catch(h){c.e(h)}finally{c.f()}}}(e,ql(Wl(n)))}}]),a}();se(vt,Se);var er=function(){function a(i){A(this,a),Object.assign(this,i)}return C(a,[{key:"getValue",value:function(e){var n=this.observable[this.attribute];return this.callback?this.callback(n,e):n}},{key:"activateAttributeListener",value:function(e,n,t){var r=this,o=function(){return Hl(e,n,t)};return this.emitter.listenTo(this.observable,"change:"+this.attribute,o),function(){r.emitter.stopListening(r.observable,"change:"+r.attribute,o)}}}]),a}(),Vg=function(a){P(e,a);var i=M(e);function e(){return A(this,e),i.apply(this,arguments)}return C(e,[{key:"activateDomEventListener",value:function(t,r,o){var s=this,l=function(u,d){r&&!d.target.matches(r)||("function"==typeof s.eventNameOrFunction?s.eventNameOrFunction(d):s.observable.fire(s.eventNameOrFunction,d))};return this.emitter.listenTo(o.node,t,l),function(){s.emitter.stopListening(o.node,t,l)}}}]),e}(er),Ul=function(a){P(e,a);var i=M(e);function e(){return A(this,e),i.apply(this,arguments)}return C(e,[{key:"getValue",value:function(t){return!wn(B(L(e.prototype),"getValue",this).call(this,t))&&(this.valueIfTrue||!0)}}]),e}(er);function Fr(a){return!!a&&(a.value&&(a=a.value),Array.isArray(a)?a.some(Fr):a instanceof er)}function Hl(a,i,e){var o,t=(o=e.node,a.map(function(s){return s instanceof er?s.getValue(o):s}));wn(t=1==a.length&&a[0]instanceof Ul?t[0]:t.reduce(Yl,""))?i.remove():i.set(t)}function jg(a){return{set:function(e){a.textContent=e},remove:function(){a.textContent=""}}}function Bg(a,i,e){return{set:function(t){a.setAttributeNS(e,i,t)},remove:function(){a.removeAttributeNS(e,i)}}}function zg(a,i){return{set:function(n){a.style[i]=n},remove:function(){a.style[i]=null}}}function Wl(a){return La(a,function(i){if(i&&(i instanceof er||yo(i)||Ur(i)||bo(i)))return i})}function ql(a){if("string"==typeof a?a={text:[r=a]}:a.text&&function(r){Array.isArray(r.text)||(r.text=[r.text])}(a),a.on&&(a.eventListeners=function(r){for(var o in r)Gl(r,o);return r}(a.on),delete a.on),!a.text){a.attributes&&function(r){for(var o in r)r[o].value&&(r[o].value=[].concat(r[o].value)),Gl(r,o)}(a.attributes);var i=[];if(a.children)if(bo(a.children))i.push(a.children);else{var n,e=k(a.children);try{for(e.s();!(n=e.n()).done;){var t=n.value;yo(t)||Ur(t)||pn(t)?i.push(t):i.push(new vt(t))}}catch(r){e.e(r)}finally{e.f()}}a.children=i}var r;return a}function Gl(a,i){Array.isArray(a[i])||(a[i]=[a[i]])}function Yl(a,i){return wn(i)?a:wn(a)?i:"".concat(a," ").concat(i)}function $l(a,i){for(var e in i){var n;a[e]?(n=a[e]).push.apply(n,Y(i[e])):a[e]=i[e]}}function wn(a){return!a&&0!==a}function Ur(a){return a instanceof ue}function yo(a){return a instanceof vt}function bo(a){return a instanceof Ht}function Kl(a){return"class"==a||"style"==a}E(15);var ue=function(){function a(i){A(this,a),this.element=null,this.isRendered=!1,this.locale=i,this.t=i&&i.t,this._viewCollections=new Qe,this._unboundChildren=this.createCollection(),this._viewCollections.on("add",function(e,n){n.locale=i}),this.decorate("render")}return C(a,[{key:"bindTemplate",get:function(){return this._bindTemplate?this._bindTemplate:this._bindTemplate=vt.bind(this,this)}},{key:"createCollection",value:function(e){var n=new Ht(e);return this._viewCollections.add(n),n}},{key:"registerChild",value:function(e){dt(e)||(e=[e]);var t,n=k(e);try{for(n.s();!(t=n.n()).done;)this._unboundChildren.add(t.value)}catch(o){n.e(o)}finally{n.f()}}},{key:"deregisterChild",value:function(e){dt(e)||(e=[e]);var t,n=k(e);try{for(n.s();!(t=n.n()).done;)this._unboundChildren.remove(t.value)}catch(o){n.e(o)}finally{n.f()}}},{key:"setTemplate",value:function(e){this.template=new vt(e)}},{key:"extendTemplate",value:function(e){vt.extend(this.template,e)}},{key:"render",value:function(){if(this.isRendered)throw new I.b("ui-view-render-already-rendered: This View has already been rendered.",this);this.template&&(this.element=this.template.render(),this.registerChild(this.template.getViews())),this.isRendered=!0}},{key:"destroy",value:function(){this.stopListening(),this._viewCollections.map(function(e){return e.destroy()}),this.template&&this.template._revertData&&this.template.revert(this.element)}}]),a}();se(ue,qn),se(ue,Re);var Jl=function(i){return"string"==typeof i||!et(i)&&ae(i)&&"[object String]"==wt(i)},Fg=function(a){P(e,a);var i=M(e);function e(n){var t,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return A(this,e),(t=i.call(this,r)).locale=n,t}return C(e,[{key:"attachToDom",value:function(){this._bodyCollectionContainer=new vt({tag:"div",attributes:{class:["ck","ck-reset_all","ck-body","ck-rounded-corners"],dir:this.locale.uiLanguageDirection},children:this}).render();var t=document.querySelector(".ck-body-wrapper");t||(t=function(r,o){var s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},l=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],c=s&&s.xmlns,u=c?r.createElementNS(c,o):r.createElement(o);for(var d in s)u.setAttribute(d,s[d]);!Jl(l)&&dt(l)||(l=[l]);var f,h=k(l);try{for(h.s();!(f=h.n()).done;){var v=f.value;Jl(v)&&(v=r.createTextNode(v)),u.appendChild(v)}}catch(g){h.e(g)}finally{h.f()}return u}(document,"div",{class:"ck-body-wrapper"}),document.body.appendChild(t)),t.appendChild(this._bodyCollectionContainer)}},{key:"detachFromDom",value:function(){B(L(e.prototype),"destroy",this).call(this),this._bodyCollectionContainer&&this._bodyCollectionContainer.remove();var t=document.querySelector(".ck-body-wrapper");t&&0==t.childElementCount&&t.remove()}}]),e}(Ht);E(17);var Ug=function(a){P(e,a);var i=M(e);function e(n){var t;return A(this,e),(t=i.call(this,n)).body=new Fg(n),t}return C(e,[{key:"render",value:function(){B(L(e.prototype),"render",this).call(this),this.body.attachToDom()}},{key:"destroy",value:function(){return this.body.detachFromDom(),B(L(e.prototype),"destroy",this).call(this)}}]),e}(ue),Hg=function(a){P(e,a);var i=M(e);function e(n,t,r){var o;return A(this,e),(o=i.call(this,n)).setTemplate({tag:"div",attributes:{class:["ck","ck-content","ck-editor__editable","ck-rounded-corners"],lang:n.contentLanguage,dir:n.contentLanguageDirection}}),o.name=null,o.set("isFocused",!1),o._editableElement=r,o._hasExternalElement=!!o._editableElement,o._editingView=t,o}return C(e,[{key:"render",value:function(){var t=this;B(L(e.prototype),"render",this).call(this),this._hasExternalElement?this.template.apply(this.element=this._editableElement):this._editableElement=this.element,this.on("change:isFocused",function(){return t._updateIsFocusedClasses()}),this._updateIsFocusedClasses()}},{key:"destroy",value:function(){this._hasExternalElement&&this.template.revert(this._editableElement),B(L(e.prototype),"destroy",this).call(this)}},{key:"_updateIsFocusedClasses",value:function(){var t=this._editingView;function r(o){t.change(function(s){var l=t.document.getRoot(o.name);s.addClass(o.isFocused?"ck-focused":"ck-blurred",l),s.removeClass(o.isFocused?"ck-blurred":"ck-focused",l)})}t.isRenderingInProgress?function o(s){t.once("change:isRenderingInProgress",function(l,c,u){u?o(s):r(s)})}(this):r(this)}}]),e}(ue),Wg=function(a){P(e,a);var i=M(e);function e(n,t,r){var o;return A(this,e),(o=i.call(this,n,t,r)).extendTemplate({attributes:{role:"textbox",class:"ck-editor__editable_inline"}}),o}return C(e,[{key:"render",value:function(){var t=this;B(L(e.prototype),"render",this).call(this);var r=this._editingView,o=this.t;r.change(function(s){var l=r.document.getRoot(t.name);s.setAttribute("aria-label",o("Rich Text Editor, %0",[t.name]),l)})}}]),e}(Hg),Lt=function(){function a(i){var e=this;if(A(this,a),Object.assign(this,i),i.actions&&i.keystrokeHandler){var n=function(o){var s=i.actions[o];"string"==typeof s&&(s=[s]);var c,l=k(s);try{for(l.s();!(c=l.n()).done;)i.keystrokeHandler.set(c.value,function(d,h){e[o](),h()})}catch(d){l.e(d)}finally{l.f()}};for(var t in i.actions)n(t)}}return C(a,[{key:"first",get:function(){return this.focusables.find(wo)||null}},{key:"last",get:function(){return this.focusables.filter(wo).slice(-1)[0]||null}},{key:"next",get:function(){return this._getFocusableItem(1)}},{key:"previous",get:function(){return this._getFocusableItem(-1)}},{key:"current",get:function(){var e=this,n=null;return null===this.focusTracker.focusedElement?null:(this.focusables.find(function(t,r){var o=t.element===e.focusTracker.focusedElement;return o&&(n=r),o}),n)}},{key:"focusFirst",value:function(){this._focus(this.first)}},{key:"focusLast",value:function(){this._focus(this.last)}},{key:"focusNext",value:function(){this._focus(this.next)}},{key:"focusPrevious",value:function(){this._focus(this.previous)}},{key:"_focus",value:function(e){e&&e.focus()}},{key:"_getFocusableItem",value:function(e){var n=this.current,t=this.focusables.length;if(!t)return null;if(null===n)return this[1===e?"first":"last"];var r=(n+t+e)%t;do{var o=this.focusables.get(r);if(wo(o))return o;r=(r+t+e)%t}while(r!==n);return null}}]),a}();function wo(a){return!(!a.focus||"none"==We.window.getComputedStyle(a.element).display)}var Ql=function(a){P(e,a);var i=M(e);function e(n){var t;return A(this,e),(t=i.call(this,n)).setTemplate({tag:"span",attributes:{class:["ck","ck-toolbar__separator"]}}),t}return C(e)}(ue),_o=function(){function a(i,e){A(this,a),a._observerInstance||a._createObserver(),this._element=i,this._callback=e,a._addElementCallback(i,e),a._observerInstance.observe(i)}return C(a,[{key:"destroy",value:function(){a._deleteElementCallback(this._element,this._callback)}}],[{key:"_addElementCallback",value:function(e,n){a._elementCallbacks||(a._elementCallbacks=new Map);var t=a._elementCallbacks.get(e);t||a._elementCallbacks.set(e,t=new Set),t.add(n)}},{key:"_deleteElementCallback",value:function(e,n){var t=a._getElementCallbacks(e);t&&(t.delete(n),t.size||(a._elementCallbacks.delete(e),a._observerInstance.unobserve(e))),a._elementCallbacks&&!a._elementCallbacks.size&&(a._observerInstance=null,a._elementCallbacks=null)}},{key:"_getElementCallbacks",value:function(e){return a._elementCallbacks?a._elementCallbacks.get(e):null}},{key:"_createObserver",value:function(){a._observerInstance=new("function"==typeof We.window.ResizeObserver?We.window.ResizeObserver:Zl)(function(n){var r,t=k(n);try{for(t.s();!(r=t.n()).done;){var o=r.value,s=a._getElementCallbacks(o.target);if(s){var c,l=k(s);try{for(l.s();!(c=l.n()).done;)(0,c.value)(o)}catch(d){l.e(d)}finally{l.f()}}}}catch(d){t.e(d)}finally{t.f()}})}}]),a}();_o._observerInstance=null,_o._elementCallbacks=null;var Zl=function(){function a(i){A(this,a),this._callback=i,this._elements=new Set,this._previousRects=new Map,this._periodicCheckTimeout=null}return C(a,[{key:"observe",value:function(e){this._elements.add(e),this._checkElementRectsAndExecuteCallback(),1===this._elements.size&&this._startPeriodicCheck()}},{key:"unobserve",value:function(e){this._elements.delete(e),this._previousRects.delete(e),this._elements.size||this._stopPeriodicCheck()}},{key:"_startPeriodicCheck",value:function(){var e=this;this.listenTo(We.window,"resize",function(){e._checkElementRectsAndExecuteCallback()}),this._periodicCheckTimeout=setTimeout(function t(){e._checkElementRectsAndExecuteCallback(),e._periodicCheckTimeout=setTimeout(t,100)},100)}},{key:"_stopPeriodicCheck",value:function(){clearTimeout(this._periodicCheckTimeout),this.stopListening(),this._previousRects.clear()}},{key:"_checkElementRectsAndExecuteCallback",value:function(){var t,e=[],n=k(this._elements);try{for(n.s();!(t=n.n()).done;){var r=t.value;this._hasRectChanged(r)&&e.push({target:r,contentRect:this._previousRects.get(r)})}}catch(o){n.e(o)}finally{n.f()}e.length&&this._callback(e)}},{key:"_hasRectChanged",value:function(e){if(!e.ownerDocument.body.contains(e))return!1;var n=new Ze(e),t=this._previousRects.get(e),r=!t||!t.isEqual(n);return this._previousRects.set(e,n),r}}]),a}();se(Zl,qn);var qg=function(a){P(e,a);var i=M(e);function e(n){var t;A(this,e);var r=(t=i.call(this,n)).bindTemplate;return t.set("isVisible",!1),t.set("position","se"),t.children=t.createCollection(),t.setTemplate({tag:"div",attributes:{class:["ck","ck-reset","ck-dropdown__panel",r.to("position",function(o){return"ck-dropdown__panel_"+o}),r.if("isVisible","ck-dropdown__panel-visible")]},children:t.children,on:{selectstart:r.to(function(o){return o.preventDefault()})}}),t}return C(e,[{key:"focus",value:function(){this.children.length&&this.children.first.focus()}},{key:"focusLast",value:function(){if(this.children.length){var t=this.children.last;"function"==typeof t.focusLast?t.focusLast():t.focus()}}}]),e}(ue);function Xl(a){var i=a.element,e=a.target,n=a.positions,t=a.limiter,r=a.fitInViewport;On(e)&&(e=e()),On(t)&&(t=t());var c,u,p,o=(p=i)&&p.parentNode?p.offsetParent===We.document.body?null:p.offsetParent:null,s=new Ze(i),l=new Ze(e);if(t||r){var d=function(p,y){var _=y.viewportRect,T=y.elementRect.getArea(),x=function(D,z){var oe,J=z.targetRect,$=z.elementRect,Q=z.limiterRect,K=z.viewportRect,W=[],ie=$.getArea(),ne=k(D);try{for(ne.s();!(oe=ne.n()).done;){var Me=Ao(oe.value,J,$);if(Me){var ze=ee(Me,2),bt=ze[0],at=ze[1],Gt=0,gi=0;if(Q)if(K){var ir=Q.getIntersection(K);ir&&(Gt=ir.getIntersectionArea(at))}else Gt=Q.getIntersectionArea(at);K&&(gi=K.getIntersectionArea(at));var ln={positionName:bt,positionRect:at,limiterIntersectArea:Gt,viewportIntersectArea:gi};if(Gt===ie)return[ln];W.push(ln)}}}catch(or){ne.e(or)}finally{ne.f()}return W}(p,y);if(_){var N=ec(x.filter(function(D){return D.viewportIntersectArea===T}),T);if(N)return N}return ec(x,T)}(n,{targetRect:l,elementRect:s,limiterRect:t&&new Ze(t).getVisible(),viewportRect:r&&new Ze(We.window)}),h=d||Ao(n[0],l,s),f=ee(h,2);u=f[0],c=f[1]}else{var v=Ao(n[0],l,s),g=ee(v,2);u=g[0],c=g[1]}var m=tc(c);return o&&(m=function(p,y){var w=p.left,_=p.top,T=tc(new Ze(y)),x=Bs(y);return w-=T.left,_-=T.top,w+=y.scrollLeft,_+=y.scrollTop,{left:w-=x.left,top:_-=x.top}}(m,o)),{left:m.left,top:m.top,name:u}}function Ao(a,i,e){var n=a(i,e);if(!n)return null;var t=n.left,r=n.top;return[n.name,e.clone().moveTo(t,r)]}function ec(a,i){var e,n,o,t=0,r=k(a);try{for(r.s();!(o=r.n()).done;){var s=o.value,l=s.positionName,c=s.positionRect,u=s.limiterIntersectArea;if(u===i)return[l,c];var h=Math.pow(s.viewportIntersectArea,2)+Math.pow(u,2);h>t&&(t=h,e=c,n=l)}}catch(f){r.e(f)}finally{r.f()}return e?[n,e]:null}function tc(a){var n=We.window;return{left:a.left+n.scrollX,top:a.top+n.scrollY}}E(19);var Co=function(a){P(e,a);var i=M(e);function e(n,t,r){var o;A(this,e);var s=(o=i.call(this,n)).bindTemplate;return o.buttonView=t,o.panelView=r,o.set("isOpen",!1),o.set("isEnabled",!0),o.set("class"),o.set("id"),o.set("panelPosition","auto"),o.keystrokes=new ft,o.setTemplate({tag:"div",attributes:{class:["ck","ck-dropdown",s.to("class"),s.if("isEnabled","ck-disabled",function(l){return!l})],id:s.to("id"),"aria-describedby":s.to("ariaDescribedById")},children:[t,r]}),t.extendTemplate({attributes:{class:["ck-dropdown__button"]}}),o}return C(e,[{key:"render",value:function(){var t=this;B(L(e.prototype),"render",this).call(this),this.listenTo(this.buttonView,"open",function(){t.isOpen=!t.isOpen}),this.panelView.bind("isVisible").to(this,"isOpen"),this.on("change:isOpen",function(){t.isOpen&&(t.panelView.position="auto"===t.panelPosition?e._getOptimalPosition({element:t.panelView.element,target:t.buttonView.element,fitInViewport:!0,positions:t._panelPositions}).name:t.panelPosition)}),this.keystrokes.listenTo(this.element);var r=function(s,l){t.isOpen&&(t.buttonView.focus(),t.isOpen=!1,l())};this.keystrokes.set("arrowdown",function(o,s){t.buttonView.isEnabled&&!t.isOpen&&(t.isOpen=!0,s())}),this.keystrokes.set("arrowright",function(o,s){t.isOpen&&s()}),this.keystrokes.set("arrowleft",r),this.keystrokes.set("esc",r)}},{key:"focus",value:function(){this.buttonView.focus()}},{key:"_panelPositions",get:function(){var t=e.defaultPanelPositions,r=t.southEast,o=t.southWest,s=t.northEast,l=t.northWest;return"ltr"===this.locale.uiLanguageDirection?[r,o,s,l]:[o,r,l,s]}}]),e}(ue);Co.defaultPanelPositions={southEast:function(i){return{top:i.bottom,left:i.left,name:"se"}},southWest:function(i,e){return{top:i.bottom,left:i.left-e.width+i.width,name:"sw"}},northEast:function(i,e){return{top:i.top-e.height,left:i.left,name:"ne"}},northWest:function(i,e){return{top:i.bottom-e.height,left:i.left-e.width+i.width,name:"nw"}}},Co._getOptimalPosition=Xl,E(21);var Hr=function(a){P(e,a);var i=M(e);function e(){var n;A(this,e);var t=(n=i.call(this)).bindTemplate;return n.set("content",""),n.set("viewBox","0 0 20 20"),n.set("fillColor",""),n.setTemplate({tag:"svg",ns:"http://www.w3.org/2000/svg",attributes:{class:["ck","ck-icon"],viewBox:t.to("viewBox")}}),n}return C(e,[{key:"render",value:function(){var t=this;B(L(e.prototype),"render",this).call(this),this._updateXMLContent(),this._colorFillPaths(),this.on("change:content",function(){t._updateXMLContent(),t._colorFillPaths()}),this.on("change:fillColor",function(){t._colorFillPaths()})}},{key:"_updateXMLContent",value:function(){if(this.content){var t=(new DOMParser).parseFromString(this.content.trim(),"image/svg+xml").querySelector("svg"),r=t.getAttribute("viewBox");for(r&&(this.viewBox=r),this.element.innerHTML="";t.childNodes.length>0;)this.element.appendChild(t.childNodes[0])}}},{key:"_colorFillPaths",value:function(){var t=this;this.fillColor&&this.element.querySelectorAll(".ck-icon__fill").forEach(function(r){r.style.fill=t.fillColor})}}]),e}(ue);E(23);var nc=function(a){P(e,a);var i=M(e);function e(n){var t;A(this,e),(t=i.call(this,n)).set("text",""),t.set("position","s");var r=t.bindTemplate;return t.setTemplate({tag:"span",attributes:{class:["ck","ck-tooltip",r.to("position",function(o){return"ck-tooltip_"+o}),r.if("text","ck-hidden",function(o){return!o.trim()})]},children:[{tag:"span",attributes:{class:["ck","ck-tooltip__text"]},children:[{text:r.to("text")}]}]}),t}return C(e)}(ue);E(25);var be=function(a){P(e,a);var i=M(e);function e(n){var t;A(this,e);var r=(t=i.call(this,n)).bindTemplate,o=Et();return t.set("class"),t.set("labelStyle"),t.set("icon"),t.set("isEnabled",!0),t.set("isOn",!1),t.set("isVisible",!0),t.set("isToggleable",!1),t.set("keystroke"),t.set("label"),t.set("tabindex",-1),t.set("tooltip"),t.set("tooltipPosition","s"),t.set("type","button"),t.set("withText",!1),t.set("withKeystroke",!1),t.children=t.createCollection(),t.tooltipView=t._createTooltipView(),t.labelView=t._createLabelView(o),t.iconView=new Hr,t.iconView.extendTemplate({attributes:{class:"ck-button__icon"}}),t.keystrokeView=t._createKeystrokeView(),t.bind("_tooltipString").to(X(t),"tooltip",X(t),"label",X(t),"keystroke",t._getTooltipString.bind(X(t))),t.setTemplate({tag:"button",attributes:{class:["ck","ck-button",r.to("class"),r.if("isEnabled","ck-disabled",function(s){return!s}),r.if("isVisible","ck-hidden",function(s){return!s}),r.to("isOn",function(s){return s?"ck-on":"ck-off"}),r.if("withText","ck-button_with-text"),r.if("withKeystroke","ck-button_with-keystroke")],type:r.to("type",function(s){return s||"button"}),tabindex:r.to("tabindex"),"aria-labelledby":"ck-editor__aria-label_"+o,"aria-disabled":r.if("isEnabled",!0,function(s){return!s}),"aria-pressed":r.to("isOn",function(s){return!!t.isToggleable&&String(s)})},children:t.children,on:{mousedown:r.to(function(s){s.preventDefault()}),click:r.to(function(s){t.isEnabled?t.fire("execute"):s.preventDefault()})}}),t}return C(e,[{key:"render",value:function(){B(L(e.prototype),"render",this).call(this),this.icon&&(this.iconView.bind("content").to(this,"icon"),this.children.add(this.iconView)),this.children.add(this.tooltipView),this.children.add(this.labelView),this.withKeystroke&&this.children.add(this.keystrokeView)}},{key:"focus",value:function(){this.element.focus()}},{key:"_createTooltipView",value:function(){var t=new nc;return t.bind("text").to(this,"_tooltipString"),t.bind("position").to(this,"tooltipPosition"),t}},{key:"_createLabelView",value:function(t){var r=new ue;return r.setTemplate({tag:"span",attributes:{class:["ck","ck-button__label"],style:this.bindTemplate.to("labelStyle"),id:"ck-editor__aria-label_"+t},children:[{text:this.bindTemplate.to("label")}]}),r}},{key:"_createKeystrokeView",value:function(){var t=new ue;return t.setTemplate({tag:"span",attributes:{class:["ck","ck-button__keystroke"]},children:[{text:this.bindTemplate.to("keystroke",function(r){return cs(r)})}]}),t}},{key:"_getTooltipString",value:function(t,r,o){return t?"string"==typeof t?t:(o&&(o=cs(o)),t instanceof Function?t(r,o):"".concat(r).concat(o?" (".concat(o,")"):"")):""}}]),e}(ue),rc='<svg viewBox="0 0 10 10" xmlns="http://www.w3.org/2000/svg"><path d="M.941 4.523a.75.75 0 1 1 1.06-1.06l3.006 3.005 3.005-3.005a.75.75 0 1 1 1.06 1.06l-3.549 3.55a.75.75 0 0 1-1.168-.136L.941 4.523z"/></svg>',ic=function(a){P(e,a);var i=M(e);function e(n){var t;return A(this,e),(t=i.call(this,n)).arrowView=t._createArrowView(),t.extendTemplate({attributes:{"aria-haspopup":!0}}),t.delegate("execute").to(X(t),"open"),t}return C(e,[{key:"render",value:function(){B(L(e.prototype),"render",this).call(this),this.children.add(this.arrowView)}},{key:"_createArrowView",value:function(){var t=new Hr;return t.content=rc,t.extendTemplate({attributes:{class:"ck-dropdown__arrow"}}),t}}]),e}(be);E(27);var Gg=function(a){P(e,a);var i=M(e);function e(){var n;return A(this,e),(n=i.call(this)).items=n.createCollection(),n.focusTracker=new lt,n.keystrokes=new ft,n._focusCycler=new Lt({focusables:n.items,focusTracker:n.focusTracker,keystrokeHandler:n.keystrokes,actions:{focusPrevious:"arrowup",focusNext:"arrowdown"}}),n.setTemplate({tag:"ul",attributes:{class:["ck","ck-reset","ck-list"]},children:n.items}),n}return C(e,[{key:"render",value:function(){var t=this;B(L(e.prototype),"render",this).call(this);var o,r=k(this.items);try{for(r.s();!(o=r.n()).done;)this.focusTracker.add(o.value.element)}catch(l){r.e(l)}finally{r.f()}this.items.on("add",function(l,c){t.focusTracker.add(c.element)}),this.items.on("remove",function(l,c){t.focusTracker.remove(c.element)}),this.keystrokes.listenTo(this.element)}},{key:"focus",value:function(){this._focusCycler.focusFirst()}},{key:"focusLast",value:function(){this._focusCycler.focusLast()}}]),e}(ue),Yg=function(a){P(e,a);var i=M(e);function e(n){var t;return A(this,e),(t=i.call(this,n)).children=t.createCollection(),t.setTemplate({tag:"li",attributes:{class:["ck","ck-list__item"]},children:t.children}),t}return C(e,[{key:"focus",value:function(){this.children.first.focus()}}]),e}(ue),$g=function(a){P(e,a);var i=M(e);function e(n){var t;return A(this,e),(t=i.call(this,n)).setTemplate({tag:"li",attributes:{class:["ck","ck-list__separator"]}}),t}return C(e)}(ue);E(29);var To=function(a){P(e,a);var i=M(e);function e(n){var t;return A(this,e),(t=i.call(this,n)).isToggleable=!0,t.toggleSwitchView=t._createToggleView(),t.extendTemplate({attributes:{class:"ck-switchbutton"}}),t}return C(e,[{key:"render",value:function(){B(L(e.prototype),"render",this).call(this),this.children.add(this.toggleSwitchView)}},{key:"_createToggleView",value:function(){var t=new ue;return t.setTemplate({tag:"span",attributes:{class:["ck","ck-button__toggle"]},children:[{tag:"span",attributes:{class:["ck","ck-button__toggle__inner"]}}]}),t}}]),e}(be);function xo(a){var e=a.activator,n=a.callback,t=a.contextElements;a.emitter.listenTo(document,"mousedown",function(r,o){if(e()){var c,s="function"==typeof o.composedPath?o.composedPath():[],l=k(t);try{for(l.s();!(c=l.n()).done;){var u=c.value;if(u.contains(o.target)||s.includes(u))return}}catch(d){l.e(d)}finally{l.f()}n()}})}function yt(a){var r,o,e=new(arguments.length>1&&void 0!==arguments[1]?arguments[1]:ic)(a),n=new qg(a),t=new Co(a,e,n);return e.bind("isEnabled").to(t),e instanceof ic?e.bind("isOn").to(t,"isOpen"):e.arrowView.bind("isOn").to(t,"isOpen"),(o=r=t).on("render",function(){xo({emitter:o,activator:function(){return o.isOpen},callback:function(){o.isOpen=!1},contextElements:[o.element]})}),function(o){o.on("execute",function(s){s.source instanceof To||(o.isOpen=!1)})}(r),function(o){o.keystrokes.set("arrowdown",function(s,l){o.isOpen&&(o.panelView.focus(),l())}),o.keystrokes.set("arrowup",function(s,l){o.isOpen&&(o.panelView.focusLast(),l())})}(r),t}function oc(a,i){var e=a.locale,n=e.t,t=a.toolbarView=new So(e);t.set("ariaLabel",n("Dropdown toolbar")),a.extendTemplate({attributes:{class:["ck-toolbar-dropdown"]}}),i.map(function(r){return t.items.add(r)}),a.panelView.children.add(t),t.items.delegate("execute").to(a)}function Wr(a,i){var e=a.locale,n=a.listView=new Gg(e);n.items.bindTo(i).using(function(t){var r=t.type,o=t.model;if("separator"===r)return new $g(e);if("button"===r||"switchbutton"===r){var s,c,l=new Yg(e);return(s=c="button"===r?new be(e):new To(e)).bind.apply(s,Y(Object.keys(o))).to(o),c.delegate("execute").to(l),l.children.add(c),l}}),a.panelView.children.add(n),n.items.delegate("execute").to(a)}E(31),E(33),E(35);var So=function(a){P(e,a);var i=M(e);function e(n,t){var r;A(this,e);var l,o=(r=i.call(this,n)).bindTemplate,s=r.t;return r.options=t||{},r.set("ariaLabel",s("Editor toolbar")),r.set("maxWidth","auto"),r.items=r.createCollection(),r.focusTracker=new lt,r.keystrokes=new ft,r.set("class"),r.set("isCompact",!1),r.itemsView=new Kg(n),r.children=r.createCollection(),r.children.add(r.itemsView),r.focusables=r.createCollection(),r._focusCycler=new Lt({focusables:r.focusables,focusTracker:r.focusTracker,keystrokeHandler:r.keystrokes,actions:{focusPrevious:["arrowleft","arrowup"],focusNext:["arrowright","arrowdown"]}}),r.setTemplate({tag:"div",attributes:{class:["ck","ck-toolbar",o.to("class"),o.if("isCompact","ck-toolbar_compact")],role:"toolbar","aria-label":o.to("ariaLabel"),style:{maxWidth:o.to("maxWidth")}},children:r.children,on:{mousedown:(l=X(r),l.bindTemplate.to(function(c){c.target===l.element&&c.preventDefault()}))}}),r._behavior=r.options.shouldGroupWhenFull?new Qg(X(r)):new Jg(X(r)),r}return C(e,[{key:"render",value:function(){var t=this;B(L(e.prototype),"render",this).call(this);var o,r=k(this.items);try{for(r.s();!(o=r.n()).done;)this.focusTracker.add(o.value.element)}catch(l){r.e(l)}finally{r.f()}this.items.on("add",function(l,c){t.focusTracker.add(c.element)}),this.items.on("remove",function(l,c){t.focusTracker.remove(c.element)}),this.keystrokes.listenTo(this.element),this._behavior.render(this)}},{key:"destroy",value:function(){return this._behavior.destroy(),B(L(e.prototype),"destroy",this).call(this)}},{key:"focus",value:function(){this._focusCycler.focusFirst()}},{key:"focusLast",value:function(){this._focusCycler.focusLast()}},{key:"fillFromConfig",value:function(t,r){this.items.addMany(t.map(function(o){return"|"==o?new Ql:r.has(o)?r.create(o):void console.warn(Object(I.a)("toolbarview-item-unavailable: The requested toolbar item is unavailable."),{name:o})}).filter(function(o){return void 0!==o}))}}]),e}(ue),Kg=function(a){P(e,a);var i=M(e);function e(n){var t;return A(this,e),(t=i.call(this,n)).children=t.createCollection(),t.setTemplate({tag:"div",attributes:{class:["ck","ck-toolbar__items"]},children:t.children}),t}return C(e)}(ue),Jg=function(){function a(i){A(this,a);var e=i.bindTemplate;i.set("isVertical",!1),i.itemsView.children.bindTo(i.items).using(function(n){return n}),i.focusables.bindTo(i.items).using(function(n){return n}),i.extendTemplate({attributes:{class:[e.if("isVertical","ck-toolbar_vertical")]}})}return C(a,[{key:"render",value:function(){}},{key:"destroy",value:function(){}}]),a}(),Qg=function(){function a(i){var e=this;A(this,a),this.view=i,this.viewChildren=i.children,this.viewFocusables=i.focusables,this.viewItemsView=i.itemsView,this.viewFocusTracker=i.focusTracker,this.viewLocale=i.locale,this.ungroupedItems=i.createCollection(),this.groupedItems=i.createCollection(),this.groupedItemsDropdown=this._createGroupedItemsDropdown(),this.resizeObserver=null,this.cachedPadding=null,this.shouldUpdateGroupingOnNextResize=!1,i.itemsView.children.bindTo(this.ungroupedItems).using(function(n){return n}),this.ungroupedItems.on("add",this._updateFocusCycleableItems.bind(this)),this.ungroupedItems.on("remove",this._updateFocusCycleableItems.bind(this)),i.children.on("add",this._updateFocusCycleableItems.bind(this)),i.children.on("remove",this._updateFocusCycleableItems.bind(this)),i.items.on("change",function(n,t){var s,r=t.index,o=k(t.removed);try{for(o.s();!(s=o.n()).done;){var l=s.value;r>=e.ungroupedItems.length?e.groupedItems.remove(l):e.ungroupedItems.remove(l)}}catch(d){o.e(d)}finally{o.f()}for(var c=r;c<r+t.added.length;c++){var u=t.added[c-r];c>e.ungroupedItems.length?e.groupedItems.add(u,c-e.ungroupedItems.length):e.ungroupedItems.add(u,c)}e._updateGrouping()}),i.extendTemplate({attributes:{class:["ck-toolbar_grouping"]}})}return C(a,[{key:"render",value:function(e){this.viewElement=e.element,this._enableGroupingOnResize(),this._enableGroupingOnMaxWidthChange(e)}},{key:"destroy",value:function(){this.groupedItemsDropdown.destroy(),this.resizeObserver.destroy()}},{key:"_updateGrouping",value:function(){if(this.viewElement.ownerDocument.body.contains(this.viewElement)){if(!this.viewElement.offsetParent)return void(this.shouldUpdateGroupingOnNextResize=!0);for(var n,e=this.groupedItems.length;this._areItemsOverflowing;)this._groupLastItem(),n=!0;if(!n&&this.groupedItems.length){for(;this.groupedItems.length&&!this._areItemsOverflowing;)this._ungroupFirstItem();this._areItemsOverflowing&&this._groupLastItem()}this.groupedItems.length!==e&&this.view.fire("groupedItemsUpdate")}}},{key:"_areItemsOverflowing",get:function(){if(!this.ungroupedItems.length)return!1;var e=this.viewElement,n=this.viewLocale.uiLanguageDirection,t=new Ze(e.lastChild),r=new Ze(e);if(!this.cachedPadding){var o=We.window.getComputedStyle(e);this.cachedPadding=Number.parseInt(o["ltr"===n?"paddingRight":"paddingLeft"])}return"ltr"===n?t.right>r.right-this.cachedPadding:t.left<r.left+this.cachedPadding}},{key:"_enableGroupingOnResize",value:function(){var n,e=this;this.resizeObserver=new _o(this.viewElement,function(t){n&&n===t.contentRect.width&&!e.shouldUpdateGroupingOnNextResize||(e.shouldUpdateGroupingOnNextResize=!1,e._updateGrouping(),n=t.contentRect.width)}),this._updateGrouping()}},{key:"_enableGroupingOnMaxWidthChange",value:function(e){var n=this;e.on("change:maxWidth",function(){n._updateGrouping()})}},{key:"_groupLastItem",value:function(){this.groupedItems.length||(this.viewChildren.add(new Ql),this.viewChildren.add(this.groupedItemsDropdown),this.viewFocusTracker.add(this.groupedItemsDropdown.element)),this.groupedItems.add(this.ungroupedItems.remove(this.ungroupedItems.last),0)}},{key:"_ungroupFirstItem",value:function(){this.ungroupedItems.add(this.groupedItems.remove(this.groupedItems.first)),this.groupedItems.length||(this.viewChildren.remove(this.groupedItemsDropdown),this.viewChildren.remove(this.viewChildren.last),this.viewFocusTracker.remove(this.groupedItemsDropdown.element))}},{key:"_createGroupedItemsDropdown",value:function(){var e=this.viewLocale,n=e.t,t=yt(e);return t.class="ck-toolbar__grouped-dropdown",t.panelPosition="ltr"===e.uiLanguageDirection?"sw":"se",oc(t,[]),t.buttonView.set({label:n("Show more items"),tooltip:!0,icon:'<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><circle cx="9.5" cy="4.5" r="1.5"/><circle cx="9.5" cy="10.5" r="1.5"/><circle cx="9.5" cy="16.5" r="1.5"/></svg>'}),t.toolbarView.items.bindTo(this.groupedItems).using(function(r){return r}),t}},{key:"_updateFocusCycleableItems",value:function(){var e=this;this.viewFocusables.clear(),this.ungroupedItems.map(function(n){e.viewFocusables.add(n)}),this.groupedItems.length&&this.viewFocusables.add(this.groupedItemsDropdown)}}]),a}(),Zg=function(a){P(e,a);var i=M(e);function e(n,t){var r,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return A(this,e),(r=i.call(this,n)).toolbar=new So(n,{shouldGroupWhenFull:o.shouldToolbarGroupWhenFull}),r.editable=new Wg(n,t,o.editableElement),r.toolbar.extendTemplate({attributes:{class:["ck-reset_all","ck-rounded-corners"],dir:n.uiLanguageDirection}}),r}return C(e,[{key:"render",value:function(){B(L(e.prototype),"render",this).call(this),this.registerChild([this.toolbar,this.editable])}}]),e}(Ug),ac=function(a){P(e,a);var i=M(e);function e(n,t){var r;A(this,e),r=i.call(this,t),jt(n)&&(r.sourceElement=n,function(l){var c=l.sourceElement;if(c){if(c.ckeditorInstance)throw new I.b("editor-source-element-already-used: The DOM element cannot be used to create multiple editor instances.",l);c.ckeditorInstance=l,l.once("destroy",function(){delete c.ckeditorInstance})}}(X(r))),r.data.processor=new jl(r.data.viewDocument),r.model.document.createRoot();var o=!r.config.get("toolbar.shouldNotGroupWhenFull"),s=new Zg(r.locale,r.editing.view,{editableElement:r.sourceElement,shouldToolbarGroupWhenFull:o});return r.ui=new Lg(X(r),s),r}return C(e,[{key:"destroy",value:function(){var t=this,r=this.getData();return this.ui.destroy(),B(L(e.prototype),"destroy",this).call(this).then(function(){var o,s;t.sourceElement&&(s=r,(o=t.sourceElement)instanceof HTMLTextAreaElement&&(o.value=s),o.innerHTML=s)})}}],[{key:"create",value:function(t){var r=this,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return new Promise(function(s){var l=jt(t);if(l&&"TEXTAREA"===t.tagName)throw new I.b("editor-wrong-element: This type of editor cannot be initialized inside <textarea> element.",null);var c=new r(t,o);s(c.initPlugins().then(function(){c.ui.init()}).then(function(){if(!l&&o.initialData)throw new I.b("editor-create-initial-data: The config.initialData option cannot be used together with initial data passed in Editor.create().",null);var d,h,u=o.initialData||(jt(d=t)?(h=d)instanceof HTMLTextAreaElement?h.value:h.innerHTML:d);return c.data.init(u)}).then(function(){return c.fire("ready")}).then(function(){return c}))})}}]),e}(Vl);se(ac,{setData:function(i){this.data.set(i)},getData:function(i){return this.data.get(i)}});var U=function(){function a(i){A(this,a),this.editor=i,this.set("isEnabled",!0),this._disableStack=new Set}return C(a,[{key:"forceDisabled",value:function(e){this._disableStack.add(e),1==this._disableStack.size&&(this.on("set:isEnabled",sc,{priority:"highest"}),this.isEnabled=!1)}},{key:"clearForceDisabled",value:function(e){this._disableStack.delete(e),0==this._disableStack.size&&(this.off("set:isEnabled",sc),this.isEnabled=!0)}},{key:"destroy",value:function(){this.stopListening()}}],[{key:"isContextPlugin",get:function(){return!1}}]),a}();function sc(a){a.return=!1,a.stop()}se(U,Re);var Xg=function(){function a(i){A(this,a),this.files=function(e){var n=e.files?Array.from(e.files):[],t=e.items?Array.from(e.items):[];return n.length?n:t.filter(function(r){return"file"===r.kind}).map(function(r){return r.getAsFile()})}(i),this._native=i}return C(a,[{key:"types",get:function(){return this._native.types}},{key:"getData",value:function(e){return this._native.getData(e)}},{key:"setData",value:function(e,n){this._native.setData(e,n)}}]),a}(),em=function(a){P(e,a);var i=M(e);function e(n){var t;A(this,e);var r=(t=i.call(this,n)).document;function o(s,l){l.preventDefault();var c=l.dropRange?[l.dropRange]:Array.from(r.selection.getRanges()),u=new Fn(r,"clipboardInput");r.fire(u,{dataTransfer:l.dataTransfer,targetRanges:c}),u.stop.called&&l.stopPropagation()}return t.domEventType=["paste","copy","cut","drop","dragover"],t.listenTo(r,"paste",o,{priority:"low"}),t.listenTo(r,"drop",o,{priority:"low"}),t}return C(e,[{key:"onDomEvent",value:function(t){var o,s,d,l,c,u,r={dataTransfer:new Xg(t.clipboardData?t.clipboardData:t.dataTransfer)};"drop"==t.type&&(r.dropRange=(o=this.view,c=(s=t).clientX,u=s.clientY,(l=s.target.ownerDocument).caretRangeFromPoint&&l.caretRangeFromPoint(c,u)?d=l.caretRangeFromPoint(c,u):s.rangeParent&&((d=l.createRange()).setStart(s.rangeParent,s.rangeOffset),d.collapse(!0)),d?o.domConverter.domRangeToView(d):o.document.selection.getFirstRange())),this.fire(t.type,t,r)}}]),e}(Ut),lc=["figcaption","li"],nn=function(a){P(e,a);var i=M(e);function e(){return A(this,e),i.apply(this,arguments)}return C(e,[{key:"init",value:function(){var t=this,r=this.editor,o=r.model.document,s=r.editing.view,l=s.document;function c(u,d){var h=d.dataTransfer;d.preventDefault();var f=r.data.toView(r.model.getSelectedContent(o.selection));l.fire("clipboardOutput",{dataTransfer:h,content:f,method:u.name})}this._htmlDataProcessor=new jl(l),s.addObserver(em),this.listenTo(l,"clipboardInput",function(u){r.isReadOnly&&u.stop()},{priority:"highest"}),this.listenTo(l,"clipboardInput",function(u,d){var v,h=d.dataTransfer,f="";h.getData("text/html")?f=h.getData("text/html").replace(/<span(?: class="Apple-converted-space"|)>(\s+)<\/span>/g,function(p,y){return 1==y.length?" ":y}):h.getData("text/plain")&&((v=(v=h.getData("text/plain")).replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/\n/g,"</p><p>").replace(/^\s/,"&nbsp;").replace(/\s$/,"&nbsp;").replace(/\s\s/g," &nbsp;")).indexOf("</p><p>")>-1&&(v="<p>".concat(v,"</p>")),f=v),f=t._htmlDataProcessor.toView(f);var g=new Fn(t,"inputTransformation");t.fire(g,{content:f,dataTransfer:h}),g.stop.called&&u.stop(),s.scrollToTheSelection()},{priority:"low"}),this.listenTo(this,"inputTransformation",function(u,d){if(!d.content.isEmpty){var f=t.editor.model,v=t.editor.data.toModel(d.content,"$clipboardHolder");if(0==v.childCount)return;if(!((m=v).childCount>1)&&0==Y(m.getChild(0).getAttributeKeys()).length){var g=v.getChild(0);f.change(function(m){m.setAttributes(o.selection.getAttributes(),g)})}f.insertContent(v),u.stop()}var m},{priority:"low"}),this.listenTo(l,"copy",c,{priority:"low"}),this.listenTo(l,"cut",function(u,d){r.isReadOnly?d.preventDefault():c(u,d)},{priority:"low"}),this.listenTo(l,"clipboardOutput",function(u,d){d.content.isEmpty||(d.dataTransfer.setData("text/html",t._htmlDataProcessor.toData(d.content)),d.dataTransfer.setData("text/plain",function h(f){var v="";if(f.is("$text")||f.is("$textProxy"))v=f.data;else if(f.is("element","img")&&f.hasAttribute("alt"))v=f.getAttribute("alt");else{var p,g=null,m=k(f.getChildren());try{for(m.s();!(p=m.n()).done;){var y=p.value,w=h(y);g&&(g.is("containerElement")||y.is("containerElement"))&&(lc.includes(g.name)||lc.includes(y.name)?v+="\n":v+="\n\n"),v+=w,g=y}}catch(_){m.e(_)}finally{m.f()}}return v}(d.content))),"cut"==d.method&&r.model.deleteContent(o.selection)},{priority:"low"})}}],[{key:"pluginName",get:function(){return"Clipboard"}}]),e}(U),ve=function(){function a(i){var e=this;A(this,a),this.editor=i,this.set("value",void 0),this.set("isEnabled",!1),this._disableStack=new Set,this.decorate("execute"),this.listenTo(this.editor.model.document,"change",function(){e.refresh()}),this.on("execute",function(n){e.isEnabled||n.stop()},{priority:"high"}),this.listenTo(i,"change:isReadOnly",function(n,t,r){r?e.forceDisabled("readOnlyMode"):e.clearForceDisabled("readOnlyMode")})}return C(a,[{key:"refresh",value:function(){this.isEnabled=!0}},{key:"forceDisabled",value:function(e){this._disableStack.add(e),1==this._disableStack.size&&(this.on("set:isEnabled",cc,{priority:"highest"}),this.isEnabled=!1)}},{key:"clearForceDisabled",value:function(e){this._disableStack.delete(e),0==this._disableStack.size&&(this.off("set:isEnabled",cc),this.refresh())}},{key:"execute",value:function(){}},{key:"destroy",value:function(){this.stopListening()}}]),a}();function cc(a){a.return=!1,a.stop()}function Po(a,i){var e,n,t;return G.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:e=k(i),o.prev=1,e.s();case 3:if((n=e.n()).done){o.next=11;break}if(o.t0=(t=n.value)&&a.getAttributeProperties(t[0]).copyOnEnter,!o.t0){o.next=9;break}return o.next=9,t;case 9:o.next=3;break;case 11:o.next=16;break;case 13:o.prev=13,o.t1=o.catch(1),e.e(o.t1);case 16:return o.prev=16,e.f(),o.finish(16);case 19:case"end":return o.stop()}},j,null,[[1,13,16,19]])}se(ve,Re);var tm=function(a){P(e,a);var i=M(e);function e(){return A(this,e),i.apply(this,arguments)}return C(e,[{key:"execute",value:function(){var t=this,r=this.editor.model,o=r.document;r.change(function(s){(function(l,c,u,d){var h=u.isCollapsed,f=u.getFirstRange(),v=f.start.parent,g=f.end.parent;if(d.isLimit(v)||d.isLimit(g))h||v!=g||l.deleteContent(u);else if(h){var m=Po(c.model.schema,u.getAttributes());uc(c,f.start),c.setSelectionAttribute(m)}else{var p=!(f.start.isAtStart&&f.end.isAtEnd),y=v==g;l.deleteContent(u,{leaveUnmerged:p}),p&&(y?uc(c,u.focus):c.setSelection(g,0))}})(t.editor.model,s,o.selection,r.schema),t.fire("afterExecute",{writer:s})})}}]),e}(ve);function uc(a,i){a.split(i),a.setSelection(i.parent.nextSibling,0)}var dc=function(a){P(e,a);var i=M(e);function e(n){var t;A(this,e);var r=(t=i.call(this,n)).document;return r.on("keydown",function(o,s){var l;t.isEnabled&&s.keyCode==me.enter&&(r.once("enter",function(c){return l=c},{priority:"highest"}),r.fire("enter",new io(r,s.domEvent,{isSoft:s.shiftKey})),l&&l.stop.called&&o.stop())}),t}return C(e,[{key:"observe",value:function(){}}]),e}(Ft),nm=function(a){P(e,a);var i=M(e);function e(){return A(this,e),i.apply(this,arguments)}return C(e,[{key:"init",value:function(){var t=this.editor,r=t.editing.view,o=r.document;r.addObserver(dc),t.commands.add("enter",new tm(t)),this.listenTo(o,"enter",function(s,l){l.preventDefault(),l.isSoft||(t.execute("enter"),r.scrollToTheSelection())},{priority:"low"})}}],[{key:"pluginName",get:function(){return"Enter"}}]),e}(U),rm=function(a){P(e,a);var i=M(e);function e(){return A(this,e),i.apply(this,arguments)}return C(e,[{key:"execute",value:function(){var t=this,r=this.editor.model,o=r.document;r.change(function(s){(function(l,c,u){var d=u.isCollapsed,h=u.getFirstRange(),v=h.end.parent,g=h.start.parent==v;if(d){var m=Po(l.schema,u.getAttributes());hc(l,c,h.end),c.removeSelectionAttribute(u.getAttributeKeys()),c.setSelectionAttribute(m)}else{var p=!(h.start.isAtStart&&h.end.isAtEnd);l.deleteContent(u,{leaveUnmerged:p}),g?hc(l,c,u.focus):p&&c.setSelection(v,0)}})(r,s,o.selection),t.fire("afterExecute",{writer:s})})}},{key:"refresh",value:function(){var t=this.editor.model;this.isEnabled=function(o,s){if(s.rangeCount>1)return!1;var l=s.anchor;if(!l||!o.checkChild(l,"softBreak"))return!1;var c=s.getFirstRange(),u=c.start.parent,d=c.end.parent;return!((Eo(u,o)||Eo(d,o))&&u!==d)}(t.schema,t.document.selection)}}]),e}(ve);function hc(a,i,e){var n=i.createElement("softBreak");a.insertContent(n,e),i.setSelection(n,"after")}function Eo(a,i){return!a.is("rootElement")&&(i.isLimit(a)||Eo(a.parent,i))}var im=function(a){P(e,a);var i=M(e);function e(){return A(this,e),i.apply(this,arguments)}return C(e,[{key:"init",value:function(){var t=this.editor,o=t.conversion,s=t.editing.view,l=s.document;t.model.schema.register("softBreak",{allowWhere:"$text",isInline:!0}),o.for("upcast").elementToElement({model:"softBreak",view:"br"}),o.for("downcast").elementToElement({model:"softBreak",view:function(u,d){return d.writer.createEmptyElement("br")}}),s.addObserver(dc),t.commands.add("shiftEnter",new rm(t)),this.listenTo(l,"enter",function(c,u){u.preventDefault(),u.isSoft&&(t.execute("shiftEnter"),s.scrollToTheSelection())},{priority:"low"})}}],[{key:"pluginName",get:function(){return"ShiftEnter"}}]),e}(U),om=function(a){P(e,a);var i=M(e);function e(){return A(this,e),i.apply(this,arguments)}return C(e,[{key:"execute",value:function(){var t=this.editor.model,r=t.document.selection,o=t.schema.getLimitElement(r);if(r.containsEntireContent(o)||!fc(t.schema,o))do{if(!(o=o.parent))return}while(!fc(t.schema,o));t.change(function(s){s.setSelection(o,"in")})}}]),e}(ve);function fc(a,i){return a.isLimit(i)&&(a.checkChild(i,"$text")||a.checkChild(i,"paragraph"))}for(var am=ls("Ctrl+A"),sm=function(a){P(e,a);var i=M(e);function e(){return A(this,e),i.apply(this,arguments)}return C(e,[{key:"init",value:function(){var t=this.editor,r=t.editing.view.document;t.commands.add("selectAll",new om(t)),this.listenTo(r,"keydown",function(o,s){Ot(s)===am&&(t.execute("selectAll"),s.preventDefault())})}}],[{key:"pluginName",get:function(){return"SelectAllEditing"}}]),e}(U),lm=function(a){P(e,a);var i=M(e);function e(){return A(this,e),i.apply(this,arguments)}return C(e,[{key:"init",value:function(){var t=this,r=this.editor;r.ui.componentFactory.add("selectAll",function(o){var s=r.commands.get("selectAll"),l=new be(o);return l.set({label:(0,o.t)("Select all"),icon:'<svg width="20" height="20" xmlns="http://www.w3.org/2000/svg"><path d="M.75 15.5a.75.75 0 0 1 .75.75V18l.008.09A.5.5 0 0 0 2 18.5h1.75a.75.75 0 1 1 0 1.5H1.5l-.144-.007a1.5 1.5 0 0 1-1.35-1.349L0 18.5v-2.25a.75.75 0 0 1 .75-.75zm18.5 0a.75.75 0 0 1 .75.75v2.25l-.007.144a1.5 1.5 0 0 1-1.349 1.35L18.5 20h-2.25a.75.75 0 1 1 0-1.5H18a.5.5 0 0 0 .492-.41L18.5 18v-1.75a.75.75 0 0 1 .75-.75zm-10.45 3c.11 0 .2.09.2.2v1.1a.2.2 0 0 1-.2.2H7.2a.2.2 0 0 1-.2-.2v-1.1c0-.11.09-.2.2-.2h1.6zm4 0c.11 0 .2.09.2.2v1.1a.2.2 0 0 1-.2.2h-1.6a.2.2 0 0 1-.2-.2v-1.1c0-.11.09-.2.2-.2h1.6zm.45-5.5a.75.75 0 1 1 0 1.5h-8.5a.75.75 0 1 1 0-1.5h8.5zM1.3 11c.11 0 .2.09.2.2v1.6a.2.2 0 0 1-.2.2H.2a.2.2 0 0 1-.2-.2v-1.6c0-.11.09-.2.2-.2h1.1zm18.5 0c.11 0 .2.09.2.2v1.6a.2.2 0 0 1-.2.2h-1.1a.2.2 0 0 1-.2-.2v-1.6c0-.11.09-.2.2-.2h1.1zm-4.55-2a.75.75 0 1 1 0 1.5H4.75a.75.75 0 1 1 0-1.5h10.5zM1.3 7c.11 0 .2.09.2.2v1.6a.2.2 0 0 1-.2.2H.2a.2.2 0 0 1-.2-.2V7.2c0-.11.09-.2.2-.2h1.1zm18.5 0c.11 0 .2.09.2.2v1.6a.2.2 0 0 1-.2.2h-1.1a.2.2 0 0 1-.2-.2V7.2c0-.11.09-.2.2-.2h1.1zm-4.55-2a.75.75 0 1 1 0 1.5h-2.5a.75.75 0 1 1 0-1.5h2.5zm-5 0a.75.75 0 1 1 0 1.5h-5.5a.75.75 0 0 1 0-1.5h5.5zm-6.5-5a.75.75 0 0 1 0 1.5H2a.5.5 0 0 0-.492.41L1.5 2v1.75a.75.75 0 0 1-1.5 0V1.5l.007-.144A1.5 1.5 0 0 1 1.356.006L1.5 0h2.25zM18.5 0l.144.007a1.5 1.5 0 0 1 1.35 1.349L20 1.5v2.25a.75.75 0 1 1-1.5 0V2l-.008-.09A.5.5 0 0 0 18 1.5h-1.75a.75.75 0 1 1 0-1.5h2.25zM8.8 0c.11 0 .2.09.2.2v1.1a.2.2 0 0 1-.2.2H7.2a.2.2 0 0 1-.2-.2V.2c0-.11.09-.2.2-.2h1.6zm4 0c.11 0 .2.09.2.2v1.1a.2.2 0 0 1-.2.2h-1.6a.2.2 0 0 1-.2-.2V.2c0-.11.09-.2.2-.2h1.6z"/></svg>',keystroke:"Ctrl+A",tooltip:!0}),l.bind("isOn","isEnabled").to(s,"value","isEnabled"),t.listenTo(l,"execute",function(){r.execute("selectAll"),r.editing.view.focus()}),l})}}],[{key:"pluginName",get:function(){return"SelectAllUI"}}]),e}(U),cm=function(a){P(e,a);var i=M(e);function e(){return A(this,e),i.apply(this,arguments)}return C(e,null,[{key:"requires",get:function(){return[sm,lm]}},{key:"pluginName",get:function(){return"SelectAll"}}]),e}(U),vc=function(){function a(i){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:20;A(this,a),this.model=i,this.size=0,this.limit=n,this.isLocked=!1,this._changeCallback=function(t,r){"transparent"!=r.type&&r!==e._batch&&e._reset(!0)},this._selectionChangeCallback=function(){e._reset()},this.model.document.on("change",this._changeCallback),this.model.document.selection.on("change:range",this._selectionChangeCallback),this.model.document.selection.on("change:attribute",this._selectionChangeCallback)}return C(a,[{key:"batch",get:function(){return this._batch||(this._batch=this.model.createBatch()),this._batch}},{key:"input",value:function(e){this.size+=e,this.size>=this.limit&&this._reset(!0)}},{key:"lock",value:function(){this.isLocked=!0}},{key:"unlock",value:function(){this.isLocked=!1}},{key:"destroy",value:function(){this.model.document.off("change",this._changeCallback),this.model.document.selection.off("change:range",this._selectionChangeCallback),this.model.document.selection.off("change:attribute",this._selectionChangeCallback)}},{key:"_reset",value:function(e){this.isLocked&&!e||(this._batch=null,this.size=0)}}]),a}(),um=function(a){P(e,a);var i=M(e);function e(n,t){var r;return A(this,e),(r=i.call(this,n))._buffer=new vc(n.model,t),r._batches=new WeakSet,r}return C(e,[{key:"buffer",get:function(){return this._buffer}},{key:"destroy",value:function(){B(L(e.prototype),"destroy",this).call(this),this._buffer.destroy()}},{key:"execute",value:function(){var t=this,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},o=this.editor.model,s=o.document,l=r.text||"",c=l.length,u=r.range?o.createSelection(r.range):s.selection,d=r.resultRange;o.enqueueChange(this._buffer.batch,function(h){t._buffer.lock(),t._batches.add(t._buffer.batch),o.deleteContent(u),l&&o.insertContent(h.createText(l,s.selection.getAttributes()),u),d?h.setSelection(d):u.is("documentSelection")||h.setSelection(u),t._buffer.unlock(),t._buffer.input(c)})}}]),e}(ve),gc=[Ot("arrowUp"),Ot("arrowRight"),Ot("arrowDown"),Ot("arrowLeft"),9,16,17,18,19,20,27,33,34,35,36,45,91,93,144,145,173,174,175,176,177,178,179,255],Mo=112;Mo<=135;Mo++)gc.push(Mo);function mc(a){return!!a.ctrlKey||gc.includes(a.keyCode)}function pc(a){if(a.newChildren.length-a.oldChildren.length==1){var i=function(n,t){var o,r=[],s=0;return n.forEach(function(u){"equal"==u?(l(),s++):"insert"==u?(c("insert")?o.values.push(t[s]):(l(),o={type:"insert",index:s,values:[t[s]]}),s++):c("delete")?o.howMany++:(l(),o={type:"delete",index:s,howMany:1})}),l(),r;function l(){o&&(r.push(o),o=null)}function c(u){return o&&o.type==u}}(zt(a.oldChildren,a.newChildren,dm),a.newChildren);if(!(i.length>1)){var e=i[0];return e.values[0]&&e.values[0].is("$text")?e:void 0}}}function dm(a,i){return a&&a.is("$text")&&i&&i.is("$text")?a.data===i.data:a===i}var hm=function(){function a(i){A(this,a),this.editor=i,this.editing=this.editor.editing}return C(a,[{key:"handle",value:function(e,n){if(function(s){if(0==s.length)return!1;var c,l=k(s);try{for(l.s();!(c=l.n()).done;){var u=c.value;if("children"===u.type&&!pc(u))return!0}}catch(d){l.e(d)}finally{l.f()}return!1}(e))this._handleContainerChildrenMutations(e,n);else{var r,t=k(e);try{for(t.s();!(r=t.n()).done;){var o=r.value;this._handleTextMutation(o,n),this._handleTextNodeInsertion(o)}}catch(s){t.e(s)}finally{t.f()}}}},{key:"_handleContainerChildrenMutations",value:function(e,n){var t=function(J){var $=J.map(function(Q){return Q.node}).reduce(function(Q,K){return Q.getCommonAncestor(K,{includeSelf:!0})});if($)return $.getAncestors({includeSelf:!0,parentFirst:!0}).find(function(Q){return Q.is("containerElement")||Q.is("rootElement")})}(e);if(t){var r=this.editor.editing.view.domConverter.mapViewToDom(t),o=new Pr(this.editor.editing.view.document),s=this.editor.data.toModel(o.domToView(r)).getChild(0),l=this.editor.editing.mapper.toModelElement(t);if(l){var c=Array.from(s.getChildren()),u=Array.from(l.getChildren()),d=c[c.length-1],h=u[u.length-1],f=d&&d.is("element","softBreak"),v=h&&!h.is("element","softBreak");f&&v&&c.pop();var g=this.editor.model.schema;if(kc(c,g)&&kc(u,g)){var m=c.map(function(J){return J.is("$text")?J.data:"@"}).join("").replace(/\u00A0/g," "),p=u.map(function(J){return J.is("$text")?J.data:"@"}).join("").replace(/\u00A0/g," ");if(p!==m){var w=yc(zt(p,m)),_=w.firstChangeAt,T=w.insertions,x=w.deletions,N=null;n&&(N=this.editing.mapper.toModelRange(n.getFirstRange()));var D=m.substr(_,T),z=this.editor.model.createRange(this.editor.model.createPositionAt(l,_),this.editor.model.createPositionAt(l,_+x));this.editor.execute("input",{text:D,range:z,resultRange:N})}}}}}},{key:"_handleTextMutation",value:function(e,n){if("text"==e.type){var t=e.newText.replace(/\u00A0/g," "),r=e.oldText.replace(/\u00A0/g," ");if(r!==t){var s=yc(zt(r,t)),l=s.firstChangeAt,c=s.insertions,u=s.deletions,d=null;n&&(d=this.editing.mapper.toModelRange(n.getFirstRange()));var h=this.editing.view.createPositionAt(e.node,l),f=this.editing.mapper.toModelPosition(h),v=this.editor.model.createRange(f,f.getShiftedBy(u)),g=t.substr(l,c);this.editor.execute("input",{text:g,range:v,resultRange:d})}}}},{key:"_handleTextNodeInsertion",value:function(e){if("children"==e.type){var n=pc(e),t=this.editing.view.createPositionAt(e.node,n.index),r=this.editing.mapper.toModelPosition(t);this.editor.execute("input",{text:n.values[0].data.replace(/\u00A0/g," "),range:this.editor.model.createRange(r)})}}}]),a}();function kc(a,i){return a.every(function(e){return i.isInline(e)})}function yc(a){for(var i=null,e=null,n=0;n<a.length;n++)"equal"!=a[n]&&(i=null===i?n:i,e=n);for(var t=0,r=0,o=i;o<=e;o++)"insert"!=a[o]&&t++,"delete"!=a[o]&&r++;return{insertions:r,deletions:t,firstChangeAt:i}}var bc=function(a){P(e,a);var i=M(e);function e(){return A(this,e),i.apply(this,arguments)}return C(e,[{key:"init",value:function(){var o,t=this.editor,r=new um(t,t.config.get("typing.undoStep")||20);t.commands.add("input",r),function(o){var s=null,l=o.model,c=o.editing.view,u=o.commands.get("input");function h(){var f=u.buffer;f.lock();var v=f.batch;u._batches.add(v),l.enqueueChange(v,function(){l.deleteContent(l.document.selection)}),f.unlock()}c.document.on(At_isAndroid?"beforeinput":"keydown",function(f,v){return function d(f){var v=l.document,g=c.document.isComposing,m=s&&s.isEqual(v.selection);s=null,u.isEnabled&&(mc(f)||v.selection.isCollapsed||g&&229===f.keyCode||!g&&229===f.keyCode&&m||h())}(v)},{priority:"lowest"}),c.document.on("compositionstart",function(){var f=l.document,v=1!==f.selection.rangeCount||f.selection.getFirstRange().isFlat;f.selection.isCollapsed||v||h()},{priority:"lowest"}),c.document.on("compositionend",function(){s=l.createSelection(l.document.selection)},{priority:"lowest"})}(t),(o=t).editing.view.document.on("mutations",function(s,l,c){new hm(o).handle(l,c)})}},{key:"isInput",value:function(t){return this.editor.commands.get("input")._batches.has(t)}}],[{key:"pluginName",get:function(){return"Input"}}]),e}(U),wc=function(a){P(e,a);var i=M(e);function e(n,t){var r;return A(this,e),(r=i.call(this,n)).direction=t,r._buffer=new vc(n.model,n.config.get("typing.undoStep")),r}return C(e,[{key:"buffer",get:function(){return this._buffer}},{key:"execute",value:function(){var t=this,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},o=this.editor.model,s=o.document;o.enqueueChange(this._buffer.batch,function(l){t._buffer.lock();var c=l.createSelection(r.selection||s.selection),u=c.isCollapsed;if(c.isCollapsed&&o.modifySelection(c,{direction:t.direction,unit:r.unit}),t._shouldEntireContentBeReplacedWithParagraph(r.sequence||1))t._replaceEntireContentWithParagraph(l);else if(!c.isCollapsed){var d=0;c.getFirstRange().getMinimalFlatRanges().forEach(function(h){d+=$i(h.getWalker({singleCharacters:!0,ignoreElementEnd:!0,shallow:!0}))}),o.deleteContent(c,{doNotResetEntireContent:u,direction:t.direction}),t._buffer.input(d),l.setSelection(c),t._buffer.unlock()}})}},{key:"_shouldEntireContentBeReplacedWithParagraph",value:function(t){if(t>1)return!1;var r=this.editor.model,o=r.document.selection,s=r.schema.getLimitElement(o);if(!o.isCollapsed||!o.containsEntireContent(s)||!r.schema.checkChild(s,"paragraph"))return!1;var l=s.getChild(0);return!l||"paragraph"!==l.name}},{key:"_replaceEntireContentWithParagraph",value:function(t){var r=this.editor.model,s=r.schema.getLimitElement(r.document.selection),l=t.createElement("paragraph");t.remove(t.createRangeIn(s)),t.insert(l,s),t.setSelection(l,0)}}]),e}(ve),fm=function(a){P(e,a);var i=M(e);function e(n){var t;A(this,e),t=i.call(this,n);var r=n.document,o=0;function s(l,c,u){var d;r.once("delete",function(h){return d=h},{priority:Number.POSITIVE_INFINITY}),r.fire("delete",new io(r,c,u)),d&&d.stop.called&&l.stop()}return r.on("keyup",function(l,c){c.keyCode!=me.delete&&c.keyCode!=me.backspace||(o=0)}),r.on("keydown",function(l,c){var u={};if(c.keyCode==me.delete)u.direction="forward",u.unit="character";else{if(c.keyCode!=me.backspace)return;u.direction="backward",u.unit="codePoint"}u.unit=(At_isMac?c.altKey:c.ctrlKey)?"word":u.unit,u.sequence=++o,s(l,c.domEvent,u)}),At_isAndroid&&r.on("beforeinput",function(l,c){if("deleteContentBackward"==c.domEvent.inputType){var u={unit:"codepoint",direction:"backward",sequence:1},d=c.domTarget.ownerDocument.defaultView.getSelection();d.anchorNode==d.focusNode&&d.anchorOffset+1!=d.focusOffset&&(u.selectionToRemove=n.domConverter.domSelectionToView(d)),s(l,c.domEvent,u)}}),t}return C(e,[{key:"observe",value:function(){}}]),e}(Ft),vm=function(a){P(e,a);var i=M(e);function e(){return A(this,e),i.apply(this,arguments)}return C(e,[{key:"init",value:function(){var t=this.editor,r=t.editing.view,o=r.document;if(r.addObserver(fm),t.commands.add("forwardDelete",new wc(t,"forward")),t.commands.add("delete",new wc(t,"backward")),this.listenTo(o,"delete",function(l,c){var u={unit:c.unit,sequence:c.sequence};if(c.selectionToRemove){var v,d=t.model.createSelection(),h=[],f=k(c.selectionToRemove.getRanges());try{for(f.s();!(v=f.n()).done;)h.push(t.editing.mapper.toModelRange(v.value))}catch(m){f.e(m)}finally{f.f()}d.setTo(h),u.selection=d}t.execute("forward"==c.direction?"forwardDelete":"delete",u),c.preventDefault(),r.scrollToTheSelection()}),At_isAndroid){var s=null;this.listenTo(o,"delete",function(l,c){var u=c.domTarget.ownerDocument.defaultView.getSelection();s={anchorNode:u.anchorNode,anchorOffset:u.anchorOffset,focusNode:u.focusNode,focusOffset:u.focusOffset}},{priority:"lowest"}),this.listenTo(o,"keyup",function(l,c){if(s){var u=c.domTarget.ownerDocument.defaultView.getSelection();u.collapse(s.anchorNode,s.anchorOffset),u.extend(s.focusNode,s.focusOffset),s=null}})}}}],[{key:"pluginName",get:function(){return"Delete"}}]),e}(U),gm=function(a){P(e,a);var i=M(e);function e(){return A(this,e),i.apply(this,arguments)}return C(e,null,[{key:"requires",get:function(){return[bc,vm]}},{key:"pluginName",get:function(){return"Typing"}}]),e}(U),Io=new Map;function ye(a,i,e){var n=Io.get(a);n||Io.set(a,n=new Map),n.set(i,e)}function mm(a){return[a]}function _c(a,i){var t,r,o,e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=(r=i.constructor,(o=Io.get(t=a.constructor))&&o.has(r)?o.get(r):mm);try{return n(a=a.clone(),i,e)}catch(t){throw t}}function pm(a,i,e){a=a.slice(),i=i.slice();var n=new km(e.document,e.useRelations,e.forceWeakRemove);n.setOriginalOperations(a),n.setOriginalOperations(i);var t=n.originalOperations;if(0==a.length||0==i.length)return{operationsA:a,operationsB:i,originalOperations:t};var s,r=new WeakMap,o=k(a);try{for(o.s();!(s=o.n()).done;)r.set(s.value,0)}catch(N){o.e(N)}finally{o.f()}for(var c={nextBaseVersionA:a[a.length-1].baseVersion+1,nextBaseVersionB:i[i.length-1].baseVersion+1,originalOperationsACount:a.length,originalOperationsBCount:i.length},u=0;u<a.length;){var d,h,f=a[u],v=r.get(f);if(v!=i.length){var g=i[v],m=_c(f,g,n.getContext(f,g,!0)),p=_c(g,f,n.getContext(g,f,!1));n.updateRelation(f,g),n.setOriginalOperations(m,f),n.setOriginalOperations(p,g);var w,y=k(m);try{for(y.s();!(w=y.n()).done;)r.set(w.value,v+p.length)}catch(N){y.e(N)}finally{y.f()}(d=a).splice.apply(d,[u,1].concat(Y(m))),(h=i).splice.apply(h,[v,1].concat(Y(p)))}else u++}if(e.padWithNoOps){var T=a.length-c.originalOperationsACount,x=i.length-c.originalOperationsBCount;Cc(a,x-T),Cc(i,T-x)}return Ac(a,c.nextBaseVersionB),Ac(i,c.nextBaseVersionA),{operationsA:a,operationsB:i,originalOperations:t}}var km=function(){function a(i,e){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];A(this,a),this.originalOperations=new Map,this._history=i.history,this._useRelations=e,this._forceWeakRemove=!!n,this._relations=new Map}return C(a,[{key:"setOriginalOperations",value:function(e){var o,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,t=n?this.originalOperations.get(n):null,r=k(e);try{for(r.s();!(o=r.n()).done;){var s=o.value;this.originalOperations.set(s,t||s)}}catch(l){r.e(l)}finally{r.f()}}},{key:"updateRelation",value:function(e,n){switch(e.constructor){case _e:switch(n.constructor){case Be:e.targetPosition.isEqual(n.sourcePosition)||n.movedRange.containsPosition(e.targetPosition)?this._setRelation(e,n,"insertAtSource"):e.targetPosition.isEqual(n.deletionPosition)?this._setRelation(e,n,"insertBetween"):e.targetPosition.isAfter(n.sourcePosition)&&this._setRelation(e,n,"moveTargetAfter");break;case _e:e.targetPosition.isEqual(n.sourcePosition)||e.targetPosition.isBefore(n.sourcePosition)?this._setRelation(e,n,"insertBefore"):this._setRelation(e,n,"insertAfter")}break;case Te:switch(n.constructor){case Be:e.splitPosition.isBefore(n.sourcePosition)&&this._setRelation(e,n,"splitBefore");break;case _e:(e.splitPosition.isEqual(n.sourcePosition)||e.splitPosition.isBefore(n.sourcePosition))&&this._setRelation(e,n,"splitBefore")}break;case Be:switch(n.constructor){case Be:e.targetPosition.isEqual(n.sourcePosition)||this._setRelation(e,n,"mergeTargetNotMoved"),e.sourcePosition.isEqual(n.targetPosition)&&this._setRelation(e,n,"mergeSourceNotMoved"),e.sourcePosition.isEqual(n.sourcePosition)&&this._setRelation(e,n,"mergeSameElement");break;case Te:e.sourcePosition.isEqual(n.splitPosition)&&this._setRelation(e,n,"splitAtSource")}break;case xt:var t=e.newRange;if(!t)return;switch(n.constructor){case _e:var r=F._createFromPositionAndShift(n.sourcePosition,n.howMany),o=r.containsPosition(t.start)||r.start.isEqual(t.start),s=r.containsPosition(t.end)||r.end.isEqual(t.end);!o&&!s||r.containsRange(t)||this._setRelation(e,n,{side:o?"left":"right",path:o?t.start.path.slice():t.end.path.slice()});break;case Be:var l=t.start.isEqual(n.targetPosition),c=t.start.isEqual(n.deletionPosition),u=t.end.isEqual(n.deletionPosition),d=t.end.isEqual(n.sourcePosition);(l||c||u||d)&&this._setRelation(e,n,{wasInLeftElement:l,wasStartBeforeMergedElement:c,wasEndBeforeMergedElement:u,wasInRightElement:d})}}}},{key:"getContext",value:function(e,n,t){return{aIsStrong:t,aWasUndone:this._wasUndone(e),bWasUndone:this._wasUndone(n),abRelation:this._useRelations?this._getRelation(e,n):null,baRelation:this._useRelations?this._getRelation(n,e):null,forceWeakRemove:this._forceWeakRemove}}},{key:"_wasUndone",value:function(e){var n=this.originalOperations.get(e);return n.wasUndone||this._history.isUndoneOperation(n)}},{key:"_getRelation",value:function(e,n){var t=this.originalOperations.get(n),r=this._history.getUndoneOperation(t);if(!r)return null;var o=this.originalOperations.get(e),s=this._relations.get(o);return s&&s.get(r)||null}},{key:"_setRelation",value:function(e,n,t){var r=this.originalOperations.get(e),o=this.originalOperations.get(n),s=this._relations.get(r);s||this._relations.set(r,s=new Map),s.set(o,t)}}]),a}();function Ac(a,i){var n,e=k(a);try{for(e.s();!(n=e.n()).done;)n.value.baseVersion=i++}catch(r){e.e(r)}finally{e.f()}}function Cc(a,i){for(var e=0;e<i;e++)a.push(new rt(0))}function Tc(a,i,e){var n=a.nodes.getNode(0).getAttribute(i);if(n==e)return null;var t=new F(a.position,a.position.getShiftedBy(a.howMany));return new Ye(t,i,n,e,0)}function xc(a,i){return null===a.targetPosition._getTransformedByDeletion(i.sourcePosition,i.howMany)}function _n(a,i){for(var e=[],n=0;n<a.length;n++){var t=a[n],r=new _e(t.start,t.end.offset-t.start.offset,i,0);e.push(r);for(var o=n+1;o<a.length;o++)a[o]=a[o]._getTransformedByMove(r.sourcePosition,r.targetPosition,r.howMany)[0];i=i._getTransformedByMove(r.sourcePosition,r.targetPosition,r.howMany)}return e}ye(Ye,Ye,function(a,i,e){if(a.key===i.key&&a.range.start.hasSameParentAs(i.range.start)){var n=a.range.getDifference(i.range).map(function(r){return new Ye(r,a.key,a.oldValue,a.newValue,0)}),t=a.range.getIntersection(i.range);return t&&e.aIsStrong&&n.push(new Ye(t,i.key,i.newValue,a.newValue,0)),0==n.length?[new rt(0)]:n}return[a]}),ye(Ye,nt,function(a,i){if(a.range.start.hasSameParentAs(i.position)&&a.range.containsPosition(i.position)){var e=a.range._getTransformedByInsertion(i.position,i.howMany,!i.shouldReceiveAttributes).map(function(t){return new Ye(t,a.key,a.oldValue,a.newValue,a.baseVersion)});if(i.shouldReceiveAttributes){var n=Tc(i,a.key,a.oldValue);n&&e.unshift(n)}return e}return a.range=a.range._getTransformedByInsertion(i.position,i.howMany,!1)[0],[a]}),ye(Ye,Be,function(a,i){var e=[];a.range.start.hasSameParentAs(i.deletionPosition)&&(a.range.containsPosition(i.deletionPosition)||a.range.start.isEqual(i.deletionPosition))&&e.push(F._createFromPositionAndShift(i.graveyardPosition,1));var n=a.range._getTransformedByMergeOperation(i);return n.isCollapsed||e.push(n),e.map(function(t){return new Ye(t,a.key,a.oldValue,a.newValue,a.baseVersion)})}),ye(Ye,_e,function(a,i){return function(e,n){var t=F._createFromPositionAndShift(n.sourcePosition,n.howMany),r=null,o=[];t.containsRange(e,!0)?r=e:e.start.hasSameParentAs(t.start)?(o=e.getDifference(t),r=e.getIntersection(t)):o=[e];var c,s=[],l=k(o);try{for(l.s();!(c=l.n()).done;){var u=c.value;u=u._getTransformedByDeletion(n.sourcePosition,n.howMany);var d=n.getMovedRangeStart(),h=u.start.hasSameParentAs(d);u=u._getTransformedByInsertion(d,n.howMany,h),s.push.apply(s,Y(u))}}catch(f){l.e(f)}finally{l.f()}return r&&s.push(r._getTransformedByMove(n.sourcePosition,n.targetPosition,n.howMany,!1)[0]),s}(a.range,i).map(function(e){return new Ye(e,a.key,a.oldValue,a.newValue,a.baseVersion)})}),ye(Ye,Te,function(a,i){if(a.range.end.isEqual(i.insertionPosition))return i.graveyardPosition||a.range.end.offset++,[a];if(a.range.start.hasSameParentAs(i.splitPosition)&&a.range.containsPosition(i.splitPosition)){var e=a.clone();return e.range=new F(i.moveTargetPosition.clone(),a.range.end._getCombined(i.splitPosition,i.moveTargetPosition)),a.range.end=i.splitPosition.clone(),a.range.end.stickiness="toPrevious",[a,e]}return a.range=a.range._getTransformedBySplitOperation(i),[a]}),ye(nt,Ye,function(a,i){var e=[a];if(a.shouldReceiveAttributes&&a.position.hasSameParentAs(i.range.start)&&i.range.containsPosition(a.position)){var n=Tc(a,i.key,i.newValue);n&&e.push(n)}return e}),ye(nt,nt,function(a,i,e){return a.position.isEqual(i.position)&&e.aIsStrong||(a.position=a.position._getTransformedByInsertOperation(i)),[a]}),ye(nt,_e,function(a,i){return a.position=a.position._getTransformedByMoveOperation(i),[a]}),ye(nt,Te,function(a,i){return a.position=a.position._getTransformedBySplitOperation(i),[a]}),ye(nt,Be,function(a,i){return a.position=a.position._getTransformedByMergeOperation(i),[a]}),ye(xt,nt,function(a,i){return a.oldRange&&(a.oldRange=a.oldRange._getTransformedByInsertOperation(i)[0]),a.newRange&&(a.newRange=a.newRange._getTransformedByInsertOperation(i)[0]),[a]}),ye(xt,xt,function(a,i,e){if(a.name==i.name){if(!e.aIsStrong)return[new rt(0)];a.oldRange=i.newRange?i.newRange.clone():null}return[a]}),ye(xt,Be,function(a,i){return a.oldRange&&(a.oldRange=a.oldRange._getTransformedByMergeOperation(i)),a.newRange&&(a.newRange=a.newRange._getTransformedByMergeOperation(i)),[a]}),ye(xt,_e,function(a,i,e){if(a.oldRange&&(a.oldRange=F._createFromRanges(a.oldRange._getTransformedByMoveOperation(i))),a.newRange){if(e.abRelation){var n=F._createFromRanges(a.newRange._getTransformedByMoveOperation(i));if("left"==e.abRelation.side&&i.targetPosition.isEqual(a.newRange.start))return a.newRange.start.path=e.abRelation.path,a.newRange.end=n.end,[a];if("right"==e.abRelation.side&&i.targetPosition.isEqual(a.newRange.end))return a.newRange.start=n.start,a.newRange.end.path=e.abRelation.path,[a]}a.newRange=F._createFromRanges(a.newRange._getTransformedByMoveOperation(i))}return[a]}),ye(xt,Te,function(a,i,e){if(a.oldRange&&(a.oldRange=a.oldRange._getTransformedBySplitOperation(i)),a.newRange){if(e.abRelation){var n=a.newRange._getTransformedBySplitOperation(i);return a.newRange.start.isEqual(i.splitPosition)&&e.abRelation.wasStartBeforeMergedElement?a.newRange.start=H._createAt(i.insertionPosition):a.newRange.start.isEqual(i.splitPosition)&&!e.abRelation.wasInLeftElement&&(a.newRange.start=H._createAt(i.moveTargetPosition)),a.newRange.end=a.newRange.end.isEqual(i.splitPosition)&&e.abRelation.wasInRightElement?H._createAt(i.moveTargetPosition):a.newRange.end.isEqual(i.splitPosition)&&e.abRelation.wasEndBeforeMergedElement?H._createAt(i.insertionPosition):n.end,[a]}a.newRange=a.newRange._getTransformedBySplitOperation(i)}return[a]}),ye(Be,nt,function(a,i){return a.sourcePosition.hasSameParentAs(i.position)&&(a.howMany+=i.howMany),a.sourcePosition=a.sourcePosition._getTransformedByInsertOperation(i),a.targetPosition=a.targetPosition._getTransformedByInsertOperation(i),[a]}),ye(Be,Be,function(a,i,e){if(a.sourcePosition.isEqual(i.sourcePosition)&&a.targetPosition.isEqual(i.targetPosition)){if(e.bWasUndone){var n=i.graveyardPosition.path.slice();return n.push(0),a.sourcePosition=new H(i.graveyardPosition.root,n),a.howMany=0,[a]}return[new rt(0)]}if(a.sourcePosition.isEqual(i.sourcePosition)&&!a.targetPosition.isEqual(i.targetPosition)&&!e.bWasUndone&&"splitAtSource"!=e.abRelation){var t="$graveyard"==a.targetPosition.root.rootName,r="$graveyard"==i.targetPosition.root.rootName;if(r&&!t||(!t||r)&&e.aIsStrong){var s=i.targetPosition._getTransformedByMergeOperation(i),l=a.targetPosition._getTransformedByMergeOperation(i);return[new _e(s,a.howMany,l,0)]}return[new rt(0)]}return a.sourcePosition.hasSameParentAs(i.targetPosition)&&(a.howMany+=i.howMany),a.sourcePosition=a.sourcePosition._getTransformedByMergeOperation(i),a.targetPosition=a.targetPosition._getTransformedByMergeOperation(i),a.graveyardPosition.isEqual(i.graveyardPosition)&&e.aIsStrong||(a.graveyardPosition=a.graveyardPosition._getTransformedByMergeOperation(i)),[a]}),ye(Be,_e,function(a,i,e){var n=F._createFromPositionAndShift(i.sourcePosition,i.howMany);return"remove"==i.type&&!e.bWasUndone&&!e.forceWeakRemove&&a.deletionPosition.hasSameParentAs(i.sourcePosition)&&n.containsPosition(a.sourcePosition)?[new rt(0)]:(a.sourcePosition.hasSameParentAs(i.targetPosition)&&(a.howMany+=i.howMany),a.sourcePosition.hasSameParentAs(i.sourcePosition)&&(a.howMany-=i.howMany),a.sourcePosition=a.sourcePosition._getTransformedByMoveOperation(i),a.targetPosition=a.targetPosition._getTransformedByMoveOperation(i),a.graveyardPosition.isEqual(i.targetPosition)||(a.graveyardPosition=a.graveyardPosition._getTransformedByMoveOperation(i)),[a])}),ye(Be,Te,function(a,i,e){if(i.graveyardPosition&&(a.graveyardPosition=a.graveyardPosition._getTransformedByDeletion(i.graveyardPosition,1),a.deletionPosition.isEqual(i.graveyardPosition)&&(a.howMany=i.howMany)),a.targetPosition.isEqual(i.splitPosition)){var n=0!=i.howMany,t=i.graveyardPosition&&a.deletionPosition.isEqual(i.graveyardPosition);if(n||t||"mergeTargetNotMoved"==e.abRelation)return a.sourcePosition=a.sourcePosition._getTransformedBySplitOperation(i),[a]}if(a.sourcePosition.isEqual(i.splitPosition)){if("mergeSourceNotMoved"==e.abRelation)return a.howMany=0,a.targetPosition=a.targetPosition._getTransformedBySplitOperation(i),[a];if("mergeSameElement"==e.abRelation||a.sourcePosition.offset>0)return a.sourcePosition=i.moveTargetPosition.clone(),a.targetPosition=a.targetPosition._getTransformedBySplitOperation(i),[a]}return a.sourcePosition.hasSameParentAs(i.splitPosition)&&(a.howMany=i.splitPosition.offset),a.sourcePosition=a.sourcePosition._getTransformedBySplitOperation(i),a.targetPosition=a.targetPosition._getTransformedBySplitOperation(i),[a]}),ye(_e,nt,function(a,i){var e=F._createFromPositionAndShift(a.sourcePosition,a.howMany)._getTransformedByInsertOperation(i,!1)[0];return a.sourcePosition=e.start,a.howMany=e.end.offset-e.start.offset,a.targetPosition.isEqual(i.position)||(a.targetPosition=a.targetPosition._getTransformedByInsertOperation(i)),[a]}),ye(_e,_e,function(a,i,e){var r,n=F._createFromPositionAndShift(a.sourcePosition,a.howMany),t=F._createFromPositionAndShift(i.sourcePosition,i.howMany),o=e.aIsStrong,s=!e.aIsStrong;if("insertBefore"==e.abRelation||"insertAfter"==e.baRelation?s=!0:"insertAfter"!=e.abRelation&&"insertBefore"!=e.baRelation||(s=!1),r=a.targetPosition.isEqual(i.targetPosition)&&s?a.targetPosition._getTransformedByDeletion(i.sourcePosition,i.howMany):a.targetPosition._getTransformedByMove(i.sourcePosition,i.targetPosition,i.howMany),xc(a,i)&&xc(i,a))return[i.getReversed()];if(n.containsPosition(i.targetPosition)&&n.containsRange(t,!0))return n.start=n.start._getTransformedByMove(i.sourcePosition,i.targetPosition,i.howMany),n.end=n.end._getTransformedByMove(i.sourcePosition,i.targetPosition,i.howMany),_n([n],r);if(t.containsPosition(a.targetPosition)&&t.containsRange(n,!0))return n.start=n.start._getCombined(i.sourcePosition,i.getMovedRangeStart()),n.end=n.end._getCombined(i.sourcePosition,i.getMovedRangeStart()),_n([n],r);var l=tt(a.sourcePosition.getParentPath(),i.sourcePosition.getParentPath());if("prefix"==l||"extension"==l)return n.start=n.start._getTransformedByMove(i.sourcePosition,i.targetPosition,i.howMany),n.end=n.end._getTransformedByMove(i.sourcePosition,i.targetPosition,i.howMany),_n([n],r);"remove"!=a.type||"remove"==i.type||e.aWasUndone||e.forceWeakRemove?"remove"==a.type||"remove"!=i.type||e.bWasUndone||e.forceWeakRemove||(o=!1):o=!0;var h,c=[],u=n.getDifference(t),d=k(u);try{for(d.s();!(h=d.n()).done;){var f=h.value;f.start=f.start._getTransformedByDeletion(i.sourcePosition,i.howMany),f.end=f.end._getTransformedByDeletion(i.sourcePosition,i.howMany);var v="same"==tt(f.start.getParentPath(),i.getMovedRangeStart().getParentPath()),g=f._getTransformedByInsertion(i.getMovedRangeStart(),i.howMany,v);c.push.apply(c,Y(g))}}catch(p){d.e(p)}finally{d.f()}var m=n.getIntersection(t);return null!==m&&o&&(m.start=m.start._getCombined(i.sourcePosition,i.getMovedRangeStart()),m.end=m.end._getCombined(i.sourcePosition,i.getMovedRangeStart()),0===c.length?c.push(m):1==c.length?t.start.isBefore(n.start)||t.start.isEqual(n.start)?c.unshift(m):c.push(m):c.splice(1,0,m)),0===c.length?[new rt(a.baseVersion)]:_n(c,r)}),ye(_e,Te,function(a,i,e){var n=a.targetPosition.clone();a.targetPosition.isEqual(i.insertionPosition)&&i.graveyardPosition&&"moveTargetAfter"!=e.abRelation||(n=a.targetPosition._getTransformedBySplitOperation(i));var t=F._createFromPositionAndShift(a.sourcePosition,a.howMany);if(t.end.isEqual(i.insertionPosition))return i.graveyardPosition||a.howMany++,a.targetPosition=n,[a];if(t.start.hasSameParentAs(i.splitPosition)&&t.containsPosition(i.splitPosition)){var r=new F(i.splitPosition,t.end);return r=r._getTransformedBySplitOperation(i),_n([new F(t.start,i.splitPosition),r],n)}a.targetPosition.isEqual(i.splitPosition)&&"insertAtSource"==e.abRelation&&(n=i.moveTargetPosition),a.targetPosition.isEqual(i.insertionPosition)&&"insertBetween"==e.abRelation&&(n=a.targetPosition);var o=[t._getTransformedBySplitOperation(i)];if(i.graveyardPosition){var s=t.start.isEqual(i.graveyardPosition)||t.containsPosition(i.graveyardPosition);a.howMany>1&&s&&!e.aWasUndone&&o.push(F._createFromPositionAndShift(i.insertionPosition,1))}return _n(o,n)}),ye(_e,Be,function(a,i,e){var n=F._createFromPositionAndShift(a.sourcePosition,a.howMany);if(i.deletionPosition.hasSameParentAs(a.sourcePosition)&&n.containsPosition(i.sourcePosition))if("remove"!=a.type||e.forceWeakRemove){if(1==a.howMany)return e.bWasUndone?(a.sourcePosition=i.graveyardPosition.clone(),a.targetPosition=a.targetPosition._getTransformedByMergeOperation(i),[a]):[new rt(0)]}else if(!e.aWasUndone){var t=[],r=i.graveyardPosition.clone(),o=i.targetPosition._getTransformedByMergeOperation(i);a.howMany>1&&(t.push(new _e(a.sourcePosition,a.howMany-1,a.targetPosition,0)),r=r._getTransformedByMove(a.sourcePosition,a.targetPosition,a.howMany-1),o=o._getTransformedByMove(a.sourcePosition,a.targetPosition,a.howMany-1));var s=i.deletionPosition._getCombined(a.sourcePosition,a.targetPosition),l=new _e(r,1,s,0),c=l.getMovedRangeStart().path.slice();c.push(0);var u=new H(l.targetPosition.root,c);o=o._getTransformedByMove(r,s,1);var d=new _e(o,i.howMany,u,0);return t.push(l),t.push(d),t}var h=F._createFromPositionAndShift(a.sourcePosition,a.howMany)._getTransformedByMergeOperation(i);return a.sourcePosition=h.start,a.howMany=h.end.offset-h.start.offset,a.targetPosition=a.targetPosition._getTransformedByMergeOperation(i),[a]}),ye(St,nt,function(a,i){return a.position=a.position._getTransformedByInsertOperation(i),[a]}),ye(St,Be,function(a,i){return a.position.isEqual(i.deletionPosition)?(a.position=i.graveyardPosition.clone(),a.position.stickiness="toNext",[a]):(a.position=a.position._getTransformedByMergeOperation(i),[a])}),ye(St,_e,function(a,i){return a.position=a.position._getTransformedByMoveOperation(i),[a]}),ye(St,St,function(a,i,e){if(a.position.isEqual(i.position)){if(!e.aIsStrong)return[new rt(0)];a.oldName=i.newName}return[a]}),ye(St,Te,function(a,i){if("same"==tt(a.position.path,i.splitPosition.getParentPath())&&!i.graveyardPosition){var e=new St(a.position.getShiftedBy(1),a.oldName,a.newName,0);return[a,e]}return a.position=a.position._getTransformedBySplitOperation(i),[a]}),ye(Qn,Qn,function(a,i,e){if(a.root===i.root&&a.key===i.key){if(!e.aIsStrong||a.newValue===i.newValue)return[new rt(0)];a.oldValue=i.newValue}return[a]}),ye(Te,nt,function(a,i){return a.splitPosition.hasSameParentAs(i.position)&&a.splitPosition.offset<i.position.offset&&(a.howMany+=i.howMany),a.splitPosition=a.splitPosition._getTransformedByInsertOperation(i),a.insertionPosition=Te.getInsertionPosition(a.splitPosition),[a]}),ye(Te,Be,function(a,i,e){if(!a.graveyardPosition&&!e.bWasUndone&&a.splitPosition.hasSameParentAs(i.sourcePosition)){var n=i.graveyardPosition.path.slice();n.push(0);var t=new H(i.graveyardPosition.root,n),r=Te.getInsertionPosition(new H(i.graveyardPosition.root,n)),o=new Te(t,0,null,0);return o.insertionPosition=r,a.splitPosition=a.splitPosition._getTransformedByMergeOperation(i),a.insertionPosition=Te.getInsertionPosition(a.splitPosition),a.graveyardPosition=o.insertionPosition.clone(),a.graveyardPosition.stickiness="toNext",[o,a]}return a.splitPosition.hasSameParentAs(i.deletionPosition)&&!a.splitPosition.isAfter(i.deletionPosition)&&a.howMany--,a.splitPosition.hasSameParentAs(i.targetPosition)&&(a.howMany+=i.howMany),a.splitPosition=a.splitPosition._getTransformedByMergeOperation(i),a.insertionPosition=Te.getInsertionPosition(a.splitPosition),a.graveyardPosition&&(a.graveyardPosition=a.graveyardPosition._getTransformedByMergeOperation(i)),[a]}),ye(Te,_e,function(a,i,e){var n=F._createFromPositionAndShift(i.sourcePosition,i.howMany);if(a.graveyardPosition){var t=n.start.isEqual(a.graveyardPosition)||n.containsPosition(a.graveyardPosition);if(!e.bWasUndone&&t){var r=a.splitPosition._getTransformedByMoveOperation(i),o=a.graveyardPosition._getTransformedByMoveOperation(i),s=o.path.slice();s.push(0);var l=new H(o.root,s);return[new _e(r,a.howMany,l,0)]}a.graveyardPosition=a.graveyardPosition._getTransformedByMoveOperation(i)}return a.splitPosition.hasSameParentAs(i.sourcePosition)&&n.containsPosition(a.splitPosition)?(a.howMany-=i.howMany-(a.splitPosition.offset-i.sourcePosition.offset),a.splitPosition.hasSameParentAs(i.targetPosition)&&a.splitPosition.offset<i.targetPosition.offset&&(a.howMany+=i.howMany),a.splitPosition=i.sourcePosition.clone(),a.insertionPosition=Te.getInsertionPosition(a.splitPosition),[a]):!a.splitPosition.isEqual(i.targetPosition)||"insertAtSource"!=e.baRelation&&"splitBefore"!=e.abRelation?(i.sourcePosition.isEqual(i.targetPosition)||(a.splitPosition.hasSameParentAs(i.sourcePosition)&&a.splitPosition.offset<=i.sourcePosition.offset&&(a.howMany-=i.howMany),a.splitPosition.hasSameParentAs(i.targetPosition)&&a.splitPosition.offset<i.targetPosition.offset&&(a.howMany+=i.howMany)),a.splitPosition.stickiness="toNone",a.splitPosition=a.splitPosition._getTransformedByMoveOperation(i),a.splitPosition.stickiness="toNext",a.insertionPosition=a.graveyardPosition?a.insertionPosition._getTransformedByMoveOperation(i):Te.getInsertionPosition(a.splitPosition),[a]):(a.howMany+=i.howMany,a.splitPosition=a.splitPosition._getTransformedByDeletion(i.sourcePosition,i.howMany),a.insertionPosition=Te.getInsertionPosition(a.splitPosition),[a])}),ye(Te,Te,function(a,i,e){if(a.splitPosition.isEqual(i.splitPosition)){if(!a.graveyardPosition&&!i.graveyardPosition)return[new rt(0)];if(a.graveyardPosition&&i.graveyardPosition&&a.graveyardPosition.isEqual(i.graveyardPosition))return[new rt(0)];if("splitBefore"==e.abRelation)return a.howMany=0,a.graveyardPosition=a.graveyardPosition._getTransformedBySplitOperation(i),[a]}if(a.graveyardPosition&&i.graveyardPosition&&a.graveyardPosition.isEqual(i.graveyardPosition)){var n="$graveyard"==a.splitPosition.root.rootName,t="$graveyard"==i.splitPosition.root.rootName;if(t&&!n||(!n||t)&&e.aIsStrong){var o=[];return i.howMany&&o.push(new _e(i.moveTargetPosition,i.howMany,i.splitPosition,0)),a.howMany&&o.push(new _e(a.splitPosition,a.howMany,a.moveTargetPosition,0)),o}return[new rt(0)]}if(a.graveyardPosition&&(a.graveyardPosition=a.graveyardPosition._getTransformedBySplitOperation(i)),a.splitPosition.isEqual(i.insertionPosition)&&"splitBefore"==e.abRelation)return a.howMany++,[a];if(i.splitPosition.isEqual(a.insertionPosition)&&"splitBefore"==e.baRelation){var s=i.insertionPosition.path.slice();s.push(0);var l=new H(i.insertionPosition.root,s);return[a,new _e(a.insertionPosition,1,l,0)]}return a.splitPosition.hasSameParentAs(i.splitPosition)&&a.splitPosition.offset<i.splitPosition.offset&&(a.howMany-=i.howMany),a.splitPosition=a.splitPosition._getTransformedBySplitOperation(i),a.insertionPosition=Te.getInsertionPosition(a.splitPosition),[a]});var Sc=function(a){P(e,a);var i=M(e);function e(n){var t;return A(this,e),(t=i.call(this,n))._stack=[],t._createdBatches=new WeakSet,t.refresh(),t.listenTo(n.data,"set",function(){return t.clearStack()}),t}return C(e,[{key:"refresh",value:function(){this.isEnabled=this._stack.length>0}},{key:"addBatch",value:function(t){var r=this.editor.model.document.selection,o={ranges:r.hasOwnRange?Array.from(r.getRanges()):[],isBackward:r.isBackward};this._stack.push({batch:t,selection:o}),this.refresh()}},{key:"clearStack",value:function(){this._stack=[],this.refresh()}},{key:"_restoreSelection",value:function(t,r,o){var f,s=this.editor.model,l=s.document,c=[],u=t.map(function(p){return p.getTransformedByOperations(o)}),d=u.flat(),h=k(u);try{for(h.s();!(f=h.n()).done;){var g=f.value.filter(function(p){return!bm(p,d)});ym(g);var m=g.find(function(p){return p.root!=l.graveyard});m&&c.push(m)}}catch(p){h.e(p)}finally{h.f()}c.length&&s.change(function(p){p.setSelection(c,{backward:r})})}},{key:"_undo",value:function(t,r){var o=this.editor.model,s=o.document;this._createdBatches.add(r);var l=t.operations.slice().filter(function(y){return y.isDocumentOperation});l.reverse();var u,c=k(l);try{for(c.s();!(u=c.n()).done;){var m,d=u.value,f=Array.from(s.history.getOperations(d.baseVersion+1)),v=pm([d.getReversed()],f,{useRelations:!0,document:this.editor.model.document,padWithNoOps:!1,forceWeakRemove:!0}).operationsA,g=k(v);try{for(g.s();!(m=g.n()).done;){var p=m.value;r.addOperation(p),o.applyOperation(p),s.history.setOperationAsUndone(d,p)}}catch(y){g.e(y)}finally{g.f()}}}catch(y){c.e(y)}finally{c.f()}}}]),e}(ve);function ym(a){a.sort(function(n,t){return n.start.isBefore(t.start)?-1:1});for(var i=1;i<a.length;i++){var e=a[i-1].getJoined(a[i],!0);e&&(i--,a.splice(i,2,e))}}function bm(a,i){return i.some(function(e){return e!==a&&e.containsRange(a,!0)})}var wm=function(a){P(e,a);var i=M(e);function e(){return A(this,e),i.apply(this,arguments)}return C(e,[{key:"execute",value:function(){var t=this,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,o=r?this._stack.findIndex(function(c){return c.batch==r}):this._stack.length-1,s=this._stack.splice(o,1)[0],l=this.editor.model.createBatch("transparent");this.editor.model.enqueueChange(l,function(){t._undo(s.batch,l);var c=t.editor.model.document.history.getOperations(s.batch.baseVersion);t._restoreSelection(s.selection.ranges,s.selection.isBackward,c),t.fire("revert",s.batch,l)}),this.refresh()}}]),e}(Sc),_m=function(a){P(e,a);var i=M(e);function e(){return A(this,e),i.apply(this,arguments)}return C(e,[{key:"execute",value:function(){var t=this,r=this._stack.pop(),o=this.editor.model.createBatch("transparent");this.editor.model.enqueueChange(o,function(){var l=t.editor.model.document.history.getOperations(r.batch.operations[r.batch.operations.length-1].baseVersion+1);t._restoreSelection(r.selection.ranges,r.selection.isBackward,l),t._undo(r.batch,o)}),this.refresh()}}]),e}(Sc),Am=function(a){P(e,a);var i=M(e);function e(n){var t;return A(this,e),(t=i.call(this,n))._batchRegistry=new WeakSet,t}return C(e,[{key:"init",value:function(){var t=this,r=this.editor;this._undoCommand=new wm(r),this._redoCommand=new _m(r),r.commands.add("undo",this._undoCommand),r.commands.add("redo",this._redoCommand),this.listenTo(r.model,"applyOperation",function(o,s){var l=s[0];if(l.isDocumentOperation){var c=l.batch,u=t._redoCommand._createdBatches.has(c),d=t._undoCommand._createdBatches.has(c);t._batchRegistry.has(c)||"transparent"==c.type&&!u&&!d||(u?t._undoCommand.addBatch(c):d||(t._undoCommand.addBatch(c),t._redoCommand.clearStack()),t._batchRegistry.add(c))}},{priority:"highest"}),this.listenTo(this._undoCommand,"revert",function(o,s,l){t._redoCommand.addBatch(l)}),r.keystrokes.set("CTRL+Z","undo"),r.keystrokes.set("CTRL+Y","redo"),r.keystrokes.set("CTRL+SHIFT+Z","redo")}}],[{key:"pluginName",get:function(){return"UndoEditing"}}]),e}(U),Pc='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M5.042 9.367l2.189 1.837a.75.75 0 0 1-.965 1.149l-3.788-3.18a.747.747 0 0 1-.21-.284.75.75 0 0 1 .17-.945L6.23 4.762a.75.75 0 1 1 .964 1.15L4.863 7.866h8.917A.75.75 0 0 1 14 7.9a4 4 0 1 1-1.477 7.718l.344-1.489a2.5 2.5 0 1 0 1.094-4.73l.008-.032H5.042z"/></svg>',Ec='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M14.958 9.367l-2.189 1.837a.75.75 0 0 0 .965 1.149l3.788-3.18a.747.747 0 0 0 .21-.284.75.75 0 0 0-.17-.945L13.77 4.762a.75.75 0 1 0-.964 1.15l2.331 1.955H6.22A.75.75 0 0 0 6 7.9a4 4 0 1 0 1.477 7.718l-.344-1.489A2.5 2.5 0 1 1 6.039 9.4l-.008-.032h8.927z"/></svg>',Cm=function(a){P(e,a);var i=M(e);function e(){return A(this,e),i.apply(this,arguments)}return C(e,[{key:"init",value:function(){var t=this.editor,r=t.locale,o=t.t,s="ltr"==r.uiLanguageDirection?Pc:Ec,l="ltr"==r.uiLanguageDirection?Ec:Pc;this._addButton("undo",o("Undo"),"CTRL+Z",s),this._addButton("redo",o("Redo"),"CTRL+Y",l)}},{key:"_addButton",value:function(t,r,o,s){var l=this,c=this.editor;c.ui.componentFactory.add(t,function(u){var d=c.commands.get(t),h=new be(u);return h.set({label:r,icon:s,keystroke:o,tooltip:!0}),h.bind("isEnabled").to(d,"isEnabled"),l.listenTo(h,"execute",function(){c.execute(t),c.editing.view.focus()}),h})}}]),e}(U),Mc=function(a){P(e,a);var i=M(e);function e(){return A(this,e),i.apply(this,arguments)}return C(e,null,[{key:"requires",get:function(){return[Am,Cm]}},{key:"pluginName",get:function(){return"Undo"}}]),e}(U);function Xe(a){var i=a.next();return i.done?null:i.value}var Ic=["left","right","center","justify"];function Nc(a){return Ic.includes(a)}function Rc(a,i){return"rtl"==i.contentLanguageDirection?"right"===a:"left"===a}var Tm=function(a){P(e,a);var i=M(e);function e(){return A(this,e),i.apply(this,arguments)}return C(e,[{key:"refresh",value:function(){var t=this.editor.locale,r=Xe(this.editor.model.document.selection.getSelectedBlocks());this.isEnabled=!!r&&this._canBeAligned(r),this.value=this.isEnabled&&r.hasAttribute("alignment")?r.getAttribute("alignment"):"rtl"===t.contentLanguageDirection?"right":"left"}},{key:"execute",value:function(){var t=this,o=this.editor,s=o.locale,l=o.model,c=l.document,u=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).value;l.change(function(d){var h=Array.from(c.selection.getSelectedBlocks()).filter(function(v){return t._canBeAligned(v)}),f=h[0].getAttribute("alignment");Rc(u,s)||f===u||!u?function(v,g){var p,m=k(v);try{for(m.s();!(p=m.n()).done;)g.removeAttribute("alignment",p.value)}catch(w){m.e(w)}finally{m.f()}}(h,d):function(v,g,m){var y,p=k(v);try{for(p.s();!(y=p.n()).done;)g.setAttribute("alignment",m,y.value)}catch(_){p.e(_)}finally{p.f()}}(h,d,u)})}},{key:"_canBeAligned",value:function(t){return this.editor.model.schema.checkAttribute(t,"alignment")}}]),e}(ve),xm=function(a){P(e,a);var i=M(e);function e(n){var t;return A(this,e),t=i.call(this,n),n.config.define("alignment",{options:[].concat(Ic)}),t}return C(e,[{key:"init",value:function(){var t=this.editor,r=t.locale,o=t.model.schema,s=t.config.get("alignment.options").filter(Nc);o.extend("$block",{allowAttributes:"alignment"}),t.model.schema.setAttributeProperties("alignment",{isFormatting:!0});var l=function(c){var h,u={model:{key:"alignment",values:c.slice()},view:{}},d=k(c);try{for(d.s();!(h=d.n()).done;){var f=h.value;u.view[f]={key:"style",value:{"text-align":f}}}}catch(v){d.e(v)}finally{d.f()}return u}(s.filter(function(c){return!Rc(c,r)}));t.conversion.attributeToAttribute(l),t.commands.add("alignment",new Tm(t))}}],[{key:"pluginName",get:function(){return"AlignmentEditing"}}]),e}(U),Oc='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M2 3.75c0 .414.336.75.75.75h14.5a.75.75 0 1 0 0-1.5H2.75a.75.75 0 0 0-.75.75zm0 8c0 .414.336.75.75.75h14.5a.75.75 0 1 0 0-1.5H2.75a.75.75 0 0 0-.75.75zm0 4c0 .414.336.75.75.75h9.929a.75.75 0 1 0 0-1.5H2.75a.75.75 0 0 0-.75.75zm0-8c0 .414.336.75.75.75h9.929a.75.75 0 1 0 0-1.5H2.75a.75.75 0 0 0-.75.75z"/></svg>',Dc='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M18 3.75a.75.75 0 0 1-.75.75H2.75a.75.75 0 1 1 0-1.5h14.5a.75.75 0 0 1 .75.75zm0 8a.75.75 0 0 1-.75.75H2.75a.75.75 0 1 1 0-1.5h14.5a.75.75 0 0 1 .75.75zm0 4a.75.75 0 0 1-.75.75H7.321a.75.75 0 1 1 0-1.5h9.929a.75.75 0 0 1 .75.75zm0-8a.75.75 0 0 1-.75.75H7.321a.75.75 0 1 1 0-1.5h9.929a.75.75 0 0 1 .75.75z"/></svg>',Sm=new Map([["left",Oc],["right",Dc],["center",'<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M2 3.75c0 .414.336.75.75.75h14.5a.75.75 0 1 0 0-1.5H2.75a.75.75 0 0 0-.75.75zm0 8c0 .414.336.75.75.75h14.5a.75.75 0 1 0 0-1.5H2.75a.75.75 0 0 0-.75.75zm2.286 4c0 .414.336.75.75.75h9.928a.75.75 0 1 0 0-1.5H5.036a.75.75 0 0 0-.75.75zm0-8c0 .414.336.75.75.75h9.928a.75.75 0 1 0 0-1.5H5.036a.75.75 0 0 0-.75.75z"/></svg>'],["justify",'<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M2 3.75c0 .414.336.75.75.75h14.5a.75.75 0 1 0 0-1.5H2.75a.75.75 0 0 0-.75.75zm0 8c0 .414.336.75.75.75h14.5a.75.75 0 1 0 0-1.5H2.75a.75.75 0 0 0-.75.75zm0 4c0 .414.336.75.75.75h9.929a.75.75 0 1 0 0-1.5H2.75a.75.75 0 0 0-.75.75zm0-8c0 .414.336.75.75.75h14.5a.75.75 0 1 0 0-1.5H2.75a.75.75 0 0 0-.75.75z"/></svg>']]),Pm=function(a){P(e,a);var i=M(e);function e(){return A(this,e),i.apply(this,arguments)}return C(e,[{key:"localizedOptionTitles",get:function(){var t=this.editor.t;return{left:t("Align left"),right:t("Align right"),center:t("Align center"),justify:t("Justify")}}},{key:"init",value:function(){var t=this,r=this.editor,o=r.ui.componentFactory,s=r.t,l=r.config.get("alignment.options");l.filter(Nc).forEach(function(c){return t._addButton(c)}),o.add("alignment",function(c){var u=yt(c),d=l.map(function(f){return o.create("alignment:"+f)});oc(u,d),u.buttonView.set({label:s("Text alignment"),tooltip:!0}),u.toolbarView.isVertical=!0,u.toolbarView.ariaLabel=s("Text alignment toolbar"),u.extendTemplate({attributes:{class:"ck-alignment-dropdown"}});var h="rtl"===c.contentLanguageDirection?Dc:Oc;return u.buttonView.bind("icon").toMany(d,"isOn",function(){for(var f=arguments.length,v=new Array(f),g=0;g<f;g++)v[g]=arguments[g];var m=v.findIndex(function(p){return p});return m<0?h:d[m].icon}),u.bind("isEnabled").toMany(d,"isEnabled",function(){for(var f=arguments.length,v=new Array(f),g=0;g<f;g++)v[g]=arguments[g];return v.some(function(m){return m})}),u})}},{key:"_addButton",value:function(t){var r=this,o=this.editor;o.ui.componentFactory.add("alignment:"+t,function(s){var l=o.commands.get("alignment"),c=new be(s);return c.set({label:r.localizedOptionTitles[t],icon:Sm.get(t),tooltip:!0,isToggleable:!0}),c.bind("isEnabled").to(l),c.bind("isOn").to(l,"value",function(u){return u===t}),r.listenTo(c,"execute",function(){o.execute("alignment",{value:t}),o.editing.view.focus()}),c})}}],[{key:"pluginName",get:function(){return"AlignmentUI"}}]),e}(U),qr=function(a){P(e,a);var i=M(e);function e(n,t){var r;return A(this,e),(r=i.call(this,n)).attributeKey=t,r}return C(e,[{key:"refresh",value:function(){var t=this.editor.model,r=t.document;this.value=r.selection.getAttribute(this.attributeKey),this.isEnabled=t.schema.checkAttributeInSelection(r.selection,this.attributeKey)}},{key:"execute",value:function(){var t=this,o=this.editor.model,s=o.document.selection,l=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).value;o.change(function(c){if(s.isCollapsed)l?c.setSelectionAttribute(t.attributeKey,l):c.removeSelectionAttribute(t.attributeKey);else{var h,u=o.schema.getValidRanges(s.getRanges(),t.attributeKey),d=k(u);try{for(d.s();!(h=d.n()).done;){var f=h.value;l?c.setAttribute(t.attributeKey,l,f):c.removeAttribute(t.attributeKey,f)}}catch(v){d.e(v)}finally{d.f()}}})}}]),e}(ve),Lc=function(a){P(e,a);var i=M(e);function e(n){var t;A(this,e);var r=(t=i.call(this,n)).bindTemplate;return t.set("color"),t.set("hasBorder"),t.icon='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path class="ck-icon__fill" d="M16.935 5.328a2 2 0 0 1 0 2.829l-7.778 7.778a2 2 0 0 1-2.829 0L3.5 13.107a1.999 1.999 0 1 1 2.828-2.829l.707.707a1 1 0 0 0 1.414 0l5.658-5.657a2 2 0 0 1 2.828 0z"/><path d="M14.814 6.035L8.448 12.4a1 1 0 0 1-1.414 0l-1.413-1.415A1 1 0 1 0 4.207 12.4l2.829 2.829a1 1 0 0 0 1.414 0l7.778-7.778a1 1 0 1 0-1.414-1.415z"/></svg>',t.extendTemplate({attributes:{style:{backgroundColor:r.to("color")},class:["ck","ck-color-grid__tile",r.if("hasBorder","ck-color-table__color-tile_bordered")]}}),t}return C(e,[{key:"render",value:function(){B(L(e.prototype),"render",this).call(this),this.iconView.fillColor="hsl(0, 0%, 100%)"}}]),e}(be);E(37);var Vc=function(a){P(e,a);var i=M(e);function e(n,t){var r;A(this,e),r=i.call(this,n);var o=t&&t.colorDefinitions||[],s={};return t&&t.columns&&(s.gridTemplateColumns="repeat( ".concat(t.columns,", 1fr)")),r.set("selectedColor"),r.items=r.createCollection(),r.focusTracker=new lt,r.keystrokes=new ft,r._focusCycler=new Lt({focusables:r.items,focusTracker:r.focusTracker,keystrokeHandler:r.keystrokes,actions:{focusPrevious:"arrowleft",focusNext:"arrowright"}}),r.items.on("add",function(l,c){c.isOn=c.color===r.selectedColor}),o.forEach(function(l){var c=new Lc;c.set({color:l.color,label:l.label,tooltip:!0,hasBorder:l.options.hasBorder}),c.on("execute",function(){r.fire("execute",{value:l.color,hasBorder:l.options.hasBorder,label:l.label})}),r.items.add(c)}),r.setTemplate({tag:"div",children:r.items,attributes:{class:["ck","ck-color-grid"],style:s}}),r.on("change:selectedColor",function(l,c,u){var h,d=k(r.items);try{for(d.s();!(h=d.n()).done;){var f=h.value;f.isOn=f.color===u}}catch(v){d.e(v)}finally{d.f()}}),r}return C(e,[{key:"focus",value:function(){this.items.length&&this.items.first.focus()}},{key:"focusLast",value:function(){this.items.length&&this.items.last.focus()}},{key:"render",value:function(){var t=this;B(L(e.prototype),"render",this).call(this);var o,r=k(this.items);try{for(r.s();!(o=r.n()).done;)this.focusTracker.add(o.value.element)}catch(l){r.e(l)}finally{r.f()}this.items.on("add",function(l,c){t.focusTracker.add(c.element)}),this.items.on("remove",function(l,c){t.focusTracker.remove(c.element)}),this.keystrokes.listenTo(this.element)}}]),e}(ue);E(39);var jc=function(a){P(e,a);var i=M(e);function e(n){var t;A(this,e),(t=i.call(this,n)).set("text"),t.set("for"),t.id="ck-editor__label_"+Et();var r=t.bindTemplate;return t.setTemplate({tag:"label",attributes:{class:["ck","ck-label"],id:t.id,for:r.to("for")},children:[{text:r.to("text")}]}),t}return C(e)}(ue),Bc=function(a){P(e,a);var i=M(e);function e(n){var t;return A(this,e),(t=i.call(this,n)).set("isEmpty",!0),t.on("change",function(){t.set("isEmpty",0===t.length)}),t}return C(e,[{key:"add",value:function(t,r){this.find(function(o){return o.color===t.color})||B(L(e.prototype),"add",this).call(this,t,r)}},{key:"hasColor",value:function(t){return!!this.find(function(r){return r.color===t})}}]),e}(Qe);se(Bc,Re),E(41);var Em=function(a){P(e,a);var i=M(e);function e(n,t){var r,o=t.colors,s=t.columns,l=t.removeButtonLabel,c=t.documentColorsLabel,u=t.documentColorsCount;return A(this,e),(r=i.call(this,n)).items=r.createCollection(),r.colorDefinitions=o,r.focusTracker=new lt,r.keystrokes=new ft,r.set("selectedColor"),r.removeButtonLabel=l,r.columns=s,r.documentColors=new Bc,r.documentColorsCount=u,r._focusCycler=new Lt({focusables:r.items,focusTracker:r.focusTracker,keystrokeHandler:r.keystrokes,actions:{focusPrevious:"arrowup",focusNext:"arrowdown"}}),r._documentColorsLabel=c,r.setTemplate({tag:"div",attributes:{class:["ck","ck-color-table"]},children:r.items}),r.items.add(r._removeColorButton()),r}return C(e,[{key:"updateDocumentColors",value:function(t,r){var o=t.document,s=this.documentColorsCount;this.documentColors.clear();var c,l=k(o.getRootNames());try{for(l.s();!(c=l.n()).done;){var v,d=o.getRoot(c.value),h=t.createRangeIn(d),f=k(h.getItems());try{for(f.s();!(v=f.n()).done;){var g=v.value;if(g.is("$textProxy")&&g.hasAttribute(r)&&(this._addColorToDocumentColors(g.getAttribute(r)),this.documentColors.length>=s))return}}catch(m){f.e(m)}finally{f.f()}}}catch(m){l.e(m)}finally{l.f()}}},{key:"updateSelectedColors",value:function(){var t=this.documentColorsGrid,o=this.selectedColor;this.staticColorsGrid.selectedColor=o,t&&(t.selectedColor=o)}},{key:"render",value:function(){B(L(e.prototype),"render",this).call(this);var r,t=k(this.items);try{for(t.s();!(r=t.n()).done;)this.focusTracker.add(r.value.element)}catch(s){t.e(s)}finally{t.f()}this.keystrokes.listenTo(this.element)}},{key:"appendGrids",value:function(){if(!this.staticColorsGrid&&(this.staticColorsGrid=this._createStaticColorsGrid(),this.items.add(this.staticColorsGrid),this.documentColorsCount)){var t=vt.bind(this.documentColors,this.documentColors),r=new jc(this.locale);r.text=this._documentColorsLabel,r.extendTemplate({attributes:{class:["ck","ck-color-grid__label",t.if("isEmpty","ck-hidden")]}}),this.items.add(r),this.documentColorsGrid=this._createDocumentColorsGrid(),this.items.add(this.documentColorsGrid)}}},{key:"focus",value:function(){this._focusCycler.focusFirst()}},{key:"focusLast",value:function(){this._focusCycler.focusLast()}},{key:"_removeColorButton",value:function(){var t=this,r=new be;return r.set({withText:!0,icon:'<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M8.636 9.531l-2.758 3.94a.5.5 0 0 0 .122.696l3.224 2.284h1.314l2.636-3.736L8.636 9.53zm.288 8.451L5.14 15.396a2 2 0 0 1-.491-2.786l6.673-9.53a2 2 0 0 1 2.785-.49l3.742 2.62a2 2 0 0 1 .491 2.785l-7.269 10.053-2.147-.066z"/><path d="M4 18h5.523v-1H4zm-2 0h1v-1H2z"/></svg>',tooltip:!0,label:this.removeButtonLabel}),r.class="ck-color-table__remove-color",r.on("execute",function(){t.fire("execute",{value:null})}),r}},{key:"_createStaticColorsGrid",value:function(){var t=new Vc(this.locale,{colorDefinitions:this.colorDefinitions,columns:this.columns});return t.delegate("execute").to(this),t}},{key:"_createDocumentColorsGrid",value:function(){var t=this,r=vt.bind(this.documentColors,this.documentColors),o=new Vc(this.locale,{columns:this.columns});return o.delegate("execute").to(this),o.extendTemplate({attributes:{class:r.if("isEmpty","ck-hidden")}}),o.items.bindTo(this.documentColors).using(function(s){var l=new Lc;return l.set({color:s.color,hasBorder:s.options&&s.options.hasBorder}),s.label&&l.set({label:s.label,tooltip:!0}),l.on("execute",function(){t.fire("execute",{value:s.color})}),l}),this.documentColors.on("change:isEmpty",function(s,l,c){c&&(o.selectedColor=null)}),o}},{key:"_addColorToDocumentColors",value:function(t){var r=this.colorDefinitions.find(function(o){return o.color===t});this.documentColors.add(r?Object.assign({},r):{color:t,label:t,options:{hasBorder:!1}})}}]),e}(ue);function zc(a,i){var t,e={model:{key:a,values:[]},view:{},upcastAlso:{}},n=k(i);try{for(n.s();!(t=n.n()).done;){var r=t.value;e.model.values.push(r.model),e.view[r.model]=r.view,r.upcastAlso&&(e.upcastAlso[r.model]=r.upcastAlso)}}catch(o){n.e(o)}finally{n.f()}return e}function Fc(a){return function(i){return i.getStyle(a).replace(/\s/g,"")}}function Uc(a){return function(i,e){return e.writer.createAttributeElement("span",{style:"".concat(a,":").concat(i)},{priority:7})}}var Mm=function(a){P(e,a);var i=M(e);function e(n){return A(this,e),i.call(this,n,"fontSize")}return C(e)}(qr);function Hc(a){return a.map(function(i){return function(e){if("object"==typeof(n=e)&&n.title&&n.model&&n.view)return No(e);var n,r,t=Wc[r=e]||Wc[r.model];return t?No(t):"default"===e?{model:void 0,title:"Default"}:function(r){var o;if("object"==typeof r){if(!r.model)throw new I.b("font-size-invalid-definition: Provided font size definition is invalid.",null,r);o=parseFloat(r.model)}else o=parseFloat(r);return isNaN(o)}(e)?void 0:function(r){return"number"!=typeof r&&"string"!=typeof r||(r={title:String(r),model:parseFloat(r)+"px"}),r.view={name:"span",styles:{"font-size":r.model}},No(r)}(e)}(i)}).filter(function(i){return!!i})}var Wc={get tiny(){return{title:"Tiny",model:"tiny",view:{name:"span",classes:"text-tiny",priority:7}}},get small(){return{title:"Small",model:"small",view:{name:"span",classes:"text-small",priority:7}}},get big(){return{title:"Big",model:"big",view:{name:"span",classes:"text-big",priority:7}}},get huge(){return{title:"Huge",model:"huge",view:{name:"span",classes:"text-huge",priority:7}}}};function No(a){return a.view.priority||(a.view.priority=7),a}var Im=function(a){P(e,a);var i=M(e);function e(n){var t;return A(this,e),t=i.call(this,n),n.config.define("fontSize",{options:["tiny","small","default","big","huge"],supportAllValues:!1}),t}return C(e,[{key:"init",value:function(){var t=this.editor;t.model.schema.extend("$text",{allowAttributes:"fontSize"}),t.model.schema.setAttributeProperties("fontSize",{isFormatting:!0,copyOnEnter:!0});var r=t.config.get("fontSize.supportAllValues"),o=zc("fontSize",Hc(this.editor.config.get("fontSize.options")).filter(function(s){return s.model}));r?this._prepareAnyValueConverters(o):t.conversion.attributeToElement(o),t.commands.add("fontSize",new Mm(t))}},{key:"_prepareAnyValueConverters",value:function(t){var r=this.editor,o=t.model.values.filter(function(s){return!String(s).match(/[\d.]+[\w%]+/)});if(o.length)throw new I.b("font-size-invalid-use-of-named-presets: If config.fontSize.supportAllValues is set to true, you need to use numerical values as font size options.",null,{presets:o});r.conversion.for("downcast").attributeToElement({model:"fontSize",view:function(l,c){if(l)return c.writer.createAttributeElement("span",{style:"font-size:"+l},{priority:7})}}),r.conversion.for("upcast").attributeToAttribute({model:{key:"fontSize",value:function(l){return l.getStyle("font-size")}},view:{name:"span"}})}}],[{key:"pluginName",get:function(){return"FontSizeEditing"}}]),e}(U),tr=C(function a(i,e){A(this,a),e&&Un(this,e),i&&this.set(i)});se(tr,Re),E(43);var Nm=function(a){P(e,a);var i=M(e);function e(){return A(this,e),i.apply(this,arguments)}return C(e,[{key:"init",value:function(){var t=this,r=this.editor,o=r.t,s=this._getLocalizedOptions(),l=r.commands.get("fontSize");r.ui.componentFactory.add("fontSize",function(c){var u=yt(c);return Wr(u,function(d,h){var g,f=new Qe,v=k(d);try{var m=function(){var y=g.value,w={type:"button",model:new tr({commandName:"fontSize",commandParam:y.model,label:y.title,class:"ck-fontsize-option",withText:!0})};y.view&&y.view.styles&&w.model.set("labelStyle","font-size:"+y.view.styles["font-size"]),y.view&&y.view.classes&&w.model.set("class","".concat(w.model.class," ").concat(y.view.classes)),w.model.bind("isOn").to(h,"value",function(_){return _===y.model}),f.add(w)};for(v.s();!(g=v.n()).done;)m()}catch(p){v.e(p)}finally{v.f()}return f}(s,l)),u.buttonView.set({label:o("Font Size"),icon:'<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M9.816 11.5L7.038 4.785 4.261 11.5h5.555zm.62 1.5H3.641l-1.666 4.028H.312l5.789-14h1.875l5.789 14h-1.663L10.436 13zm7.55 2.279l.779-.779.707.707-2.265 2.265-2.193-2.265.707-.707.765.765V4.825c0-.042 0-.083.002-.123l-.77.77-.707-.707L17.207 2.5l2.265 2.265-.707.707-.782-.782c.002.043.003.089.003.135v10.454z"/></svg>',tooltip:!0}),u.extendTemplate({attributes:{class:["ck-font-size-dropdown"]}}),u.bind("isEnabled").to(l),t.listenTo(u,"execute",function(d){r.execute(d.source.commandName,{value:d.source.commandParam}),r.editing.view.focus()}),u})}},{key:"_getLocalizedOptions",value:function(){var t=this.editor,r=t.t,o={Default:r("Default"),Tiny:r("Tiny"),Small:r("Small"),Big:r("Big"),Huge:r("Huge")};return Hc(t.config.get("fontSize").options).map(function(s){var l=o[s.title];return l&&l!=s.title&&(s=Object.assign({},s,{title:l})),s})}}]),e}(U),Rm=function(a){P(e,a);var i=M(e);function e(n){return A(this,e),i.call(this,n,"fontFamily")}return C(e)}(qr);function qc(a){return a.map(Om).filter(function(i){return!!i})}function Om(a){return"object"==typeof a?a:"default"===a?{title:"Default",model:void 0}:"string"==typeof a?function(i){var e=i.replace(/"|'/g,"").split(","),n=e[0],t=e.map(Dm).join(", ");return{title:n,model:t,view:{name:"span",styles:{"font-family":t},priority:7}}}(a):void 0}function Dm(a){return(a=a.trim()).indexOf(" ")>0&&(a="'".concat(a,"'")),a}var Lm=function(a){P(e,a);var i=M(e);function e(n){var t;return A(this,e),t=i.call(this,n),n.config.define("fontFamily",{options:["default","Arial, Helvetica, sans-serif","Courier New, Courier, monospace","Georgia, serif","Lucida Sans Unicode, Lucida Grande, sans-serif","Tahoma, Geneva, sans-serif","Times New Roman, Times, serif","Trebuchet MS, Helvetica, sans-serif","Verdana, Geneva, sans-serif"],supportAllValues:!1}),t}return C(e,[{key:"init",value:function(){var t=this.editor;t.model.schema.extend("$text",{allowAttributes:"fontFamily"}),t.model.schema.setAttributeProperties("fontFamily",{isFormatting:!0,copyOnEnter:!0});var r=zc("fontFamily",qc(t.config.get("fontFamily.options")).filter(function(o){return o.model}));t.config.get("fontFamily.supportAllValues")?this._prepareAnyValueConverters():t.conversion.attributeToElement(r),t.commands.add("fontFamily",new Rm(t))}},{key:"_prepareAnyValueConverters",value:function(){var t=this.editor;t.conversion.for("downcast").attributeToElement({model:"fontFamily",view:function(o,s){return s.writer.createAttributeElement("span",{style:"font-family:"+o},{priority:7})}}),t.conversion.for("upcast").attributeToAttribute({model:{key:"fontFamily",value:function(o){return o.getStyle("font-family")}},view:{name:"span",styles:{"font-family":/.*/}}})}}],[{key:"pluginName",get:function(){return"FontFamilyEditing"}}]),e}(U),Vm=function(a){P(e,a);var i=M(e);function e(){return A(this,e),i.apply(this,arguments)}return C(e,[{key:"init",value:function(){var t=this,r=this.editor,o=r.t,s=this._getLocalizedOptions(),l=r.commands.get("fontFamily");r.ui.componentFactory.add("fontFamily",function(c){var u=yt(c);return Wr(u,function(d,h){var g,f=new Qe,v=k(d);try{var m=function(){var y=g.value,w={type:"button",model:new tr({commandName:"fontFamily",commandParam:y.model,label:y.title,withText:!0})};w.model.bind("isOn").to(h,"value",function(_){return _===y.model||!(!_||!y.model)&&_.split(",")[0].replace(/'/g,"").toLowerCase()===y.model.toLowerCase()}),y.view&&y.view.styles&&w.model.set("labelStyle","font-family: "+y.view.styles["font-family"]),f.add(w)};for(v.s();!(g=v.n()).done;)m()}catch(p){v.e(p)}finally{v.f()}return f}(s,l)),u.buttonView.set({label:o("Font Family"),icon:'<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M11.03 3h6.149a.75.75 0 1 1 0 1.5h-5.514L11.03 3zm1.27 3h4.879a.75.75 0 1 1 0 1.5h-4.244L12.3 6zm1.27 3h3.609a.75.75 0 1 1 0 1.5h-2.973L13.57 9zm-2.754 2.5L8.038 4.785 5.261 11.5h5.555zm.62 1.5H4.641l-1.666 4.028H1.312l5.789-14h1.875l5.789 14h-1.663L11.436 13z"/></svg>',tooltip:!0}),u.extendTemplate({attributes:{class:"ck-font-family-dropdown"}}),u.bind("isEnabled").to(l),t.listenTo(u,"execute",function(d){r.execute(d.source.commandName,{value:d.source.commandParam}),r.editing.view.focus()}),u})}},{key:"_getLocalizedOptions",value:function(){var t=this.editor,r=t.t;return qc(t.config.get("fontFamily").options).map(function(o){return"Default"===o.title&&(o.title=r("Default")),o})}}]),e}(U),jm=function(a){P(e,a);var i=M(e);function e(n){return A(this,e),i.call(this,n,"fontColor")}return C(e)}(qr),Bm=function(a){P(e,a);var i=M(e);function e(n){var t;return A(this,e),t=i.call(this,n),n.config.define("fontColor",{colors:[{color:"hsl(0, 0%, 0%)",label:"Black"},{color:"hsl(0, 0%, 30%)",label:"Dim grey"},{color:"hsl(0, 0%, 60%)",label:"Grey"},{color:"hsl(0, 0%, 90%)",label:"Light grey"},{color:"hsl(0, 0%, 100%)",label:"White",hasBorder:!0},{color:"hsl(0, 75%, 60%)",label:"Red"},{color:"hsl(30, 75%, 60%)",label:"Orange"},{color:"hsl(60, 75%, 60%)",label:"Yellow"},{color:"hsl(90, 75%, 60%)",label:"Light green"},{color:"hsl(120, 75%, 60%)",label:"Green"},{color:"hsl(150, 75%, 60%)",label:"Aquamarine"},{color:"hsl(180, 75%, 60%)",label:"Turquoise"},{color:"hsl(210, 75%, 60%)",label:"Light blue"},{color:"hsl(240, 75%, 60%)",label:"Blue"},{color:"hsl(270, 75%, 60%)",label:"Purple"}],columns:5}),n.conversion.for("upcast").elementToAttribute({view:{name:"span",styles:{color:/[\s\S]+/}},model:{key:"fontColor",value:Fc("color")}}),n.conversion.for("downcast").attributeToElement({model:"fontColor",view:Uc("color")}),n.commands.add("fontColor",new jm(n)),n.model.schema.extend("$text",{allowAttributes:"fontColor"}),n.model.schema.setAttributeProperties("fontColor",{isFormatting:!0,copyOnEnter:!0}),t}return C(e,null,[{key:"pluginName",get:function(){return"FontColorEditing"}}]),e}(U);function zm(a){return"string"==typeof a?{model:a,label:a,hasBorder:!1,view:{name:"span",styles:{color:a}}}:{model:a.color,label:a.label||a.color,hasBorder:void 0!==a.hasBorder&&a.hasBorder,view:{name:"span",styles:{color:""+a.color}}}}var Gc=function(a){P(e,a);var i=M(e);function e(n,t){var r,o=t.commandName,s=t.icon,l=t.componentName,c=t.dropdownLabel;return A(this,e),(r=i.call(this,n)).commandName=o,r.componentName=l,r.icon=s,r.dropdownLabel=c,r.columns=n.config.get(r.componentName+".columns"),r}return C(e,[{key:"init",value:function(){var d,h,f,v,t=this,r=this.editor,o=r.locale,s=o.t,l=r.commands.get(this.commandName),c=(d=o,h=r.config.get(this.componentName).colors.map(zm).filter(function(d){return!!d}),v={Black:(f=d.t)("Black"),"Dim grey":f("Dim grey"),Grey:f("Grey"),"Light grey":f("Light grey"),White:f("White"),Red:f("Red"),Orange:f("Orange"),Yellow:f("Yellow"),"Light green":f("Light green"),Green:f("Green"),Aquamarine:f("Aquamarine"),Turquoise:f("Turquoise"),"Light blue":f("Light blue"),Blue:f("Blue"),Purple:f("Purple")},h.map(function(g){var m=v[g.label];return m&&m!=g.label&&(g.label=m),g})),u=r.config.get(this.componentName+".documentColors");r.ui.componentFactory.add(this.componentName,function(d){var h=yt(d);return t.colorTableView=function(f){var v=f.dropdownView,T=new Em(v.locale,{colors:f.colors,columns:f.columns,removeButtonLabel:f.removeButtonLabel,documentColorsLabel:f.documentColorsLabel,documentColorsCount:f.documentColorsCount});return v.colorTableView=T,v.panelView.children.add(T),T.delegate("execute").to(v,"execute"),T}({dropdownView:h,colors:c.map(function(f){return{label:f.label,color:f.model,options:{hasBorder:f.hasBorder}}}),columns:t.columns,removeButtonLabel:s("Remove color"),documentColorsLabel:0!==u?s("Document colors"):void 0,documentColorsCount:void 0===u?t.columns:u}),t.colorTableView.bind("selectedColor").to(l,"value"),h.buttonView.set({label:t.dropdownLabel,icon:t.icon,tooltip:!0}),h.extendTemplate({attributes:{class:"ck-color-ui-dropdown"}}),h.bind("isEnabled").to(l),h.on("execute",function(f,v){r.execute(t.commandName,v),r.editing.view.focus()}),h.on("change:isOpen",function(f,v,g){h.colorTableView.appendGrids(),g&&(0!==u&&t.colorTableView.updateDocumentColors(r.model,t.componentName),t.colorTableView.updateSelectedColors())}),h})}}]),e}(U),Fm=function(a){P(e,a);var i=M(e);function e(n){return A(this,e),i.call(this,n,{commandName:"fontColor",componentName:"fontColor",icon:'<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M12.4 10.3L10 4.5l-2.4 5.8h4.8zm.5 1.2H7.1L5.7 15H4.2l5-12h1.6l5 12h-1.5L13 11.5zm3.1 7H4a1 1 0 0 1 0-2h12a1 1 0 0 1 0 2z"/></svg>',dropdownLabel:(0,n.locale.t)("Font Color")})}return C(e,null,[{key:"pluginName",get:function(){return"FontColorUI"}}]),e}(Gc),Um=function(a){P(e,a);var i=M(e);function e(n){return A(this,e),i.call(this,n,"fontBackgroundColor")}return C(e)}(qr),Hm=/^#([0-9a-f]{3,4}|[0-9a-f]{6}|[0-9a-f]{8})$/i,Wm=/^rgb\([ ]?([0-9]{1,3}[ %]?,[ ]?){2,3}[0-9]{1,3}[ %]?\)$/i,qm=/^rgba\([ ]?([0-9]{1,3}[ %]?,[ ]?){3}(1|[0-9]+%|[0]?\.?[0-9]+)\)$/i,Gm=/^hsl\([ ]?([0-9]{1,3}[ %]?[,]?[ ]*){3}(1|[0-9]+%|[0]?\.?[0-9]+)?\)$/i,Ym=/^hsla\([ ]?([0-9]{1,3}[ %]?,[ ]?){2,3}(1|[0-9]+%|[0]?\.?[0-9]+)\)$/i,$m=new Set(["black","silver","gray","white","maroon","red","purple","fuchsia","green","lime","olive","yellow","navy","blue","teal","aqua","orange","aliceblue","antiquewhite","aquamarine","azure","beige","bisque","blanchedalmond","blueviolet","brown","burlywood","cadetblue","chartreuse","chocolate","coral","cornflowerblue","cornsilk","crimson","cyan","darkblue","darkcyan","darkgoldenrod","darkgray","darkgreen","darkgrey","darkkhaki","darkmagenta","darkolivegreen","darkorange","darkorchid","darkred","darksalmon","darkseagreen","darkslateblue","darkslategray","darkslategrey","darkturquoise","darkviolet","deeppink","deepskyblue","dimgray","dimgrey","dodgerblue","firebrick","floralwhite","forestgreen","gainsboro","ghostwhite","gold","goldenrod","greenyellow","grey","honeydew","hotpink","indianred","indigo","ivory","khaki","lavender","lavenderblush","lawngreen","lemonchiffon","lightblue","lightcoral","lightcyan","lightgoldenrodyellow","lightgray","lightgreen","lightgrey","lightpink","lightsalmon","lightseagreen","lightskyblue","lightslategray","lightslategrey","lightsteelblue","lightyellow","limegreen","linen","magenta","mediumaquamarine","mediumblue","mediumorchid","mediumpurple","mediumseagreen","mediumslateblue","mediumspringgreen","mediumturquoise","mediumvioletred","midnightblue","mintcream","mistyrose","moccasin","navajowhite","oldlace","olivedrab","orangered","orchid","palegoldenrod","palegreen","paleturquoise","palevioletred","papayawhip","peachpuff","peru","pink","plum","powderblue","rosybrown","royalblue","saddlebrown","salmon","sandybrown","seagreen","seashell","sienna","skyblue","slateblue","slategray","slategrey","snow","springgreen","steelblue","tan","thistle","tomato","turquoise","violet","wheat","whitesmoke","yellowgreen","rebeccapurple","currentcolor","transparent"]);function Km(a){return a.startsWith("#")?Hm.test(a):a.startsWith("rgb")?Wm.test(a)||qm.test(a):a.startsWith("hsl")?Gm.test(a)||Ym.test(a):$m.has(a.toLowerCase())}var Jm=["repeat-x","repeat-y","repeat","space","round","no-repeat"],Qm=["center","top","bottom","left","right"];function Zm(a){return Qm.includes(a)}var Xm=["fixed","scroll","local"];function ep(a){return Xm.includes(a)}var tp=/^url\(/;function np(a){return tp.test(a)}function rp(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";if(""===a)return{top:void 0,right:void 0,bottom:void 0,left:void 0};var i=Yc(a),e=i[0],t=i[1]||e;return{top:e,bottom:i[2]||e,right:t,left:i[3]||t}}function ip(a){var i=a.top,e=a.right,n=a.bottom,t=a.left,r=[];return t!==e?r.push(i,e,n,t):n!==i?r.push(i,e,n):e!==i?r.push(i,e):r.push(i),r.join(" ")}function Yc(a){return a.replace(/, /g,",").split(" ").map(function(i){return i.replace(/,/g,", ")})}function op(a){a.setNormalizer("background",ap),a.setNormalizer("background-color",function(i){return{path:"background.color",value:i}}),a.setReducer("background",function(i){var e=[];return e.push(["background-color",i.color]),e})}function ap(a){var t,i={},e=Yc(a),n=k(e);try{for(n.s();!(t=n.n()).done;){var r=t.value;Jm.includes(r)?(i.repeat=i.repeat||[],i.repeat.push(r)):Zm(r)?(i.position=i.position||[],i.position.push(r)):ep(r)?i.attachment=r:Km(r)?i.color=r:np(r)&&(i.image=r)}}catch(s){n.e(s)}finally{n.f()}return{path:"background",value:i}}var sp=function(a){P(e,a);var i=M(e);function e(n){var t;return A(this,e),t=i.call(this,n),n.config.define("fontBackgroundColor",{colors:[{color:"hsl(0, 0%, 0%)",label:"Black"},{color:"hsl(0, 0%, 30%)",label:"Dim grey"},{color:"hsl(0, 0%, 60%)",label:"Grey"},{color:"hsl(0, 0%, 90%)",label:"Light grey"},{color:"hsl(0, 0%, 100%)",label:"White",hasBorder:!0},{color:"hsl(0, 75%, 60%)",label:"Red"},{color:"hsl(30, 75%, 60%)",label:"Orange"},{color:"hsl(60, 75%, 60%)",label:"Yellow"},{color:"hsl(90, 75%, 60%)",label:"Light green"},{color:"hsl(120, 75%, 60%)",label:"Green"},{color:"hsl(150, 75%, 60%)",label:"Aquamarine"},{color:"hsl(180, 75%, 60%)",label:"Turquoise"},{color:"hsl(210, 75%, 60%)",label:"Light blue"},{color:"hsl(240, 75%, 60%)",label:"Blue"},{color:"hsl(270, 75%, 60%)",label:"Purple"}],columns:5}),n.data.addStyleProcessorRules(op),n.conversion.for("upcast").elementToAttribute({view:{name:"span",styles:{"background-color":/[\s\S]+/}},model:{key:"fontBackgroundColor",value:Fc("background-color")}}),n.conversion.for("downcast").attributeToElement({model:"fontBackgroundColor",view:Uc("background-color")}),n.commands.add("fontBackgroundColor",new Um(n)),n.model.schema.extend("$text",{allowAttributes:"fontBackgroundColor"}),n.model.schema.setAttributeProperties("fontBackgroundColor",{isFormatting:!0,copyOnEnter:!0}),t}return C(e,null,[{key:"pluginName",get:function(){return"FontBackgroundColorEditing"}}]),e}(U),lp=function(a){P(e,a);var i=M(e);function e(n){return A(this,e),i.call(this,n,{commandName:"fontBackgroundColor",componentName:"fontBackgroundColor",icon:'<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M4 2h12a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2zm8.38 9.262H7.62L10 5.506l2.38 5.756zm.532 1.285L14.34 16h1.426L10.804 4H9.196L4.234 16H5.66l1.428-3.453h5.824z"/></svg>',dropdownLabel:(0,n.locale.t)("Font Background Color")})}return C(e,null,[{key:"pluginName",get:function(){return"FontBackgroundColorUI"}}]),e}(Gc),Gr=function(){function a(i){A(this,a),this.context=i}return C(a,[{key:"destroy",value:function(){this.stopListening()}}],[{key:"isContextPlugin",get:function(){return!0}}]),a}();se(Gr,Re);var $c=function(a,i){P(n,a);var e=M(n);function n(){return A(this,n),e.apply(this,arguments)}return C(n,[{key:"init",value:function(){this.set("hasAny",!1),this._actions=new Qe({idProperty:"_id"}),this._actions.delegate("add","remove").to(this)}},{key:"add",value:function(r){if("string"!=typeof r)throw new I.b("pendingactions-add-invalid-message: The message must be a string.",this);var o=Object.create(Re);return o.set("message",r),this._actions.add(o),this.hasAny=!0,o}},{key:"remove",value:function(r){this._actions.remove(r),this.hasAny=!!this._actions.length}},{key:"first",get:function(){return this._actions.get(0)}},{key:i,value:function(){return this._actions[Symbol.iterator]()}}],[{key:"pluginName",get:function(){return"PendingActions"}}]),n}(Gr,Symbol.iterator),Kc=function(){function a(){var i=this;A(this,a);var e=new window.FileReader;this._reader=e,this._data=void 0,this.set("loaded",0),e.onprogress=function(n){i.loaded=n.loaded}}return C(a,[{key:"error",get:function(){return this._reader.error}},{key:"data",get:function(){return this._data}},{key:"read",value:function(e){var n=this,t=this._reader;return this.total=e.size,new Promise(function(r,o){t.onload=function(){var s=t.result;n._data=s,r(s)},t.onerror=function(){o("error")},t.onabort=function(){o("aborted")},n._reader.readAsDataURL(e)})}},{key:"abort",value:function(){this._reader.abort()}}]),a}();se(Kc,Re);var Pt=function(a){P(e,a);var i=M(e);function e(){return A(this,e),i.apply(this,arguments)}return C(e,[{key:"init",value:function(){var t=this;this.loaders=new Qe,this.loaders.on("add",function(){return t._updatePendingAction()}),this.loaders.on("remove",function(){return t._updatePendingAction()}),this._loadersMap=new Map,this._pendingAction=null,this.set("uploaded",0),this.set("uploadTotal",null),this.bind("uploadedPercent").to(this,"uploaded",this,"uploadTotal",function(r,o){return o?r/o*100:0})}},{key:"getLoader",value:function(t){return this._loadersMap.get(t)||null}},{key:"createLoader",value:function(t){var r=this;if(!this.createUploadAdapter)return console.warn(Object(I.a)("filerepository-no-upload-adapter: Upload adapter is not defined.")),null;var o=new Ro(Promise.resolve(t),this.createUploadAdapter);return this.loaders.add(o),this._loadersMap.set(t,o),t instanceof Promise&&o.file.then(function(s){r._loadersMap.set(s,o)}).catch(function(){}),o.on("change:uploaded",function(){var c,s=0,l=k(r.loaders);try{for(l.s();!(c=l.n()).done;)s+=c.value.uploaded}catch(d){l.e(d)}finally{l.f()}r.uploaded=s}),o.on("change:uploadTotal",function(){var c,s=0,l=k(r.loaders);try{for(l.s();!(c=l.n()).done;){var u=c.value;u.uploadTotal&&(s+=u.uploadTotal)}}catch(d){l.e(d)}finally{l.f()}r.uploadTotal=s}),o}},{key:"destroyLoader",value:function(t){var r=this,o=t instanceof Ro?t:this.getLoader(t);o._destroy(),this.loaders.remove(o),this._loadersMap.forEach(function(s,l){s===o&&r._loadersMap.delete(l)})}},{key:"_updatePendingAction",value:function(){var t=this.editor.plugins.get($c);if(this.loaders.length){if(!this._pendingAction){var r=this.editor.t,o=function(l){return"".concat(r("Upload in progress")," ").concat(parseInt(l),"%.")};this._pendingAction=t.add(o(this.uploadedPercent)),this._pendingAction.bind("message").to(this,"uploadedPercent",o)}}else t.remove(this._pendingAction),this._pendingAction=null}}],[{key:"pluginName",get:function(){return"FileRepository"}},{key:"requires",get:function(){return[$c]}}]),e}(U);se(Pt,Re);var Ro=function(){function a(i,e){A(this,a),this.id=Et(),this._filePromiseWrapper=this._createFilePromiseWrapper(i),this._adapter=e(this),this._reader=new Kc,this.set("status","idle"),this.set("uploaded",0),this.set("uploadTotal",null),this.bind("uploadedPercent").to(this,"uploaded",this,"uploadTotal",function(n,t){return t?n/t*100:0}),this.set("uploadResponse",null)}return C(a,[{key:"file",get:function(){var e=this;return this._filePromiseWrapper?this._filePromiseWrapper.promise.then(function(n){return e._filePromiseWrapper?n:null}):Promise.resolve(null)}},{key:"data",get:function(){return this._reader.data}},{key:"read",value:function(){var e=this;if("idle"!=this.status)throw new I.b("filerepository-read-wrong-status: You cannot call read if the status is different than idle.",this);return this.status="reading",this.file.then(function(n){return e._reader.read(n)}).then(function(n){if("reading"!==e.status)throw e.status;return e.status="idle",n}).catch(function(n){throw"aborted"===n?(e.status="aborted","aborted"):(e.status="error",e._reader.error?e._reader.error:n)})}},{key:"upload",value:function(){var e=this;if("idle"!=this.status)throw new I.b("filerepository-upload-wrong-status: You cannot call upload if the status is different than idle.",this);return this.status="uploading",this.file.then(function(){return e._adapter.upload()}).then(function(n){return e.uploadResponse=n,e.status="idle",n}).catch(function(n){throw"aborted"===e.status?"aborted":(e.status="error",n)})}},{key:"abort",value:function(){var e=this.status;this.status="aborted",this._filePromiseWrapper.isFulfilled?"reading"==e?this._reader.abort():"uploading"==e&&this._adapter.abort&&this._adapter.abort():(this._filePromiseWrapper.promise.catch(function(){}),this._filePromiseWrapper.rejecter("aborted")),this._destroy()}},{key:"_destroy",value:function(){this._filePromiseWrapper=void 0,this._reader=void 0,this._adapter=void 0,this.uploadResponse=void 0}},{key:"_createFilePromiseWrapper",value:function(e){var n={};return n.promise=new Promise(function(t,r){n.rejecter=r,n.isFulfilled=!1,e.then(function(o){n.isFulfilled=!0,t(o)}).catch(function(o){n.isFulfilled=!0,r(o)})}),n}}]),a}();se(Ro,Re);var Jc=function(a){P(e,a);var i=M(e);function e(){return A(this,e),i.apply(this,arguments)}return C(e,[{key:"init",value:function(){var t=this,r=this.editor.config.get("ckfinder.uploadUrl");r&&(this.editor.plugins.get(Pt).createUploadAdapter=function(o){return new up(o,r,t.editor.t)})}}],[{key:"requires",get:function(){return[Pt]}},{key:"pluginName",get:function(){return"CKFinderUploadAdapter"}}]),e}(U),up=function(){function a(i,e,n){A(this,a),this.loader=i,this.url=e,this.t=n}return C(a,[{key:"upload",value:function(){var e=this;return this.loader.file.then(function(n){return new Promise(function(t,r){e._initRequest(),e._initListeners(t,r,n),e._sendRequest(n)})})}},{key:"abort",value:function(){this.xhr&&this.xhr.abort()}},{key:"_initRequest",value:function(){var e=this.xhr=new XMLHttpRequest;e.open("POST",this.url,!0),e.responseType="json"}},{key:"_initListeners",value:function(e,n,t){var r=this.xhr,o=this.loader,s=(0,this.t)("Cannot upload file:")+" ".concat(t.name,".");r.addEventListener("error",function(){return n(s)}),r.addEventListener("abort",function(){return n()}),r.addEventListener("load",function(){var l=r.response;if(!l||!l.uploaded)return n(l&&l.error&&l.error.message?l.error.message:s);e({default:l.url})}),r.upload&&r.upload.addEventListener("progress",function(l){l.lengthComputable&&(o.uploadTotal=l.total,o.uploaded=l.loaded)})}},{key:"_sendRequest",value:function(e){var n=new FormData;n.append("upload",e),n.append("ckCsrfToken",function cp(){var e,a=function(n){n=n.toLowerCase();var o,t=document.cookie.split(";"),r=k(t);try{for(r.s();!(o=r.n()).done;){var l=o.value.split("=");if(decodeURIComponent(l[0].trim().toLowerCase())===n)return decodeURIComponent(l[1])}}catch(c){r.e(c)}finally{r.f()}return null}("ckCsrfToken");return a&&40==a.length||(e=a=function(n){var t="",r=new Uint8Array(40);window.crypto.getRandomValues(r);for(var o=0;o<r.length;o++){var s="abcdefghijklmnopqrstuvwxyz0123456789".charAt(r[o]%36);t+=Math.random()>.5?s.toUpperCase():s}return t}(),document.cookie=encodeURIComponent("ckCsrfToken")+"="+encodeURIComponent(e)+";path=/"),a}()),this.xhr.send(n)}}]),a}();function nr(a,i,e,n){var t,r=null;"function"==typeof n?t=n:(r=a.commands.get(n),t=function(){a.execute(n)}),a.model.document.on("change:data",function(o,s){if((!r||r.isEnabled)&&i.isEnabled){var l=Xe(a.model.document.selection.getRanges());if(l.isCollapsed&&"transparent"!=s.type){var c=Array.from(a.model.document.differ.getChanges()),u=c[0];if(1==c.length&&"insert"===u.type&&"$text"==u.name&&1==u.length){var d=u.position.parent;if(!(d.is("element","codeBlock")||r&&!0===r.value)){var h=d.getChild(0),f=a.model.createRangeOn(h);if(f.containsRange(l)||l.end.isEqual(f.end)){var v=e.exec(h.data.substr(0,l.end.offset));v&&a.model.enqueueChange(function(g){var m=g.createPositionAt(d,0),p=g.createPositionAt(d,v[0].length),y=new yn(m,p);!1!==t({match:v})&&g.remove(y),y.detach()})}}}}}})}function An(a,i,e,n){var t,r;e instanceof RegExp?t=e:r=e,r=r||function(o){for(var s,l=[],c=[];null!==(s=t.exec(o))&&!(s&&s.length<4);){var d=s.index,h=s[1],f=s[2],v=s[3],p=[(d+=s[0].length-(h+f+v).length)+h.length+f.length,d+h.length+f.length+v.length];l.push([d,d+h.length]),l.push(p),c.push([d+h.length,d+h.length+f.length])}return{remove:l,format:c}},a.model.document.on("change:data",function(o,s){if("transparent"!=s.type&&i.isEnabled){var l=a.model,c=l.document.selection;if(c.isCollapsed){var u=Array.from(l.document.differ.getChanges()),d=u[0];if(1==u.length&&"insert"===d.type&&"$text"==d.name&&1==d.length){var h=c.focus,v=(_=l.createRange(l.createPositionAt(h.parent,0),h),T=l,x=_.start,{text:Array.from(_.getItems()).reduce(function(N,D){return!D.is("$text")&&!D.is("$textProxy")||D.getAttribute("code")?(x=T.createPositionAfter(D),""):N+D.data},""),range:T.createRange(x,_.end)}),m=v.range,p=r(v.text),y=Qc(m.start,p.format,l),w=Qc(m.start,p.remove,l);y.length&&w.length&&l.enqueueChange(function(_){if(!1!==n(_,y)){var x,T=k(w.reverse());try{for(T.s();!(x=T.n()).done;)_.remove(x.value)}catch(D){T.e(D)}finally{T.f()}}})}}}var _,T,x})}function Qc(a,i,e){return i.filter(function(n){return void 0!==n[0]&&void 0!==n[1]}).map(function(n){return e.createRange(a.getShiftedBy(n[0]),a.getShiftedBy(n[1]))})}function Yr(a,i){return function(e,n){if(!a.commands.get(i).isEnabled)return!1;var o,t=a.model.schema.getValidRanges(n,i),r=k(t);try{for(r.s();!(o=r.n()).done;)e.setAttribute(i,!0,o.value)}catch(l){r.e(l)}finally{r.f()}e.removeSelectionAttribute(i)}}var $r=function(a){P(e,a);var i=M(e);function e(n,t){var r;return A(this,e),(r=i.call(this,n)).attributeKey=t,r}return C(e,[{key:"refresh",value:function(){var t=this.editor.model,r=t.document;this.value=this._getValueFromFirstAllowedNode(),this.isEnabled=t.schema.checkAttributeInSelection(r.selection,this.attributeKey)}},{key:"execute",value:function(){var t=this,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},o=this.editor.model,s=o.document.selection,l=void 0===r.forceValue?!this.value:r.forceValue;o.change(function(c){if(s.isCollapsed)l?c.setSelectionAttribute(t.attributeKey,!0):c.removeSelectionAttribute(t.attributeKey);else{var h,u=o.schema.getValidRanges(s.getRanges(),t.attributeKey),d=k(u);try{for(d.s();!(h=d.n()).done;){var f=h.value;l?c.setAttribute(t.attributeKey,l,f):c.removeAttribute(t.attributeKey,f)}}catch(v){d.e(v)}finally{d.f()}}})}},{key:"_getValueFromFirstAllowedNode",value:function(){var t=this.editor.model,r=t.schema,o=t.document.selection;if(o.isCollapsed)return o.hasAttribute(this.attributeKey);var l,s=k(o.getRanges());try{for(s.s();!(l=s.n()).done;){var d,u=k(l.value.getItems());try{for(u.s();!(d=u.n()).done;){var h=d.value;if(r.checkAttribute(h,this.attributeKey))return h.hasAttribute(this.attributeKey)}}catch(f){u.e(f)}finally{u.f()}}}catch(f){s.e(f)}finally{s.f()}return!1}}]),e}(ve),dp=function(a){P(e,a);var i=M(e);function e(){return A(this,e),i.apply(this,arguments)}return C(e,[{key:"init",value:function(){var t=this.editor;t.model.schema.extend("$text",{allowAttributes:"bold"}),t.model.schema.setAttributeProperties("bold",{isFormatting:!0,copyOnEnter:!0}),t.conversion.attributeToElement({model:"bold",view:"strong",upcastAlso:["b",function(r){var o=r.getStyle("font-weight");return o?"bold"==o||Number(o)>=600?{name:!0,styles:["font-weight"]}:void 0:null}]}),t.commands.add("bold",new $r(t,"bold")),t.keystrokes.set("CTRL+B","bold")}}],[{key:"pluginName",get:function(){return"BoldEditing"}}]),e}(U),hp=function(a){P(e,a);var i=M(e);function e(){return A(this,e),i.apply(this,arguments)}return C(e,[{key:"init",value:function(){var t=this,r=this.editor,o=r.t;r.ui.componentFactory.add("bold",function(s){var l=r.commands.get("bold"),c=new be(s);return c.set({label:o("Bold"),icon:'<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M10.187 17H5.773c-.637 0-1.092-.138-1.364-.415-.273-.277-.409-.718-.409-1.323V4.738c0-.617.14-1.062.419-1.332.279-.27.73-.406 1.354-.406h4.68c.69 0 1.288.041 1.793.124.506.083.96.242 1.36.478.341.197.644.447.906.75a3.262 3.262 0 0 1 .808 2.162c0 1.401-.722 2.426-2.167 3.075C15.05 10.175 16 11.315 16 13.01a3.756 3.756 0 0 1-2.296 3.504 6.1 6.1 0 0 1-1.517.377c-.571.073-1.238.11-2 .11zm-.217-6.217H7v4.087h3.069c1.977 0 2.965-.69 2.965-2.072 0-.707-.256-1.22-.768-1.537-.512-.319-1.277-.478-2.296-.478zM7 5.13v3.619h2.606c.729 0 1.292-.067 1.69-.2a1.6 1.6 0 0 0 .91-.765c.165-.267.247-.566.247-.897 0-.707-.26-1.176-.778-1.409-.519-.232-1.31-.348-2.375-.348H7z"/></svg>',keystroke:"CTRL+B",tooltip:!0,isToggleable:!0}),c.bind("isOn","isEnabled").to(l,"value","isEnabled"),t.listenTo(c,"execute",function(){r.execute("bold"),r.editing.view.focus()}),c})}}]),e}(U),fp=function(a){P(e,a);var i=M(e);function e(){return A(this,e),i.apply(this,arguments)}return C(e,[{key:"init",value:function(){var t=this.editor;t.model.schema.extend("$text",{allowAttributes:"italic"}),t.model.schema.setAttributeProperties("italic",{isFormatting:!0,copyOnEnter:!0}),t.conversion.attributeToElement({model:"italic",view:"i",upcastAlso:["em",{styles:{"font-style":"italic"}}]}),t.commands.add("italic",new $r(t,"italic")),t.keystrokes.set("CTRL+I","italic")}}],[{key:"pluginName",get:function(){return"ItalicEditing"}}]),e}(U),vp=function(a){P(e,a);var i=M(e);function e(){return A(this,e),i.apply(this,arguments)}return C(e,[{key:"init",value:function(){var t=this,r=this.editor,o=r.t;r.ui.componentFactory.add("italic",function(s){var l=r.commands.get("italic"),c=new be(s);return c.set({label:o("Italic"),icon:'<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M9.586 14.633l.021.004c-.036.335.095.655.393.962.082.083.173.15.274.201h1.474a.6.6 0 1 1 0 1.2H5.304a.6.6 0 0 1 0-1.2h1.15c.474-.07.809-.182 1.005-.334.157-.122.291-.32.404-.597l2.416-9.55a1.053 1.053 0 0 0-.281-.823 1.12 1.12 0 0 0-.442-.296H8.15a.6.6 0 0 1 0-1.2h6.443a.6.6 0 1 1 0 1.2h-1.195c-.376.056-.65.155-.823.296-.215.175-.423.439-.623.79l-2.366 9.347z"/></svg>',keystroke:"CTRL+I",tooltip:!0,isToggleable:!0}),c.bind("isOn","isEnabled").to(l,"value","isEnabled"),t.listenTo(c,"execute",function(){r.execute("italic"),r.editing.view.focus()}),c})}}]),e}(U),gp=function(a){P(e,a);var i=M(e);function e(){return A(this,e),i.apply(this,arguments)}return C(e,[{key:"init",value:function(){var t=this.editor;t.model.schema.extend("$text",{allowAttributes:"strikethrough"}),t.model.schema.setAttributeProperties("strikethrough",{isFormatting:!0,copyOnEnter:!0}),t.conversion.attributeToElement({model:"strikethrough",view:"s",upcastAlso:["del","strike",{styles:{"text-decoration":"line-through"}}]}),t.commands.add("strikethrough",new $r(t,"strikethrough")),t.keystrokes.set("CTRL+SHIFT+X","strikethrough")}}],[{key:"pluginName",get:function(){return"StrikethroughEditing"}}]),e}(U),mp=function(a){P(e,a);var i=M(e);function e(){return A(this,e),i.apply(this,arguments)}return C(e,[{key:"init",value:function(){var t=this,r=this.editor,o=r.t;r.ui.componentFactory.add("strikethrough",function(s){var l=r.commands.get("strikethrough"),c=new be(s);return c.set({label:o("Strikethrough"),icon:'<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M7 16.4c-.8-.4-1.5-.9-2.2-1.5a.6.6 0 0 1-.2-.5l.3-.6h1c1 1.2 2.1 1.7 3.7 1.7 1 0 1.8-.3 2.3-.6.6-.4.6-1.2.6-1.3.2-1.2-.9-2.1-.9-2.1h2.1c.3.7.4 1.2.4 1.7v.8l-.6 1.2c-.6.8-1.1 1-1.6 1.2a6 6 0 0 1-2.4.6c-1 0-1.8-.3-2.5-.6zM6.8 9L6 8.3c-.4-.5-.5-.8-.5-1.6 0-.7.1-1.3.5-1.8.4-.6 1-1 1.6-1.3a6.3 6.3 0 0 1 4.7 0 4 4 0 0 1 1.7 1l.3.7c0 .1.2.4-.2.7-.4.2-.9.1-1 0a3 3 0 0 0-1.2-1c-.4-.2-1-.3-2-.4-.7 0-1.4.2-2 .6-.8.6-1 .8-1 1.5 0 .8.5 1 1.2 1.5.6.4 1.1.7 1.9 1H6.8z"/><path d="M3 10.5V9h14v1.5z"/></svg>',keystroke:"CTRL+SHIFT+X",tooltip:!0,isToggleable:!0}),c.bind("isOn","isEnabled").to(l,"value","isEnabled"),t.listenTo(c,"execute",function(){r.execute("strikethrough"),r.editing.view.focus()}),c})}}]),e}(U),pp=function(a){P(e,a);var i=M(e);function e(){return A(this,e),i.apply(this,arguments)}return C(e,[{key:"init",value:function(){var t=this.editor;t.model.schema.extend("$text",{allowAttributes:"underline"}),t.model.schema.setAttributeProperties("underline",{isFormatting:!0,copyOnEnter:!0}),t.conversion.attributeToElement({model:"underline",view:"u",upcastAlso:{styles:{"text-decoration":"underline"}}}),t.commands.add("underline",new $r(t,"underline")),t.keystrokes.set("CTRL+U","underline")}}],[{key:"pluginName",get:function(){return"UnderlineEditing"}}]),e}(U),kp=function(a){P(e,a);var i=M(e);function e(){return A(this,e),i.apply(this,arguments)}return C(e,[{key:"init",value:function(){var t=this,r=this.editor,o=r.t;r.ui.componentFactory.add("underline",function(s){var l=r.commands.get("underline"),c=new be(s);return c.set({label:o("Underline"),icon:'<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M3 18v-1.5h14V18zm2.2-8V3.6c0-.4.4-.6.8-.6.3 0 .7.2.7.6v6.2c0 2 1.3 2.8 3.2 2.8 1.9 0 3.4-.9 3.4-2.9V3.6c0-.3.4-.5.8-.5.3 0 .7.2.7.5V10c0 2.7-2.2 4-4.9 4-2.6 0-4.7-1.2-4.7-4z"/></svg>',keystroke:"CTRL+U",tooltip:!0,isToggleable:!0}),c.bind("isOn","isEnabled").to(l,"value","isEnabled"),t.listenTo(c,"execute",function(){r.execute("underline"),r.editing.view.focus()}),c})}}]),e}(U),yp=function(a){P(e,a);var i=M(e);function e(){return A(this,e),i.apply(this,arguments)}return C(e,[{key:"refresh",value:function(){this.value=this._getValue(),this.isEnabled=this._checkEnabled()}},{key:"execute",value:function(){var t=this,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},o=this.editor.model,s=o.schema,c=Array.from(o.document.selection.getSelectedBlocks()),u=void 0===r.forceValue?!this.value:r.forceValue;o.change(function(d){if(u){var h=c.filter(function(f){return Kr(f)||Xc(s,f)});t._applyQuote(d,h)}else t._removeQuote(d,c.filter(Kr))})}},{key:"_getValue",value:function(){var t=Xe(this.editor.model.document.selection.getSelectedBlocks());return!(!t||!Kr(t))}},{key:"_checkEnabled",value:function(){if(this.value)return!0;var r=this.editor.model.schema,o=Xe(this.editor.model.document.selection.getSelectedBlocks());return!!o&&Xc(r,o)}},{key:"_removeQuote",value:function(t,r){Zc(t,r).reverse().forEach(function(o){if(o.start.isAtStart&&o.end.isAtEnd)t.unwrap(o.start.parent);else if(o.start.isAtStart){var s=t.createPositionBefore(o.start.parent);t.move(o,s)}else{o.end.isAtEnd||t.split(o.end);var l=t.createPositionAfter(o.end.parent);t.move(o,l)}})}},{key:"_applyQuote",value:function(t,r){var o=[];Zc(t,r).reverse().forEach(function(s){var l=Kr(s.start);l||(l=t.createElement("blockQuote"),t.wrap(s,l)),o.push(l)}),o.reverse().reduce(function(s,l){return s.nextSibling==l?(t.merge(t.createPositionAfter(s)),s):l})}}]),e}(ve);function Kr(a){return"blockQuote"==a.parent.name?a.parent:null}function Zc(a,i){for(var e,n=0,t=[];n<i.length;){var r=i[n],o=i[n+1];e||(e=a.createPositionBefore(r)),o&&r.nextSibling==o||(t.push(a.createRange(e,a.createPositionAfter(r))),e=null),n++}return t}function Xc(a,i){var e=a.checkChild(i.parent,"blockQuote"),n=a.checkChild(["$root","blockQuote"],i);return e&&n}var bp=function(a){P(e,a);var i=M(e);function e(){return A(this,e),i.apply(this,arguments)}return C(e,[{key:"init",value:function(){var t=this.editor,r=t.model.schema;t.commands.add("blockQuote",new yp(t)),r.register("blockQuote",{allowWhere:"$block",allowContentOf:"$root"}),r.addChildCheck(function(o,s){if(o.endsWith("blockQuote")&&"blockQuote"==s.name)return!1}),t.conversion.elementToElement({model:"blockQuote",view:"blockquote"}),t.model.document.registerPostFixer(function(o){var c,s=t.model.document.differ.getChanges(),l=k(s);try{for(l.s();!(c=l.n()).done;){var u=c.value;if("insert"==u.type){var d=u.position.nodeAfter;if(!d)continue;if(d.is("element","blockQuote")&&d.isEmpty)return o.remove(d),!0;if(d.is("element","blockQuote")&&!r.checkChild(u.position,d))return o.unwrap(d),!0;if(d.is("element")){var v,h=o.createRangeIn(d),f=k(h.getItems());try{for(f.s();!(v=f.n()).done;){var g=v.value;if(g.is("element","blockQuote")&&!r.checkChild(o.createPositionBefore(g),g))return o.unwrap(g),!0}}catch(p){f.e(p)}finally{f.f()}}}else if("remove"==u.type){var m=u.position.parent;if(m.is("element","blockQuote")&&m.isEmpty)return o.remove(m),!0}}}catch(p){l.e(p)}finally{l.f()}return!1})}},{key:"afterInit",value:function(){var t=this,r=this.editor.commands.get("blockQuote");this.listenTo(this.editor.editing.view.document,"enter",function(o,s){var l=t.editor.model.document,c=l.selection.getLastPosition().parent;l.selection.isCollapsed&&c.isEmpty&&r.value&&(t.editor.execute("blockQuote"),t.editor.editing.view.scrollToTheSelection(),s.preventDefault(),o.stop())})}}],[{key:"pluginName",get:function(){return"BlockQuoteEditing"}}]),e}(U);E(45);var wp=function(a){P(e,a);var i=M(e);function e(){return A(this,e),i.apply(this,arguments)}return C(e,[{key:"init",value:function(){var t=this,r=this.editor,o=r.t;r.ui.componentFactory.add("blockQuote",function(s){var l=r.commands.get("blockQuote"),c=new be(s);return c.set({label:o("Block quote"),icon:'<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M3 10.423a6.5 6.5 0 0 1 6.056-6.408l.038.67C6.448 5.423 5.354 7.663 5.22 10H9c.552 0 .5.432.5.986v4.511c0 .554-.448.503-1 .503h-5c-.552 0-.5-.449-.5-1.003v-4.574zm8 0a6.5 6.5 0 0 1 6.056-6.408l.038.67c-2.646.739-3.74 2.979-3.873 5.315H17c.552 0 .5.432.5.986v4.511c0 .554-.448.503-1 .503h-5c-.552 0-.5-.449-.5-1.003v-4.574z"/></svg>',tooltip:!0,isToggleable:!0}),c.bind("isOn","isEnabled").to(l,"value","isEnabled"),t.listenTo(c,"execute",function(){r.execute("blockQuote"),r.editing.view.focus()}),c})}}]),e}(U),_p=function(a){P(e,a);var i=M(e);function e(){return A(this,e),i.apply(this,arguments)}return C(e,[{key:"init",value:function(){var t=this.editor,o=t.t;t.ui.componentFactory.add("ckfinder",function(s){var l=t.commands.get("ckfinder"),c=new be(s);return c.set({label:o("Insert image or file"),icon:'<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M11.627 16.5zm5.873-.196zm0-7.001V8h-13v8.5h4.341c.191.54.457 1.044.785 1.5H2a1.5 1.5 0 0 1-1.5-1.5v-13A1.5 1.5 0 0 1 2 2h4.5a1.5 1.5 0 0 1 1.06.44L9.122 4H16a1.5 1.5 0 0 1 1.5 1.5v1A1.5 1.5 0 0 1 19 8v2.531a6.027 6.027 0 0 0-1.5-1.228zM16 6.5v-1H8.5l-2-2H2v13h1V8a1.5 1.5 0 0 1 1.5-1.5H16z"/><path d="M14.5 19.5a5 5 0 1 1 0-10 5 5 0 0 1 0 10zM15 14v-2h-1v2h-2v1h2v2h1v-2h2v-1h-2z"/></svg>',tooltip:!0}),c.bind("isEnabled").to(l),c.on("execute",function(){t.execute("ckfinder"),t.editing.view.focus()}),c})}}],[{key:"pluginName",get:function(){return"CKFinderUI"}}]),e}(U),Ap=function(a){P(e,a);var i=M(e);function e(){return A(this,e),i.apply(this,arguments)}return C(e,[{key:"observe",value:function(t){var r=this;this.listenTo(t,"load",function(o,s){"IMG"==s.target.tagName&&r._fireEvents(s)},{useCapture:!0})}},{key:"_fireEvents",value:function(t){this.isEnabled&&(this.document.fire("layoutChanged"),this.document.fire("imageLoaded",t))}}]),e}(Ft),eu=function(){function a(){A(this,a),this._stack=[]}return C(a,[{key:"add",value:function(e,n){var t=this._stack,r=t[0];this._insertDescriptor(e);var o=t[0];r===o||Oo(r,o)||this.fire("change:top",{oldDescriptor:r,newDescriptor:o,writer:n})}},{key:"remove",value:function(e,n){var t=this._stack,r=t[0];this._removeDescriptor(e);var o=t[0];r===o||Oo(r,o)||this.fire("change:top",{oldDescriptor:r,newDescriptor:o,writer:n})}},{key:"_insertDescriptor",value:function(e){var n=this._stack,t=n.findIndex(function(o){return o.id===e.id});if(!Oo(e,n[t])){t>-1&&n.splice(t,1);for(var r=0;n[r]&&Cp(n[r],e);)r++;n.splice(r,0,e)}}},{key:"_removeDescriptor",value:function(e){var n=this._stack,t=n.findIndex(function(r){return r.id===e});t>-1&&n.splice(t,1)}}]),a}();function Oo(a,i){return a&&i&&a.priority==i.priority&&Jr(a.classes)==Jr(i.classes)}function Cp(a,i){return a.priority>i.priority||!(a.priority<i.priority)&&Jr(a.classes)>Jr(i.classes)}function Jr(a){return Array.isArray(a)?a.sort().join(","):a}function tu(a){return function(i){return i+a}}se(eu,Se),E(47);var nu=tu("px"),ru=We.document.body,pe=function(a){P(e,a);var i=M(e);function e(n){var t;A(this,e);var r=(t=i.call(this,n)).bindTemplate;return t.set("top",0),t.set("left",0),t.set("position","arrow_nw"),t.set("isVisible",!1),t.set("withArrow",!0),t.set("class"),t.content=t.createCollection(),t.setTemplate({tag:"div",attributes:{class:["ck","ck-balloon-panel",r.to("position",function(o){return"ck-balloon-panel_"+o}),r.if("isVisible","ck-balloon-panel_visible"),r.if("withArrow","ck-balloon-panel_with-arrow"),r.to("class")],style:{top:r.to("top",nu),left:r.to("left",nu)}},children:t.content}),t}return C(e,[{key:"show",value:function(){this.isVisible=!0}},{key:"hide",value:function(){this.isVisible=!1}},{key:"attachTo",value:function(t){this.show();var r=e.defaultPositions,o=Object.assign({},{element:this.element,positions:[r.southArrowNorth,r.southArrowNorthMiddleWest,r.southArrowNorthMiddleEast,r.southArrowNorthWest,r.southArrowNorthEast,r.northArrowSouth,r.northArrowSouthMiddleWest,r.northArrowSouthMiddleEast,r.northArrowSouthWest,r.northArrowSouthEast],limiter:ru,fitInViewport:!0},t),s=e._getOptimalPosition(o),l=parseInt(s.left),c=parseInt(s.top);Object.assign(this,{top:c,left:l,position:s.name})}},{key:"pin",value:function(t){var r=this;this.unpin(),this._pinWhenIsVisibleCallback=function(){r.isVisible?r._startPinning(t):r._stopPinning()},this._startPinning(t),this.listenTo(this,"change:isVisible",this._pinWhenIsVisibleCallback)}},{key:"unpin",value:function(){this._pinWhenIsVisibleCallback&&(this._stopPinning(),this.stopListening(this,"change:isVisible",this._pinWhenIsVisibleCallback),this._pinWhenIsVisibleCallback=null,this.hide())}},{key:"_startPinning",value:function(t){var r=this;this.attachTo(t);var o=Do(t.target),s=t.limiter?Do(t.limiter):ru;this.listenTo(We.document,"scroll",function(l,c){var u=c.target,d=o&&u.contains(o),h=s&&u.contains(s);!d&&!h&&o&&s||r.attachTo(t)},{useCapture:!0}),this.listenTo(We.window,"resize",function(){r.attachTo(t)})}},{key:"_stopPinning",value:function(){this.stopListening(We.document,"scroll"),this.stopListening(We.window,"resize")}}]),e}(ue);function Do(a){return jt(a)?a:Ir(a)?a.commonAncestorContainer:"function"==typeof a?Do(a()):null}function it(a,i){return a.top-i.height-pe.arrowVerticalOffset}function ot(a){return a.bottom+pe.arrowVerticalOffset}function Cn(a,i,e){return a&&Wt(a)&&!e.isInline(i)}function Tn(a){return a.getAttribute("widget-type-around")}function Wt(a){return!!a.is("element")&&!!a.getCustomProperty("widget")}function Lo(a,i){var t,r,o,e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(!a.is("containerElement"))throw new I.b("widget-to-widget-wrong-element-type: The element passed to toWidget() must be a container element instance.",null,{element:a});return i.setAttribute("contenteditable","false",a),i.addClass("ck-widget",a),i.setCustomProperty("widget",!0,a),a.getFillerOffset=Sp,e.label&&i.setCustomProperty("widgetLabel",e.label,a),e.hasSelectionHandle&&(t=a,o=(r=i).createUIElement("div",{class:"ck ck-widget__selection-handle"},function(s){var l=this.toDomElement(s),c=new Hr;return c.set("content",'<svg viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg"><path d="M4 0v1H1v3H0V.5A.5.5 0 0 1 .5 0H4zm8 0h3.5a.5.5 0 0 1 .5.5V4h-1V1h-3V0zM4 16H.5a.5.5 0 0 1-.5-.5V12h1v3h3v1zm8 0v-1h3v-3h1v3.5a.5.5 0 0 1-.5.5H12z"/><path fill-opacity=".256" d="M1 1h14v14H1z"/><g class="ck-icon__selected-indicator"><path d="M7 0h2v1H7V0zM0 7h1v2H0V7zm15 0h1v2h-1V7zm-8 8h2v1H7v-1z"/><path fill-opacity=".254" d="M1 1h14v14H1z"/></g></svg>'),c.render(),l.appendChild(c.element),l}),r.insert(r.createPositionAt(t,0),o),r.addClass(["ck-widget_with-selection-handle"],t)),Vo(a,i,function(t,r,o){return o.addClass(n(r.classes),t)},function(t,r,o){return o.removeClass(n(r.classes),t)}),a;function n(t){return Array.isArray(t)?t:[t]}}function Vo(a,i,e,n){var t=new eu;t.on("change:top",function(r,o){o.oldDescriptor&&n(a,o.oldDescriptor,o.writer),o.newDescriptor&&e(a,o.newDescriptor,o.writer)}),i.setCustomProperty("addHighlight",function(r,o,s){return t.add(o,s)},a),i.setCustomProperty("removeHighlight",function(r,o,s){return t.remove(o,s)},a)}function Tp(a){var i=a.getCustomProperty("widgetLabel");return i?"function"==typeof i?i():i:""}function jo(a,i){return i.addClass(["ck-editor__editable","ck-editor__nested-editable"],a),i.setAttribute("contenteditable",a.isReadOnly?"false":"true",a),a.on("change:isReadOnly",function(e,n,t){i.setAttribute("contenteditable",t?"false":"true",a)}),a.on("change:isFocused",function(e,n,t){t?i.addClass("ck-editor__nested-editable_focused",a):i.removeClass("ck-editor__nested-editable_focused",a)}),a}function Qr(a,i){var e=a.getSelectedElement();if(e){var n=Tn(a);if(n)return i.createPositionAt(e,n);if(i.schema.isBlock(e))return i.createPositionAfter(e)}var t=a.getSelectedBlocks().next().value;if(t){if(t.isEmpty)return i.createPositionAt(t,0);var r=i.createPositionAfter(t);return a.focus.isTouching(r)?r:i.createPositionBefore(t)}return a.focus}function xp(a,i){var e=new Ze(We.window),n=e.getIntersection(a),t=i.height+pe.arrowVerticalOffset;if(a.top-t>e.top||a.bottom+t<e.bottom)return null;var r=n||a,o=r.left+r.width/2-i.width/2;return{top:Math.max(a.top,0)+pe.arrowVerticalOffset,left:o,name:"arrow_n"}}function Sp(){return null}function Bo(a){var i=a.getSelectedElement();return i&&function(e){return!!e.getCustomProperty("image")&&Wt(e)}(i)?i:null}function xn(a){return!!a&&a.is("element","image")}function iu(a,i){var n=a.createElement("image",arguments.length>2&&void 0!==arguments[2]?arguments[2]:{}),t=Qr(i.document.selection,i);i.insertContent(n,t),n.parent&&a.setSelection(n,"on")}function ou(a){var t,c,o,i=a.schema,e=a.document.selection;return t=i,o=(c=Qr(e,a).parent).isEmpty&&!c.is("element","$root")?c.parent:c,t.checkChild(o,"image")&&!function(n,t){var r=n.getSelectedElement();return r&&t.isObject(r)}(e,i)&&Y(e.focus.getAncestors()).every(function(t){return!t.is("element","image")})}function rn(a){var n,i=[],e=k(a.getChildren());try{for(e.s();!(n=e.n()).done;){var t=n.value;i.push(t),t.is("element")&&i.push.apply(i,Y(t.getChildren()))}}catch(r){e.e(r)}finally{e.f()}return i.find(function(r){return r.is("element","img")})}function au(a){return function(e){e.on("attribute:".concat(a,":image"),i)};function i(e,n,t){if(t.consumable.consume(n.item,e.name)){var r=t.writer,o=rn(t.mapper.toViewElement(n.item));r.setAttribute(n.attributeKey,n.attributeNewValue||"",o)}}}pe.arrowHorizontalOffset=25,pe.arrowVerticalOffset=10,pe._getOptimalPosition=Xl,pe.defaultPositions={northWestArrowSouthWest:function(i,e){return{top:it(i,e),left:i.left-pe.arrowHorizontalOffset,name:"arrow_sw"}},northWestArrowSouthMiddleWest:function(i,e){return{top:it(i,e),left:i.left-.25*e.width-pe.arrowHorizontalOffset,name:"arrow_smw"}},northWestArrowSouth:function(i,e){return{top:it(i,e),left:i.left-e.width/2,name:"arrow_s"}},northWestArrowSouthMiddleEast:function(i,e){return{top:it(i,e),left:i.left-.75*e.width+pe.arrowHorizontalOffset,name:"arrow_sme"}},northWestArrowSouthEast:function(i,e){return{top:it(i,e),left:i.left-e.width+pe.arrowHorizontalOffset,name:"arrow_se"}},northArrowSouthWest:function(i,e){return{top:it(i,e),left:i.left+i.width/2-pe.arrowHorizontalOffset,name:"arrow_sw"}},northArrowSouthMiddleWest:function(i,e){return{top:it(i,e),left:i.left+i.width/2-.25*e.width-pe.arrowHorizontalOffset,name:"arrow_smw"}},northArrowSouth:function(i,e){return{top:it(i,e),left:i.left+i.width/2-e.width/2,name:"arrow_s"}},northArrowSouthMiddleEast:function(i,e){return{top:it(i,e),left:i.left+i.width/2-.75*e.width+pe.arrowHorizontalOffset,name:"arrow_sme"}},northArrowSouthEast:function(i,e){return{top:it(i,e),left:i.left+i.width/2-e.width+pe.arrowHorizontalOffset,name:"arrow_se"}},northEastArrowSouthWest:function(i,e){return{top:it(i,e),left:i.right-pe.arrowHorizontalOffset,name:"arrow_sw"}},northEastArrowSouthMiddleWest:function(i,e){return{top:it(i,e),left:i.right-.25*e.width-pe.arrowHorizontalOffset,name:"arrow_smw"}},northEastArrowSouth:function(i,e){return{top:it(i,e),left:i.right-e.width/2,name:"arrow_s"}},northEastArrowSouthMiddleEast:function(i,e){return{top:it(i,e),left:i.right-.75*e.width+pe.arrowHorizontalOffset,name:"arrow_sme"}},northEastArrowSouthEast:function(i,e){return{top:it(i,e),left:i.right-e.width+pe.arrowHorizontalOffset,name:"arrow_se"}},southWestArrowNorthWest:function(i,e){return{top:ot(i),left:i.left-pe.arrowHorizontalOffset,name:"arrow_nw"}},southWestArrowNorthMiddleWest:function(i,e){return{top:ot(i),left:i.left-.25*e.width-pe.arrowHorizontalOffset,name:"arrow_nmw"}},southWestArrowNorth:function(i,e){return{top:ot(i),left:i.left-e.width/2,name:"arrow_n"}},southWestArrowNorthMiddleEast:function(i,e){return{top:ot(i),left:i.left-.75*e.width+pe.arrowHorizontalOffset,name:"arrow_nme"}},southWestArrowNorthEast:function(i,e){return{top:ot(i),left:i.left-e.width+pe.arrowHorizontalOffset,name:"arrow_ne"}},southArrowNorthWest:function(i,e){return{top:ot(i),left:i.left+i.width/2-pe.arrowHorizontalOffset,name:"arrow_nw"}},southArrowNorthMiddleWest:function(i,e){return{top:ot(i),left:i.left+i.width/2-.25*e.width-pe.arrowHorizontalOffset,name:"arrow_nmw"}},southArrowNorth:function(i,e){return{top:ot(i),left:i.left+i.width/2-e.width/2,name:"arrow_n"}},southArrowNorthMiddleEast:function(i,e){return{top:ot(i),left:i.left+i.width/2-.75*e.width+pe.arrowHorizontalOffset,name:"arrow_nme"}},southArrowNorthEast:function(i,e){return{top:ot(i),left:i.left+i.width/2-e.width+pe.arrowHorizontalOffset,name:"arrow_ne"}},southEastArrowNorthWest:function(i,e){return{top:ot(i),left:i.right-pe.arrowHorizontalOffset,name:"arrow_nw"}},southEastArrowNorthMiddleWest:function(i,e){return{top:ot(i),left:i.right-.25*e.width-pe.arrowHorizontalOffset,name:"arrow_nmw"}},southEastArrowNorth:function(i,e){return{top:ot(i),left:i.right-e.width/2,name:"arrow_n"}},southEastArrowNorthMiddleEast:function(i,e){return{top:ot(i),left:i.right-.75*e.width+pe.arrowHorizontalOffset,name:"arrow_nme"}},southEastArrowNorthEast:function(i,e){return{top:ot(i),left:i.right-e.width+pe.arrowHorizontalOffset,name:"arrow_ne"}}};var Pp=function(a){P(e,a);var i=M(e);function e(){return A(this,e),i.apply(this,arguments)}return C(e,[{key:"refresh",value:function(){this.isEnabled=ou(this.editor.model)}},{key:"execute",value:function(t){var r=this.editor.model;r.change(function(o){var c,s=Array.isArray(t.source)?t.source:[t.source],l=k(s);try{for(l.s();!(c=l.n()).done;)iu(o,r,{src:c.value})}catch(d){l.e(d)}finally{l.f()}})}}]),e}(ve),su=function(a){P(e,a);var i=M(e);function e(){return A(this,e),i.apply(this,arguments)}return C(e,[{key:"init",value:function(){var t=this.editor,r=t.model.schema,o=t.t,s=t.conversion;t.editing.view.addObserver(Ap),r.register("image",{isObject:!0,isBlock:!0,allowWhere:"$block",allowAttributes:["alt","src","srcset"]}),s.for("dataDowncast").elementToElement({model:"image",view:function(c,u){return lu(u.writer)}}),s.for("editingDowncast").elementToElement({model:"image",view:function(c,u){var h,f,v,d=u.writer;return h=lu(d),f=d,v=o("image widget"),f.setCustomProperty("image",!0,h),Lo(h,f,{label:function(){var m=rn(h).getAttribute("alt");return m?"".concat(m," ").concat(v):v}})}}),s.for("downcast").add(au("src")).add(au("alt")).add(function(){return function(c){c.on("attribute:srcset:image",l)};function l(c,u,d){if(d.consumable.consume(u.item,c.name)){var h=d.writer,f=rn(d.mapper.toViewElement(u.item));if(null===u.attributeNewValue){var v=u.attributeOldValue;v.data&&(h.removeAttribute("srcset",f),h.removeAttribute("sizes",f),v.width&&h.removeAttribute("width",f))}else{var g=u.attributeNewValue;g.data&&(h.setAttribute("srcset",g.data,f),h.setAttribute("sizes","100vw",f),g.width&&h.setAttribute("width",g.width,f))}}}}()),s.for("upcast").elementToElement({view:{name:"img",attributes:{src:!0}},model:function(c,u){return u.writer.createElement("image",{src:c.getAttribute("src")})}}).attributeToAttribute({view:{name:"img",key:"alt"},model:"alt"}).attributeToAttribute({view:{name:"img",key:"srcset"},model:{key:"srcset",value:function(c){var u={data:c.getAttribute("srcset")};return c.hasAttribute("width")&&(u.width=c.getAttribute("width")),u}}}).add(function(){return function(c){c.on("element:figure",l)};function l(c,u,d){if(d.consumable.test(u.viewItem,{name:!0,classes:"image"})){var h=rn(u.viewItem);if(h&&h.hasAttribute("src")&&d.consumable.test(h,{name:!0})){var f=Xe(d.convertItem(h,u.modelCursor).modelRange.getItems());f&&(d.convertChildren(u.viewItem,f),d.updateConversionResult(f,u))}}}}()),t.commands.add("imageInsert",new Pp(t))}}],[{key:"pluginName",get:function(){return"ImageEditing"}}]),e}(U);function lu(a){var i=a.createEmptyElement("img"),e=a.createContainerElement("figure",{class:"image"});return a.insert(a.createPositionAt(e,0),i),e}var cu=function(a){P(e,a);var i=M(e);function e(n){var t;return A(this,e),(t=i.call(this,n)).domEventType="mousedown",t}return C(e,[{key:"onDomEvent",value:function(t){this.fire(t.type,t)}}]),e}(Ut),uu=function(a){P(e,a);var i=M(e);function e(n){var t;return A(this,e),(t=i.call(this,n)).attributes=new Set,t._overrideUid=null,t}return C(e,[{key:"init",value:function(){var t=this,r=this.editor,l=r.locale,c=r.model.document.selection;this.listenTo(r.editing.view.document,"keydown",function(u,d){if(c.isCollapsed&&!(d.shiftKey||d.altKey||d.ctrlKey)){var h=d.keyCode==me.arrowright,f=d.keyCode==me.arrowleft;if(h||f){var v=l.contentLanguageDirection;!0===("ltr"===v&&h||"rtl"===v&&f?t._handleForwardMovement(d):t._handleBackwardMovement(d))&&u.stop()}}},{priority:mt.get("high")+1}),this._isNextGravityRestorationSkipped=!1,this.listenTo(c,"change:range",function(u,d){t._isNextGravityRestorationSkipped?t._isNextGravityRestorationSkipped=!1:t._isGravityOverridden&&(!d.directChange&&Xr(c.getFirstPosition(),t.attributes)||t._restoreGravity())})}},{key:"registerAttribute",value:function(t){this.attributes.add(t)}},{key:"_handleForwardMovement",value:function(t){var r=this.attributes,o=this.editor.model.document.selection,s=o.getFirstPosition();return!this._isGravityOverridden&&(!s.isAtStart||!zo(o,r))&&(Xr(s,r)?(Zr(t),this._overrideGravity(),!0):void 0)}},{key:"_handleBackwardMovement",value:function(t){var u,r=this.attributes,o=this.editor.model,s=o.document.selection,l=s.getFirstPosition();return this._isGravityOverridden?(Zr(t),this._restoreGravity(),Fo(o,r,l),!0):l.isAtStart?!!zo(s,r)&&(Zr(t),Fo(o,r,l),!0):(u=r,Xr(l.getShiftedBy(-1),u)?l.isAtEnd&&!zo(s,r)&&Xr(l,r)?(Zr(t),Fo(o,r,l),!0):(this._isNextGravityRestorationSkipped=!0,this._overrideGravity(),!1):void 0)}},{key:"_isGravityOverridden",get:function(){return!!this._overrideUid}},{key:"_overrideGravity",value:function(){this._overrideUid=this.editor.model.change(function(t){return t.overrideSelectionGravity()})}},{key:"_restoreGravity",value:function(){var t=this;this.editor.model.change(function(r){r.restoreSelectionGravity(t._overrideUid),t._overrideUid=null})}}],[{key:"pluginName",get:function(){return"TwoStepCaretMovement"}}]),e}(U);function zo(a,i){var n,e=k(i);try{for(e.s();!(n=e.n()).done;)if(a.hasAttribute(n.value))return!0}catch(r){e.e(r)}finally{e.f()}return!1}function Fo(a,i,e){var n=e.nodeBefore;a.change(function(t){n?t.setSelectionAttribute(n.getAttributes()):t.removeSelectionAttribute(i)})}function Zr(a){a.preventDefault()}function Xr(a,i){var r,e=a.nodeBefore,n=a.nodeAfter,t=k(i);try{for(t.s();!(r=t.n()).done;){var o=r.value,s=e?e.getAttribute(o):void 0;if((n?n.getAttribute(o):void 0)!==s)return!0}}catch(l){t.e(l)}finally{t.f()}return!1}function Sn(a,i,e,n){return n.createRange(du(a,i,e,!0,n),du(a,i,e,!1,n))}function du(a,i,e,n,t){for(var r=a.textNode||(n?a.nodeBefore:a.nodeAfter),o=null;r&&r.getAttribute(i)==e;)o=r,r=n?r.previousSibling:r.nextSibling;return o?t.createPositionAt(o,n?"before":"after"):a}var Ep=function(){function a(){A(this,a),this._definitions=new Set}return C(a,[{key:"length",get:function(){return this._definitions.size}},{key:"add",value:function(e){var n=this;Array.isArray(e)?e.forEach(function(t){return n._definitions.add(t)}):this._definitions.add(e)}},{key:"getDispatcher",value:function(){var e=this;return function(n){n.on("attribute:linkHref",function(t,r,o){if(o.consumable.test(r.item,"attribute:linkHref")){var u,s=o.writer,l=s.document.selection,c=k(e._definitions);try{for(c.s();!(u=c.n()).done;){var d=u.value,h=s.createAttributeElement("a",d.attributes,{priority:5});s.setCustomProperty("link",!0,h),d.callback(r.attributeNewValue)?r.item.is("selection")?s.wrap(l.getFirstRange(),h):s.wrap(o.mapper.toViewRange(r.range),h):s.unwrap(o.mapper.toViewRange(r.range),h)}}catch(f){c.e(f)}finally{c.f()}}},{priority:"high"})}}},{key:"getDispatcherForLinkedImage",value:function(){var e=this;return function(n){n.on("attribute:linkHref:image",function(t,r,o){var u,s=o.mapper.toViewElement(r.item),l=Array.from(s.getChildren()).find(function(N){return"a"===N.name}),c=k(e._definitions);try{for(c.s();!(u=c.n()).done;){var d=u.value,h=It(d.attributes);if(d.callback(r.attributeNewValue)){var v,f=k(h);try{for(f.s();!(v=f.n()).done;){var g=ee(v.value,2),m=g[0],p=g[1];"class"===m?o.writer.addClass(p,l):o.writer.setAttribute(m,p,l)}}catch(N){f.e(N)}finally{f.f()}}else{var w,y=k(h);try{for(y.s();!(w=y.n()).done;){var _=ee(w.value,2),T=_[0];"class"===T?o.writer.removeClass(_[1],l):o.writer.removeAttribute(T,l)}}catch(N){y.e(N)}finally{y.f()}}}}catch(N){c.e(N)}finally{c.f()}})}}}]),a}(),Ip=RegExp("[\\u200d\\ud800-\\udfff\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff\\ufe0e\\ufe0f]"),hu=function(i){return Ip.test(i)},Uo="[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]",Ho="\\ud83c[\\udffb-\\udfff]",fu="[^\\ud800-\\udfff]",vu="(?:\\ud83c[\\udde6-\\uddff]){2}",gu="[\\ud800-\\udbff][\\udc00-\\udfff]",mu="(?:"+Uo+"|"+Ho+")?",Op="[\\ufe0e\\ufe0f]?"+mu+"(?:\\u200d(?:"+[fu,vu,gu].join("|")+")[\\ufe0e\\ufe0f]?"+mu+")*",Dp="(?:"+[fu+Uo+"?",Uo,vu,gu,"[\\ud800-\\udfff]"].join("|")+")",Lp=RegExp(Ho+"(?="+Ho+")|"+Dp+Op,"g"),jp=function(i){return hu(i)?function(i){return i.match(Lp)||[]}(i):function(i){return i.split("")}(i)},Bp=function(i){i=Fi(i);var e=hu(i)?jp(i):void 0,n=e?e[0]:i.charAt(0),t=e?function(i,e,n){var t=i.length;return n=void 0===n?t:n,!e&&n>=t?i:Ka(i,e,n)}(e,1).join(""):i.slice(1);return n.toUpperCase()+t},zp=/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205f\u3000]/g,Fp=/^(?:(?:https?|ftps?|mailto):|[^a-z]|[a-z+.-]+(?:[^a-z+.:-]|$))/i;function pu(a,i){var e=i.writer,n=e.createAttributeElement("a",{href:a},{priority:5});return e.setCustomProperty("link",!0,n),n}function ku(a){return function(i){return i.replace(zp,"").match(Fp)}(a=String(a))?a:"#"}function Wo(a,i){return!!a&&a.is("element","image")&&i.checkAttribute("image","linkHref")}var Up=function(a){P(e,a);var i=M(e);function e(n){var t;return A(this,e),(t=i.call(this,n)).manualDecorators=new Qe,t.automaticDecorators=new Ep,t}return C(e,[{key:"restoreManualDecoratorStates",value:function(){var r,t=k(this.manualDecorators);try{for(t.s();!(r=t.n()).done;){var o=r.value;o.value=this._getDecoratorStateFromModel(o.id)}}catch(s){t.e(s)}finally{t.f()}}},{key:"refresh",value:function(){var t=this.editor.model,r=t.document,o=Xe(r.selection.getSelectedBlocks());Wo(o,t.schema)?(this.value=o.getAttribute("linkHref"),this.isEnabled=t.schema.checkAttribute(o,"linkHref")):(this.value=r.selection.getAttribute("linkHref"),this.isEnabled=t.schema.checkAttributeInSelection(r.selection,"linkHref"));var l,s=k(this.manualDecorators);try{for(s.s();!(l=s.n()).done;){var c=l.value;c.value=this._getDecoratorStateFromModel(c.id)}}catch(u){s.e(u)}finally{s.f()}}},{key:"execute",value:function(t){var r=this,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},s=this.editor.model,l=s.document.selection,c=[],u=[];for(var d in o)o[d]?c.push(d):u.push(d);s.change(function(h){if(l.isCollapsed){var f=l.getFirstPosition();if(l.hasAttribute("linkHref")){var v=Sn(f,"linkHref",l.getAttribute("linkHref"),s);h.setAttribute("linkHref",t,v),c.forEach(function(K){h.setAttribute(K,!0,v)}),u.forEach(function(K){h.removeAttribute(K,v)}),h.setSelection(h.createPositionAfter(v.end.nodeBefore))}else if(""!==t){var g=It(l.getAttributes());g.set("linkHref",t),c.forEach(function(K){g.set(K,!0)});var m=h.createText(t,g);s.insertContent(m,f),h.setSelection(h.createPositionAfter(m))}["linkHref"].concat(c,u).forEach(function(K){h.removeSelectionAttribute(K)})}else{var _,p=s.schema.getValidRanges(l.getRanges(),"linkHref"),y=[],w=k(l.getSelectedBlocks());try{for(w.s();!(_=w.n()).done;){var T=_.value;s.schema.checkAttribute(T,"linkHref")&&y.push(h.createRangeOn(T))}}catch(K){w.e(K)}finally{w.f()}var D,x=y.slice(),N=k(p);try{for(N.s();!(D=N.n()).done;){var z=D.value;r._isRangeToUpdate(z,y)&&x.push(z)}}catch(K){N.e(K)}finally{N.f()}var $,J=k(x);try{var Q=function(){var W=$.value;h.setAttribute("linkHref",t,W),c.forEach(function(ie){h.setAttribute(ie,!0,W)}),u.forEach(function(ie){h.removeAttribute(ie,W)})};for(J.s();!($=J.n()).done;)Q()}catch(K){J.e(K)}finally{J.f()}}})}},{key:"_getDecoratorStateFromModel",value:function(t){var r=this.editor.model,o=r.document,s=Xe(o.selection.getSelectedBlocks());return Wo(s,r.schema)?s.getAttribute(t):o.selection.getAttribute(t)}},{key:"_isRangeToUpdate",value:function(t,r){var s,o=k(r);try{for(o.s();!(s=o.n()).done;)if(s.value.containsRange(t))return!1}catch(c){o.e(c)}finally{o.f()}return!0}}]),e}(ve),Hp=function(a){P(e,a);var i=M(e);function e(){return A(this,e),i.apply(this,arguments)}return C(e,[{key:"refresh",value:function(){var t=this.editor.model,r=t.document,o=Xe(r.selection.getSelectedBlocks());this.isEnabled=Wo(o,t.schema)?t.schema.checkAttribute(o,"linkHref"):t.schema.checkAttributeInSelection(r.selection,"linkHref")}},{key:"execute",value:function(){var r=this.editor.model,o=r.document.selection,s=this.editor.commands.get("link");r.change(function(l){var d,c=o.isCollapsed?[Sn(o.getFirstPosition(),"linkHref",o.getAttribute("linkHref"),r)]:o.getRanges(),u=k(c);try{for(u.s();!(d=u.n()).done;){var h=d.value;if(l.removeAttribute("linkHref",h),s){var v,f=k(s.manualDecorators);try{for(f.s();!(v=f.n()).done;)l.removeAttribute(v.value.id,h)}catch(m){f.e(m)}finally{f.f()}}}}catch(m){u.e(m)}finally{u.f()}})}}]),e}(ve),yu=C(function a(i){var e=i.id,n=i.label,t=i.attributes,r=i.defaultValue;A(this,a),this.id=e,this.set("value"),this.defaultValue=r,this.label=n,this.attributes=t});se(yu,Re),E(49);var Wp=/^(https?:)?\/\//,bu=function(a){P(e,a);var i=M(e);function e(n){var t;return A(this,e),t=i.call(this,n),n.config.define("link",{addTargetToExternalLinks:!1}),t}return C(e,[{key:"init",value:function(){var t=this.editor;t.model.schema.extend("$text",{allowAttributes:"linkHref"}),t.conversion.for("dataDowncast").attributeToElement({model:"linkHref",view:pu}),t.conversion.for("editingDowncast").attributeToElement({model:"linkHref",view:function(s,l){return pu(ku(s),l)}}),t.conversion.for("upcast").elementToAttribute({view:{name:"a",attributes:{href:!0}},model:{key:"linkHref",value:function(s){return s.getAttribute("href")}}}),t.commands.add("link",new Up(t)),t.commands.add("unlink",new Hp(t));var o,s,l,r=(o=t.t,s=function(o){var s=[];if(o)for(var l=0,c=Object.entries(o);l<c.length;l++){var u=ee(c[l],2),f=Object.assign({},u[1],{id:"link"+Bp(u[0])});s.push(f)}return s}(t.config.get("link.decorators")),l={"Open in a new tab":o("Open in a new tab"),Downloadable:o("Downloadable")},s.forEach(function(c){return c.label&&l[c.label]&&(c.label=l[c.label]),c}),s);this._enableAutomaticDecorators(r.filter(function(o){return"automatic"===o.mode})),this._enableManualDecorators(r.filter(function(o){return"manual"===o.mode})),t.plugins.get(uu).registerAttribute("linkHref"),function(o,s,l,c){var u=o.editing.view,d=new Set;u.document.registerPostFixer(function(h){var f=o.model.document.selection,v=!1;if(f.hasAttribute(s)){var y,g=Sn(f.getFirstPosition(),s,f.getAttribute(s),o.model),m=o.editing.mapper.toViewRange(g),p=k(m.getItems());try{for(p.s();!(y=p.n()).done;){var w=y.value;w.is("element","a")&&!w.hasClass(c)&&(h.addClass(c,w),d.add(w),v=!0)}}catch(_){p.e(_)}finally{p.f()}}return v}),o.conversion.for("editingDowncast").add(function(h){function f(){u.change(function(v){var m,g=k(d.values());try{for(g.s();!(m=g.n()).done;){var p=m.value;v.removeClass(c,p),d.delete(p)}}catch(y){g.e(y)}finally{g.f()}})}h.on("insert",f,{priority:"highest"}),h.on("remove",f,{priority:"highest"}),h.on("attribute",f,{priority:"highest"}),h.on("selection",f,{priority:"highest"})})}(t,"linkHref",0,"ck-link_selected"),this._enableInsertContentSelectionAttributesFixer(),this._enableClickingAfterLink(),this._enableTypingOverLink(),this._handleDeleteContentAfterLink()}},{key:"_enableAutomaticDecorators",value:function(t){var r=this.editor,o=r.commands.get("link").automaticDecorators;r.config.get("link.addTargetToExternalLinks")&&o.add({id:"linkIsExternal",mode:"automatic",callback:function(l){return Wp.test(l)},attributes:{target:"_blank",rel:"noopener noreferrer"}}),o.add(t),o.length&&r.conversion.for("downcast").add(o.getDispatcher())}},{key:"_enableManualDecorators",value:function(t){if(t.length){var r=this.editor,o=r.commands.get("link").manualDecorators;t.forEach(function(s){r.model.schema.extend("$text",{allowAttributes:s.id}),o.add(new yu(s)),r.conversion.for("downcast").attributeToElement({model:s.id,view:function(c,u){var d=u.writer;if(c){var h=o.get(s.id).attributes,f=d.createAttributeElement("a",h,{priority:5});return d.setCustomProperty("link",!0,f),f}}}),r.conversion.for("upcast").elementToAttribute({view:{name:"a",attributes:o.get(s.id).attributes},model:{key:s.id}})})}}},{key:"_enableInsertContentSelectionAttributesFixer",value:function(){var t=this.editor,r=t.model,o=r.document.selection,s=t.commands.get("link");this.listenTo(r,"insertContent",function(){var l=o.anchor.nodeBefore,c=o.anchor.nodeAfter;o.hasAttribute("linkHref")&&l&&l.hasAttribute("linkHref")&&(c&&c.hasAttribute("linkHref")||r.change(function(u){qo(u,s.manualDecorators)}))},{priority:"low"})}},{key:"_enableClickingAfterLink",value:function(){var t=this.editor,r=t.commands.get("link");t.editing.view.addObserver(cu);var o=!1;this.listenTo(t.editing.view.document,"mousedown",function(){o=!0}),this.listenTo(t.editing.view.document,"selectionChange",function(){if(o){o=!1;var s=t.model.document.selection;if(s.isCollapsed&&s.hasAttribute("linkHref")){var l=s.getFirstPosition(),c=Sn(l,"linkHref",s.getAttribute("linkHref"),t.model);(l.isTouching(c.start)||l.isTouching(c.end))&&t.model.change(function(u){qo(u,r.manualDecorators)})}}})}},{key:"_enableTypingOverLink",value:function(){var o,s,t=this.editor;this.listenTo(t.editing.view.document,"delete",function(){s=!0},{priority:"high"}),this.listenTo(t.model,"deleteContent",function(){var c,u,d,h,f,l=t.model.document.selection;l.isCollapsed||(s?s=!1:wu(t)&&(d=(u=(c=t.model).document.selection).getFirstPosition(),h=u.getLastPosition(),(f=d.nodeAfter)&&f.is("$text")&&f.hasAttribute("linkHref")&&(f===(h.textNode||h.nodeBefore)||Sn(d,"linkHref",f.getAttribute("linkHref"),c).containsRange(c.createRange(d,h),!0)))&&(o=l.getAttributes()))},{priority:"high"}),this.listenTo(t.model,"insertContent",function(l,c){var d=ee(c,1)[0];s=!1,wu(t)&&o&&(t.model.change(function(h){var v,f=k(o);try{for(f.s();!(v=f.n()).done;){var g=ee(v.value,2);h.setAttribute(g[0],g[1],d)}}catch(y){f.e(y)}finally{f.f()}}),o=null)},{priority:"high"})}},{key:"_handleDeleteContentAfterLink",value:function(){var t=this.editor,r=t.model,o=r.document.selection,s=t.editing.view,l=t.commands.get("link"),c=!1,u=!1;this.listenTo(s.document,"delete",function(d,h){u=h.domEvent.keyCode===me.backspace},{priority:"high"}),this.listenTo(r,"deleteContent",function(){c=!1;var d=o.getFirstPosition(),h=o.getAttribute("linkHref");if(h){var f=Sn(d,"linkHref",h,r);c=f.containsPosition(d)||f.end.isEqual(d)}},{priority:"high"}),this.listenTo(r,"deleteContent",function(){u&&(u=!1,c||t.model.enqueueChange(function(d){qo(d,l.manualDecorators)}))},{priority:"low"})}}],[{key:"pluginName",get:function(){return"LinkEditing"}},{key:"requires",get:function(){return[uu,bc,nn]}}]),e}(U);function qo(a,i){a.removeSelectionAttribute("linkHref");var n,e=k(i);try{for(e.s();!(n=e.n()).done;)a.removeSelectionAttribute(n.value.id)}catch(r){e.e(r)}finally{e.f()}}function wu(a){return a.plugins.get("Input").isInput(a.model.change(function(i){return i.batch}))}var Go=function(a){P(e,a);var i=M(e);function e(){return A(this,e),i.apply(this,arguments)}return C(e,[{key:"init",value:function(){this.on("show:warning",function(t,r){window.alert(r.message)},{priority:"lowest"})}},{key:"showSuccess",value:function(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this._showNotification({message:t,type:"success",namespace:r.namespace,title:r.title})}},{key:"showInfo",value:function(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this._showNotification({message:t,type:"info",namespace:r.namespace,title:r.title})}},{key:"showWarning",value:function(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this._showNotification({message:t,type:"warning",namespace:r.namespace,title:r.title})}},{key:"_showNotification",value:function(t){this.fire("show:"+t.type+(t.namespace?":"+t.namespace:""),{message:t.message,type:t.type,title:t.title||""})}}],[{key:"pluginName",get:function(){return"Notification"}}]),e}(Gr),qp=function(a){P(e,a);var i=M(e);function e(n){var t;return A(this,e),(t=i.call(this,n)).stopListening(t.editor.model.document,"change"),t.listenTo(t.editor.model.document,"change",function(){return t.refresh()},{priority:"low"}),t}return C(e,[{key:"refresh",value:function(){var t=this.editor.commands.get("imageInsert"),r=this.editor.commands.get("link");this.isEnabled=t.isEnabled||r.isEnabled}},{key:"execute",value:function(){var t=this.editor,r=this.editor.config.get("ckfinder.openerMethod")||"modal";if("popup"!=r&&"modal"!=r)throw new I.b('ckfinder-unknown-openerMethod: The openerMethod config option must by "popup" or "modal".',t);var o=this.editor.config.get("ckfinder.options")||{};o.chooseFiles=!0;var s=o.onInit;o.language||(o.language=t.locale.uiLanguage),o.onInit=function(l){s&&s(l),l.on("files:choose",function(c){var v,u=c.data.files.toArray(),d=u.filter(function(T){return!T.isImage()}),h=u.filter(function(T){return T.isImage()}),f=k(d);try{for(f.s();!(v=f.n()).done;)t.execute("link",v.value.getUrl())}catch(T){f.e(T)}finally{f.f()}var y,m=[],p=k(h);try{for(p.s();!(y=p.n()).done;){var w=y.value,_=w.getUrl();m.push(_||l.request("file:getProxyUrl",{file:w}))}}catch(T){p.e(T)}finally{p.f()}m.length&&_u(t,m)}),l.on("file:choose:resizedImage",function(c){var u=c.data.resizedUrl;if(u)_u(t,[u]);else{var d=t.plugins.get("Notification"),h=t.locale.t;d.showWarning(h("Could not obtain resized image URL."),{title:h("Selecting resized image failed"),namespace:"ckfinder"})}})},window.CKFinder[r](o)}}]),e}(ve);function _u(a,i){if(a.commands.get("imageInsert").isEnabled)a.execute("imageInsert",{source:i});else{var e=a.plugins.get("Notification"),n=a.locale.t;e.showWarning(n("Could not insert image at the current position."),{title:n("Inserting image failed"),namespace:"ckfinder"})}}var Gp=function(a){P(e,a);var i=M(e);function e(){return A(this,e),i.apply(this,arguments)}return C(e,[{key:"init",value:function(){var t=this.editor;t.commands.add("ckfinder",new qp(t))}}],[{key:"pluginName",get:function(){return"CKFinderEditing"}},{key:"requires",get:function(){return[Go,su,bu]}}]),e}(U),Yo=/^data:(\S*?);base64,/,Au=function(){function a(i,e,n){if(A(this,a),!i)throw new I.b("fileuploader-missing-file: File must be provided as the first argument",null);if(!e)throw new I.b("fileuploader-missing-token: Token must be provided as the second argument.",null);if(!n)throw new I.b("fileuploader-missing-api-address: Api address must be provided as the third argument.",null);this.file=function(t){if("string"!=typeof t)return!1;var r=t.match(Yo);return!(!r||!r.length)}(i)?function(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:512;try{for(var o=t.match(Yo)[1],s=atob(t.replace(Yo,"")),l=[],c=0;c<s.length;c+=r){for(var u=s.slice(c,c+r),d=new Array(u.length),h=0;h<u.length;h++)d[h]=u.charCodeAt(h);l.push(new Uint8Array(d))}return new Blob(l,{type:o})}catch(f){throw new I.b("fileuploader-decoding-image-data-error: Problem with decoding Base64 image data.",null)}}(i):i,this._token=e,this._apiAddress=n}return C(a,[{key:"onProgress",value:function(e){return this.on("progress",function(n,t){return e(t)}),this}},{key:"onError",value:function(e){return this.once("error",function(n,t){return e(t)}),this}},{key:"abort",value:function(){this.xhr.abort()}},{key:"send",value:function(){return this._prepareRequest(),this._attachXHRListeners(),this._sendRequest()}},{key:"_prepareRequest",value:function(){var e=new XMLHttpRequest;e.open("POST",this._apiAddress),e.setRequestHeader("Authorization",this._token.value),e.responseType="json",this.xhr=e}},{key:"_attachXHRListeners",value:function(){var e=this,n=this,t=this.xhr;function r(o){return function(){return n.fire("error",o)}}t.addEventListener("error",r("Network Error")),t.addEventListener("abort",r("Abort")),t.upload&&t.upload.addEventListener("progress",function(o){o.lengthComputable&&e.fire("progress",{total:o.total,uploaded:o.loaded})}),t.addEventListener("load",function(){var o=t.status,s=t.response;if(o<200||o>299)return e.fire("error",s.message||s.error)})}},{key:"_sendRequest",value:function(){var e=this,n=new FormData,t=this.xhr;return n.append("file",this.file),new Promise(function(r,o){t.addEventListener("load",function(){var s=t.status,l=t.response;return s<200||s>299?o(l.message?new I.b("fileuploader-uploading-data-failed: Uploading file failed.",e,{message:l.message}):l.error):r(l)}),t.addEventListener("error",function(){return o(new Error("Network Error"))}),t.addEventListener("abort",function(){return o(new Error("Abort"))}),t.send(n)})}}]),a}();se(Au,Se);var $o={refreshInterval:36e5,autoRefresh:!0},Cu=function(){function a(i){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:$o;if(A(this,a),!i)throw new I.b("token-missing-token-url: A `tokenUrl` must be provided as the first constructor argument.",this);this.set("value",e.initValue),this._refresh="function"==typeof i?i:function(){return n=i,new Promise(function(t,r){var o=new XMLHttpRequest;o.open("GET",n),o.addEventListener("load",function(){var s=o.status,l=o.response;return s<200||s>299?r(new I.b("token-cannot-download-new-token: Cannot download new token from the provided url.",null)):t(l)}),o.addEventListener("error",function(){return r(new Error("Network Error"))}),o.addEventListener("abort",function(){return r(new Error("Abort"))}),o.send()});var n},this._options=Object.assign({},$o,e)}return C(a,[{key:"init",value:function(){var e=this;return new Promise(function(n,t){e._options.autoRefresh&&e._startRefreshing(),e.value?n(e):e.refreshToken().then(n).catch(t)})}},{key:"refreshToken",value:function(){var e=this;return this._refresh().then(function(n){return e.set("value",n)}).then(function(){return e})}},{key:"destroy",value:function(){this._stopRefreshing()}},{key:"_startRefreshing",value:function(){var e=this;this._refreshInterval=setInterval(function(){return e.refreshToken()},this._options.refreshInterval)}},{key:"_stopRefreshing",value:function(){clearInterval(this._refreshInterval)}}],[{key:"create",value:function(e){return new a(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:$o).init()}}]),a}();se(Cu,Re);var Yp=Cu,Tu=function(){var a=function(i){P(n,i);var e=M(n);function n(){return A(this,n),e.apply(this,arguments)}return C(n,[{key:"init",value:function(){var r=this.context.config.get("cloudServices")||{};for(var o in r)this[o]=r[o];if(this.tokenUrl)return this.token=new n.Token(this.tokenUrl),this.token.init();this.token=null}},{key:"destroy",value:function(){B(L(n.prototype),"destroy",this).call(this),this.token&&this.token.destroy()}}],[{key:"pluginName",get:function(){return"CloudServices"}}]),n}(Gr);return a.Token=Yp,a}(),xu=function(a){P(e,a);var i=M(e);function e(){return A(this,e),i.apply(this,arguments)}return C(e,[{key:"init",value:function(){var t=this,r=this.editor,o=r.plugins.get(Tu),s=o.token;s&&(this._uploadGateway=new e._UploadGateway(s,o.uploadUrl),r.plugins.get(Pt).createUploadAdapter=function(c){return new $p(t._uploadGateway,c)})}}],[{key:"requires",get:function(){return[Pt,Tu]}}]),e}(U),$p=function(){function a(i,e){A(this,a),this.uploadGateway=i,this.loader=e}return C(a,[{key:"upload",value:function(){var e=this;return this.loader.file.then(function(n){return e.fileUploader=e.uploadGateway.upload(n),e.fileUploader.on("progress",function(t,r){e.loader.uploadTotal=r.total,e.loader.uploaded=r.uploaded}),e.fileUploader.send()})}},{key:"abort",value:function(){this.fileUploader.abort()}}]),a}();xu._UploadGateway=function(){function a(i,e){if(A(this,a),!i)throw new I.b("uploadgateway-missing-token: Token must be provided.",null);if(!e)throw new I.b("uploadgateway-missing-api-address: Api address must be provided.",null);this._token=i,this._apiAddress=e}return C(a,[{key:"upload",value:function(e){return new Au(e,this._token,this._apiAddress)}}]),a}(),E(51);var Su=["before","after"],Kp=(new DOMParser).parseFromString('<svg viewBox="0 0 10 8" xmlns="http://www.w3.org/2000/svg"><polyline points="8.05541992 0.263427734 8.05541992 4.23461914 1.28417969 4.23461914" transform="translate(1,0)"></polyline><line x1="0" y1="4.21581031" x2="2" y2="2.17810059" transform="translate(1, 0)"></line><line x1="0" y1="6.21581031" x2="2" y2="4.17810059" transform="translate(2, 5.196955) scale(1, -1) translate(-1, -5.196955)"></line></svg>\n',"image/svg+xml").firstChild,Jp=function(a){P(e,a);var i=M(e);function e(n){var t;return A(this,e),(t=i.call(this,n))._currentFakeCaretModelElement=null,t}return C(e,[{key:"init",value:function(){var t=this.editor,r=t.editing.view;this.on("change:isEnabled",function(o,s,l){r.change(function(c){var d,u=k(r.document.roots);try{for(u.s();!(d=u.n()).done;){var h=d.value;l?c.removeClass("ck-widget__type-around_disabled",h):c.addClass("ck-widget__type-around_disabled",h)}}catch(f){u.e(f)}finally{u.f()}}),l||t.model.change(function(c){c.removeSelectionAttribute("widget-type-around")})}),this._enableTypeAroundUIInjection(),this._enableInsertingParagraphsOnButtonClick(),this._enableInsertingParagraphsOnEnterKeypress(),this._enableInsertingParagraphsOnTypingKeystroke(),this._enableTypeAroundFakeCaretActivationUsingKeyboardArrows(),this._enableDeleteIntegration(),this._enableInsertContentIntegration()}},{key:"destroy",value:function(){this._currentFakeCaretModelElement=null}},{key:"_insertParagraph",value:function(t,r){var o=this.editor,s=o.editing.view;o.execute("insertParagraph",{position:o.model.createPositionAt(t,r)}),s.focus(),s.scrollToTheSelection()}},{key:"_listenToIfEnabled",value:function(t,r,o,s){var l=this;this.listenTo(t,r,function(){l.isEnabled&&o.apply(void 0,arguments)},s)}},{key:"_insertParagraphAccordingToFakeCaretPosition",value:function(){var t=this.editor.model.document.selection,r=Tn(t);if(!r)return!1;var o=t.getSelectedElement();return this._insertParagraph(o,r),!0}},{key:"_enableTypeAroundUIInjection",value:function(){var t=this.editor,r=t.model.schema,o=t.locale.t,s={before:o("Insert paragraph before block"),after:o("Insert paragraph after block")};t.editing.downcastDispatcher.on("insert",function(l,c,u){var h,f,v,g,d=u.mapper.toViewElement(c.item);Cn(d,c.item,r)&&(f=s,v=d,g=(h=u.writer).createUIElement("div",{class:"ck ck-reset_all ck-widget__type-around"},function(m){var y,w,p=this.toDomElement(m);return function(y,w){var T,_=k(Su);try{for(_.s();!(T=_.n()).done;){var x=T.value,N=new vt({tag:"div",attributes:{class:["ck","ck-widget__type-around__button","ck-widget__type-around__button_"+x],title:w[x]},children:[y.ownerDocument.importNode(Kp,!0)]});y.appendChild(N.render())}}catch(D){_.e(D)}finally{_.f()}}(p,f),y=p,w=new vt({tag:"div",attributes:{class:["ck","ck-widget__type-around__fake-caret"]}}),y.appendChild(w.render()),p}),h.insert(h.createPositionAt(v,"end"),g))},{priority:"low"})}},{key:"_enableTypeAroundFakeCaretActivationUsingKeyboardArrows",value:function(){var t=this,r=this.editor,o=r.model,s=o.document.selection,l=o.schema;function u(d){return"ck-widget_type-around_show-fake-caret_"+d}this._listenToIfEnabled(r.editing.view.document,"keydown",function(d,h){Tr(h.keyCode)&&t._handleArrowKeyPress(d,h)},{priority:mt.get("high")+10}),this._listenToIfEnabled(s,"change:range",function(d,h){h.directChange&&r.model.change(function(f){f.removeSelectionAttribute("widget-type-around")})}),this._listenToIfEnabled(o.document,"change:data",function(){var d=s.getSelectedElement();d&&Cn(r.editing.mapper.toViewElement(d),d,l)||r.model.change(function(h){h.removeSelectionAttribute("widget-type-around")})}),this._listenToIfEnabled(r.editing.downcastDispatcher,"selection",function(d,h,f){var v=f.writer;if(t._currentFakeCaretModelElement){var g=f.mapper.toViewElement(t._currentFakeCaretModelElement);g&&(v.removeClass(Su.map(u),g),t._currentFakeCaretModelElement=null)}var m=h.selection.getSelectedElement();if(m){var p=f.mapper.toViewElement(m);if(Cn(p,m,l)){var y=Tn(h.selection);y&&(v.addClass(u(y),p),t._currentFakeCaretModelElement=m)}}}),this._listenToIfEnabled(r.ui.focusTracker,"change:isFocused",function(d,h,f){f||r.model.change(function(v){v.removeSelectionAttribute("widget-type-around")})})}},{key:"_handleArrowKeyPress",value:function(t,r){var f,o=this.editor,s=o.model,l=s.document.selection,c=s.schema,u=o.editing.view,d=ds(r.keyCode,o.locale.contentLanguageDirection),h=u.document.selection.getSelectedElement();Cn(h,o.editing.mapper.toModelElement(h),c)?f=this._handleArrowKeyPressOnSelectedWidget(d):l.isCollapsed&&(f=this._handleArrowKeyPressWhenSelectionNextToAWidget(d)),f&&(r.preventDefault(),t.stop())}},{key:"_handleArrowKeyPressOnSelectedWidget",value:function(t){var r=this.editor.model,o=Tn(r.document.selection);return r.change(function(s){return o?o!==(t?"after":"before")&&(s.removeSelectionAttribute("widget-type-around"),!0):(s.setSelectionAttribute("widget-type-around",t?"after":"before"),!0)})}},{key:"_handleArrowKeyPressWhenSelectionNextToAWidget",value:function(t){var r=this.editor,o=r.model,s=o.schema,l=r.plugins.get("Widget"),c=l._getObjectElementNextToSelection(t);return!!Cn(r.editing.mapper.toViewElement(c),c,s)&&(o.change(function(u){l._setSelectionOverElement(c),u.setSelectionAttribute("widget-type-around",t?"before":"after")}),!0)}},{key:"_enableInsertingParagraphsOnButtonClick",value:function(){var t=this,r=this.editor,o=r.editing.view;this._listenToIfEnabled(o.document,"mousedown",function(s,l){var v,g,c=l.domTarget.closest(".ck-widget__type-around__button");if(c){var u=c.classList.contains("ck-widget__type-around__button_before")?"before":"after",d=(v=o.domConverter,g=c.closest(".ck-widget"),v.mapDomToView(g)),h=r.editing.mapper.toModelElement(d);t._insertParagraph(h,u),l.preventDefault(),s.stop()}})}},{key:"_enableInsertingParagraphsOnEnterKeypress",value:function(){var t=this,r=this.editor,o=r.editing.view;this._listenToIfEnabled(o.document,"enter",function(s,l){var h,c=o.document.selection.getSelectedElement(),u=r.editing.mapper.toModelElement(c),d=r.model.schema;t._insertParagraphAccordingToFakeCaretPosition()?h=!0:Cn(c,u,d)&&(t._insertParagraph(u,l.isSoft?"before":"after"),h=!0),h&&(l.preventDefault(),s.stop())})}},{key:"_enableInsertingParagraphsOnTypingKeystroke",value:function(){var t=this,o=[me.enter,me.delete,me.backspace];this._listenToIfEnabled(this.editor.editing.view.document,"keydown",function(s,l){o.includes(l.keyCode)||mc(l)||t._insertParagraphAccordingToFakeCaretPosition()},{priority:mt.get("high")+1})}},{key:"_enableDeleteIntegration",value:function(){var t=this.editor,o=t.model,s=o.schema;this._listenToIfEnabled(t.editing.view.document,"delete",function(l,c){var u=Tn(o.document.selection);if(u){var d=c.direction,h=o.document.selection.getSelectedElement(),f="forward"==d;if("before"===u===f)t.execute("delete",{selection:o.createSelection(h,"on")});else{var v=s.getNearestSelectionRange(o.createPositionAt(h,u),d);if(v)if(v.isCollapsed){var g=o.createSelection(v.start);if(o.modifySelection(g,{direction:d}),g.focus.isEqual(v.start)){var m=function(p,y){var T,w=y,_=k(y.getAncestors({parentFirst:!0}));try{for(_.s();!(T=_.n()).done;){var x=T.value;if(x.childCount>1||p.isLimit(x))break;w=x}}catch(N){_.e(N)}finally{_.f()}return w}(s,v.start.parent);o.deleteContent(o.createSelection(m,"on"),{doNotAutoparagraph:!0})}else o.change(function(p){p.setSelection(v),t.execute(f?"forwardDelete":"delete")})}else o.change(function(p){p.setSelection(v),t.execute(f?"forwardDelete":"delete")})}c.preventDefault(),l.stop()}},{priority:mt.get("high")+1})}},{key:"_enableInsertContentIntegration",value:function(){var r=this.editor.model,o=r.document.selection;this._listenToIfEnabled(this.editor.model,"insertContent",function(s,l){var c=ee(l,2),u=c[0],d=c[1];if(!d||d.is("documentSelection")){var h=Tn(o);return h?(s.stop(),r.change(function(f){var v=o.getSelectedElement(),g=r.createPositionAt(v,h),m=f.createSelection(g),p=r.insertContent(u,m);return f.setSelection(m),p})):void 0}},{priority:"high"})}}],[{key:"pluginName",get:function(){return"WidgetTypeAround"}}]),e}(U);function Pu(a,i,e){var s,n=a.schema,t=a.createRangeIn(i.root),r="forward"==e?"elementStart":"elementEnd",o=k(t.getWalker({startPosition:i,direction:e}));try{for(o.s();!(s=o.n()).done;){var l=s.value,c=l.previousPosition,u=l.item,d=l.type;if(n.isLimit(u)&&!n.isInline(u))return c;if(d==r&&n.isBlock(u))return null}}catch(h){o.e(h)}finally{o.f()}return null}function Eu(a,i,e){var n="backward"==e?i.end:i.start;if(a.checkChild(n,"$text"))return n;var r,t=k(i.getWalker({direction:e}));try{for(t.s();!(r=t.n()).done;){var o=r.value.nextPosition;if(a.checkChild(o,"$text"))return o}}catch(s){t.e(s)}finally{t.f()}}E(53);var Ko=function(a){P(e,a);var i=M(e);function e(){return A(this,e),i.apply(this,arguments)}return C(e,[{key:"init",value:function(){var t=this,r=this.editor.editing.view,o=r.document;this._previouslySelected=new Set,this.editor.editing.downcastDispatcher.on("selection",function(s,l,c){t._clearPreviouslySelectedWidgets(c.writer);var g,u=c.writer,d=u.document.selection,h=d.getSelectedElement(),f=null,v=k(d.getRanges());try{for(v.s();!(g=v.n()).done;){var y,p=k(g.value);try{for(p.s();!(y=p.n()).done;){var _=y.value.item;Wt(_)&&!Zp(_,f)&&(u.addClass("ck-widget_selected",_),t._previouslySelected.add(_),f=_,_==h&&u.setSelection(d.getRanges(),{fake:!0,label:Tp(h)}))}}catch(T){p.e(T)}finally{p.f()}}}catch(T){v.e(T)}finally{v.f()}},{priority:"low"}),r.addObserver(cu),this.listenTo(o,"mousedown",function(){return t._onMousedown.apply(t,arguments)}),this.listenTo(o,"keydown",function(){t._handleSelectionChangeOnArrowKeyPress.apply(t,arguments)},{priority:"high"}),this.listenTo(o,"keydown",function(){t._preventDefaultOnArrowKeyPress.apply(t,arguments)},{priority:mt.get("high")-20}),this.listenTo(o,"keydown",function Qp(a){var i=a.model;return function(e,n){var u,r=n.keyCode==me.arrowdown,o=n.shiftKey,s=i.document.selection;if(n.keyCode==me.arrowup||r){var l=r;if(!o||(u=s).isCollapsed||u.isBackward!=l){var c=function(u,d,h){var f=u.model;if(h){var v=d.isCollapsed?d.focus:d.getLastPosition(),g=Pu(f,v,"forward");if(!g)return null;var m=f.createRange(v,g),p=Eu(f.schema,m,"backward");return p&&v.isBefore(p)?f.createRange(v,p):null}var y=d.isCollapsed?d.focus:d.getFirstPosition(),w=Pu(f,y,"backward");if(!w)return null;var _=f.createRange(w,y),T=Eu(f.schema,_,"forward");return T&&y.isAfter(T)?f.createRange(T,y):null}(a,s,l);c&&!c.isCollapsed&&function(u,d,h){var f=u.model,v=u.view.domConverter;if(h){var g=f.createSelection(d.start);f.modifySelection(g),g.focus.isAtEnd||d.start.isEqual(g.focus)||(d=f.createRange(g.focus,d.end))}var w,T,m=u.mapper.toViewRange(d),p=v.viewRangeToDom(m),y=Ze.getDomRangeRects(p),_=k(y);try{for(_.s();!(T=_.n()).done;){var x=T.value;if(void 0!==w){if(Math.round(x.top)>=w)return!1;w=Math.max(w,Math.round(x.bottom))}else w=Math.round(x.bottom)}}catch(N){_.e(N)}finally{_.f()}return!0}(a,c,l)&&(i.change(function(u){var d=l?c.end:c.start;if(o){var h=i.createSelection(s.anchor);h.setFocus(d),u.setSelection(h)}else u.setSelection(d)}),e.stop(),n.preventDefault(),n.stopPropagation())}}}}(this.editor.editing)),this.listenTo(o,"delete",function(s,l){t._handleDelete("forward"==l.direction)&&(l.preventDefault(),s.stop())},{priority:"high"})}},{key:"_onMousedown",value:function(t,r){var o=this.editor,s=o.editing.view,l=s.document,c=r.target;if(function(v){for(;v;){if(v.is("editableElement")&&!v.is("rootElement"))return!0;if(Wt(v))return!1;v=v.parent}return!1}(c)){if((At_isSafari||At_isGecko)&&r.domEvent.detail>=3){var u=o.editing.mapper,d=c.is("attributeElement")?c.findAncestor(function(v){return!v.is("attributeElement")}):c,h=u.toModelElement(d);r.preventDefault(),this.editor.model.change(function(v){v.setSelection(h,"in")})}}else if(Wt(c)||(c=c.findAncestor(Wt))){r.preventDefault(),l.isFocused||s.focus();var f=o.editing.mapper.toModelElement(c);this._setSelectionOverElement(f)}}},{key:"_handleSelectionChangeOnArrowKeyPress",value:function(t,r){var o=r.keyCode;if(Tr(o)){var s=this.editor.model,l=s.schema,c=s.document.selection,u=c.getSelectedElement(),d=ds(o,this.editor.locale.contentLanguageDirection);if(u&&l.isObject(u)){var h=d?c.getLastPosition():c.getFirstPosition(),f=l.getNearestSelectionRange(h,d?"forward":"backward");return void(f&&(s.change(function(g){g.setSelection(f)}),r.preventDefault(),t.stop()))}if(c.isCollapsed){var v=this._getObjectElementNextToSelection(d);v&&l.isObject(v)&&(this._setSelectionOverElement(v),r.preventDefault(),t.stop())}}}},{key:"_preventDefaultOnArrowKeyPress",value:function(t,r){if(Tr(r.keyCode)){var o=this.editor.model,s=o.schema,l=o.document.selection.getSelectedElement();l&&s.isObject(l)&&(r.preventDefault(),t.stop())}}},{key:"_handleDelete",value:function(t){var r=this;if(!this.editor.isReadOnly){var o=this.editor.model.document.selection;if(o.isCollapsed){var s=this._getObjectElementNextToSelection(t);return s?(this.editor.model.change(function(l){for(var c=o.anchor.parent;c.isEmpty;){var u=c;c=u.parent,l.remove(u)}r._setSelectionOverElement(s)}),!0):void 0}}}},{key:"_setSelectionOverElement",value:function(t){this.editor.model.change(function(r){r.setSelection(r.createRangeOn(t))})}},{key:"_getObjectElementNextToSelection",value:function(t){var r=this.editor.model,o=r.schema,l=r.createSelection(r.document.selection);r.modifySelection(l,{direction:t?"forward":"backward"});var c=t?l.focus.nodeBefore:l.focus.nodeAfter;return c&&o.isObject(c)?c:null}},{key:"_clearPreviouslySelectedWidgets",value:function(t){var o,r=k(this._previouslySelected);try{for(r.s();!(o=r.n()).done;)t.removeClass("ck-widget_selected",o.value)}catch(l){r.e(l)}finally{r.f()}this._previouslySelected.clear()}}],[{key:"pluginName",get:function(){return"Widget"}},{key:"requires",get:function(){return[Jp]}}]),e}(U);function Zp(a,i){return!!i&&Array.from(a.getAncestors()).includes(i)}var Xp=function(a){P(e,a);var i=M(e);function e(){return A(this,e),i.apply(this,arguments)}return C(e,[{key:"refresh",value:function(){var t=this.editor.model.document.selection.getSelectedElement();this.isEnabled=xn(t),this.value=!(!xn(t)||!t.hasAttribute("alt"))&&t.getAttribute("alt")}},{key:"execute",value:function(t){var r=this.editor.model,o=r.document.selection.getSelectedElement();r.change(function(s){s.setAttribute("alt",t.newValue,o)})}}]),e}(ve),ek=function(a){P(e,a);var i=M(e);function e(){return A(this,e),i.apply(this,arguments)}return C(e,[{key:"init",value:function(){this.editor.commands.add("imageTextAlternative",new Xp(this.editor))}}],[{key:"pluginName",get:function(){return"ImageTextAlternativeEditing"}}]),e}(U);E(55);var ei=function(a){P(e,a);var i=M(e);function e(n,t){var r;A(this,e),r=i.call(this,n);var o="ck-labeled-field-view-"+Et(),s="ck-labeled-field-view-status-"+Et();r.fieldView=t(X(r),o,s),r.set("label"),r.set("isEnabled",!0),r.set("errorText",null),r.set("infoText",null),r.set("class"),r.labelView=r._createLabelView(o),r.statusView=r._createStatusView(s),r.bind("_statusText").to(X(r),"errorText",X(r),"infoText",function(c,u){return c||u});var l=r.bindTemplate;return r.setTemplate({tag:"div",attributes:{class:["ck","ck-labeled-field-view",l.to("class"),l.if("isEnabled","ck-disabled",function(c){return!c})]},children:[r.labelView,r.fieldView,r.statusView]}),r}return C(e,[{key:"_createLabelView",value:function(t){var r=new jc(this.locale);return r.for=t,r.bind("text").to(this,"label"),r}},{key:"_createStatusView",value:function(t){var r=new ue(this.locale),o=this.bindTemplate;return r.setTemplate({tag:"div",attributes:{class:["ck","ck-labeled-field-view__status",o.if("errorText","ck-labeled-field-view__status_error"),o.if("_statusText","ck-hidden",function(s){return!s})],id:t,role:o.if("errorText","alert")},children:[{text:o.to("_statusText")}]}),r}},{key:"focus",value:function(){this.fieldView.focus()}}]),e}(ue);E(57);var tk=function(a){P(e,a);var i=M(e);function e(n){var t;A(this,e),(t=i.call(this,n)).set("value"),t.set("id"),t.set("placeholder"),t.set("isReadOnly",!1),t.set("hasError",!1),t.set("ariaDescribedById");var r=t.bindTemplate;return t.setTemplate({tag:"input",attributes:{type:"text",class:["ck","ck-input","ck-input-text",r.if("hasError","ck-error")],id:r.to("id"),placeholder:r.to("placeholder"),readonly:r.to("isReadOnly"),"aria-invalid":r.if("hasError",!0),"aria-describedby":r.to("ariaDescribedById")},on:{input:r.to("input")}}),t}return C(e,[{key:"render",value:function(){var t=this;B(L(e.prototype),"render",this).call(this);var r=function(s){t.element.value=s||0===s?s:""};r(this.value),this.on("change:value",function(o,s,l){r(l)})}},{key:"select",value:function(){this.element.select()}},{key:"focus",value:function(){this.element.focus()}}]),e}(ue);function ti(a,i,e){var n=new tk(a.locale);return n.set({id:i,ariaDescribedById:e}),n.bind("isReadOnly").to(a,"isEnabled",function(t){return!t}),n.bind("hasError").to(a,"errorText",function(t){return!!t}),n.on("input",function(){a.errorText=null}),n}function ni(a){var i=a.view;i.listenTo(i.element,"submit",function(e,n){n.preventDefault(),i.fire("submit")},{useCapture:!0})}var ri='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M6.972 16.615a.997.997 0 0 1-.744-.292l-4.596-4.596a1 1 0 1 1 1.414-1.414l3.926 3.926 9.937-9.937a1 1 0 0 1 1.414 1.415L7.717 16.323a.997.997 0 0 1-.745.292z"/></svg>',ii='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M11.591 10.177l4.243 4.242a1 1 0 0 1-1.415 1.415l-4.242-4.243-4.243 4.243a1 1 0 0 1-1.414-1.415l4.243-4.242L4.52 5.934A1 1 0 0 1 5.934 4.52l4.243 4.243 4.242-4.243a1 1 0 1 1 1.415 1.414l-4.243 4.243z"/></svg>';E(59);var nk=function(a){P(e,a);var i=M(e);function e(n){var t;A(this,e);var r=(t=i.call(this,n)).locale.t;return t.focusTracker=new lt,t.keystrokes=new ft,t.labeledInput=t._createLabeledInputView(),t.saveButtonView=t._createButton(r("Save"),ri,"ck-button-save"),t.saveButtonView.type="submit",t.cancelButtonView=t._createButton(r("Cancel"),ii,"ck-button-cancel","cancel"),t._focusables=new Ht,t._focusCycler=new Lt({focusables:t._focusables,focusTracker:t.focusTracker,keystrokeHandler:t.keystrokes,actions:{focusPrevious:"shift + tab",focusNext:"tab"}}),t.setTemplate({tag:"form",attributes:{class:["ck","ck-text-alternative-form"],tabindex:"-1"},children:[t.labeledInput,t.saveButtonView,t.cancelButtonView]}),t}return C(e,[{key:"render",value:function(){var t=this;B(L(e.prototype),"render",this).call(this),this.keystrokes.listenTo(this.element),ni({view:this}),[this.labeledInput,this.saveButtonView,this.cancelButtonView].forEach(function(r){t._focusables.add(r),t.focusTracker.add(r.element)})}},{key:"_createButton",value:function(t,r,o,s){var l=new be(this.locale);return l.set({label:t,icon:r,tooltip:!0}),l.extendTemplate({attributes:{class:o}}),s&&l.delegate("execute").to(this,s),l}},{key:"_createLabeledInputView",value:function(){var t=this.locale.t,r=new ei(this.locale,ti);return r.label=t("Text alternative"),r.fieldView.placeholder=t("Text alternative"),r}}]),e}(ue);E(61),E(63);var oi=tu("px"),ai=function(a){P(e,a);var i=M(e);function e(n){var t;return A(this,e),(t=i.call(this,n)).positionLimiter=function(){var r=t.editor.editing.view,o=r.document.selection.editableElement;return o?r.domConverter.mapViewToDom(o.root):null},t.set("visibleView",null),t.view=new pe(n.locale),n.ui.view.body.add(t.view),n.ui.focusTracker.add(t.view.element),t._viewToStack=new Map,t._idToStack=new Map,t.set("_numberOfStacks",0),t.set("_singleViewMode",!1),t._rotatorView=t._createRotatorView(),t._fakePanelsView=t._createFakePanelsView(),t}return C(e,[{key:"hasView",value:function(t){return Array.from(this._viewToStack.keys()).includes(t)}},{key:"add",value:function(t){if(this.hasView(t.view))throw new I.b("contextualballoon-add-view-exist: Cannot add configuration of the same view twice.",[this,t]);var r=t.stackId||"main";if(!this._idToStack.has(r))return this._idToStack.set(r,new Map([[t.view,t]])),this._viewToStack.set(t.view,this._idToStack.get(r)),this._numberOfStacks=this._idToStack.size,void(this._visibleStack&&!t.singleViewMode||this.showStack(r));var o=this._idToStack.get(r);t.singleViewMode&&this.showStack(r),o.set(t.view,t),this._viewToStack.set(t.view,o),o===this._visibleStack&&this._showView(t)}},{key:"remove",value:function(t){if(!this.hasView(t))throw new I.b("contextualballoon-remove-view-not-exist: Cannot remove the configuration of a non-existent view.",[this,t]);var r=this._viewToStack.get(t);this._singleViewMode&&this.visibleView===t&&(this._singleViewMode=!1),this.visibleView===t&&(1===r.size?this._idToStack.size>1?this._showNextStack():(this.view.hide(),this.visibleView=null,this._rotatorView.hideView()):this._showView(Array.from(r.values())[r.size-2])),1===r.size?(this._idToStack.delete(this._getStackId(r)),this._numberOfStacks=this._idToStack.size):r.delete(t),this._viewToStack.delete(t)}},{key:"updatePosition",value:function(t){t&&(this._visibleStack.get(this.visibleView).position=t),this.view.pin(this._getBalloonPosition()),this._fakePanelsView.updatePosition()}},{key:"showStack",value:function(t){this.visibleStack=t;var r=this._idToStack.get(t);if(!r)throw new I.b("contextualballoon-showstack-stack-not-exist: Cannot show a stack that does not exist.",this);this._visibleStack!==r&&this._showView(Array.from(r.values()).pop())}},{key:"_visibleStack",get:function(){return this._viewToStack.get(this.visibleView)}},{key:"_getStackId",value:function(t){return Array.from(this._idToStack.entries()).find(function(r){return r[1]===t})[0]}},{key:"_showNextStack",value:function(){var t=Array.from(this._idToStack.values()),r=t.indexOf(this._visibleStack)+1;t[r]||(r=0),this.showStack(this._getStackId(t[r]))}},{key:"_showPrevStack",value:function(){var t=Array.from(this._idToStack.values()),r=t.indexOf(this._visibleStack)-1;t[r]||(r=t.length-1),this.showStack(this._getStackId(t[r]))}},{key:"_createRotatorView",value:function(){var t=this,r=new rk(this.editor.locale),o=this.editor.locale.t;return this.view.content.add(r),r.bind("isNavigationVisible").to(this,"_numberOfStacks",this,"_singleViewMode",function(s,l){return!l&&s>1}),r.on("change:isNavigationVisible",function(){return t.updatePosition()},{priority:"low"}),r.bind("counter").to(this,"visibleView",this,"_numberOfStacks",function(s,l){if(l<2)return"";var c=Array.from(t._idToStack.values()).indexOf(t._visibleStack)+1;return o("%0 of %1",[c,l])}),r.buttonNextView.on("execute",function(){r.focusTracker.isFocused&&t.editor.editing.view.focus(),t._showNextStack()}),r.buttonPrevView.on("execute",function(){r.focusTracker.isFocused&&t.editor.editing.view.focus(),t._showPrevStack()}),r}},{key:"_createFakePanelsView",value:function(){var t=new ik(this.editor.locale,this.view);return t.bind("numberOfPanels").to(this,"_numberOfStacks",this,"_singleViewMode",function(r,o){return!o&&r>=2?Math.min(r-1,2):0}),t.listenTo(this.view,"change:top",function(){return t.updatePosition()}),t.listenTo(this.view,"change:left",function(){return t.updatePosition()}),this.editor.ui.view.body.add(t),t}},{key:"_showView",value:function(t){var r=t.view,o=t.balloonClassName,l=t.withArrow,c=void 0===l||l,u=t.singleViewMode,d=void 0!==u&&u;this.view.class=void 0===o?"":o,this.view.withArrow=c,this._rotatorView.showView(r),this.visibleView=r,this.view.pin(this._getBalloonPosition()),this._fakePanelsView.updatePosition(),d&&(this._singleViewMode=!0)}},{key:"_getBalloonPosition",value:function(){var t=Array.from(this._visibleStack.values()).pop().position;return t&&!t.limiter&&(t=Object.assign({},t,{limiter:this.positionLimiter})),t}}],[{key:"pluginName",get:function(){return"ContextualBalloon"}}]),e}(U),rk=function(a){P(e,a);var i=M(e);function e(n){var t;A(this,e),t=i.call(this,n);var r=n.t,o=t.bindTemplate;return t.set("isNavigationVisible",!0),t.focusTracker=new lt,t.buttonPrevView=t._createButtonView(r("Previous"),'<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M11.463 5.187a.888.888 0 1 1 1.254 1.255L9.16 10l3.557 3.557a.888.888 0 1 1-1.254 1.255L7.26 10.61a.888.888 0 0 1 .16-1.382l4.043-4.042z"/></svg>'),t.buttonNextView=t._createButtonView(r("Next"),'<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M8.537 14.813a.888.888 0 1 1-1.254-1.255L10.84 10 7.283 6.442a.888.888 0 1 1 1.254-1.255L12.74 9.39a.888.888 0 0 1-.16 1.382l-4.043 4.042z"/></svg>'),t.content=t.createCollection(),t.setTemplate({tag:"div",attributes:{class:["ck","ck-balloon-rotator"],"z-index":"-1"},children:[{tag:"div",attributes:{class:["ck-balloon-rotator__navigation",o.to("isNavigationVisible",function(s){return s?"":"ck-hidden"})]},children:[t.buttonPrevView,{tag:"span",attributes:{class:["ck-balloon-rotator__counter"]},children:[{text:o.to("counter")}]},t.buttonNextView]},{tag:"div",attributes:{class:"ck-balloon-rotator__content"},children:t.content}]}),t}return C(e,[{key:"render",value:function(){B(L(e.prototype),"render",this).call(this),this.focusTracker.add(this.element)}},{key:"showView",value:function(t){this.hideView(),this.content.add(t)}},{key:"hideView",value:function(){this.content.clear()}},{key:"_createButtonView",value:function(t,r){var o=new be(this.locale);return o.set({label:t,icon:r,tooltip:!0}),o}}]),e}(ue),ik=function(a){P(e,a);var i=M(e);function e(n,t){var r;A(this,e);var o=(r=i.call(this,n)).bindTemplate;return r.set("top",0),r.set("left",0),r.set("height",0),r.set("width",0),r.set("numberOfPanels",0),r.content=r.createCollection(),r._balloonPanelView=t,r.setTemplate({tag:"div",attributes:{class:["ck-fake-panel",o.to("numberOfPanels",function(s){return s?"":"ck-hidden"})],style:{top:o.to("top",oi),left:o.to("left",oi),width:o.to("width",oi),height:o.to("height",oi)}},children:r.content}),r.on("change:numberOfPanels",function(s,l,c,u){c>u?r._addPanels(c-u):r._removePanels(u-c),r.updatePosition()}),r}return C(e,[{key:"_addPanels",value:function(t){for(;t--;){var r=new ue;r.setTemplate({tag:"div"}),this.content.add(r),this.registerChild(r)}}},{key:"_removePanels",value:function(t){for(;t--;){var r=this.content.last;this.content.remove(r),this.deregisterChild(r),r.destroy()}}},{key:"updatePosition",value:function(){if(this.numberOfPanels){var t=this._balloonPanelView,r=t.top,o=t.left,s=new Ze(this._balloonPanelView.element);Object.assign(this,{top:r,left:o,width:s.width,height:s.height})}}}]),e}(ue);function Mu(a){var i=a.editing.view,e=pe.defaultPositions;return{target:i.domConverter.viewToDom(i.document.selection.getSelectedElement()),positions:[e.northArrowSouth,e.northArrowSouthWest,e.northArrowSouthEast,e.southArrowNorth,e.southArrowNorthWest,e.southArrowNorthEast]}}var ok=function(a){P(e,a);var i=M(e);function e(){return A(this,e),i.apply(this,arguments)}return C(e,[{key:"init",value:function(){this._createButton(),this._createForm()}},{key:"destroy",value:function(){B(L(e.prototype),"destroy",this).call(this),this._form.destroy()}},{key:"_createButton",value:function(){var t=this,r=this.editor,o=r.t;r.ui.componentFactory.add("imageTextAlternative",function(s){var l=r.commands.get("imageTextAlternative"),c=new be(s);return c.set({label:o("Change image text alternative"),icon:'<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M5.085 6.22L2.943 4.078a.75.75 0 1 1 1.06-1.06l2.592 2.59A11.094 11.094 0 0 1 10 5.068c4.738 0 8.578 3.101 8.578 5.083 0 1.197-1.401 2.803-3.555 3.887l1.714 1.713a.75.75 0 0 1-.09 1.138.488.488 0 0 1-.15.084.75.75 0 0 1-.821-.16L6.17 7.304c-.258.11-.51.233-.757.365l6.239 6.24-.006.005.78.78c-.388.094-.78.166-1.174.215l-1.11-1.11h.011L4.55 8.197a7.2 7.2 0 0 0-.665.514l-.112.098 4.897 4.897-.005.006 1.276 1.276a10.164 10.164 0 0 1-1.477-.117l-.479-.479-.009.009-4.863-4.863-.022.031a2.563 2.563 0 0 0-.124.2c-.043.077-.08.158-.108.241a.534.534 0 0 0-.028.133.29.29 0 0 0 .008.072.927.927 0 0 0 .082.226c.067.133.145.26.234.379l3.242 3.365.025.01.59.623c-3.265-.918-5.59-3.155-5.59-4.668 0-1.194 1.448-2.838 3.663-3.93zm7.07.531a4.632 4.632 0 0 1 1.108 5.992l.345.344.046-.018a9.313 9.313 0 0 0 2-1.112c.256-.187.5-.392.727-.613.137-.134.27-.277.392-.431.072-.091.141-.185.203-.286.057-.093.107-.19.148-.292a.72.72 0 0 0 .036-.12.29.29 0 0 0 .008-.072.492.492 0 0 0-.028-.133.999.999 0 0 0-.036-.096 2.165 2.165 0 0 0-.071-.145 2.917 2.917 0 0 0-.125-.2 3.592 3.592 0 0 0-.263-.335 5.444 5.444 0 0 0-.53-.523 7.955 7.955 0 0 0-1.054-.768 9.766 9.766 0 0 0-1.879-.891c-.337-.118-.68-.219-1.027-.301zm-2.85.21l-.069.002a.508.508 0 0 0-.254.097.496.496 0 0 0-.104.679.498.498 0 0 0 .326.199l.045.005c.091.003.181.003.272.012a2.45 2.45 0 0 1 2.017 1.513c.024.061.043.125.069.185a.494.494 0 0 0 .45.287h.008a.496.496 0 0 0 .35-.158.482.482 0 0 0 .13-.335.638.638 0 0 0-.048-.219 3.379 3.379 0 0 0-.36-.723 3.438 3.438 0 0 0-2.791-1.543l-.028-.001h-.013z"/></svg>',tooltip:!0}),c.bind("isEnabled").to(l,"isEnabled"),t.listenTo(c,"execute",function(){t._showForm()}),c})}},{key:"_createForm",value:function(){var t=this,r=this.editor,o=r.editing.view.document;this._balloon=this.editor.plugins.get("ContextualBalloon"),this._form=new nk(r.locale),this._form.render(),this.listenTo(this._form,"submit",function(){r.execute("imageTextAlternative",{newValue:t._form.labeledInput.fieldView.element.value}),t._hideForm(!0)}),this.listenTo(this._form,"cancel",function(){t._hideForm(!0)}),this._form.keystrokes.set("Esc",function(s,l){t._hideForm(!0),l()}),this.listenTo(r.ui,"update",function(){Bo(o.selection)?t._isVisible&&function(s){var l=s.plugins.get("ContextualBalloon");if(Bo(s.editing.view.document.selection)){var c=Mu(s);l.updatePosition(c)}}(r):t._hideForm(!0)}),xo({emitter:this._form,activator:function(){return t._isVisible},contextElements:[this._balloon.view.element],callback:function(){return t._hideForm()}})}},{key:"_showForm",value:function(){if(!this._isVisible){var t=this.editor,r=t.commands.get("imageTextAlternative"),o=this._form.labeledInput;this._isInBalloon||this._balloon.add({view:this._form,position:Mu(t)}),o.fieldView.value=o.fieldView.element.value=r.value||"",this._form.labeledInput.fieldView.select()}}},{key:"_hideForm",value:function(t){this._isInBalloon&&(this._form.focusTracker.isFocused&&this._form.saveButtonView.focus(),this._balloon.remove(this._form),t&&this.editor.editing.view.focus())}},{key:"_isVisible",get:function(){return this._balloon.visibleView===this._form}},{key:"_isInBalloon",get:function(){return this._balloon.hasView(this._form)}}],[{key:"requires",get:function(){return[ai]}},{key:"pluginName",get:function(){return"ImageTextAlternativeUI"}}]),e}(U),ak=function(a){P(e,a);var i=M(e);function e(){return A(this,e),i.apply(this,arguments)}return C(e,null,[{key:"requires",get:function(){return[ek,ok]}},{key:"pluginName",get:function(){return"ImageTextAlternative"}}]),e}(U);E(65);var Iu=function(a){P(e,a);var i=M(e);function e(){return A(this,e),i.apply(this,arguments)}return C(e,null,[{key:"requires",get:function(){return[su,Ko,ak]}},{key:"pluginName",get:function(){return"Image"}}]),e}(U);E(67);var Nu=function(a){P(e,a);var i=M(e);function e(n){var t;A(this,e);var r=(t=i.call(this,n)).bindTemplate;return t.set("icon"),t.set("isEnabled",!0),t.set("isOn",!1),t.set("isToggleable",!1),t.set("isVisible",!0),t.set("keystroke"),t.set("label"),t.set("tabindex",-1),t.set("tooltip"),t.set("tooltipPosition","s"),t.set("type","button"),t.set("withText",!1),t.children=t.createCollection(),t.actionView=t._createActionView(),t.arrowView=t._createArrowView(),t.keystrokes=new ft,t.focusTracker=new lt,t.setTemplate({tag:"div",attributes:{class:["ck","ck-splitbutton",r.if("isVisible","ck-hidden",function(o){return!o}),t.arrowView.bindTemplate.if("isOn","ck-splitbutton_open")]},children:t.children}),t}return C(e,[{key:"render",value:function(){var t=this;B(L(e.prototype),"render",this).call(this),this.children.add(this.actionView),this.children.add(this.arrowView),this.focusTracker.add(this.actionView.element),this.focusTracker.add(this.arrowView.element),this.keystrokes.listenTo(this.element),this.keystrokes.set("arrowright",function(r,o){t.focusTracker.focusedElement===t.actionView.element&&(t.arrowView.focus(),o())}),this.keystrokes.set("arrowleft",function(r,o){t.focusTracker.focusedElement===t.arrowView.element&&(t.actionView.focus(),o())})}},{key:"focus",value:function(){this.actionView.focus()}},{key:"_createActionView",value:function(){var t=new be;return t.bind("icon","isEnabled","isOn","isToggleable","keystroke","label","tabindex","tooltip","tooltipPosition","type","withText").to(this),t.extendTemplate({attributes:{class:"ck-splitbutton__action"}}),t.delegate("execute").to(this),t}},{key:"_createArrowView",value:function(){var t=new be,r=t.bindTemplate;return t.icon=rc,t.extendTemplate({attributes:{class:"ck-splitbutton__arrow","aria-haspopup":!0,"aria-expanded":r.to("isOn",function(o){return String(o)})}}),t.bind("isEnabled").to(this),t.delegate("execute").to(this,"open"),t}}]),e}(ue);E(69);var sk=function(a){P(e,a);var i=M(e);function e(n){var t,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};A(this,e);var o=(t=i.call(this,n)).bindTemplate;return t.set("class",r.class||null),t.children=t.createCollection(),r.children&&r.children.forEach(function(s){return t.children.add(s)}),t.set("_role",null),t.set("_ariaLabelledBy",null),r.labelView&&t.set({_role:"group",_ariaLabelledBy:r.labelView.id}),t.setTemplate({tag:"div",attributes:{class:["ck","ck-form__row",o.to("class")],role:o.to("_role"),"aria-labelledby":o.to("_ariaLabelledBy")},children:t.children}),t}return C(e)}(ue),Ru='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M6.91 10.54c.26-.23.64-.21.88.03l3.36 3.14 2.23-2.06a.64.64 0 0 1 .87 0l2.52 2.97V4.5H3.2v10.12l3.71-4.08zm10.27-7.51c.6 0 1.09.47 1.09 1.05v11.84c0 .59-.49 1.06-1.09 1.06H2.79c-.6 0-1.09-.47-1.09-1.06V4.08c0-.58.49-1.05 1.1-1.05h14.38zm-5.22 5.56a1.96 1.96 0 1 1 3.4-1.96 1.96 1.96 0 0 1-3.4 1.96z"/></svg>';E(71);var lk=function(a){P(e,a);var i=M(e);function e(n,t){var r;A(this,e);var o=(r=i.call(this,n))._createActionButtons(n),l=o.cancelButtonView;if(r.insertButtonView=o.insertButtonView,r.cancelButtonView=l,r.dropdownView=r._createDropdownView(n),r.set("imageURLInputValue",""),r.focusTracker=new lt,r.keystrokes=new ft,r._focusables=new Ht,r._focusCycler=new Lt({focusables:r._focusables,focusTracker:r.focusTracker,keystrokeHandler:r.keystrokes,actions:{focusPrevious:"shift + tab",focusNext:"tab"}}),r.set("_integrations",new Qe),t)for(var c=function(){var f=ee(d[u],2),g=f[1];"insertImageViaUrl"===f[0]&&(g.fieldView.bind("value").to(X(r),"imageURLInputValue",function(m){return m||""}),g.fieldView.on("input",function(){r.imageURLInputValue=g.fieldView.element.value})),r._integrations.add(g)},u=0,d=Object.entries(t);u<d.length;u++)c();return r.setTemplate({tag:"form",attributes:{class:["ck","ck-image-upload-form"],tabindex:"-1"},children:[].concat(Y(r._integrations),[new sk(n,{children:[r.insertButtonView,r.cancelButtonView],class:"ck-image-upload-form__action-row"})])}),r}return C(e,[{key:"render",value:function(){var t=this;B(L(e.prototype),"render",this).call(this),ni({view:this});var r=[].concat(Y(this._integrations),[this.insertButtonView,this.cancelButtonView]);r.forEach(function(s){t._focusables.add(s),t.focusTracker.add(s.element)}),this.keystrokes.listenTo(this.element);var o=function(l){return l.stopPropagation()};this.keystrokes.set("arrowright",o),this.keystrokes.set("arrowleft",o),this.keystrokes.set("arrowup",o),this.keystrokes.set("arrowdown",o),this.listenTo(r[0].element,"selectstart",function(s,l){l.stopPropagation()},{priority:"high"})}},{key:"_createDropdownView",value:function(t){var r=t.t,o=yt(t,Nu),l=o.panelView;return o.buttonView.set({label:r("Insert image"),icon:Ru,tooltip:!0}),l.extendTemplate({attributes:{class:"ck-image-upload__panel"}}),o}},{key:"_createActionButtons",value:function(t){var r=t.t,o=new be(t),s=new be(t);return o.set({label:r("Insert"),icon:ri,class:"ck-button-save",type:"submit",withText:!0,isEnabled:this.imageURLInputValue}),s.set({label:r("Cancel"),icon:ii,class:"ck-button-cancel",withText:!0}),o.bind("isEnabled").to(this,"imageURLInputValue"),o.delegate("execute").to(this,"submit"),s.delegate("execute").to(this,"cancel"),{insertButtonView:o,cancelButtonView:s}}},{key:"focus",value:function(){this._focusCycler.focusFirst()}}]),e}(ue),ck=function(a){P(e,a);var i=M(e);function e(n){var t;return A(this,e),(t=i.call(this,n)).buttonView=new be(n),t._fileInputView=new uk(n),t._fileInputView.bind("acceptedType").to(X(t)),t._fileInputView.bind("allowMultipleFiles").to(X(t)),t._fileInputView.delegate("done").to(X(t)),t.setTemplate({tag:"span",attributes:{class:"ck-file-dialog-button"},children:[t.buttonView,t._fileInputView]}),t.buttonView.on("execute",function(){t._fileInputView.open()}),t}return C(e,[{key:"focus",value:function(){this.buttonView.focus()}}]),e}(ue),uk=function(a){P(e,a);var i=M(e);function e(n){var t;A(this,e),(t=i.call(this,n)).set("acceptedType"),t.set("allowMultipleFiles",!1);var r=t.bindTemplate;return t.setTemplate({tag:"input",attributes:{class:["ck-hidden"],type:"file",tabindex:"-1",accept:r.to("acceptedType"),multiple:r.to("allowMultipleFiles")},on:{change:r.to(function(){t.element&&t.element.files&&t.element.files.length&&t.fire("done",t.element.files),t.element.value=""})}}),t}return C(e,[{key:"open",value:function(){this.element.click()}}]),e}(ue);function Ou(a){var i=a.map(function(e){return e.replace("+","\\+")});return new RegExp("^image\\/(".concat(i.join("|"),")$"))}function dk(a){var i=a.t,e=new ei(a,ti);return e.set({label:i("Insert image via URL")}),e.fieldView.placeholder="https://example.com/src/image.png",e.infoText=i("Paste the image source URL."),e}var hk=function(a){P(e,a);var i=M(e);function e(){return A(this,e),i.apply(this,arguments)}return C(e,[{key:"init",value:function(){var t=this,r=this.editor,o=!!r.config.get("image.upload.panel.items");r.ui.componentFactory.add("imageUpload",function(s){return o?t._createDropdownView(s):t._createFileDialogButtonView(s)})}},{key:"_setUpDropdown",value:function(t,r,o){var s=this.editor,l=s.t,c=r.insertButtonView;function u(){s.editing.view.focus(),t.isOpen=!1}return t.bind("isEnabled").to(o),t.on("change:isOpen",function(){var d=s.model.document.selection.getSelectedElement();t.isOpen&&(r.focus(),xn(d)?(r.imageURLInputValue=d.getAttribute("src"),c.label=l("Update")):(r.imageURLInputValue="",c.label=l("Insert")))}),r.delegate("submit","cancel").to(t),this.delegate("cancel").to(t),t.on("submit",function(){var d;u(),xn(d=s.model.document.selection.getSelectedElement())?s.model.change(function(h){h.setAttribute("src",r.imageURLInputValue,d),h.removeAttribute("srcset",d),h.removeAttribute("sizes",d)}):s.execute("imageInsert",{source:r.imageURLInputValue})}),t.on("cancel",function(){u()}),t}},{key:"_createDropdownView",value:function(t){var r=this.editor,o=new lk(t,function(u){var d=u.config.get("image.upload.panel.items"),h=u.plugins.get("ImageUploadUI"),f={insertImageViaUrl:dk(u.locale)};if(!d)return f;if(d.find(function(g){return"openCKFinder"===g})&&u.ui.componentFactory.has("ckfinder")){var v=u.ui.componentFactory.create("ckfinder");v.set({withText:!0,class:"ck-image-upload__ck-finder-button"}),v.delegate("execute").to(h,"cancel"),f.openCKFinder=v}return d.reduce(function(g,m){return f[m]?g[m]=f[m]:u.ui.componentFactory.has(m)&&(g[m]=u.ui.componentFactory.create(m)),g},{})}(r)),s=r.commands.get("imageUpload"),l=o.dropdownView,c=l.panelView;return l.buttonView.actionView=this._createFileDialogButtonView(t),c.children.add(o),this._setUpDropdown(l,o,s)}},{key:"_createFileDialogButtonView",value:function(t){var r=this.editor,o=t.t,s=r.config.get("image.upload.types"),l=new ck(t),c=Ou(s),u=r.commands.get("imageUpload");return l.set({acceptedType:s.map(function(d){return"image/"+d}).join(","),allowMultipleFiles:!0}),l.buttonView.set({label:o("Insert image"),icon:Ru,tooltip:!0}),l.buttonView.bind("isEnabled").to(u),l.on("done",function(d,h){var f=Array.from(h).filter(function(v){return c.test(v.type)});f.length&&r.execute("imageUpload",{file:f})}),l}}],[{key:"pluginName",get:function(){return"ImageUploadUI"}}]),e}(U);E(73),E(75),E(77);var fk=function(a){P(e,a);var i=M(e);function e(n){var t;return A(this,e),(t=i.call(this,n)).placeholder="data:image/svg+xml;utf8,"+encodeURIComponent('<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 700 250"><rect rx="4"/></svg>'),t}return C(e,[{key:"init",value:function(){var t=this;this.editor.editing.downcastDispatcher.on("attribute:uploadStatus:image",function(){return t.uploadStatusChange.apply(t,arguments)})}},{key:"uploadStatusChange",value:function(t,r,o){var m,p,y,w,T,x,_,s=this.editor,l=r.item,c=l.getAttribute("uploadId");if(o.consumable.consume(r.item,t.name)){var u=s.plugins.get(Pt),d=c?r.attributeNewValue:null,h=this.placeholder,f=s.editing.mapper.toViewElement(l),v=o.writer;if("reading"==d)return Du(f,v),void Lu(h,f,v);if("uploading"==d){var g=u.loaders.get(c);return Du(f,v),void(g?(Vu(f,v),m=f,p=v,y=g,w=s.editing.view,x=(T=p).createUIElement("div",{class:"ck-progress-bar"}),T.setCustomProperty("progressBar",!0,x),_=x,p.insert(p.createPositionAt(m,"end"),_),y.on("change:uploadedPercent",function(T,x,N){w.change(function(D){D.setStyle("width",N+"%",_)})}),function(m,p,y){if(y.data){var w=rn(m);p.setAttribute("src",y.data,w)}}(f,v,g)):Lu(h,f,v))}"complete"==d&&u.loaders.get(c)&&function(m,p,y){var w=p.createUIElement("div",{class:"ck-image-upload-complete-icon"});p.insert(p.createPositionAt(m,"end"),w),setTimeout(function(){y.change(function(_){return _.remove(_.createRangeOn(w))})},3e3)}(f,v,s.editing.view),function(m,p){Bu(m,p,"progressBar")}(f,v),Vu(f,v),function(m,p){p.removeClass("ck-appear",m)}(f,v)}}}]),e}(U);function Du(a,i){a.hasClass("ck-appear")||i.addClass("ck-appear",a)}function Lu(a,i,e){i.hasClass("ck-image-upload-placeholder")||e.addClass("ck-image-upload-placeholder",i);var t,r,n=rn(i);n.getAttribute("src")!==a&&e.setAttribute("src",a,n),ju(i,"placeholder")||e.insert(e.createPositionAfter(n),(r=(t=e).createUIElement("div",{class:"ck-upload-placeholder-loader"}),t.setCustomProperty("placeholder",!0,r),r))}function Vu(a,i){a.hasClass("ck-image-upload-placeholder")&&i.removeClass("ck-image-upload-placeholder",a),Bu(a,i,"placeholder")}function ju(a,i){var n,e=k(a.getChildren());try{for(e.s();!(n=e.n()).done;){var t=n.value;if(t.getCustomProperty(i))return t}}catch(r){e.e(r)}finally{e.f()}}function Bu(a,i,e){var n=ju(a,e);n&&i.remove(i.createRangeOn(n))}var si=function(){function a(i){A(this,a),this.document=i}return C(a,[{key:"createDocumentFragment",value:function(e){return new mn(this.document,e)}},{key:"createElement",value:function(e,n,t){return new _t(this.document,e,n,t)}},{key:"createText",value:function(e){return new Pe(this.document,e)}},{key:"clone",value:function(e){return e._clone(arguments.length>1&&void 0!==arguments[1]&&arguments[1])}},{key:"appendChild",value:function(e,n){return n._appendChild(e)}},{key:"insertChild",value:function(e,n,t){return t._insertChild(e,n)}},{key:"removeChildren",value:function(e,n,t){return t._removeChildren(e,n)}},{key:"remove",value:function(e){var n=e.parent;return n?this.removeChildren(n.getChildIndex(e),1,n):[]}},{key:"replace",value:function(e,n){var t=e.parent;if(t){var r=t.getChildIndex(e);return this.removeChildren(r,1,t),this.insertChild(r,n,t),!0}return!1}},{key:"unwrapElement",value:function(e){var n=e.parent;if(n){var t=n.getChildIndex(e);this.remove(e),this.insertChild(t,e.getChildren(),n)}}},{key:"rename",value:function(e,n){var t=new _t(this.document,e,n.getAttributes(),n.getChildren());return this.replace(n,t)?t:null}},{key:"setAttribute",value:function(e,n,t){t._setAttribute(e,n)}},{key:"removeAttribute",value:function(e,n){n._removeAttribute(e)}},{key:"addClass",value:function(e,n){n._addClass(e)}},{key:"removeClass",value:function(e,n){n._removeClass(e)}},{key:"setStyle",value:function(e,n,t){qe(e)&&void 0===t&&(t=n),t._setStyle(e,n)}},{key:"removeStyle",value:function(e,n){n._removeStyle(e)}},{key:"setCustomProperty",value:function(e,n,t){t._setCustomProperty(e,n)}},{key:"removeCustomProperty",value:function(e,n){return n._removeCustomProperty(e)}},{key:"createPositionAt",value:function(e,n){return Z._createAt(e,n)}},{key:"createPositionAfter",value:function(e){return Z._createAfter(e)}},{key:"createPositionBefore",value:function(e){return Z._createBefore(e)}},{key:"createRange",value:function(e,n){return new fe(e,n)}},{key:"createRangeOn",value:function(e){return fe._createOn(e)}},{key:"createRangeIn",value:function(e){return fe._createIn(e)}},{key:"createSelection",value:function(e,n,t){return new Rt(e,n,t)}}]),a}(),vk=function(a){P(e,a);var i=M(e);function e(){return A(this,e),i.apply(this,arguments)}return C(e,[{key:"refresh",value:function(){var t=this.editor.model.document.selection.getSelectedElement(),r=t&&"image"===t.name||!1;this.isEnabled=ou(this.editor.model)||r}},{key:"execute",value:function(t){var r=this.editor,o=r.model,s=r.plugins.get(Pt);o.change(function(l){var d,c=Array.isArray(t.file)?t.file:[t.file],u=k(c);try{for(u.s();!(d=u.n()).done;)gk(l,o,s,d.value)}catch(f){u.e(f)}finally{u.f()}})}}]),e}(ve);function gk(a,i,e,n){var t=e.createLoader(n);t&&iu(a,i,{uploadId:t.id})}var mk=function(a){P(e,a);var i=M(e);function e(n){var t;return A(this,e),t=i.call(this,n),n.config.define("image",{upload:{types:["jpeg","png","gif","bmp","webp","tiff"]}}),t}return C(e,[{key:"init",value:function(){var t=this,r=this.editor,o=r.model.document,s=r.model.schema,l=r.conversion,c=r.plugins.get(Pt),u=Ou(r.config.get("image.upload.types"));s.extend("image",{allowAttributes:["uploadId","uploadStatus"]}),r.commands.add("imageUpload",new vk(r)),l.for("upcast").attributeToAttribute({view:{name:"img",key:"uploadId"},model:"uploadId"}),this.listenTo(r.editing.view.document,"clipboardInput",function(d,h){if(f=h.dataTransfer,!Array.from(f.types).includes("text/html")||""===f.getData("text/html")){var f,v=Array.from(h.dataTransfer.files).filter(function(m){return!!m&&u.test(m.type)}),g=h.targetRanges.map(function(m){return r.editing.mapper.toModelRange(m)});r.model.change(function(m){m.setSelection(g),v.length&&(d.stop(),r.model.enqueueChange("default",function(){r.execute("imageUpload",{file:v})}))})}}),this.listenTo(r.plugins.get(nn),"inputTransformation",function(d,h){var f=Array.from(r.editing.view.createRangeIn(h.content)).filter(function(w){return!(!(_=w.item).is("element","img")||!_.getAttribute("src"))&&(_.getAttribute("src").match(/^data:image\/\w+;base64,/g)||_.getAttribute("src").match(/^blob:/g))&&!w.item.getAttribute("uploadProcessed");var _}).map(function(w){return{promise:(_=w.item,new Promise(function(T,x){var N=_.getAttribute("src");fetch(N).then(function(D){return D.blob()}).then(function(D){var Q,K,z=(K=N,(Q=D).type?Q.type:K.match(/data:(image\/\w+);base64/)?K.match(/data:(image\/\w+);base64/)[1].toLowerCase():"image/jpeg"),J=z.replace("image/",""),$=new File([D],"image."+J,{type:z});T($)}).catch(x)})),imageElement:w.item};var _});if(f.length){var m,v=new si(r.editing.view.document),g=k(f);try{for(g.s();!(m=g.n()).done;){var p=m.value;v.setAttribute("uploadProcessed",!0,p.imageElement);var y=c.createLoader(p.promise);y&&(v.setAttribute("src","",p.imageElement),v.setAttribute("uploadId",y.id,p.imageElement))}}catch(w){g.e(w)}finally{g.f()}}}),r.editing.view.document.on("dragover",function(d,h){h.preventDefault()}),o.on("change",function(){var f,d=o.differ.getChanges({includeChangesInGraveyard:!0}),h=k(d);try{for(h.s();!(f=h.n()).done;){var v=f.value;if("insert"==v.type&&"$text"!=v.name){var y,m="$graveyard"==v.position.root.rootName,p=k(pk(r,v.position.nodeAfter));try{for(p.s();!(y=p.n()).done;){var w=y.value,_=w.getAttribute("uploadId");if(_){var T=c.loaders.get(_);T&&(m?T.abort():"idle"==T.status&&t._readAndUpload(T,w))}}}catch(x){p.e(x)}finally{p.f()}}}}catch(x){h.e(x)}finally{h.f()}})}},{key:"_readAndUpload",value:function(t,r){var o=this,s=this.editor,l=s.model,c=s.locale.t,u=s.plugins.get(Pt),d=s.plugins.get(Go);return l.enqueueChange("transparent",function(f){f.setAttribute("uploadStatus","reading",r)}),t.read().then(function(){var f=t.upload();if(At_isSafari){var v=rn(s.editing.mapper.toViewElement(r));s.editing.view.once("render",function(){if(v.parent){var g=s.editing.view.domConverter.mapViewToDom(v.parent);if(g){var m=g.style.display;g.style.display="none",g._ckHack=g.offsetHeight,g.style.display=m}}})}return l.enqueueChange("transparent",function(g){g.setAttribute("uploadStatus","uploading",r)}),f}).then(function(f){l.enqueueChange("transparent",function(v){v.setAttributes({uploadStatus:"complete",src:f.default},r),o._parseAndSetSrcsetAttributeOnImage(f,r,v)}),h()}).catch(function(f){if("error"!==t.status&&"aborted"!==t.status)throw f;"error"==t.status&&f&&d.showWarning(f,{title:c("Upload failed"),namespace:"upload"}),h(),l.enqueueChange("transparent",function(v){v.remove(r)})});function h(){l.enqueueChange("transparent",function(f){f.removeAttribute("uploadId",r),f.removeAttribute("uploadStatus",r)}),u.destroyLoader(t)}}},{key:"_parseAndSetSrcsetAttributeOnImage",value:function(t,r,o){var s=0,l=Object.keys(t).filter(function(c){var u=parseInt(c,10);if(!isNaN(u))return s=Math.max(s,u),!0}).map(function(c){return"".concat(t[c]," ").concat(c,"w")}).join(", ");""!=l&&o.setAttribute("srcset",{data:l,width:s},r)}}],[{key:"requires",get:function(){return[Pt,Go,nn]}},{key:"pluginName",get:function(){return"ImageUploadEditing"}}]),e}(U);function pk(a,i){return Array.from(a.model.createRangeOn(i)).filter(function(e){return e.item.is("element","image")}).map(function(e){return e.item})}var zu=function(a){P(e,a);var i=M(e);function e(){return A(this,e),i.apply(this,arguments)}return C(e,null,[{key:"pluginName",get:function(){return"ImageUpload"}},{key:"requires",get:function(){return[mk,hk,fk]}}]),e}(U),kk=function(a){P(e,a);var i=M(e);function e(){return A(this,e),i.apply(this,arguments)}return C(e,[{key:"refresh",value:function(){var t=this.editor.model,r=Xe(t.document.selection.getSelectedBlocks());this.value=!!r&&r.is("element","paragraph"),this.isEnabled=!!r&&Fu(r,t.schema)}},{key:"execute",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=this.editor.model,o=r.document;r.change(function(s){var u,l=(t.selection||o.selection).getSelectedBlocks(),c=k(l);try{for(c.s();!(u=c.n()).done;){var d=u.value;!d.is("element","paragraph")&&Fu(d,r.schema)&&s.rename(d,"paragraph")}}catch(h){c.e(h)}finally{c.f()}})}}]),e}(ve);function Fu(a,i){return i.checkChild(a.parent,"paragraph")&&!i.isObject(a)}var yk=function(a){P(e,a);var i=M(e);function e(){return A(this,e),i.apply(this,arguments)}return C(e,[{key:"execute",value:function(t){var r=this.editor.model,o=t.position;r.change(function(s){var l=s.createElement("paragraph");if(!r.schema.checkChild(o.parent,l)){var c=r.schema.findAllowedParent(o,l);if(!c)return;o=s.split(o,c).position}r.insertContent(l,o),s.setSelection(l,"in")})}}]),e}(ve),li=function(a){P(e,a);var i=M(e);function e(){return A(this,e),i.apply(this,arguments)}return C(e,[{key:"init",value:function(){var t=this.editor,r=t.model;t.commands.add("paragraph",new kk(t)),t.commands.add("insertParagraph",new yk(t)),r.schema.register("paragraph",{inheritAllFrom:"$block"}),t.conversion.elementToElement({model:"paragraph",view:"p"}),t.conversion.for("upcast").elementToElement({model:function(s,l){var c=l.writer;return e.paragraphLikeElements.has(s.name)?s.isEmpty?null:c.createElement("paragraph"):null},view:/.+/,converterPriority:"low"})}}],[{key:"pluginName",get:function(){return"Paragraph"}}]),e}(U);li.paragraphLikeElements=new Set(["blockquote","dd","div","dt","h1","h2","h3","h4","h5","h6","li","p","td","th"]);var bk=function(a){P(e,a);var i=M(e);function e(n,t){var r;return A(this,e),(r=i.call(this,n)).modelElements=t,r}return C(e,[{key:"refresh",value:function(){var t=this,r=Xe(this.editor.model.document.selection.getSelectedBlocks());this.value=!!r&&this.modelElements.includes(r.name)&&r.name,this.isEnabled=!!r&&this.modelElements.some(function(o){return Uu(r,o,t.editor.model.schema)})}},{key:"execute",value:function(t){var r=this.editor.model,o=r.document,s=t.value;r.change(function(l){var d,c=Array.from(o.selection.getSelectedBlocks()).filter(function(f){return Uu(f,s,r.schema)}),u=k(c);try{for(u.s();!(d=u.n()).done;){var h=d.value;h.is("element",s)||l.rename(h,s)}}catch(f){u.e(f)}finally{u.f()}})}}]),e}(ve);function Uu(a,i,e){return e.checkChild(a.parent,i)&&!e.isObject(a)}var wk=function(a){P(e,a);var i=M(e);function e(n){var t;return A(this,e),t=i.call(this,n),n.config.define("heading",{options:[{model:"paragraph",title:"Paragraph",class:"ck-heading_paragraph"},{model:"heading1",view:"h2",title:"Heading 1",class:"ck-heading_heading1"},{model:"heading2",view:"h3",title:"Heading 2",class:"ck-heading_heading2"},{model:"heading3",view:"h4",title:"Heading 3",class:"ck-heading_heading3"}]}),t}return C(e,[{key:"init",value:function(){var l,t=this.editor,r=t.config.get("heading.options"),o=[],s=k(r);try{for(s.s();!(l=s.n()).done;){var c=l.value;"paragraph"!==c.model&&(t.model.schema.register(c.model,{inheritAllFrom:"$block"}),t.conversion.elementToElement(c),o.push(c.model))}}catch(u){s.e(u)}finally{s.f()}this._addDefaultH1Conversion(t),t.commands.add("heading",new bk(t,o))}},{key:"afterInit",value:function(){var t=this.editor,r=t.commands.get("enter"),o=t.config.get("heading.options");r&&this.listenTo(r,"afterExecute",function(s,l){var c=t.model.document.selection.getFirstPosition().parent;o.some(function(u){return c.is("element",u.model)})&&!c.is("element","paragraph")&&0===c.childCount&&l.writer.rename(c,"paragraph")})}},{key:"_addDefaultH1Conversion",value:function(t){t.conversion.for("upcast").elementToElement({model:"heading1",view:"h1",converterPriority:mt.get("low")+1})}}],[{key:"pluginName",get:function(){return"HeadingEditing"}},{key:"requires",get:function(){return[li]}}]),e}(U);E(11);var _k=function(a){P(e,a);var i=M(e);function e(){return A(this,e),i.apply(this,arguments)}return C(e,[{key:"init",value:function(){var u,d,h,t=this,r=this.editor,o=r.t,s=(h={Paragraph:(d=(u=r).t)("Paragraph"),"Heading 1":d("Heading 1"),"Heading 2":d("Heading 2"),"Heading 3":d("Heading 3"),"Heading 4":d("Heading 4"),"Heading 5":d("Heading 5"),"Heading 6":d("Heading 6")},u.config.get("heading.options").map(function(f){var v=h[f.title];return v&&v!=f.title&&(f.title=v),f})),l=o("Choose heading"),c=o("Heading");r.ui.componentFactory.add("heading",function(u){var p,d={},h=new Qe,f=r.commands.get("heading"),v=r.commands.get("paragraph"),g=[f],m=k(s);try{var y=function(){var T=p.value,x={type:"button",model:new tr({label:T.title,class:T.class,withText:!0})};"paragraph"===T.model?(x.model.bind("isOn").to(v,"value"),x.model.set("commandName","paragraph"),g.push(v)):(x.model.bind("isOn").to(f,"value",function(N){return N===T.model}),x.model.set({commandName:"heading",commandValue:T.model})),h.add(x),d[T.model]=T.title};for(m.s();!(p=m.n()).done;)y()}catch(_){m.e(_)}finally{m.f()}var w=yt(u);return Wr(w,h),w.buttonView.set({isOn:!1,withText:!0,tooltip:c}),w.extendTemplate({attributes:{class:["ck-heading-dropdown"]}}),w.bind("isEnabled").toMany(g,"isEnabled",function(){for(var _=arguments.length,T=new Array(_),x=0;x<_;x++)T[x]=arguments[x];return T.some(function(N){return N})}),w.buttonView.bind("label").to(f,"value",v,"value",function(_,T){var x=_||T&&"paragraph";return d[x]?d[x]:l}),t.listenTo(w,"execute",function(_){r.execute(_.source.commandName,_.source.commandValue?{value:_.source.commandValue}:void 0),r.editing.view.focus()}),w})}}]),e}(U);function Jo(a){var e,i=k(a.getChildren());try{for(i.s();!(e=i.n()).done;){var n=e.value;if(n&&n.is("element","caption"))return n}}catch(t){i.e(t)}finally{i.f()}return null}function Ak(a){var i=a.parent;return"figcaption"==a.name&&i&&"figure"==i.name&&i.hasClass("image")?{name:!0}:null}var Ck=function(a){P(e,a);var i=M(e);function e(){return A(this,e),i.apply(this,arguments)}return C(e,[{key:"init",value:function(){var t=this,r=this.editor,o=r.editing.view,l=r.data,c=r.editing,u=r.t;r.model.schema.register("caption",{allowIn:"image",allowContentOf:"$block",isLimit:!0}),r.model.document.registerPostFixer(function(h){return t._insertMissingModelCaptionElement(h)}),r.conversion.for("upcast").elementToElement({view:Ak,model:"caption"}),l.downcastDispatcher.on("insert:caption",Hu(function(h){return h.createContainerElement("figcaption")},!1));var h,f,d=(h=o,f=u("Enter image caption"),function(v){var g=v.createEditableElement("figcaption");return v.setCustomProperty("imageCaption",!0,g),zl({view:h,element:g,text:f}),jo(g,v)});c.downcastDispatcher.on("insert:caption",Hu(d)),c.downcastDispatcher.on("insert",this._fixCaptionVisibility(function(h){return h.item}),{priority:"high"}),c.downcastDispatcher.on("remove",this._fixCaptionVisibility(function(h){return h.position.parent}),{priority:"high"}),o.document.registerPostFixer(function(h){return t._updateCaptionVisibility(h)})}},{key:"_updateCaptionVisibility",value:function(t){var s,r=this.editor.editing.mapper,o=this._lastSelectedCaption,l=this.editor.model.document.selection,c=l.getSelectedElement();if(c&&c.is("element","image")){var u=Jo(c);s=r.toViewElement(u)}var d=Wu(l.getFirstPosition().parent);if(d&&(s=r.toViewElement(d)),s)return o?(o===s||(qu(o,t),this._lastSelectedCaption=s),Gu(s,t)):(this._lastSelectedCaption=s,Gu(s,t));if(o){var h=qu(o,t);return this._lastSelectedCaption=null,h}return!1}},{key:"_fixCaptionVisibility",value:function(t){var r=this;return function(o,s,l){var c=Wu(t(s)),d=l.writer;if(c){var h=r.editor.editing.mapper.toViewElement(c);h&&(c.childCount?d.removeClass("ck-hidden",h):d.addClass("ck-hidden",h))}}}},{key:"_insertMissingModelCaptionElement",value:function(t){var c,r=this.editor.model,o=r.document.differ.getChanges(),s=[],l=k(o);try{for(l.s();!(c=l.n()).done;){var u=c.value;if("insert"==u.type&&"$text"!=u.name){var d=u.position.nodeAfter;if(d.is("element","image")&&!Jo(d)&&s.push(d),!d.is("element","image")&&d.childCount){var f,h=k(r.createRangeIn(d).getItems());try{for(h.s();!(f=h.n()).done;){var v=f.value;v.is("element","image")&&!Jo(v)&&s.push(v)}}catch(y){h.e(y)}finally{h.f()}}}}}catch(y){l.e(y)}finally{l.f()}for(var g=0,m=s;g<m.length;g++)t.appendElement("caption",m[g]);return!!s.length}}],[{key:"pluginName",get:function(){return"ImageCaptionEditing"}}]),e}(U);function Hu(a){var i=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return function(e,n,t){var c,u,h,f,r=n.item;if((r.childCount||i)&&xn(r.parent)){if(!t.consumable.consume(n.item,"insert"))return;var o=t.mapper.toViewElement(n.range.start.parent),s=a(t.writer);r.childCount||t.writer.addClass("ck-hidden",s),c=s,u=n.item,f=(h=t).writer.createPositionAt(o,"end"),h.writer.insert(f,c),h.mapper.bindElements(u,c)}}}function Wu(a){var i=a.getAncestors({includeSelf:!0}).find(function(e){return"caption"==e.name});return i&&i.parent&&"image"==i.parent.name?i:null}function qu(a,i){return!a.childCount&&!a.hasClass("ck-hidden")&&(i.addClass("ck-hidden",a),!0)}function Gu(a,i){return!!a.hasClass("ck-hidden")&&(i.removeClass("ck-hidden",a),!0)}E(80);var Tk=function(a){P(e,a);var i=M(e);function e(n,t){var r;return A(this,e),(r=i.call(this,n)).defaultStyle=!1,r.styles=t.reduce(function(o,s){return o[s.name]=s,s.isDefault&&(r.defaultStyle=s.name),o},{}),r}return C(e,[{key:"refresh",value:function(){var t=this.editor.model.document.selection.getSelectedElement();if(this.isEnabled=xn(t),t)if(t.hasAttribute("imageStyle")){var r=t.getAttribute("imageStyle");this.value=!!this.styles[r]&&r}else this.value=this.defaultStyle;else this.value=!1}},{key:"execute",value:function(t){var r=this,o=t.value,s=this.editor.model,l=s.document.selection.getSelectedElement();s.change(function(c){r.styles[o].isDefault?c.removeAttribute("imageStyle",l):c.setAttribute("imageStyle",o,l)})}}]),e}(ve);function Yu(a,i){var n,e=k(i);try{for(e.s();!(n=e.n()).done;){var t=n.value;if(t.name===a)return t}}catch(r){e.e(r)}finally{e.f()}}var $u='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M2 4.5V3h16v1.5zm2.5 3V12h11V7.5h-11zM4.061 6H15.94c.586 0 1.061.407 1.061.91v5.68c0 .503-.475.91-1.061.91H4.06c-.585 0-1.06-.407-1.06-.91V6.91C3 6.406 3.475 6 4.061 6zM2 16.5V15h16v1.5z"/></svg>',Ku='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg" clip-rule="evenodd" stroke-linejoin="round" stroke-miterlimit="1.414"><path d="M18 4.5V3H2v1.5h16zm0 3V6h-5.674v1.5H18zm0 3V9h-5.674v1.5H18zm0 3V12h-5.674v1.5H18zm-8.5-6V12h-6V7.5h6zm.818-1.5H2.682C2.305 6 2 6.407 2 6.91v5.68c0 .503.305.91.682.91h7.636c.377 0 .682-.407.682-.91V6.91c0-.503-.305-.91-.682-.91zM18 16.5V15H2v1.5h16z"/></svg>',Ju='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M2 4.5V3h16v1.5zm4.5 3V12h7V7.5h-7zM5.758 6h8.484c.419 0 .758.407.758.91v5.681c0 .502-.34.909-.758.909H5.758c-.419 0-.758-.407-.758-.91V6.91c0-.503.34-.91.758-.91zM2 16.5V15h16v1.5z"/></svg>',Qo='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M2 4.5V3h16v1.5zm0 3V6h5.674v1.5zm0 3V9h5.674v1.5zm0 3V12h5.674v1.5zm8.5-6V12h6V7.5h-6zM9.682 6h7.636c.377 0 .682.407.682.91v5.68c0 .503-.305.91-.682.91H9.682c-.377 0-.682-.407-.682-.91V6.91c0-.503.305-.91.682-.91zM2 16.5V15h16v1.5z"/></svg>',ci={full:{name:"full",title:"Full size image",icon:$u,isDefault:!0},side:{name:"side",title:"Side image",icon:Qo,className:"image-style-side"},alignLeft:{name:"alignLeft",title:"Left aligned image",icon:Ku,className:"image-style-align-left"},alignCenter:{name:"alignCenter",title:"Centered image",icon:Ju,className:"image-style-align-center"},alignRight:{name:"alignRight",title:"Right aligned image",icon:Qo,className:"image-style-align-right"}},Qu={full:$u,left:Ku,right:Qo,center:Ju};function Zu(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]).map(xk)}function xk(a){if("string"==typeof a){var i=a;ci[i]?a=Object.assign({},ci[i]):(console.warn(Object(I.a)("image-style-not-found: There is no such image style of given name."),{name:i}),a={name:i})}else if(ci[a.name]){var e=ci[a.name],n=Object.assign({},a);for(var t in e)Object.prototype.hasOwnProperty.call(a,t)||(n[t]=e[t]);a=n}return"string"==typeof a.icon&&Qu[a.icon]&&(a.icon=Qu[a.icon]),a}var Sk=function(a){P(e,a);var i=M(e);function e(){return A(this,e),i.apply(this,arguments)}return C(e,[{key:"init",value:function(){var t=this.editor,r=t.model.schema,o=t.data,s=t.editing;t.config.define("image.styles",["full","side"]);var l=Zu(t.config.get("image.styles"));r.extend("image",{allowAttributes:"imageStyle"});var u,c=(u=l,function(d,h,f){if(f.consumable.consume(h.item,d.name)){var v=Yu(h.attributeNewValue,u),g=Yu(h.attributeOldValue,u),m=f.mapper.toViewElement(h.item),p=f.writer;g&&p.removeClass(g.className,m),v&&p.addClass(v.className,m)}});s.downcastDispatcher.on("attribute:imageStyle:image",c),o.downcastDispatcher.on("attribute:imageStyle:image",c),o.upcastDispatcher.on("element:figure",function(u){var d=u.filter(function(h){return!h.isDefault});return function(h,f,v){if(f.modelRange){var g=f.viewItem,m=Xe(f.modelRange.getItems());if(v.schema.checkAttribute(m,"imageStyle")){var y,p=k(d);try{for(p.s();!(y=p.n()).done;){var w=y.value;v.consumable.consume(g,{classes:w.className})&&v.writer.setAttribute("imageStyle",w.name,m)}}catch(_){p.e(_)}finally{p.f()}}}}}(l),{priority:"low"}),t.commands.add("imageStyle",new Tk(t,l))}}],[{key:"pluginName",get:function(){return"ImageStyleEditing"}}]),e}(U);E(82);var Pk=function(a){P(e,a);var i=M(e);function e(){return A(this,e),i.apply(this,arguments)}return C(e,[{key:"localizedDefaultStylesTitles",get:function(){var t=this.editor.t;return{"Full size image":t("Full size image"),"Side image":t("Side image"),"Left aligned image":t("Left aligned image"),"Centered image":t("Centered image"),"Right aligned image":t("Right aligned image")}}},{key:"init",value:function(){var o,t=function(l,c){var d,u=k(l);try{for(u.s();!(d=u.n()).done;){var h=d.value;c[h.title]&&(h.title=c[h.title])}}catch(f){u.e(f)}finally{u.f()}return l}(Zu(this.editor.config.get("image.styles")),this.localizedDefaultStylesTitles),r=k(t);try{for(r.s();!(o=r.n()).done;)this._createButton(o.value)}catch(l){r.e(l)}finally{r.f()}}},{key:"_createButton",value:function(t){var r=this,o=this.editor;o.ui.componentFactory.add("imageStyle:"+t.name,function(l){var c=o.commands.get("imageStyle"),u=new be(l);return u.set({label:t.title,icon:t.icon,tooltip:!0,isToggleable:!0}),u.bind("isEnabled").to(c,"isEnabled"),u.bind("isOn").to(c,"value",function(d){return d===t.name}),r.listenTo(u,"execute",function(){o.execute("imageStyle",{value:t.name}),o.editing.view.focus()}),u})}}],[{key:"pluginName",get:function(){return"ImageStyleUI"}}]),e}(U),ui=function(a){P(e,a);var i=M(e);function e(){return A(this,e),i.apply(this,arguments)}return C(e,[{key:"init",value:function(){var t=this,r=this.editor;if(r.plugins.has("BalloonToolbar")){var o=r.plugins.get("BalloonToolbar");this.listenTo(o,"show",function(s){var c;(c=r.editing.view.document.selection.getSelectedElement())&&Wt(c)&&s.stop()},{priority:"high"})}this._toolbarDefinitions=new Map,this._balloon=this.editor.plugins.get("ContextualBalloon"),this.on("change:isEnabled",function(){t._updateToolbarsVisibility()}),this.listenTo(r.ui,"update",function(){t._updateToolbarsVisibility()}),this.listenTo(r.ui.focusTracker,"change:isFocused",function(){t._updateToolbarsVisibility()},{priority:"low"})}},{key:"destroy",value:function(){B(L(e.prototype),"destroy",this).call(this);var r,t=k(this._toolbarDefinitions.values());try{for(t.s();!(r=t.n()).done;)r.value.view.destroy()}catch(s){t.e(s)}finally{t.f()}}},{key:"register",value:function(t,r){var o=r.ariaLabel,s=r.items,l=r.getRelatedElement,c=r.balloonClassName,u=void 0===c?"ck-toolbar-container":c;if(s.length){var d=this.editor,h=d.t,f=new So(d.locale);if(f.ariaLabel=o||h("Widget toolbar"),this._toolbarDefinitions.has(t))throw new I.b("widget-toolbar-duplicated: Toolbar with the given id was already added.",this,{toolbarId:t});f.fillFromConfig(s,d.ui.componentFactory),this._toolbarDefinitions.set(t,{view:f,getRelatedElement:l,balloonClassName:u})}else console.warn(Object(I.a)("widget-toolbar-no-items: Trying to register a toolbar without items."),{toolbarId:t})}},{key:"_updateToolbarsVisibility",value:function(){var l,t=0,r=null,o=null,s=k(this._toolbarDefinitions.values());try{for(s.s();!(l=s.n()).done;){var c=l.value,u=c.getRelatedElement(this.editor.editing.view.document.selection);if(this.isEnabled&&u)if(this.editor.ui.focusTracker.isFocused){var d=u.getAncestors().length;d>t&&(t=d,r=u,o=c)}else this._isToolbarVisible(c)&&this._hideToolbar(c);else this._isToolbarInBalloon(c)&&this._hideToolbar(c)}}catch(h){s.e(h)}finally{s.f()}o&&this._showToolbar(o,r)}},{key:"_hideToolbar",value:function(t){this._balloon.remove(t.view),this.stopListening(this._balloon,"change:visibleView")}},{key:"_showToolbar",value:function(t,r){var o=this;this._isToolbarVisible(t)?Xu(this.editor,r):this._isToolbarInBalloon(t)||(this._balloon.add({view:t.view,position:ed(this.editor,r),balloonClassName:t.balloonClassName}),this.listenTo(this._balloon,"change:visibleView",function(){var l,s=k(o._toolbarDefinitions.values());try{for(s.s();!(l=s.n()).done;){var c=l.value;if(o._isToolbarVisible(c)){var u=c.getRelatedElement(o.editor.editing.view.document.selection);Xu(o.editor,u)}}}catch(d){s.e(d)}finally{s.f()}}))}},{key:"_isToolbarVisible",value:function(t){return this._balloon.visibleView===t.view}},{key:"_isToolbarInBalloon",value:function(t){return this._balloon.hasView(t.view)}}],[{key:"requires",get:function(){return[ai]}},{key:"pluginName",get:function(){return"WidgetToolbarRepository"}}]),e}(U);function Xu(a,i){var e=a.plugins.get("ContextualBalloon"),n=ed(a,i);e.updatePosition(n)}function ed(a,i){var n=pe.defaultPositions;return{target:a.editing.view.domConverter.mapViewToDom(i),positions:[n.northArrowSouth,n.northArrowSouthWest,n.northArrowSouthEast,n.southArrowNorth,n.southArrowNorthWest,n.southArrowNorthEast,xp]}}var td=function(a){P(e,a);var i=M(e);function e(n){var t;return A(this,e),(t=i.call(this,n))._childCommands=[],t}return C(e,[{key:"refresh",value:function(){}},{key:"execute",value:function(){for(var t=arguments.length,r=new Array(t),o=0;o<t;o++)r[o]=arguments[o];return this._getFirstEnabledCommand().execute(r)}},{key:"registerChildCommand",value:function(t){var r=this;this._childCommands.push(t),t.on("change:isEnabled",function(){return r._checkEnabled()}),this._checkEnabled()}},{key:"_checkEnabled",value:function(){this.isEnabled=!!this._getFirstEnabledCommand()}},{key:"_getFirstEnabledCommand",value:function(){return this._childCommands.find(function(t){return t.isEnabled})}}]),e}(ve),Ek=function(a){P(e,a);var i=M(e);function e(){return A(this,e),i.apply(this,arguments)}return C(e,[{key:"init",value:function(){var t=this.editor;t.commands.add("indent",new td(t)),t.commands.add("outdent",new td(t))}}],[{key:"pluginName",get:function(){return"IndentEditing"}}]),e}(U),nd='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M2 3.75c0 .414.336.75.75.75h14.5a.75.75 0 1 0 0-1.5H2.75a.75.75 0 0 0-.75.75zm5 6c0 .414.336.75.75.75h9.5a.75.75 0 1 0 0-1.5h-9.5a.75.75 0 0 0-.75.75zM2.75 16.5h14.5a.75.75 0 1 0 0-1.5H2.75a.75.75 0 1 0 0 1.5zM1.632 6.95L5.02 9.358a.4.4 0 0 1-.013.661l-3.39 2.207A.4.4 0 0 1 1 11.892V7.275a.4.4 0 0 1 .632-.326z"/></svg>',rd='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M2 3.75c0 .414.336.75.75.75h14.5a.75.75 0 1 0 0-1.5H2.75a.75.75 0 0 0-.75.75zm5 6c0 .414.336.75.75.75h9.5a.75.75 0 1 0 0-1.5h-9.5a.75.75 0 0 0-.75.75zM2.75 16.5h14.5a.75.75 0 1 0 0-1.5H2.75a.75.75 0 1 0 0 1.5zm1.618-9.55L.98 9.358a.4.4 0 0 0 .013.661l3.39 2.207A.4.4 0 0 0 5 11.892V7.275a.4.4 0 0 0-.632-.326z"/></svg>',Mk=function(a){P(e,a);var i=M(e);function e(){return A(this,e),i.apply(this,arguments)}return C(e,[{key:"init",value:function(){var t=this.editor,r=t.locale,o=t.t,s="ltr"==r.uiLanguageDirection?nd:rd,l="ltr"==r.uiLanguageDirection?rd:nd;this._defineButton("indent",o("Increase indent"),s),this._defineButton("outdent",o("Decrease indent"),l)}},{key:"_defineButton",value:function(t,r,o){var s=this,l=this.editor;l.ui.componentFactory.add(t,function(c){var u=l.commands.get(t),d=new be(c);return d.set({label:r,icon:o,tooltip:!0}),d.bind("isOn","isEnabled").to(u,"value","isEnabled"),s.listenTo(d,"execute",function(){l.execute(t),l.editing.view.focus()}),d})}}],[{key:"pluginName",get:function(){return"IndentUI"}}]),e}(U),di=function(a){P(e,a);var i=M(e);function e(n,t){var r;return A(this,e),(r=i.call(this,n))._indentBehavior=t,r}return C(e,[{key:"refresh",value:function(){var t=this.editor.model,r=Xe(t.document.selection.getSelectedBlocks());this.isEnabled=!(!r||!t.schema.checkAttribute(r,"blockIndent"))&&this._indentBehavior.checkEnabled(r.getAttribute("blockIndent"))}},{key:"execute",value:function(){var s,c,t=this,r=this.editor.model,o=(c=(s=r).schema,Array.from(s.document.selection.getSelectedBlocks()).filter(function(u){return c.checkAttribute(u,"blockIndent")}));r.change(function(s){var c,l=k(o);try{for(l.s();!(c=l.n()).done;){var u=c.value,d=u.getAttribute("blockIndent"),h=t._indentBehavior.getNextIndent(d);h?s.setAttribute("blockIndent",h,u):s.removeAttribute("blockIndent",u)}}catch(f){l.e(f)}finally{l.f()}})}}]),e}(ve),id=function(){function a(i){A(this,a),this.isForward="forward"===i.direction,this.offset=i.offset,this.unit=i.unit}return C(a,[{key:"checkEnabled",value:function(e){var n=parseFloat(e||0);return this.isForward||n>0}},{key:"getNextIndent",value:function(e){var n=parseFloat(e||0);if(e&&!e.endsWith(this.unit))return this.isForward?this.offset+this.unit:void 0;var t=n+(this.isForward?this.offset:-this.offset);return t>0?t+this.unit:void 0}}]),a}(),od=function(){function a(i){A(this,a),this.isForward="forward"===i.direction,this.classes=i.classes}return C(a,[{key:"checkEnabled",value:function(e){var n=this.classes.indexOf(e);return this.isForward?n<this.classes.length-1:n>=0}},{key:"getNextIndent",value:function(e){var n=this.classes.indexOf(e);return this.classes[n+(this.isForward?1:-1)]}}]),a}();function Ik(a){var e;a.setNormalizer("margin",("margin",function(n){return{path:"margin",value:rp(n)}})),a.setNormalizer("margin-top",function(n){return{path:"margin.top",value:n}}),a.setNormalizer("margin-right",function(n){return{path:"margin.right",value:n}}),a.setNormalizer("margin-bottom",function(n){return{path:"margin.bottom",value:n}}),a.setNormalizer("margin-left",function(n){return{path:"margin.left",value:n}}),a.setReducer("margin",(e="margin",function(n){var t=n.top,r=n.right,o=n.bottom,s=n.left,l=[];return[t,r,s,o].every(function(c){return!!c})?l.push([e,ip(n)]):(t&&l.push([e+"-top",t]),r&&l.push([e+"-right",r]),o&&l.push([e+"-bottom",o]),s&&l.push([e+"-left",s])),l})),a.setStyleRelation("margin",["margin-top","margin-right","margin-bottom","margin-left"])}var Nk=function(a){P(e,a);var i=M(e);function e(n){var t;return A(this,e),(t=i.call(this,n)).domEventType="click",t}return C(e,[{key:"onDomEvent",value:function(t){this.fire(t.type,t)}}]),e}(Ut);E(84);var Rk=function(a){P(e,a);var i=M(e);function e(n,t,r){var o;A(this,e),o=i.call(this,n);var s=n.t;o.focusTracker=new lt,o.keystrokes=new ft,o.urlInputView=o._createUrlInput(r),o.saveButtonView=o._createButton(s("Save"),ri,"ck-button-save"),o.saveButtonView.type="submit",o.cancelButtonView=o._createButton(s("Cancel"),ii,"ck-button-cancel","cancel"),o._manualDecoratorSwitches=o._createManualDecoratorSwitches(t),o.children=o._createFormChildren(t.manualDecorators),o._focusables=new Ht,o._focusCycler=new Lt({focusables:o._focusables,focusTracker:o.focusTracker,keystrokeHandler:o.keystrokes,actions:{focusPrevious:"shift + tab",focusNext:"tab"}});var l=["ck","ck-link-form"];return t.manualDecorators.length&&l.push("ck-link-form_layout-vertical"),o.setTemplate({tag:"form",attributes:{class:l,tabindex:"-1"},children:o.children}),o}return C(e,[{key:"getDecoratorSwitchesState",value:function(){return Array.from(this._manualDecoratorSwitches).reduce(function(t,r){return t[r.name]=r.isOn,t},{})}},{key:"render",value:function(){var t=this;B(L(e.prototype),"render",this).call(this),ni({view:this}),[this.urlInputView].concat(Y(this._manualDecoratorSwitches),[this.saveButtonView,this.cancelButtonView]).forEach(function(r){t._focusables.add(r),t.focusTracker.add(r.element)}),this.keystrokes.listenTo(this.element)}},{key:"focus",value:function(){this._focusCycler.focusFirst()}},{key:"_createUrlInput",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"https://",r=this.locale.t,o=new ei(this.locale,ti);return o.label=r("Link URL"),o.fieldView.placeholder=t+"example.com",o}},{key:"_createButton",value:function(t,r,o,s){var l=new be(this.locale);return l.set({label:t,icon:r,tooltip:!0}),l.extendTemplate({attributes:{class:o}}),s&&l.delegate("execute").to(this,s),l}},{key:"_createManualDecoratorSwitches",value:function(t){var l,r=this,o=this.createCollection(),s=k(t.manualDecorators);try{var c=function(){var d=l.value,h=new To(r.locale);h.set({name:d.id,label:d.label,withText:!0}),h.bind("isOn").toMany([d,t],"value",function(f,v){return void 0===v&&void 0===f?d.defaultValue:f}),h.on("execute",function(){d.set("value",!h.isOn)}),o.add(h)};for(s.s();!(l=s.n()).done;)c()}catch(u){s.e(u)}finally{s.f()}return o}},{key:"_createFormChildren",value:function(t){var r=this.createCollection();if(r.add(this.urlInputView),t.length){var o=new ue;o.setTemplate({tag:"ul",children:this._manualDecoratorSwitches.map(function(s){return{tag:"li",children:[s],attributes:{class:["ck","ck-list__item"]}}}),attributes:{class:["ck","ck-reset","ck-list"]}}),r.add(o)}return r.add(this.saveButtonView),r.add(this.cancelButtonView),r}}]),e}(ue);E(86);var Ok=function(a){P(e,a);var i=M(e);function e(n){var t;A(this,e),t=i.call(this,n);var r=n.t;return t.focusTracker=new lt,t.keystrokes=new ft,t.previewButtonView=t._createPreviewButton(),t.unlinkButtonView=t._createButton(r("Unlink"),'<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M11.077 15l.991-1.416a.75.75 0 1 1 1.229.86l-1.148 1.64a.748.748 0 0 1-.217.206 5.251 5.251 0 0 1-8.503-5.955.741.741 0 0 1 .12-.274l1.147-1.639a.75.75 0 1 1 1.228.86L4.933 10.7l.006.003a3.75 3.75 0 0 0 6.132 4.294l.006.004zm5.494-5.335a.748.748 0 0 1-.12.274l-1.147 1.639a.75.75 0 1 1-1.228-.86l.86-1.23a3.75 3.75 0 0 0-6.144-4.301l-.86 1.229a.75.75 0 0 1-1.229-.86l1.148-1.64a.748.748 0 0 1 .217-.206 5.251 5.251 0 0 1 8.503 5.955zm-4.563-2.532a.75.75 0 0 1 .184 1.045l-3.155 4.505a.75.75 0 1 1-1.229-.86l3.155-4.506a.75.75 0 0 1 1.045-.184zm4.919 10.562l-1.414 1.414a.75.75 0 1 1-1.06-1.06l1.414-1.415-1.415-1.414a.75.75 0 0 1 1.061-1.06l1.414 1.414 1.414-1.415a.75.75 0 0 1 1.061 1.061l-1.414 1.414 1.414 1.415a.75.75 0 0 1-1.06 1.06l-1.415-1.414z"/></svg>',"unlink"),t.editButtonView=t._createButton(r("Edit link"),'<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M7.3 17.37l-.061.088a1.518 1.518 0 0 1-.934.535l-4.178.663-.806-4.153a1.495 1.495 0 0 1 .187-1.058l.056-.086L8.77 2.639c.958-1.351 2.803-1.076 4.296-.03 1.497 1.047 2.387 2.693 1.433 4.055L7.3 17.37zM9.14 4.728l-5.545 8.346 3.277 2.294 5.544-8.346L9.14 4.728zM6.07 16.512l-3.276-2.295.53 2.73 2.746-.435zM9.994 3.506L13.271 5.8c.316-.452-.16-1.333-1.065-1.966-.905-.634-1.895-.78-2.212-.328zM8 18.5L9.375 17H19v1.5H8z"/></svg>',"edit"),t.set("href"),t._focusables=new Ht,t._focusCycler=new Lt({focusables:t._focusables,focusTracker:t.focusTracker,keystrokeHandler:t.keystrokes,actions:{focusPrevious:"shift + tab",focusNext:"tab"}}),t.setTemplate({tag:"div",attributes:{class:["ck","ck-link-actions"],tabindex:"-1"},children:[t.previewButtonView,t.editButtonView,t.unlinkButtonView]}),t}return C(e,[{key:"render",value:function(){var t=this;B(L(e.prototype),"render",this).call(this),[this.previewButtonView,this.editButtonView,this.unlinkButtonView].forEach(function(r){t._focusables.add(r),t.focusTracker.add(r.element)}),this.keystrokes.listenTo(this.element)}},{key:"focus",value:function(){this._focusCycler.focusFirst()}},{key:"_createButton",value:function(t,r,o){var s=new be(this.locale);return s.set({label:t,icon:r,tooltip:!0}),s.delegate("execute").to(this,o),s}},{key:"_createPreviewButton",value:function(){var t=new be(this.locale),r=this.bindTemplate,o=this.t;return t.set({withText:!0,tooltip:o("Open link in new tab")}),t.extendTemplate({attributes:{class:["ck","ck-link-actions__preview"],href:r.to("href",function(s){return s&&ku(s)}),target:"_blank",rel:"noopener noreferrer"}}),t.bind("label").to(this,"href",function(s){return s||o("This link has no URL")}),t.bind("isEnabled").to(this,"href",function(s){return!!s}),t.template.tag="a",t.template.eventListeners={},t}}]),e}(ue),Dk=/^((\w+:(\/{2,})?)|(\W))/i,Lk=/[\w-]+@[\w-]+\.+[\w-]+/i,Vk=function(a){P(e,a);var i=M(e);function e(){return A(this,e),i.apply(this,arguments)}return C(e,[{key:"init",value:function(){var t=this.editor;t.editing.view.addObserver(Nk),this.actionsView=this._createActionsView(),this.formView=this._createFormView(),this._balloon=t.plugins.get(ai),this._createToolbarLinkButton(),this._enableUserBalloonInteractions(),t.conversion.for("editingDowncast").markerToHighlight({model:"link-ui",view:{classes:["ck-fake-link-selection"]}}),t.conversion.for("editingDowncast").markerToElement({model:"link-ui",view:{name:"span",classes:["ck-fake-link-selection","ck-fake-link-selection_collapsed"]}})}},{key:"destroy",value:function(){B(L(e.prototype),"destroy",this).call(this),this.formView.destroy()}},{key:"_createActionsView",value:function(){var t=this,r=this.editor,o=new Ok(r.locale),s=r.commands.get("link"),l=r.commands.get("unlink");return o.bind("href").to(s,"value"),o.editButtonView.bind("isEnabled").to(s),o.unlinkButtonView.bind("isEnabled").to(l),this.listenTo(o,"edit",function(){t._addFormView()}),this.listenTo(o,"unlink",function(){r.execute("unlink"),t._hideUI()}),o.keystrokes.set("Esc",function(c,u){t._hideUI(),u()}),o.keystrokes.set("Ctrl+K",function(c,u){t._addFormView(),u()}),o}},{key:"_createFormView",value:function(){var t=this,r=this.editor,o=r.commands.get("link"),s=r.config.get("link.defaultProtocol"),l=new Rk(r.locale,o,s);return l.urlInputView.fieldView.bind("value").to(o,"value"),l.urlInputView.bind("isReadOnly").to(o,"isEnabled",function(c){return!c}),l.saveButtonView.bind("isEnabled").to(o),this.listenTo(l,"submit",function(){var c=l.urlInputView.fieldView.element.value,u=!!s&&!Dk.test(c),d=Lk.test(c);r.execute("link",c&&u?(d?"mailto:":s)+c:c,l.getDecoratorSwitchesState()),t._closeFormView()}),this.listenTo(l,"cancel",function(){t._closeFormView()}),l.keystrokes.set("Esc",function(c,u){t._closeFormView(),u()}),l}},{key:"_createToolbarLinkButton",value:function(){var t=this,r=this.editor,o=r.commands.get("link"),s=r.t;r.keystrokes.set("Ctrl+K",function(l,c){c(),t._showUI(!0)}),r.ui.componentFactory.add("link",function(l){var c=new be(l);return c.isEnabled=!0,c.label=s("Link"),c.icon='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M11.077 15l.991-1.416a.75.75 0 1 1 1.229.86l-1.148 1.64a.748.748 0 0 1-.217.206 5.251 5.251 0 0 1-8.503-5.955.741.741 0 0 1 .12-.274l1.147-1.639a.75.75 0 1 1 1.228.86L4.933 10.7l.006.003a3.75 3.75 0 0 0 6.132 4.294l.006.004zm5.494-5.335a.748.748 0 0 1-.12.274l-1.147 1.639a.75.75 0 1 1-1.228-.86l.86-1.23a3.75 3.75 0 0 0-6.144-4.301l-.86 1.229a.75.75 0 0 1-1.229-.86l1.148-1.64a.748.748 0 0 1 .217-.206 5.251 5.251 0 0 1 8.503 5.955zm-4.563-2.532a.75.75 0 0 1 .184 1.045l-3.155 4.505a.75.75 0 1 1-1.229-.86l3.155-4.506a.75.75 0 0 1 1.045-.184z"/></svg>',c.keystroke="Ctrl+K",c.tooltip=!0,c.isToggleable=!0,c.bind("isEnabled").to(o,"isEnabled"),c.bind("isOn").to(o,"value",function(u){return!!u}),t.listenTo(c,"execute",function(){return t._showUI(!0)}),c})}},{key:"_enableUserBalloonInteractions",value:function(){var t=this;this.listenTo(this.editor.editing.view.document,"click",function(){t._getSelectedLinkElement()&&t._showUI()}),this.editor.keystrokes.set("Tab",function(o,s){t._areActionsVisible&&!t.actionsView.focusTracker.isFocused&&(t.actionsView.focus(),s())},{priority:"high"}),this.editor.keystrokes.set("Esc",function(o,s){t._isUIVisible&&(t._hideUI(),s())}),xo({emitter:this.formView,activator:function(){return t._isUIInPanel},contextElements:[this._balloon.view.element],callback:function(){return t._hideUI()}})}},{key:"_addActionsView",value:function(){this._areActionsInPanel||this._balloon.add({view:this.actionsView,position:this._getBalloonPositionData()})}},{key:"_addFormView",value:function(){if(!this._isFormInPanel){var t=this.editor.commands.get("link");this._balloon.add({view:this.formView,position:this._getBalloonPositionData()}),this._balloon.visibleView===this.formView&&this.formView.urlInputView.fieldView.select(),this.formView.urlInputView.fieldView.element.value=t.value||""}}},{key:"_closeFormView",value:function(){var t=this.editor.commands.get("link");t.restoreManualDecoratorStates(),void 0!==t.value?this._removeFormView():this._hideUI()}},{key:"_removeFormView",value:function(){this._isFormInPanel&&(this.formView.saveButtonView.focus(),this._balloon.remove(this.formView),this.editor.editing.view.focus(),this._hideFakeVisualSelection())}},{key:"_showUI",value:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this._getSelectedLinkElement()?(this._areActionsVisible?this._addFormView():this._addActionsView(),t&&this._balloon.showStack("main")):(this._showFakeVisualSelection(),this._addActionsView(),t&&this._balloon.showStack("main"),this._addFormView()),this._startUpdatingUI()}},{key:"_hideUI",value:function(){if(this._isUIInPanel){var t=this.editor;this.stopListening(t.ui,"update"),this.stopListening(this._balloon,"change:visibleView"),t.editing.view.focus(),this._removeFormView(),this._balloon.remove(this.actionsView),this._hideFakeVisualSelection()}}},{key:"_startUpdatingUI",value:function(){var t=this,r=this.editor,o=r.editing.view.document,s=this._getSelectedLinkElement(),l=u(),c=function(){var h=t._getSelectedLinkElement(),f=u();s&&!h||!s&&f!==l?t._hideUI():t._isUIVisible&&t._balloon.updatePosition(t._getBalloonPositionData()),s=h,l=f};function u(){return o.selection.focus.getAncestors().reverse().find(function(d){return d.is("element")})}this.listenTo(r.ui,"update",c),this.listenTo(this._balloon,"change:visibleView",c)}},{key:"_isFormInPanel",get:function(){return this._balloon.hasView(this.formView)}},{key:"_areActionsInPanel",get:function(){return this._balloon.hasView(this.actionsView)}},{key:"_areActionsVisible",get:function(){return this._balloon.visibleView===this.actionsView}},{key:"_isUIInPanel",get:function(){return this._isFormInPanel||this._areActionsInPanel}},{key:"_isUIVisible",get:function(){return this._balloon.visibleView==this.formView||this._areActionsVisible}},{key:"_getBalloonPositionData",value:function(){var t=this.editor.editing.view,r=this.editor.model,o=t.document,s=this._getSelectedLinkElement(),l=r.markers.has("link-ui")?this.editor.editing.mapper.toViewRange(r.markers.get("link-ui").getRange()):o.selection.getFirstRange();return{target:s?t.domConverter.mapViewToDom(s):t.domConverter.viewRangeToDom(l)}}},{key:"_getSelectedLinkElement",value:function(){var t=this.editor.editing.view,r=t.document.selection;if(r.isCollapsed)return Zo(r.getFirstPosition());var o=r.getFirstRange().getTrimmed(),s=Zo(o.start),l=Zo(o.end);return s&&s==l&&t.createRangeIn(s).getTrimmed().isEqual(o)?s:null}},{key:"_showFakeVisualSelection",value:function(){var t=this.editor.model;t.change(function(r){t.markers.has("link-ui")?r.updateMarker("link-ui",{range:t.document.selection.getFirstRange()}):r.addMarker("link-ui",{usingOperation:!1,affectsData:!1,range:t.document.selection.getFirstRange()})})}},{key:"_hideFakeVisualSelection",value:function(){var t=this.editor.model;t.markers.has("link-ui")&&t.change(function(r){r.removeMarker("link-ui")})}}],[{key:"requires",get:function(){return[ai]}},{key:"pluginName",get:function(){return"LinkUI"}}]),e}(U);function Zo(a){return a.getAncestors().find(function(i){return(e=i).is("attributeElement")&&!!e.getCustomProperty("link");var e})}var ad=function(a){P(e,a);var i=M(e);function e(n,t){var r;return A(this,e),(r=i.call(this,n)).type=t,r}return C(e,[{key:"refresh",value:function(){this.value=this._getValue(),this.isEnabled=this._checkEnabled()}},{key:"execute",value:function(){var t=this,r=this.editor.model,s=Array.from(r.document.selection.getSelectedBlocks()).filter(function(c){return ld(c,r.schema)}),l=!0===this.value;r.change(function(c){if(l){for(var u=s[s.length-1].nextSibling,d=Number.POSITIVE_INFINITY,h=[];u&&"listItem"==u.name&&0!==u.getAttribute("listIndent");){var f=u.getAttribute("listIndent");f<d&&(d=f),h.push({element:u,listIndent:f-d}),u=u.nextSibling}h=h.reverse();var m,g=k(h);try{for(g.s();!(m=g.n()).done;){var p=m.value;c.setAttribute("listIndent",p.listIndent,p.element)}}catch(z){g.e(z)}finally{g.f()}}if(!l){var _,y=Number.POSITIVE_INFINITY,w=k(s);try{for(w.s();!(_=w.n()).done;){var T=_.value;T.is("element","listItem")&&T.getAttribute("listIndent")<y&&(y=T.getAttribute("listIndent"))}}catch(z){w.e(z)}finally{w.f()}sd(s,!0,y=0===y?1:y),sd(s,!1,y)}var N,x=k(s.reverse());try{for(x.s();!(N=x.n()).done;){var D=N.value;l&&"listItem"==D.name?c.rename(D,"paragraph"):l||"listItem"==D.name?l||"listItem"!=D.name||D.getAttribute("listType")==t.type||c.setAttribute("listType",t.type,D):(c.setAttributes({listType:t.type,listIndent:0},D),c.rename(D,"listItem"))}}catch(z){x.e(z)}finally{x.f()}t.fire("_executeCleanup",s)})}},{key:"_getValue",value:function(){var t=Xe(this.editor.model.document.selection.getSelectedBlocks());return!!t&&t.is("element","listItem")&&t.getAttribute("listType")==this.type}},{key:"_checkEnabled",value:function(){if(this.value)return!0;var r=this.editor.model.schema,o=Xe(this.editor.model.document.selection.getSelectedBlocks());return!!o&&ld(o,r)}}]),e}(ve);function sd(a,i,e){var n=i?a[0]:a[a.length-1];if(n.is("element","listItem"))for(var t=n[i?"previousSibling":"nextSibling"],r=n.getAttribute("listIndent");t&&t.is("element","listItem")&&t.getAttribute("listIndent")>=e;)r>t.getAttribute("listIndent")&&(r=t.getAttribute("listIndent")),t.getAttribute("listIndent")==r&&a[i?"unshift":"push"](t),t=t[i?"previousSibling":"nextSibling"]}function ld(a,i){return i.checkChild(a.parent,"listItem")&&!i.isObject(a)}var cd=function(a){P(e,a);var i=M(e);function e(n,t){var r;return A(this,e),(r=i.call(this,n))._indentBy="forward"==t?1:-1,r}return C(e,[{key:"refresh",value:function(){this.isEnabled=this._checkEnabled()}},{key:"execute",value:function(){var t=this,r=this.editor.model,s=Array.from(r.document.selection.getSelectedBlocks());r.change(function(l){for(var c=s[s.length-1],u=c.nextSibling;u&&"listItem"==u.name&&u.getAttribute("listIndent")>c.getAttribute("listIndent");)s.push(u),u=u.nextSibling;t._indentBy<0&&(s=s.reverse());var h,d=k(s);try{for(d.s();!(h=d.n()).done;){var f=h.value,v=f.getAttribute("listIndent")+t._indentBy;v<0?l.rename(f,"paragraph"):l.setAttribute("listIndent",v,f)}}catch(g){d.e(g)}finally{d.f()}t.fire("_executeCleanup",s)})}},{key:"_checkEnabled",value:function(){var t=Xe(this.editor.model.document.selection.getSelectedBlocks());if(!t||!t.is("element","listItem"))return!1;if(this._indentBy>0){for(var r=t.getAttribute("listIndent"),o=t.getAttribute("listType"),s=t.previousSibling;s&&s.is("element","listItem")&&s.getAttribute("listIndent")>=r;){if(s.getAttribute("listIndent")==r)return s.getAttribute("listType")==o;s=s.previousSibling}return!1}return!0}}]),e}(ve);function ud(a,i,e,n){var t=i.parent,r=e.mapper,o=e.writer,s=r.toViewPosition(n.createPositionBefore(a)),l=hd(a.previousSibling,{sameIndent:!0,smallerIndent:!0,listIndent:a.getAttribute("listIndent")}),c=a.previousSibling;if(l&&l.getAttribute("listIndent")==a.getAttribute("listIndent")){var u=r.toViewElement(l);s=o.breakContainer(o.createPositionAfter(u))}else if(c&&"listItem"==c.name){s=r.toViewPosition(n.createPositionAt(c,"end"));var d=r.findMappedViewAncestor(s),h=function($){var K,Q=k($.getChildren());try{for(Q.s();!(K=Q.n()).done;){var W=K.value;if("ul"==W.name||"ol"==W.name)return W}}catch(ie){Q.e(ie)}finally{Q.f()}return null}(d);s=h?o.createPositionBefore(h):o.createPositionAt(d,"end")}else s=r.toViewPosition(n.createPositionBefore(a));if(s=dd(s),o.insert(s,t),c&&"listItem"==c.name){var m,f=r.toViewElement(c),v=o.createRange(o.createPositionAt(f,0),s).getWalker({ignoreElementEnd:!0}),g=k(v);try{for(g.s();!(m=g.n()).done;){var p=m.value;if(p.item.is("element","li")){var y=o.breakContainer(o.createPositionBefore(p.item)),w=p.item.parent,_=o.createPositionAt(i,"end");gt(o,_.nodeBefore,_.nodeAfter),o.move(o.createRangeOn(w),_),v.position=y}}}catch($){g.e($)}finally{g.f()}}else{var T=t.nextSibling;if(T&&(T.is("element","ul")||T.is("element","ol"))){var D,x=null,N=k(T.getChildren());try{for(N.s();!(D=N.n()).done;){var z=D.value,J=r.toModelElement(z);if(!(J&&J.getAttribute("listIndent")>a.getAttribute("listIndent")))break;x=z}}catch($){N.e($)}finally{N.f()}x&&(o.breakContainer(o.createPositionAfter(x)),o.move(o.createRangeOn(x.parent),o.createPositionAt(i,"end")))}}gt(o,t,t.nextSibling),gt(o,t.previousSibling,t)}function gt(a,i,e){return!i||!e||"ul"!=i.name&&"ol"!=i.name||i.name!=e.name||i.getAttribute("class")!==e.getAttribute("class")?null:a.mergeContainers(a.createPositionAfter(i))}function dd(a){return a.getLastMatchingPosition(function(i){return i.item.is("uiElement")})}function hd(a,i){for(var e=!!i.sameIndent,n=!!i.smallerIndent,t=i.listIndent,r=a;r&&"listItem"==r.name;){var o=r.getAttribute("listIndent");if(e&&t==o||n&&t>o)return r;r=r.previousSibling}return null}function fd(a,i,e,n){a.ui.componentFactory.add(i,function(t){var r=a.commands.get(i),o=new be(t);return o.set({label:e,icon:n,tooltip:!0,isToggleable:!0}),o.bind("isOn","isEnabled").to(r,"value","isEnabled"),o.on("execute",function(){a.execute(i),a.editing.view.focus()}),o})}function Bk(){var a=!this.isEmpty&&("ul"==this.getChild(0).name||"ol"==this.getChild(0).name);return this.isEmpty||a?0:ts.call(this)}function vd(a){return function(i,e,n){var t=n.consumable;if(t.test(e.item,"insert")&&t.test(e.item,"attribute:listType")&&t.test(e.item,"attribute:listIndent")){t.consume(e.item,"insert"),t.consume(e.item,"attribute:listType"),t.consume(e.item,"attribute:listIndent");var r=e.item;ud(r,function jk(a,i){var l,e=i.mapper,n=i.writer,t="numbered"==a.getAttribute("listType")?"ol":"ul",r=((l=n.createContainerElement("li")).getFillerOffset=Bk,l),o=n.createContainerElement(t,null);return n.insert(n.createPositionAt(o,0),r),e.bindElements(a,r),r}(r,n),n,a)}}}function zk(a,i,e){if(e.consumable.consume(i.item,"attribute:listType")){var n=e.mapper.toViewElement(i.item),t=e.writer;t.breakContainer(t.createPositionBefore(n)),t.breakContainer(t.createPositionAfter(n)),t.rename("numbered"==i.attributeNewValue?"ol":"ul",n.parent)}}function Fk(a,i,e){var n=e.mapper.toViewElement(i.item).parent,t=e.writer;gt(t,n,n.nextSibling),gt(t,n.previousSibling,n);var o,r=k(i.item.getChildren());try{for(r.s();!(o=r.n()).done;)e.consumable.consume(o.value,"insert")}catch(l){r.e(l)}finally{r.f()}}function gd(a,i,e){if("listItem"!=i.item.name){for(var n=e.mapper.toViewPosition(i.range.start),t=e.writer,r=[];("ul"==n.parent.name||"ol"==n.parent.name)&&"li"==(n=t.breakContainer(n)).parent.name;){var o=n,s=t.createPositionAt(n.parent,"end");if(!o.isEqual(s)){var l=t.remove(t.createRange(o,s));r.push(l)}n=t.createPositionAfter(n.parent)}if(r.length>0){for(var c=0;c<r.length;c++){var u=n.nodeBefore;if(n=t.insert(n,r[c]).end,c>0){var d=gt(t,u,u.nextSibling);d&&d.parent==u&&n.offset--}}gt(t,n.nodeBefore,n.nodeAfter)}}}function Uk(a,i,e){var n=e.mapper.toViewPosition(i.position);gt(e.writer,n.nodeBefore,n.nodeAfter)}function Hk(a,i,e){if(e.consumable.consume(i.viewItem,{name:!0})){var n=e.writer,t=n.createElement("listItem"),r=function(l){for(var c=0,u=l.parent;u;){if(u.is("element","li"))c++;else{var d=u.previousSibling;d&&d.is("element","li")&&c++}u=u.parent}return c}(i.viewItem);if(n.setAttribute("listIndent",r,t),n.setAttribute("listType",i.viewItem.parent&&"ol"==i.viewItem.parent.name?"numbered":"bulleted",t),!e.safeInsert(t,i.modelCursor))return;var s=function(l,c,u){var g,d=u.writer,h=u.schema,f=d.createPositionAfter(l),v=k(c);try{for(v.s();!(g=v.n()).done;){var m=g.value;if("ul"==m.name||"ol"==m.name)f=u.convertItem(m,f).modelCursor;else{var p=u.convertItem(m,d.createPositionAt(l,"end")),y=p.modelRange.start.nodeAfter;y&&y.is("element")&&!h.checkChild(l,y.name)&&(l=p.modelCursor.parent.is("element","listItem")?p.modelCursor.parent:Gk(p.modelCursor),f=d.createPositionAfter(l))}}}catch(w){v.e(w)}finally{v.f()}return f}(t,i.viewItem.getChildren(),e);i.modelRange=n.createRange(i.modelCursor,s),e.updateConversionResult(t,i)}}function md(a,i,e){if(e.consumable.test(i.viewItem,{name:!0}))for(var t=0,r=Array.from(i.viewItem.getChildren());t<r.length;t++){var o=r[t];!o.is("element","li")&&!on(o)&&o._remove()}}function Wk(a,i,e){if(e.consumable.test(i.viewItem,{name:!0})){if(0===i.viewItem.childCount)return;var s,n=Y(i.viewItem.getChildren()),t=!1,r=!0,o=k(n);try{for(o.s();!(s=o.n()).done;){var l=s.value;t&&!on(l)&&l._remove(),l.is("$text")?(r&&(l._data=l.data.replace(/^\s+/,"")),l.nextSibling&&!on(l.nextSibling)||(l._data=l.data.replace(/\s+$/,""))):on(l)&&(t=!0),r=!1}}catch(c){o.e(c)}finally{o.f()}}}function pd(a){return function(i,e){if(!e.isPhantom){var n=e.modelPosition.nodeBefore;if(n&&n.is("element","listItem")){var l,t=e.mapper.toViewElement(n),r=t.getAncestors().find(on),o=a.createPositionAt(t,0).getWalker(),s=k(o);try{for(s.s();!(l=s.n()).done;){var c=l.value;if("elementStart"==c.type&&c.item.is("element","li")){e.viewPosition=c.previousPosition;break}if("elementEnd"==c.type&&c.item==r){e.viewPosition=c.nextPosition;break}}}catch(u){s.e(u)}finally{s.f()}}}}}function qk(a,i){var r,e=ee(i,2),n=e[0],t=e[1],o=n.is("documentFragment")?n.getChild(0):n;if(r=t?this.createSelection(t):this.document.selection,o&&o.is("element","listItem")){var s=r.getFirstPosition(),l=null;if(s.parent.is("element","listItem")?l=s.parent:s.nodeBefore&&s.nodeBefore.is("element","listItem")&&(l=s.nodeBefore),l){var c=l.getAttribute("listIndent");if(c>0)for(;o&&o.is("element","listItem");)o._setAttribute("listIndent",o.getAttribute("listIndent")+c),o=o.nextSibling}}}function Gk(a){var e,i=new Dt({startPosition:a});do{e=i.next()}while(!e.value.item.is("element","listItem"));return e.value.item}function kd(a,i,e,n,t,r){var u,o=hd(i.nodeBefore,{sameIndent:!0,smallerIndent:!0,listIndent:a,foo:"b"}),s=t.mapper,l=t.writer,c=o?o.getAttribute("listIndent"):null;if(o)if(c==a){var d=s.toViewElement(o).parent;u=l.createPositionAfter(d)}else{var h=r.createPositionAt(o,"end");u=s.toViewPosition(h)}else u=e;u=dd(u);for(var f=0,v=Y(n.getChildren());f<v.length;f++){var g=v[f];on(g)&&(u=l.move(l.createRangeOn(g),u).end,gt(l,g,g.nextSibling),gt(l,g.previousSibling,g))}}function on(a){return a.is("element","ol")||a.is("element","ul")}var Yk=function(a){P(e,a);var i=M(e);function e(){return A(this,e),i.apply(this,arguments)}return C(e,[{key:"init",value:function(){var t=this,r=this.editor;r.model.schema.register("listItem",{inheritAllFrom:"$block",allowAttributes:["listType","listIndent"]});var l,o=r.data,s=r.editing;r.model.document.registerPostFixer(function(d){return function(h,f){var y,v=h.document.differ.getChanges(),g=new Map,m=!1,p=k(v);try{for(p.s();!(y=p.n()).done;){var w=y.value;if("insert"==w.type&&"listItem"==w.name)$(w.position);else if("insert"==w.type&&"listItem"!=w.name){if("$text"!=w.name){var _=w.position.nodeAfter;_.hasAttribute("listIndent")&&(f.removeAttribute("listIndent",_),m=!0),_.hasAttribute("listType")&&(f.removeAttribute("listType",_),m=!0),_.hasAttribute("listStyle")&&(f.removeAttribute("listStyle",_),m=!0);var x,T=k(Array.from(h.createRangeIn(_)).filter(function(W){return W.item.is("element","listItem")}));try{for(T.s();!(x=T.n()).done;)$(x.value.previousPosition)}catch(W){T.e(W)}finally{T.f()}}$(w.position.getShiftedBy(w.length))}else"remove"==w.type&&"listItem"==w.name?$(w.position):("attribute"==w.type&&"listIndent"==w.attributeKey||"attribute"==w.type&&"listType"==w.attributeKey)&&$(w.range.start)}}catch(W){p.e(W)}finally{p.f()}var z,D=k(g.values());try{for(D.s();!(z=D.n()).done;){var J=z.value;Q(J),K(J)}}catch(W){D.e(W)}finally{D.f()}return m;function $(W){var ie=W.nodeBefore;if(ie&&ie.is("element","listItem")){var ne=ie;if(g.has(ne))return;for(var oe=ne.previousSibling;oe&&oe.is("element","listItem");oe=ne.previousSibling)if(g.has(ne=oe))return;g.set(ie,ne)}else{var ge=W.nodeAfter;ge&&ge.is("element","listItem")&&g.set(ge,ge)}}function Q(W){for(var ie=0,ne=null;W&&W.is("element","listItem");){var oe=W.getAttribute("listIndent");if(oe>ie){var ge=void 0;null===ne?(ne=oe-ie,ge=ie):(ne>oe&&(ne=oe),ge=oe-ne),f.setAttribute("listIndent",ge,W),m=!0}else ne=null,ie=W.getAttribute("listIndent")+1;W=W.nextSibling}}function K(W){for(var ie=[],ne=null;W&&W.is("element","listItem");){var oe=W.getAttribute("listIndent");if(ne&&ne.getAttribute("listIndent")>oe&&(ie=ie.slice(0,oe+1)),0!=oe)if(ie[oe]){var ge=ie[oe];W.getAttribute("listType")!=ge&&(f.setAttribute("listType",ge,W),m=!0)}else ie[oe]=W.getAttribute("listType");ne=W,W=W.nextSibling}}}(r.model,d)}),s.mapper.registerViewToModelLength("li",Xo),o.mapper.registerViewToModelLength("li",Xo),s.mapper.on("modelToViewPosition",pd(s.view)),s.mapper.on("viewToModelPosition",(l=r.model,function(d,h){var f=h.viewPosition,v=f.parent,g=h.mapper;if("ul"==v.name||"ol"==v.name){if(f.isAtEnd){var m=g.toModelElement(f.nodeBefore),p=g.getModelLength(f.nodeBefore);h.modelPosition=l.createPositionBefore(m).getShiftedBy(p)}else{var y=g.toModelElement(f.nodeAfter);h.modelPosition=l.createPositionBefore(y)}d.stop()}else if("li"==v.name&&f.nodeBefore&&("ul"==f.nodeBefore.name||"ol"==f.nodeBefore.name)){for(var w=g.toModelElement(v),_=1,T=f.nodeBefore;T&&on(T);)_+=g.getModelLength(T),T=T.previousSibling;h.modelPosition=l.createPositionBefore(w).getShiftedBy(_),d.stop()}})),o.mapper.on("modelToViewPosition",pd(s.view)),r.conversion.for("editingDowncast").add(function(d){var h;d.on("insert",gd,{priority:"high"}),d.on("insert:listItem",vd(r.model)),d.on("attribute:listType:listItem",zk,{priority:"high"}),d.on("attribute:listType:listItem",Fk,{priority:"low"}),d.on("attribute:listIndent:listItem",(h=r.model,function(f,v,g){if(g.consumable.consume(v.item,"attribute:listIndent")){var m=g.mapper.toViewElement(v.item),p=g.writer;p.breakContainer(p.createPositionBefore(m)),p.breakContainer(p.createPositionAfter(m));var y=m.parent,w=y.previousSibling,_=p.createRangeOn(y);p.remove(_),w&&w.nextSibling&&gt(p,w,w.nextSibling),kd(v.attributeOldValue+1,v.range.start,_.start,m,g,h),ud(v.item,m,g,h);var x,T=k(v.item.getChildren());try{for(T.s();!(x=T.n()).done;)g.consumable.consume(x.value,"insert")}catch(D){T.e(D)}finally{T.f()}}})),d.on("remove:listItem",function(h){return function(f,v,g){var m=g.mapper.toViewPosition(v.position).getLastMatchingPosition(function(z){return!z.item.is("element","li")}).nodeAfter,p=g.writer;p.breakContainer(p.createPositionBefore(m)),p.breakContainer(p.createPositionAfter(m));var y=m.parent,w=y.previousSibling,_=p.createRangeOn(y),T=p.remove(_);w&&w.nextSibling&&gt(p,w,w.nextSibling),kd(g.mapper.toModelElement(m).getAttribute("listIndent")+1,v.position,_.start,m,g,h);var N,x=k(p.createRangeIn(T).getItems());try{for(x.s();!(N=x.n()).done;)g.mapper.unbindViewElement(N.value)}catch(z){x.e(z)}finally{x.f()}f.stop()}}(r.model)),d.on("remove",Uk,{priority:"low"})}),r.conversion.for("dataDowncast").add(function(d){d.on("insert",gd,{priority:"high"}),d.on("insert:listItem",vd(r.model))}),r.conversion.for("upcast").add(function(d){d.on("element:ul",md,{priority:"high"}),d.on("element:ol",md,{priority:"high"}),d.on("element:li",Wk,{priority:"high"}),d.on("element:li",Hk)}),r.model.on("insertContent",qk,{priority:"high"}),r.commands.add("numberedList",new ad(r,"numbered")),r.commands.add("bulletedList",new ad(r,"bulleted")),r.commands.add("indentList",new cd(r,"forward")),r.commands.add("outdentList",new cd(r,"backward"));var c=s.view.document;this.listenTo(c,"enter",function(d,h){var f=t.editor.model.document,v=f.selection.getLastPosition().parent;f.selection.isCollapsed&&"listItem"==v.name&&v.isEmpty&&(t.editor.execute("outdentList"),h.preventDefault(),d.stop())}),this.listenTo(c,"delete",function(d,h){if("backward"===h.direction){var f=t.editor.model.document.selection;if(f.isCollapsed){var v=f.getFirstPosition();if(v.isAtStart){var g=v.parent;"listItem"===g.name&&(g.previousSibling&&"listItem"===g.previousSibling.name||(t.editor.execute("outdentList"),h.preventDefault(),d.stop()))}}}},{priority:"high"});var u=function(h){return function(f,v){t.editor.commands.get(h).isEnabled&&(t.editor.execute(h),v())}};r.keystrokes.set("Tab",u("indentList")),r.keystrokes.set("Shift+Tab",u("outdentList"))}},{key:"afterInit",value:function(){var t=this.editor.commands,r=t.get("indent"),o=t.get("outdent");r&&r.registerChildCommand(t.get("indentList")),o&&o.registerChildCommand(t.get("outdentList"))}}],[{key:"pluginName",get:function(){return"ListEditing"}},{key:"requires",get:function(){return[li]}}]),e}(U);function Xo(a){var n,i=1,e=k(a.getChildren());try{for(e.s();!(n=e.n()).done;){var t=n.value;if("ul"==t.name||"ol"==t.name){var o,r=k(t.getChildren());try{for(r.s();!(o=r.n()).done;)i+=Xo(o.value)}catch(l){r.e(l)}finally{r.f()}}}}catch(l){e.e(l)}finally{e.f()}return i}var $k=function(a){P(e,a);var i=M(e);function e(){return A(this,e),i.apply(this,arguments)}return C(e,[{key:"init",value:function(){var t=this.editor.t;fd(this.editor,"numberedList",t("Numbered List"),'<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M7 5.75c0 .414.336.75.75.75h9.5a.75.75 0 1 0 0-1.5h-9.5a.75.75 0 0 0-.75.75zM3.5 3v5H2V3.7H1v-1h2.5V3zM.343 17.857l2.59-3.257H2.92a.6.6 0 1 0-1.04 0H.302a2 2 0 1 1 3.995 0h-.001c-.048.405-.16.734-.333.988-.175.254-.59.692-1.244 1.312H4.3v1h-4l.043-.043zM7 14.75a.75.75 0 0 1 .75-.75h9.5a.75.75 0 1 1 0 1.5h-9.5a.75.75 0 0 1-.75-.75z"/></svg>'),fd(this.editor,"bulletedList",t("Bulleted List"),'<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M7 5.75c0 .414.336.75.75.75h9.5a.75.75 0 1 0 0-1.5h-9.5a.75.75 0 0 0-.75.75zm-6 0C1 4.784 1.777 4 2.75 4c.966 0 1.75.777 1.75 1.75 0 .966-.777 1.75-1.75 1.75C1.784 7.5 1 6.723 1 5.75zm6 9c0 .414.336.75.75.75h9.5a.75.75 0 1 0 0-1.5h-9.5a.75.75 0 0 0-.75.75zm-6 0c0-.966.777-1.75 1.75-1.75.966 0 1.75.777 1.75 1.75 0 .966-.777 1.75-1.75 1.75-.966 0-1.75-.777-1.75-1.75z"/></svg>')}}]),e}(U);function yd(a,i){return function(n){n.on("attribute:url:media",e)};function e(n,t,r){if(r.consumable.consume(t.item,n.name)){var o=t.attributeNewValue,s=r.writer,l=r.mapper.toViewElement(t.item),c=Y(l.getChildren()).find(function(d){return d.getCustomProperty("media-content")});s.remove(c);var u=a.getMediaViewElement(s,o,i);s.insert(s.createPositionAt(l,0),u)}}}function bd(a,i,e,n){var t=a.createContainerElement("figure",{class:"media"});return a.insert(a.createPositionAt(t,0),i.getMediaViewElement(a,e,n)),t}function wd(a){var i=a.getSelectedElement();return i&&i.is("element","media")?i:null}function _d(a,i,e){a.change(function(n){var t=n.createElement("media",{url:i});a.insertContent(t,e),n.setSelection(t,"on")})}var Kk=function(a){P(e,a);var i=M(e);function e(){return A(this,e),i.apply(this,arguments)}return C(e,[{key:"refresh",value:function(){var t=this.editor.model,r=t.document.selection,o=t.schema,s=r.getFirstPosition(),l=wd(r),c=s.parent;c!=c.root&&(c=c.parent),this.value=l?l.getAttribute("url"):null,this.isEnabled=o.checkChild(c,"media")}},{key:"execute",value:function(t){var r=this.editor.model,o=r.document.selection,s=wd(o);if(s)r.change(function(c){c.setAttribute("url",t,s)});else{var l=Qr(o,r);_d(r,t,l)}}}]),e}(ve),Jk=function(){function a(i,e){A(this,a);var n=e.providers,t=e.extraProviders||[],r=new Set(e.removeProviders),o=n.concat(t).filter(function(s){var l=s.name;return l?!r.has(l):(console.warn(Object(I.a)("media-embed-no-provider-name: The configured media provider has no name and cannot be used."),{provider:s}),!1)});this.locale=i,this.providerDefinitions=o}return C(a,[{key:"hasMedia",value:function(e){return!!this._getMedia(e)}},{key:"getMediaViewElement",value:function(e,n,t){return this._getMedia(n).getViewElement(e,t)}},{key:"_getMedia",value:function(e){if(!e)return new Ad(this.locale);e=e.trim();var t,n=k(this.providerDefinitions);try{for(n.s();!(t=n.n()).done;){var r=t.value,o=r.html,s=r.url;Array.isArray(s)||(s=[s]);var c,l=k(s);try{for(l.s();!(c=l.n()).done;){var d=this._getUrlMatches(e,c.value);if(d)return new Ad(this.locale,e,d,o)}}catch(h){l.e(h)}finally{l.f()}}}catch(h){n.e(h)}finally{n.f()}return null}},{key:"_getUrlMatches",value:function(e,n){var t=e.match(n);if(t)return t;var r=e.replace(/^https?:\/\//,"");return(t=r.match(n))||(t=(r=r.replace(/^www\./,"")).match(n))||null}}]),a}(),Ad=function(){function a(i,e,n,t){A(this,a),this.url=this._getValidUrl(e),this._t=i.t,this._match=n,this._previewRenderer=t}return C(a,[{key:"getViewElement",value:function(e,n){var r,t={};if(n.renderForEditingView||n.renderMediaPreview&&this.url&&this._previewRenderer){this.url&&(t["data-oembed-url"]=this.url),n.renderForEditingView&&(t.class="ck-media__wrapper");var o=this._getPreviewHtml(n);r=e.createRawElement("div",t,function(s){s.innerHTML=o})}else this.url&&(t.url=this.url),r=e.createEmptyElement("oembed",t);return e.setCustomProperty("media-content",!0,r),r}},{key:"_getPreviewHtml",value:function(e){return this._previewRenderer?this._previewRenderer(this._match):this.url&&e.renderForEditingView?this._getPlaceholderHtml():""}},{key:"_getPlaceholderHtml",value:function(){var e=new nc,n=new Hr;return e.text=this._t("Open media in new tab"),n.content='<svg viewBox="0 0 64 42" xmlns="http://www.w3.org/2000/svg"><path d="M47.426 17V3.713L63.102 0v19.389h-.001l.001.272c0 1.595-2.032 3.43-4.538 4.098-2.506.668-4.538-.083-4.538-1.678 0-1.594 2.032-3.43 4.538-4.098.914-.244 2.032-.565 2.888-.603V4.516L49.076 7.447v9.556A1.014 1.014 0 0 0 49 17h-1.574zM29.5 17h-8.343a7.073 7.073 0 1 0-4.657 4.06v3.781H3.3a2.803 2.803 0 0 1-2.8-2.804V8.63a2.803 2.803 0 0 1 2.8-2.805h4.082L8.58 2.768A1.994 1.994 0 0 1 10.435 1.5h8.985c.773 0 1.477.448 1.805 1.149l1.488 3.177H26.7c1.546 0 2.8 1.256 2.8 2.805V17zm-11.637 0H17.5a1 1 0 0 0-1 1v.05A4.244 4.244 0 1 1 17.863 17zm29.684 2c.97 0 .953-.048.953.889v20.743c0 .953.016.905-.953.905H19.453c-.97 0-.953.048-.953-.905V19.89c0-.937-.016-.889.97-.889h28.077zm-4.701 19.338V22.183H24.154v16.155h18.692zM20.6 21.375v1.616h1.616v-1.616H20.6zm0 3.231v1.616h1.616v-1.616H20.6zm0 3.231v1.616h1.616v-1.616H20.6zm0 3.231v1.616h1.616v-1.616H20.6zm0 3.231v1.616h1.616v-1.616H20.6zm0 3.231v1.616h1.616V37.53H20.6zm24.233-16.155v1.616h1.615v-1.616h-1.615zm0 3.231v1.616h1.615v-1.616h-1.615zm0 3.231v1.616h1.615v-1.616h-1.615zm0 3.231v1.616h1.615v-1.616h-1.615zm0 3.231v1.616h1.615v-1.616h-1.615zm0 3.231v1.616h1.615V37.53h-1.615zM29.485 25.283a.4.4 0 0 1 .593-.35l9.05 4.977a.4.4 0 0 1 0 .701l-9.05 4.978a.4.4 0 0 1-.593-.35v-9.956z"/></svg>',n.viewBox="0 0 64 42",new vt({tag:"div",attributes:{class:"ck ck-reset_all ck-media__placeholder"},children:[{tag:"div",attributes:{class:"ck-media__placeholder__icon"},children:[n]},{tag:"a",attributes:{class:"ck-media__placeholder__url",target:"_blank",rel:"noopener noreferrer",href:this.url},children:[{tag:"span",attributes:{class:"ck-media__placeholder__url__text"},children:[this.url]},e]}]}).render().outerHTML}},{key:"_getValidUrl",value:function(e){return e?e.match(/^https?/)?e:"https://"+e:null}}]),a}();E(88);var hi=function(a){P(e,a);var i=M(e);function e(n){var t;return A(this,e),t=i.call(this,n),n.config.define("mediaEmbed",{providers:[{name:"dailymotion",url:/^dailymotion\.com\/video\/(\w+)/,html:function(o){return'<div style="position: relative; padding-bottom: 100%; height: 0; "><iframe src="https://www.dailymotion.com/embed/video/'.concat(o[1],'" style="position: absolute; width: 100%; height: 100%; top: 0; left: 0;" frameborder="0" width="480" height="270" allowfullscreen allow="autoplay"></iframe></div>')}},{name:"spotify",url:[/^open\.spotify\.com\/(artist\/\w+)/,/^open\.spotify\.com\/(album\/\w+)/,/^open\.spotify\.com\/(track\/\w+)/],html:function(o){return'<div style="position: relative; padding-bottom: 100%; height: 0; padding-bottom: 126%;"><iframe src="https://open.spotify.com/embed/'.concat(o[1],'" style="position: absolute; width: 100%; height: 100%; top: 0; left: 0;" frameborder="0" allowtransparency="true" allow="encrypted-media"></iframe></div>')}},{name:"youtube",url:[/^(?:m\.)?youtube\.com\/watch\?v=([\w-]+)/,/^(?:m\.)?youtube\.com\/v\/([\w-]+)/,/^youtube\.com\/embed\/([\w-]+)/,/^youtu\.be\/([\w-]+)/],html:function(o){return'<div style="position: relative; padding-bottom: 100%; height: 0; padding-bottom: 56.2493%;"><iframe src="https://www.youtube.com/embed/'.concat(o[1],'" style="position: absolute; width: 100%; height: 100%; top: 0; left: 0;" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div>')}},{name:"vimeo",url:[/^vimeo\.com\/(\d+)/,/^vimeo\.com\/[^/]+\/[^/]+\/video\/(\d+)/,/^vimeo\.com\/album\/[^/]+\/video\/(\d+)/,/^vimeo\.com\/channels\/[^/]+\/(\d+)/,/^vimeo\.com\/groups\/[^/]+\/videos\/(\d+)/,/^vimeo\.com\/ondemand\/[^/]+\/(\d+)/,/^player\.vimeo\.com\/video\/(\d+)/],html:function(o){return'<div style="position: relative; padding-bottom: 100%; height: 0; padding-bottom: 56.2493%;"><iframe src="https://player.vimeo.com/video/'.concat(o[1],'" style="position: absolute; width: 100%; height: 100%; top: 0; left: 0;" frameborder="0" webkitallowfullscreen mozallowfullscreen allowfullscreen></iframe></div>')}},{name:"instagram",url:/^instagram\.com\/p\/(\w+)/},{name:"twitter",url:/^twitter\.com/},{name:"googleMaps",url:/^google\.com\/maps/},{name:"flickr",url:/^flickr\.com/},{name:"facebook",url:/^facebook\.com/}]}),t.registry=new Jk(n.locale,n.config.get("mediaEmbed")),t}return C(e,[{key:"init",value:function(){var t=this.editor,r=t.model.schema,o=t.t,s=t.conversion,l=t.config.get("mediaEmbed.previewsInData"),c=this.registry;t.commands.add("mediaEmbed",new Kk(t)),r.register("media",{isObject:!0,isBlock:!0,allowWhere:"$block",allowAttributes:["url"]}),s.for("dataDowncast").elementToElement({model:"media",view:function(d,h){var f=h.writer,v=d.getAttribute("url");return bd(f,c,v,{renderMediaPreview:v&&l})}}),s.for("dataDowncast").add(yd(c,{renderMediaPreview:l})),s.for("editingDowncast").elementToElement({model:"media",view:function(d,h){var g,m,p,f=h.writer,v=d.getAttribute("url");return g=bd(f,c,v,{renderForEditingView:!0}),m=f,p=o("media widget"),m.setCustomProperty("media",!0,g),Lo(g,m,{label:p})}}),s.for("editingDowncast").add(yd(c,{renderForEditingView:!0})),s.for("upcast").elementToElement({view:{name:"oembed",attributes:{url:!0}},model:function(d,h){var f=h.writer,v=d.getAttribute("url");if(c.hasMedia(v))return f.createElement("media",{url:v})}}).elementToElement({view:{name:"div",attributes:{"data-oembed-url":!0}},model:function(d,h){var f=h.writer,v=d.getAttribute("data-oembed-url");if(c.hasMedia(v))return f.createElement("media",{url:v})}})}}],[{key:"pluginName",get:function(){return"MediaEmbedEditing"}}]),e}(U),Qk=/^(?:http(s)?:\/\/)?[\w.-]+(?:\.[\w.-]+)+[\w\-._~:/?#[\]@!$&'()*+,;=]+$/,Zk=function(a){P(e,a);var i=M(e);function e(n){var t;return A(this,e),(t=i.call(this,n))._timeoutId=null,t._positionToInsert=null,t}return C(e,[{key:"init",value:function(){var t=this,r=this.editor,o=r.model.document;this.listenTo(r.plugins.get(nn),"inputTransformation",function(){var s=o.selection.getFirstRange(),l=$e.fromPosition(s.start);l.stickiness="toPrevious";var c=$e.fromPosition(s.end);c.stickiness="toNext",o.once("change:data",function(){t._embedMediaBetweenPositions(l,c),l.detach(),c.detach()},{priority:"high"})}),r.commands.get("undo").on("execute",function(){t._timeoutId&&(We.window.clearTimeout(t._timeoutId),t._positionToInsert.detach(),t._timeoutId=null,t._positionToInsert=null)},{priority:"high"})}},{key:"_embedMediaBetweenPositions",value:function(t,r){var f,o=this,s=this.editor,l=s.plugins.get(hi).registry,c=new yn(t,r),u=c.getWalker({ignoreElementEnd:!0}),d="",h=k(u);try{for(h.s();!(f=h.n()).done;){var v=f.value;v.item.is("$textProxy")&&(d+=v.item.data)}}catch(g){h.e(g)}finally{h.f()}(d=d.trim()).match(Qk)&&l.hasMedia(d)&&s.commands.get("mediaEmbed").isEnabled?(this._positionToInsert=$e.fromPosition(t),this._timeoutId=We.window.setTimeout(function(){s.model.change(function(g){var m;o._timeoutId=null,g.remove(c),c.detach(),"$graveyard"!==o._positionToInsert.root.rootName&&(m=o._positionToInsert),_d(s.model,d,m),o._positionToInsert.detach(),o._positionToInsert=null})},100)):c.detach()}}],[{key:"requires",get:function(){return[nn,Mc]}},{key:"pluginName",get:function(){return"AutoMediaEmbed"}}]),e}(U);E(90);var Xk=function(a){P(e,a);var i=M(e);function e(n,t){var r;A(this,e),r=i.call(this,t);var o=t.t;return r.focusTracker=new lt,r.keystrokes=new ft,r.urlInputView=r._createUrlInput(),r.saveButtonView=r._createButton(o("Save"),ri,"ck-button-save"),r.saveButtonView.type="submit",r.cancelButtonView=r._createButton(o("Cancel"),ii,"ck-button-cancel","cancel"),r._focusables=new Ht,r._focusCycler=new Lt({focusables:r._focusables,focusTracker:r.focusTracker,keystrokeHandler:r.keystrokes,actions:{focusPrevious:"shift + tab",focusNext:"tab"}}),r._validators=n,r.setTemplate({tag:"form",attributes:{class:["ck","ck-media-form"],tabindex:"-1"},children:[r.urlInputView,r.saveButtonView,r.cancelButtonView]}),r}return C(e,[{key:"render",value:function(){var t=this;B(L(e.prototype),"render",this).call(this),ni({view:this}),[this.urlInputView,this.saveButtonView,this.cancelButtonView].forEach(function(o){t._focusables.add(o),t.focusTracker.add(o.element)}),this.keystrokes.listenTo(this.element);var r=function(s){return s.stopPropagation()};this.keystrokes.set("arrowright",r),this.keystrokes.set("arrowleft",r),this.keystrokes.set("arrowup",r),this.keystrokes.set("arrowdown",r),this.listenTo(this.urlInputView.element,"selectstart",function(o,s){s.stopPropagation()},{priority:"high"})}},{key:"focus",value:function(){this._focusCycler.focusFirst()}},{key:"url",get:function(){return this.urlInputView.fieldView.element.value.trim()},set:function(t){this.urlInputView.fieldView.element.value=t.trim()}},{key:"isValid",value:function(){this.resetFormStatus();var r,t=k(this._validators);try{for(t.s();!(r=t.n()).done;){var s=(0,r.value)(this);if(s)return this.urlInputView.errorText=s,!1}}catch(l){t.e(l)}finally{t.f()}return!0}},{key:"resetFormStatus",value:function(){this.urlInputView.errorText=null,this.urlInputView.infoText=this._urlInputViewInfoDefault}},{key:"_createUrlInput",value:function(){var t=this,r=this.locale.t,o=new ei(this.locale,ti),s=o.fieldView;return this._urlInputViewInfoDefault=r("Paste the media URL in the input."),this._urlInputViewInfoTip=r("Tip: Paste the URL into the content to embed faster."),o.label=r("Media URL"),o.infoText=this._urlInputViewInfoDefault,s.placeholder="https://example.com",s.on("input",function(){o.infoText=s.element.value?t._urlInputViewInfoTip:t._urlInputViewInfoDefault}),o}},{key:"_createButton",value:function(t,r,o,s){var l=new be(this.locale);return l.set({label:t,icon:r,tooltip:!0}),l.extendTemplate({attributes:{class:o}}),s&&l.delegate("execute").to(this,s),l}}]),e}(ue),ey=function(a){P(e,a);var i=M(e);function e(){return A(this,e),i.apply(this,arguments)}return C(e,[{key:"init",value:function(){var t=this,r=this.editor,o=r.commands.get("mediaEmbed"),s=r.plugins.get(hi).registry;r.ui.componentFactory.add("mediaEmbed",function(l){var d,h,c=yt(l),u=new Xk((d=r.t,h=s,[function(f){if(!f.url.length)return d("The URL must not be empty.")},function(f){if(!h.hasMedia(f.url))return d("This media URL is not supported.")}]),r.locale);return t._setUpDropdown(c,u,o,r),t._setUpForm(c,u,o),c})}},{key:"_setUpDropdown",value:function(t,r,o){var s=this.editor,l=s.t,c=t.buttonView;function u(){s.editing.view.focus(),t.isOpen=!1}t.bind("isEnabled").to(o),t.panelView.children.add(r),c.set({label:l("Insert media"),icon:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20"><path d="M18.68 3.03c.6 0 .59-.03.59.55v12.84c0 .59.01.56-.59.56H1.29c-.6 0-.59.03-.59-.56V3.58c0-.58-.01-.55.6-.55h17.38zM15.77 15V5H4.2v10h11.57zM2 4v1h1V4H2zm0 2v1h1V6H2zm0 2v1h1V8H2zm0 2v1h1v-1H2zm0 2v1h1v-1H2zm0 2v1h1v-1H2zM17 4v1h1V4h-1zm0 2v1h1V6h-1zm0 2v1h1V8h-1zm0 2v1h1v-1h-1zm0 2v1h1v-1h-1zm0 2v1h1v-1h-1zM7.5 7.177a.4.4 0 0 1 .593-.351l5.133 2.824a.4.4 0 0 1 0 .7l-5.133 2.824a.4.4 0 0 1-.593-.35V7.176v.001z"/></svg>',tooltip:!0}),c.on("open",function(){r.url=o.value||"",r.urlInputView.fieldView.select(),r.focus()},{priority:"low"}),t.on("submit",function(){r.isValid()&&(s.execute("mediaEmbed",r.url),u())}),t.on("change:isOpen",function(){return r.resetFormStatus()}),t.on("cancel",function(){return u()})}},{key:"_setUpForm",value:function(t,r,o){r.delegate("submit","cancel").to(t),r.urlInputView.bind("value").to(o,"value"),r.urlInputView.bind("isReadOnly").to(o,"isEnabled",function(s){return!s}),r.saveButtonView.bind("isEnabled").to(o)}}],[{key:"requires",get:function(){return[hi]}},{key:"pluginName",get:function(){return"MediaEmbedUI"}}]),e}(U);function Cd(a,i,e){var n=i.parent,t=e.createElement(a.type),r=n.getChildIndex(i)+1;return e.insertChild(r,t,n),t}function ny(a){var i={},e=a.getStyle("mso-list");if(e){var n=e.match(/(^|\s+)l(\d+)/i),t=e.match(/\s*lfo(\d+)/i),r=e.match(/\s*level(\d+)/i);n&&t&&r&&(i.id=n[2],i.order=t[1],i.indent=r[1])}return i}E(92);var ry=/id=("|')docs-internal-guid-[-0-9a-f]+("|')/i,iy=function(){function a(i){A(this,a),this.document=i}return C(a,[{key:"isActive",value:function(e){return ry.test(e)}},{key:"execute",value:function(e){var n=new si(this.document);(function(t,r){var s,o=k(t.getChildren());try{for(o.s();!(s=o.n()).done;){var l=s.value;if(l.is("element","b")&&"normal"===l.getStyle("font-weight")){var c=t.getChildIndex(l);r.remove(l),r.insertChild(c,l.getChildren(),t)}}}catch(u){o.e(u)}finally{o.f()}})(e.content,n),function(t,r){var s,o=k(r.createRangeIn(t));try{for(o.s();!(s=o.n()).done;){var c=s.value.item;if(c.is("element","li")){var u=c.getChild(0);u.is("element","p")&&r.unwrapElement(u)}}}catch(d){o.e(d)}finally{o.f()}}(e.content,n)}}]),a}();function Td(a){return a.replace(/<span(?: class="Apple-converted-space"|)>(\s+)<\/span>/g,function(i,e){return 1===e.length?" ":Array(e.length+1).join("\xa0 ").substr(0,e.length)})}var sy=/<meta\s*name="?generator"?\s*content="?microsoft\s*word\s*\d+"?\/?>/i,ly=/xmlns:o="urn:schemas-microsoft-com/i,cy=function(){function a(i){A(this,a),this.document=i}return C(a,[{key:"isActive",value:function(e){return sy.test(e)||ly.test(e)}},{key:"execute",value:function(e){var n=function oy(a,i){var l,c,e=new DOMParser,n=function(l){return Td(Td(l)).replace(/(<span\s+style=['"]mso-spacerun:yes['"]>[\s]*?)[\r\n]+(\s*<\/span>)/g,"$1$2").replace(/<span\s+style=['"]mso-spacerun:yes['"]><\/span>/g,"").replace(/ <\//g,"\xa0</").replace(/ <o:p><\/o:p>/g,"\xa0<o:p></o:p>").replace(/<o:p>(&nbsp;|\u00A0)<\/o:p>/g,"").replace(/>(\s*[\r\n]\s*)</g,"><")}(((c=(l=a=a.replace(/<!--\[if gte vml 1]>/g,"")).match(/<\/body>(.*?)(<\/html>|$)/))&&c[1]&&(l=l.slice(0,c.index)+l.slice(c.index).replace(c[1],"")),l)),t=e.parseFromString(n,"text/html");!function(l){l.querySelectorAll("span[style*=spacerun]").forEach(function(c){var u=c.innerText.length||0;c.innerHTML=Array(u+1).join("\xa0 ").substr(0,u)})}(t);var r=t.body.innerHTML,o=function(l,c){for(var u=new Ar(c),d=new Pr(u,{blockFillerMode:"nbsp"}),h=l.createDocumentFragment(),f=l.body.childNodes;f.length>0;)h.appendChild(f[0]);return d.domToView(h)}(t,i),s=function(l){for(var c=[],u=[],h=0,f=Array.from(l.getElementsByTagName("style"));h<f.length;h++){var v=f[h];v.sheet&&v.sheet.cssRules&&v.sheet.cssRules.length&&(c.push(v.sheet),u.push(v.innerHTML))}return{styles:c,stylesString:u.join(" ")}}(t);return{body:o,bodyString:r,styles:s.styles,stylesString:s.stylesString}}(e.dataTransfer.getData("text/html"),this.document.stylesProcessor),t=n.body;(function ty(a,i){if(a.childCount){var e=new si(a.document),n=function(o,s){var h,l=s.createRangeIn(o),c=new Nt({name:/^p|h\d+$/,styles:{"mso-list":/.*/}}),u=[],d=k(l);try{for(d.s();!(h=d.n()).done;){var f=h.value;if("elementStart"===f.type&&c.match(f.item)){var v=ny(f.item);u.push({element:f.item,id:v.id,order:v.order,indent:v.indent})}}}catch(g){d.e(g)}finally{d.f()}return u}(a,e);if(n.length){var t=null,r=1;n.forEach(function(o,s){var d,h,l=function(y,w){if(!y||y.id!==w.id)return!0;var T,_=w.element.previousSibling;return!_||!((T=_).is("element","ol")||T.is("element","ul"))}(n[s-1],o),u=(h=o,(d=l?null:n[s-1])?h.indent-d.indent:h.indent-1);if(l&&(t=null,r=1),!t||0!==u){var f=function(y,w){var x=new RegExp("@list l".concat(y.id,":level").concat(y.indent,"\\s*({[^}]*)"),"gi").exec(w),N="decimal";if(x&&x[1]){var D=/mso-level-number-format:([^;]*);/gi.exec(x[1]);D&&D[1]&&(N=D[1].trim())}return{type:"bullet"!==N&&"image"!==N?"ol":"ul",style:N}}(o,i);if(t)if(o.indent>r){var v=t.getChild(t.childCount-1),g=v.getChild(v.childCount-1);t=Cd(f,g,e),r+=1}else o.indent<r&&(t=function(y,w){var D,_=y.getAncestors({parentFirst:!0}),T=null,x=0,N=k(_);try{for(N.s();!(D=N.n()).done;){var z=D.value;if("ul"!==z.name&&"ol"!==z.name||x++,x===w){T=z;break}}}catch(J){N.e(J)}finally{N.f()}return T}(t,r-o.indent),r=parseInt(o.indent));else t=Cd(f,o.element,e);o.indent<=r&&(t.is("element",f.type)||(t=e.rename(f.type,t)))}var y,w,p=(function(_,T){var z,x=new Nt({name:"span",styles:{"mso-list":"Ignore"}}),N=T.createRangeIn(_),D=k(N);try{for(D.s();!(z=D.n()).done;){var J=z.value;"elementStart"===J.type&&x.match(J.item)&&T.remove(J.item)}}catch($){D.e($)}finally{D.f()}}(y=o.element,w=e),w.rename("li",y));e.appendChild(p,t)})}}})(t,n.stylesString),function ay(a,i){if(a.childCount){var e=new si;(function(t,r,o){var d,s=o.createRangeIn(r),l=new Nt({name:"img"}),c=[],u=k(s);try{for(u.s();!(d=u.n()).done;){var h=d.value;if(l.match(h.item)){var f=h.item,v=f.getAttribute("v:shapes")?f.getAttribute("v:shapes").split(" "):[];v.length&&v.every(function(y){return t.indexOf(y)>-1})?c.push(f):f.getAttribute("src")||c.push(f)}}}catch(y){u.e(y)}finally{u.f()}for(var g=0,m=c;g<m.length;g++)o.remove(m[g])})(function(t,r){var u,o=r.createRangeIn(t),s=new Nt({name:/v:(.+)/}),l=[],c=k(o);try{for(c.s();!(u=c.n()).done;){var d=u.value,h=d.item,f=h.previousSibling&&h.previousSibling.name||null;s.match(h)&&h.getAttribute("o:gfxdata")&&"v:shapetype"!==f&&l.push(d.item.getAttribute("id"))}}catch(v){c.e(v)}finally{c.f()}return l}(a,e),a,e),function(t,r){var u,o=r.createRangeIn(t),s=new Nt({name:/v:(.+)/}),l=[],c=k(o);try{for(c.s();!(u=c.n()).done;){var d=u.value;s.match(d.item)&&l.push(d.item)}}catch(g){c.e(g)}finally{c.f()}for(var h=0,f=l;h<f.length;h++)r.remove(f[h])}(a,e);var n=function(t,r){var u,o=r.createRangeIn(t),s=new Nt({name:"img"}),l=[],c=k(o);try{for(c.s();!(u=c.n()).done;){var d=u.value;s.match(d.item)&&d.item.getAttribute("src").startsWith("file://")&&l.push(d.item)}}catch(h){c.e(h)}finally{c.f()}return l}(a,e);n.length&&function(t,r,o){if(t.length===r.length)for(var s=0;s<t.length;s++){var l="data:".concat(r[s].type,";base64,").concat(btoa(r[s].hex.match(/\w{2}/g).map(function(u){return String.fromCharCode(parseInt(u,16))}).join("")));o.setAttribute("src",l,t[s])}}(n,function(t){if(!t)return[];var r=/{\\pict[\s\S]+?\\bliptag-?\d+(\\blipupi-?\d+)?({\\\*\\blipuid\s?[\da-fA-F]+)?[\s}]*?/,o=new RegExp("(?:("+r.source+"))([\\da-fA-F\\s]+)\\}","g"),s=t.match(o),l=[];if(s){var u,c=k(s);try{for(c.s();!(u=c.n()).done;){var d=u.value,h=!1;d.includes("\\pngblip")?h="image/png":d.includes("\\jpegblip")&&(h="image/jpeg"),h&&l.push({hex:d.replace(r,"").replace(/[^\da-fA-F]/g,""),type:h})}}catch(f){c.e(f)}finally{c.f()}}return l}(i),e)}}(t,e.dataTransfer.getData("text/rtf")),e.content=t}}]),a}();function Ve(a,i,e,n){i>(arguments.length>4&&void 0!==arguments[4]?arguments[4]:1)?n.setAttribute(a,i,e):n.removeAttribute(a,e)}function an(a,i){var n=a.createElement("tableCell",arguments.length>2&&void 0!==arguments[2]?arguments[2]:{});return a.insertElement("paragraph",n),a.insert(n,i),n}function ea(a,i){var n=parseInt(i.parent.parent.getAttribute("headingColumns")||0),t=a.getCellLocation(i);return!!n&&t.column<n}function xd(a){return function(i){i.on("element:"+a,function(e,n,t){if(n.modelRange){var r=n.modelRange.start.nodeAfter;if(!r.childCount){var o=t.writer.createPositionAt(r,0);t.writer.insertElement("paragraph",o)}}},{priority:"low"})}}function dy(a){for(var i=0,e=0,n=Array.from(a.getChildren()).filter(function(r){return"th"===r.name||"td"===r.name});e<n.length&&"th"===n[e].name;)i+=parseInt(n[e].getAttribute("colspan")||1),e++;return i}var we=function(a){function i(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};A(this,i),this._table=e,this._startRow=void 0!==n.row?n.row:n.startRow||0,this._endRow=void 0!==n.row?n.row:n.endRow,this._startColumn=void 0!==n.column?n.column:n.startColumn||0,this._endColumn=void 0!==n.column?n.column:n.endColumn,this._includeAllSlots=!!n.includeAllSlots,this._skipRows=new Set,this._row=0,this._column=0,this._cellIndex=0,this._spannedCells=new Map,this._nextCellAtColumn=-1}return C(i,[{key:a,value:function(){return this}},{key:"next",value:function(){var n=this._table.getChild(this._row);if(!n||this._isOverEndRow())return{done:!0};if(this._isOverEndColumn())return this._advanceToNextRow();var t=null,r=this._getSpanned();if(r)this._includeAllSlots&&!this._shouldSkipSlot()&&(t=this._formatOutValue(r.cell,r.row,r.column));else{var o=n.getChild(this._cellIndex);if(!o)return this._advanceToNextRow();var s=parseInt(o.getAttribute("colspan")||1),l=parseInt(o.getAttribute("rowspan")||1);(s>1||l>1)&&this._recordSpans(o,l,s),this._shouldSkipSlot()||(t=this._formatOutValue(o)),this._nextCellAtColumn=this._column+s}return this._column++,this._column==this._nextCellAtColumn&&this._cellIndex++,t||this.next()}},{key:"skipRow",value:function(n){this._skipRows.add(n)}},{key:"_advanceToNextRow",value:function(){return this._row++,this._column=0,this._cellIndex=0,this._nextCellAtColumn=-1,this.next()}},{key:"_isOverEndRow",value:function(){return void 0!==this._endRow&&this._row>this._endRow}},{key:"_isOverEndColumn",value:function(){return void 0!==this._endColumn&&this._column>this._endColumn}},{key:"_formatOutValue",value:function(n){return{done:!1,value:new hy(this,n,arguments.length>1&&void 0!==arguments[1]?arguments[1]:this._row,arguments.length>2&&void 0!==arguments[2]?arguments[2]:this._column)}}},{key:"_shouldSkipSlot",value:function(){return this._skipRows.has(this._row)||this._row<this._startRow||this._column<this._startColumn||void 0!==this._endColumn&&this._column>this._endColumn}},{key:"_getSpanned",value:function(){var n=this._spannedCells.get(this._row);return n&&n.get(this._column)||null}},{key:"_recordSpans",value:function(n,t,r){for(var o={cell:n,row:this._row,column:this._column},s=this._row;s<this._row+t;s++)for(var l=this._column;l<this._column+r;l++)s==this._row&&l==this._column||this._markSpannedCell(s,l,o)}},{key:"_markSpannedCell",value:function(n,t,r){this._spannedCells.has(n)||this._spannedCells.set(n,new Map),this._spannedCells.get(n).set(t,r)}}]),i}(Symbol.iterator),hy=function(){function a(i,e,n,t){A(this,a),this.cell=e,this.row=i._row,this.column=i._column,this.cellAnchorRow=n,this.cellAnchorColumn=t,this._cellIndex=i._cellIndex,this._table=i._table}return C(a,[{key:"isAnchor",get:function(){return this.row===this.cellAnchorRow&&this.column===this.cellAnchorColumn}},{key:"cellWidth",get:function(){return parseInt(this.cell.getAttribute("colspan")||1)}},{key:"cellHeight",get:function(){return parseInt(this.cell.getAttribute("rowspan")||1)}},{key:"getPositionBefore",value:function(){return this._table.root.document.model.createPositionAt(this._table.getChild(this.row),this._cellIndex)}}]),a}();function Sd(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return function(i){return i.on("insert:table",function(e,n,t){var r=n.item;if(t.consumable.consume(r,"insert")){t.consumable.consume(r,"attribute:headingRows:table"),t.consumable.consume(r,"attribute:headingColumns:table");var c,u,d,o=a&&a.asWidget,s=t.writer.createContainerElement("figure",{class:"table"}),l=t.writer.createContainerElement("table");t.writer.insert(t.writer.createPositionAt(s,0),l),o&&((d=t.writer).setCustomProperty("table",!0,u=s),c=Lo(u,d,{hasSelectionHandle:!0}));var m,h=new we(r),f={headingRows:r.getAttribute("headingRows")||0,headingColumns:r.getAttribute("headingColumns")||0},v=new Map,g=k(h);try{for(g.s();!(m=g.n()).done;){var p=m.value,y=p.row,w=p.cell,_=r.getChild(y),T=v.get(y)||na(l,_,y,f,t);v.set(y,T),t.consumable.consume(w,"insert"),ta(p,f,t.writer.createPositionAt(T,"end"),t,a)}}catch($){g.e($)}finally{g.f()}var N,x=k(r.getChildren());try{for(x.s();!(N=x.n()).done;){var D=N.value,z=D.index;v.has(z)||v.set(z,na(l,D,z,f,t))}}catch($){x.e($)}finally{x.f()}var J=t.mapper.toViewPosition(n.range.start);t.mapper.bindElements(r,o?c:s),t.writer.insert(J,o?c:s)}})}}function fy(a,i,e){var o,s,l,c,u,d,n=a.cell,t=Pd(a,i),r=e.mapper.toViewElement(n);r&&r.name!==t&&(s=t,c=(l=e).writer,u=l.mapper.toViewElement(o=n),Vo(d=jo(c.createEditableElement(s,u.getAttributes()),c),c,function(h,f,v){return v.addClass(fi(f.classes),h)},function(h,f,v){return v.removeClass(fi(f.classes),h)}),c.insert(c.createPositionAfter(u),d),c.move(c.createRangeIn(u),c.createPositionAt(d,0)),c.remove(c.createRangeOn(u)),l.mapper.unbindViewElement(u),l.mapper.bindElements(o,d))}function ta(a,i,e,n,t){var r=t&&t.asWidget,o=Pd(a,i),s=r?jo(n.writer.createEditableElement(o),n.writer):n.writer.createContainerElement(o);r&&Vo(s,n.writer,function(v,g,m){return m.addClass(fi(g.classes),v)},function(v,g,m){return m.removeClass(fi(g.classes),v)});var l=a.cell,c=l.getChild(0),u=1===l.childCount&&"paragraph"===c.name;if(n.writer.insert(e,s),u&&!Y(c.getAttributeKeys()).length){var d=l.getChild(0),h=n.writer.createPositionAt(s,"end");if(n.consumable.consume(d,"insert"),r){var f=n.writer.createContainerElement("span",{style:"display:inline-block"});n.mapper.bindElements(d,f),n.writer.insert(h,f),n.mapper.bindElements(l,s)}else n.mapper.bindElements(l,s),n.mapper.bindElements(d,s)}else n.mapper.bindElements(l,s)}function na(a,i,e,n,t){t.consumable.consume(i,"insert");var r=i.isEmpty?t.writer.createEmptyElement("tr"):t.writer.createContainerElement("tr");t.mapper.bindElements(i,r);var u,d,h,v,g,m,p,y,o=n.headingRows,s=(h=t,Ed(u=e<n.headingRows?"thead":"tbody",d=a)||(g=d,p=(m=h).writer.createContainerElement(v=u),y=m.writer.createPositionAt(g,"tbody"==v?"end":0),m.writer.insert(y,p),p)),c=t.writer.createPositionAt(s,o>0&&e>=o?e-o:e);return t.writer.insert(c,r),r}function Pd(a,i){var t=i.headingColumns,r=i.headingRows;return r&&r>a.row||t&&t>a.column?"th":"td"}function Ed(a,i){var n,e=k(i.getChildren());try{for(e.s();!(n=e.n()).done;){var t=n.value;if(t.name==a)return t}}catch(r){e.e(r)}finally{e.f()}}function Md(a,i,e){var n=Ed(a,i);n&&0===n.childCount&&e.writer.remove(e.writer.createRangeOn(n))}function fi(a){return Array.isArray(a)?a:[a]}var vy=function(a){P(e,a);var i=M(e);function e(){return A(this,e),i.apply(this,arguments)}return C(e,[{key:"refresh",value:function(){var c,t=this.editor.model,o=t.schema,s=(c=t.document.selection.getFirstPosition().parent)===c.root?c:c.parent;this.isEnabled=o.checkChild(s,"table")}},{key:"execute",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=this.editor.model,o=r.document.selection,s=this.editor.plugins.get("TableUtils"),l=Qr(o,r);r.change(function(c){var u=s.createTable(c,t);r.insertContent(u,l),c.setSelection(c.createPositionAt(u.getNodeByPath([0,0,0]),0))})}}]),e}(ve);function Pn(a){var n,i=[],e=k(Id(a.getRanges()));try{for(e.s();!(n=e.n()).done;){var r=n.value.getContainedElement();r&&r.is("element","tableCell")&&i.push(r)}}catch(o){e.e(o)}finally{e.f()}return i}function rr(a){var n,i=[],e=k(a.getRanges());try{for(e.s();!(n=e.n()).done;){var r=n.value.start.findAncestor("tableCell");r&&i.push(r)}}catch(o){e.e(o)}finally{e.f()}return i}function Ke(a){var i=Pn(a);return i.length?i:rr(a)}function qt(a){return Nd(a.map(function(i){return i.parent.index}))}function En(a){var i=a[0].findAncestor("table");return Nd(Y(new we(i)).filter(function(e){return a.includes(e.cell)}).map(function(e){return e.column}))}function ra(a,i){if(a.length<2||!function(f){var v=f[0].findAncestor("table");if(!Rd(qt(f),parseInt(v.getAttribute("headingRows")||0)))return!1;var p=parseInt(v.getAttribute("headingColumns")||0);return Rd(En(f),p)}(a))return!1;var o,f,v,g,m,e=new Set,n=new Set,t=0,r=k(a);try{for(r.s();!(o=r.n()).done;){var s=o.value,l=i.getCellLocation(s),c=l.row,u=l.column,d=parseInt(s.getAttribute("rowspan")||1),h=parseInt(s.getAttribute("colspan")||1);e.add(c),n.add(u),d>1&&e.add(c+d-1),h>1&&n.add(u+h-1),t+=d*h}}catch(f){r.e(f)}finally{r.f()}return v=n,g=Array.from((f=e).values()),m=Array.from(v.values()),(Math.max.apply(Math,Y(g))-Math.min.apply(Math,Y(g))+1)*(Math.max.apply(Math,Y(m))-Math.min.apply(Math,Y(m))+1)==t}function Id(a){return Array.from(a).sort(gy)}function Nd(a){var i=a.sort(function(e,n){return e-n});return{first:i[0],last:i[i.length-1]}}function gy(a,i){return a.start.isBefore(i.start)?-1:1}function Rd(a,i){return a.first<i==a.last<i}var Od=function(a){P(e,a);var i=M(e);function e(n){var t,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return A(this,e),(t=i.call(this,n)).order=r.order||"below",t}return C(e,[{key:"refresh",value:function(){var t=this.editor.model.document.selection.getFirstPosition().findAncestor("table");this.isEnabled=!!t}},{key:"execute",value:function(){var t=this.editor,r=t.model.document.selection,o=t.plugins.get("TableUtils"),s="above"===this.order,l=Ke(r),c=qt(l),u=s?c.first:c.last,d=l[0].findAncestor("table");o.insertRows(d,{at:s?u:u+1,copyStructureFromAbove:!s})}}]),e}(ve),Dd=function(a){P(e,a);var i=M(e);function e(n){var t,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return A(this,e),(t=i.call(this,n)).order=r.order||"right",t}return C(e,[{key:"refresh",value:function(){var t=this.editor.model.document.selection.getFirstPosition().findAncestor("table");this.isEnabled=!!t}},{key:"execute",value:function(){var t=this.editor,r=t.model.document.selection,o=t.plugins.get("TableUtils"),s="left"===this.order,l=Ke(r),c=En(l),u=s?c.first:c.last,d=l[0].findAncestor("table");o.insertColumns(d,{columns:1,at:s?u:u+1})}}]),e}(ve),Ld=function(a){P(e,a);var i=M(e);function e(n){var t,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return A(this,e),(t=i.call(this,n)).direction=r.direction||"horizontally",t}return C(e,[{key:"refresh",value:function(){var t=Ke(this.editor.model.document.selection);this.isEnabled=1===t.length}},{key:"execute",value:function(){var t=Ke(this.editor.model.document.selection)[0],r="horizontally"===this.direction,o=this.editor.plugins.get("TableUtils");r?o.splitCellHorizontally(t,2):o.splitCellVertically(t,2)}}]),e}(ve);function Vd(a,i,e){for(var n=i.startRow,t=i.startColumn,r=i.endRow,o=i.endColumn,s=e.createElement("table"),l=r-n+1,c=0;c<l;c++)e.insertElement("tableRow",s,"end");var h,u=Y(new we(a,{startRow:n,endRow:r,startColumn:t,endColumn:o,includeAllSlots:!0})),d=k(u);try{for(d.s();!(h=d.n()).done;){var f=h.value,v=f.row,g=f.column,m=f.cell,p=f.isAnchor,y=f.cellAnchorRow,w=f.cellAnchorColumn,T=s.getChild(v-n);if(p){var x=e.cloneElement(m);e.append(x,T),Ud(x,v,g,r,o,e)}else(y<n||w<t)&&an(e,e.createPositionAt(T,"end"))}}catch(N){d.e(N)}finally{d.f()}return function(N,D,z,J,$){var Q=parseInt(D.getAttribute("headingRows")||0);Q>0&&Ve("headingRows",Q-z,N,$,0);var K=parseInt(D.getAttribute("headingColumns")||0);K>0&&Ve("headingColumns",K-J,N,$,0)}(s,a,n,t,e),s}function jd(a,i){var o,n=[],t=new we(a,{startRow:arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,endRow:i-1}),r=k(t);try{for(r.s();!(o=r.n()).done;){var s=o.value,l=s.row;l<i&&i<=l+s.cellHeight-1&&n.push(s)}}catch(d){r.e(d)}finally{r.f()}return n}function Bd(a,i,e){var n=a.parent,t=n.parent,r=n.index,o=i-r,s={},l=parseInt(a.getAttribute("rowspan"))-o;l>1&&(s.rowspan=l);var c=parseInt(a.getAttribute("colspan")||1);c>1&&(s.colspan=c);var h,g,u=r+o,d=Y(new we(t,{startRow:r,endRow:u,includeAllSlots:!0})),f=null,v=k(d);try{for(v.s();!(g=v.n()).done;){var m=g.value,y=m.column;m.cell===a&&void 0===h&&(h=y),void 0!==h&&h===y&&m.row===u&&(f=an(e,m.getPositionBefore(),s))}}catch(_){v.e(_)}finally{v.f()}return Ve("rowspan",o,a,e),f}function zd(a,i){var r,e=[],n=new we(a),t=k(n);try{for(t.s();!(r=t.n()).done;){var o=r.value,s=o.column;s<i&&i<=s+o.cellWidth-1&&e.push(o)}}catch(u){t.e(u)}finally{t.f()}return e}function Fd(a,i,e,n){var t=e-i,r={},o=parseInt(a.getAttribute("colspan"))-t;o>1&&(r.colspan=o);var s=parseInt(a.getAttribute("rowspan")||1);s>1&&(r.rowspan=s);var l=an(n,n.createPositionAfter(a),r);return Ve("colspan",t,a,n),l}function Ud(a,i,e,n,t,r){var o=parseInt(a.getAttribute("colspan")||1),s=parseInt(a.getAttribute("rowspan")||1);e+o-1>t&&Ve("colspan",t-e+1,a,r,1),i+s-1>n&&Ve("rowspan",n-i+1,a,r,1)}function ia(a,i){var r,e=i.getColumns(a),n=new Array(e).fill(0),t=k(new we(a));try{for(t.s();!(r=t.n()).done;)n[r.value.column]++}catch(c){t.e(c)}finally{t.f()}var s=n.reduce(function(c,u,d){return u?c:[].concat(Y(c),[d])},[]);return s.length>0&&(i.removeColumns(a,{at:s[s.length-1]}),!0)}function oa(a,i){for(var e=[],n=0;n<a.childCount;n++)a.getChild(n).isEmpty&&e.push(n);return e.length>0&&(i.removeRows(a,{at:e[e.length-1]}),!0)}function aa(a,i){ia(a,i)||oa(a,i)}function Hd(a,i){var e=Array.from(new we(a,{startColumn:i.firstColumn,endColumn:i.lastColumn,row:i.lastRow}));return e.every(function(t){return 1===t.cellHeight})?i.lastRow:i.lastRow+(e[0].cellHeight-1)}function Wd(a,i){var e=Array.from(new we(a,{startRow:i.firstRow,endRow:i.lastRow,column:i.lastColumn}));return e.every(function(t){return 1===t.cellWidth})?i.lastColumn:i.lastColumn+(e[0].cellWidth-1)}var vi=function(a){P(e,a);var i=M(e);function e(n,t){var r;return A(this,e),(r=i.call(this,n)).direction=t.direction,r.isHorizontal="right"==r.direction||"left"==r.direction,r}return C(e,[{key:"refresh",value:function(){var t=this._getMergeableCell();this.value=t,this.isEnabled=!!t}},{key:"execute",value:function(){var t=this,r=this.editor.model,o=rr(r.document.selection)[0],s=this.value,l=this.direction;r.change(function(c){var y,w,_,u="right"==l||"down"==l,d=u?o:s,h=u?s:o,f=h.parent;w=d,_=c,qd(y=h)||(qd(w)&&_.remove(_.createRangeIn(w)),_.move(_.createRangeIn(y),_.createPositionAt(w,"end"))),_.remove(y);var v=t.isHorizontal?"colspan":"rowspan",g=parseInt(o.getAttribute(v)||1),m=parseInt(s.getAttribute(v)||1);c.setAttribute(v,g+m,d),c.setSelection(c.createRangeIn(d));var p=t.editor.plugins.get("TableUtils");aa(f.findAncestor("table"),p)})}},{key:"_getMergeableCell",value:function(){var t=rr(this.editor.model.document.selection)[0];if(t){var r=this.editor.plugins.get("TableUtils"),o=this.isHorizontal?function(c,u,d){var f="right"==u?c.nextSibling:c.previousSibling,v=(c.parent.parent.getAttribute("headingColumns")||0)>0;if(f){var g="right"==u?c:f,m="right"==u?f:c,y=d.getCellLocation(g).column,_=d.getCellLocation(m).column,T=parseInt(g.getAttribute("colspan")||1),x=ea(d,g),N=ea(d,m);if(!v||x==N)return y+T===_?f:void 0}}(t,this.direction,r):function(c,u){var d=c.parent,h=d.parent,f=h.getChildIndex(d);if(!("down"==u&&f===h.childCount-1||"up"==u&&0===f)){var v=parseInt(c.getAttribute("rowspan")||1),g=h.getAttribute("headingRows")||0;if(!g||("down"!=u||f+v!==g)&&("up"!=u||f!==g)){var y=parseInt(c.getAttribute("rowspan")||1),w="down"==u?f+y:f,_=Y(new we(h,{endRow:w})),T=_.find(function(N){return N.cell===c}).column,x=_.find(function(N){var D=N.row;return N.column===T&&("down"==u?D===w:w===D+N.cellHeight)});return x&&x.cell}}}(t,this.direction);if(o){var s=this.isHorizontal?"rowspan":"colspan",l=parseInt(t.getAttribute(s)||1);return parseInt(o.getAttribute(s)||1)===l?o:void 0}}}}]),e}(ve);function qd(a){return 1==a.childCount&&a.getChild(0).is("element","paragraph")&&a.getChild(0).isEmpty}var my=function(a){P(e,a);var i=M(e);function e(){return A(this,e),i.apply(this,arguments)}return C(e,[{key:"refresh",value:function(){var t=Ke(this.editor.model.document.selection),r=t[0];if(r){var o=r.findAncestor("table"),s=this.editor.plugins.get("TableUtils").getRows(o)-1,l=qt(t);this.isEnabled=!(0===l.first&&l.last===s)}else this.isEnabled=!1}},{key:"execute",value:function(){var t=this,r=this.editor.model,o=Ke(r.document.selection),s=qt(o),l=o[0],c=l.findAncestor("table"),u=this.editor.plugins.get("TableUtils").getCellLocation(l).column;r.change(function(d){var h=s.last-s.first+1;t.editor.plugins.get("TableUtils").removeRows(c,{at:s.first,rows:h});var f=function(v,g,m){var T,p=v.getChild(g)||v.getChild(v.childCount-1),y=p.getChild(0),w=0,_=k(p.getChildren());try{for(_.s();!(T=_.n()).done;){var x=T.value;if(w>m)return y;y=x,w+=parseInt(x.getAttribute("colspan")||1)}}catch(N){_.e(N)}finally{_.f()}return y}(c,s.first,u);d.setSelection(d.createPositionAt(f,0))})}}]),e}(ve),py=function(a){P(e,a);var i=M(e);function e(){return A(this,e),i.apply(this,arguments)}return C(e,[{key:"refresh",value:function(){var t=Ke(this.editor.model.document.selection),r=t[0];if(r){var o=r.findAncestor("table"),s=this.editor.plugins.get("TableUtils").getColumns(o),l=En(t);this.isEnabled=l.last-l.first<s-1}else this.isEnabled=!1}},{key:"execute",value:function(){var v,g,m,p,t=this,r=(p=[g=(v=Ke(this.editor.model.document.selection))[0],m=v.pop()],g.isBefore(m)?p:p.reverse()),o=ee(r,2),s=o[0],l=o[1],c=s.parent.parent,u=Y(new we(c)),d={first:u.find(function(f){return f.cell===s}).column,last:u.find(function(f){return f.cell===l}).column},h=function(f,v,g,m){return parseInt(g.getAttribute("colspan")||1)>1?g:v.previousSibling||g.nextSibling?g.nextSibling||v.previousSibling:m.first?f.reverse().find(function(p){return p.column<m.first}).cell:f.reverse().find(function(p){return p.column>m.last}).cell}(u,s,l,d);this.editor.model.change(function(f){var v=d.last-d.first+1;t.editor.plugins.get("TableUtils").removeColumns(c,{at:d.first,columns:v}),f.setSelection(f.createPositionAt(h,0))})}}]),e}(ve),ky=function(a){P(e,a);var i=M(e);function e(){return A(this,e),i.apply(this,arguments)}return C(e,[{key:"refresh",value:function(){var t=this,r=Ke(this.editor.model.document.selection),o=r.length>0;this.isEnabled=o,this.value=o&&r.every(function(s){return t._isInHeading(s,s.parent.parent)})}},{key:"execute",value:function(){if((arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).forceValue!==this.value){var r=this.editor.model,o=Ke(r.document.selection),s=o[0].findAncestor("table"),l=qt(o),d=this.value?l.first:l.last+1,h=s.getAttribute("headingRows")||0;r.change(function(f){if(d){var m,v=jd(s,d,d>h?h:0),g=k(v);try{for(g.s();!(m=g.n()).done;)Bd(m.value.cell,d,f)}catch(y){g.e(y)}finally{g.f()}}Ve("headingRows",d,s,f,0)})}}},{key:"_isInHeading",value:function(t,r){var o=parseInt(r.getAttribute("headingRows")||0);return!!o&&t.parent.index<o}}]),e}(ve),yy=function(a){P(e,a);var i=M(e);function e(){return A(this,e),i.apply(this,arguments)}return C(e,[{key:"refresh",value:function(){var t=Ke(this.editor.model.document.selection),r=this.editor.plugins.get("TableUtils"),o=t.length>0;this.isEnabled=o,this.value=o&&t.every(function(s){return ea(r,s)})}},{key:"execute",value:function(){if((arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).forceValue!==this.value){var r=this.editor.model,o=Ke(r.document.selection),s=o[0].findAncestor("table"),l=En(o),d=this.value?l.first:l.last+1;r.change(function(h){if(d){var g,f=zd(s,d),v=k(f);try{for(v.s();!(g=v.n()).done;){var m=g.value;Fd(m.cell,m.column,d,h)}}catch(w){v.e(w)}finally{v.f()}}Ve("headingColumns",d,s,h,0)})}}}]),e}(ve),Mn=function(a){P(e,a);var i=M(e);function e(){return A(this,e),i.apply(this,arguments)}return C(e,[{key:"getCellLocation",value:function(t){var u,r=t.parent,o=r.parent,s=o.getChildIndex(r),l=new we(o,{row:s}),c=k(l);try{for(c.s();!(u=c.n()).done;){var d=u.value;if(d.cell===t)return{row:d.row,column:d.column}}}catch(g){c.e(g)}finally{c.f()}}},{key:"createTable",value:function(t,r){var o=t.createElement("table");return sa(t,o,0,parseInt(r.rows)||2,parseInt(r.columns)||2),r.headingRows&&Ve("headingRows",r.headingRows,o,t,0),r.headingColumns&&Ve("headingColumns",r.headingColumns,o,t,0),o}},{key:"insertRows",value:function(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=this.editor.model,s=r.at||0,l=r.rows||1,c=void 0!==r.copyStructureFromAbove,u=r.copyStructureFromAbove?s-1:s,d=this.getRows(t),h=this.getColumns(t);o.change(function(f){var v=t.getAttribute("headingRows")||0;if(v>s&&Ve("headingRows",v+l,t,f,0),c||0!==s&&s!==d){var w,g=c?Math.max(s,u):s,m=new we(t,{endRow:g}),p=new Array(h).fill(1),y=k(m);try{for(y.s();!(w=y.n()).done;){var _=w.value,T=_.row,x=_.column,N=_.cellHeight,D=_.cellWidth,J=T+N-1,$=T<=u&&u<=J;T<s&&s<=J?(f.setAttribute("rowspan",N+l,_.cell),p[x]=-D):c&&$&&(p[x]=D)}}catch(oe){y.e(oe)}finally{y.f()}for(var Q=0;Q<l;Q++){var K=f.createElement("tableRow");f.insert(K,t,s);for(var W=0;W<p.length;W++){var ie=p[W],ne=f.createPositionAt(K,"end");ie>0&&an(f,ne,ie>1?{colspan:ie}:null),W+=Math.abs(ie)-1}}}else sa(f,t,s,l,h)})}},{key:"insertColumns",value:function(t){var r=this,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},l=o.at||0,c=o.columns||1;this.editor.model.change(function(u){var d=t.getAttribute("headingColumns");l<d&&u.setAttribute("headingColumns",d+c,t);var h=r.getColumns(t);if(0!==l&&h!==l){var y,m=new we(t,{column:l,includeAllSlots:!0}),p=k(m);try{for(p.s();!(y=p.n()).done;){var w=y.value,_=w.row,N=w.cellAnchorRow,z=w.cellHeight;if(w.cellAnchorColumn<l){u.setAttribute("colspan",w.cellWidth+c,w.cell);for(var J=N+z-1,$=_;$<=J;$++)m.skipRow($)}else In(c,u,w.getPositionBefore())}}catch(Q){p.e(Q)}finally{p.f()}}else{var v,f=k(t.getChildren());try{for(f.s();!(v=f.n()).done;)In(c,u,u.createPositionAt(v.value,l?"end":0))}catch(Q){f.e(Q)}finally{f.f()}}})}},{key:"removeRows",value:function(t,r){var o=this,c=r.at,u=c+(r.rows||1)-1;this.editor.model.change(function(d){var h=function(T,x,N){var $,D=new Map,z=[],J=k(new we(T,{endRow:N}));try{for(J.s();!($=J.n()).done;){var Q=$.value,K=Q.row,ie=Q.cellHeight,ne=Q.cell,oe=K+ie-1;K>=x&&K<=N&&oe>N&&D.set(Q.column,{cell:ne,rowspan:ie-(N-K+1)}),K<x&&oe>=x&&z.push({cell:ne,rowspan:ie-(oe>=N?N-x+1:oe-x+1)})}}catch(ze){J.e(ze)}finally{J.f()}return{cellsToMove:D,cellsToTrim:z}}(t,c,u),f=h.cellsToMove,v=h.cellsToTrim;f.size&&function(T,x,N,D){var $,K,z=Y(new we(T,{includeAllSlots:!0,row:x})),J=T.getChild(x),Q=k(z);try{for(Q.s();!(K=Q.n()).done;){var W=K.value,ie=W.column,ne=W.cell,oe=W.isAnchor;if(N.has(ie)){var ge=N.get(ie),Me=ge.cell,ze=ge.rowspan,bt=$?D.createPositionAfter($):D.createPositionAt(J,0);D.move(D.createRangeOn(Me),bt),Ve("rowspan",ze,Me,D),$=Me}else oe&&($=ne)}}catch(at){Q.e(at)}finally{Q.f()}}(t,u+1,f,d);for(var g=u;g>=c;g--)d.remove(t.getChild(g));var p,T,x,N,D,z,m=k(v);try{for(m.s();!(p=m.n()).done;){var y=p.value;Ve("rowspan",y.rowspan,y.cell,d)}}catch(T){m.e(T)}finally{m.f()}N=u,D=d,(x=c)<(z=(T=t).getAttribute("headingRows")||0)&&Ve("headingRows",N<z?z-(N-x+1):x,T,D,0),ia(t,o)||oa(t,o)})}},{key:"removeColumns",value:function(t,r){var o=this,l=r.at,u=r.at+(r.columns||1)-1;this.editor.model.change(function(d){!function(w,_,T){var x=w.getAttribute("headingColumns")||0;if(x&&_.first<x){var N=Math.min(x-1,_.last)-_.first+1;T.setAttribute("headingColumns",x-N,w)}}(t,{first:l,last:u},d);for(var h=u;h>=l;h--)for(var f=0,v=Y(new we(t));f<v.length;f++){var g=v[f],m=g.cell,p=g.column,y=g.cellWidth;p<=h&&y>1&&p+y>h?Ve("colspan",y-1,m,d):p===h&&d.remove(m)}oa(t,o)||ia(t,o)})}},{key:"splitCellVertically",value:function(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2,o=this.editor.model,s=t.parent.parent,l=parseInt(t.getAttribute("rowspan")||1),c=parseInt(t.getAttribute("colspan")||1);o.change(function(u){if(c>1){var d=Gd(c,r),h=d.newCellsSpan;Ve("colspan",d.updatedSpan,t,u);var v={};h>1&&(v.colspan=h),l>1&&(v.rowspan=l),In(c>r?r-1:c-1,u,u.createPositionAfter(t),v)}if(c<r){var T,g=r-c,m=Y(new we(s)),y=m.find(function($){return $.cell===t}).column,w=m.filter(function($){var W=$.column;return $.cell!==t&&W===y||W<y&&W+$.cellWidth>y}),_=k(w);try{for(_.s();!(T=_.n()).done;){var x=T.value;u.setAttribute("colspan",x.cellWidth+g,x.cell)}}catch($){_.e($)}finally{_.f()}var z={};l>1&&(z.rowspan=l),In(g,u,u.createPositionAfter(t),z);var J=s.getAttribute("headingColumns")||0;J>y&&Ve("headingColumns",J+g,s,u)}})}},{key:"splitCellHorizontally",value:function(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2,o=this.editor.model,s=t.parent,l=s.parent,c=l.getChildIndex(s),u=parseInt(t.getAttribute("rowspan")||1),d=parseInt(t.getAttribute("colspan")||1);o.change(function(h){if(u>1){var f=Y(new we(l,{startRow:c,endRow:c+u-1,includeAllSlots:!0})),v=Gd(u,r),g=v.newCellsSpan,m=v.updatedSpan;Ve("rowspan",m,t,h);var y=f.find(function(at){return at.cell===t}).column,w={};g>1&&(w.rowspan=g),d>1&&(w.colspan=d);for(var _=0,T=f;_<T.length;_++){var x=T[_],D=x.row;D>=c+m&&x.column===y&&(D+c+m)%g==0&&In(1,h,x.getPositionBefore(),w)}}if(u<r){var W,$=r-u,Q=Y(new we(l,{startRow:0,endRow:c})),K=k(Q);try{for(K.s();!(W=K.n()).done;){var ie=W.value,ne=ie.cell,oe=ie.cellHeight;ne!==t&&ie.row+oe>c&&h.setAttribute("rowspan",oe+$,ne)}}catch(at){K.e(at)}finally{K.f()}var ze={};d>1&&(ze.colspan=d),sa(h,l,c+1,$,1,ze);var bt=l.getAttribute("headingRows")||0;bt>c&&Ve("headingRows",bt+$,l,h)}})}},{key:"getColumns",value:function(t){return Y(t.getChild(0).getChildren()).reduce(function(r,o){return r+parseInt(o.getAttribute("colspan")||1)},0)}},{key:"getRows",value:function(t){return t.childCount}}],[{key:"pluginName",get:function(){return"TableUtils"}}]),e}(U);function sa(a,i,e,n,t){for(var r=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{},o=0;o<n;o++){var s=a.createElement("tableRow");a.insert(s,i,e),In(t,a,a.createPositionAt(s,"end"),r)}}function In(a,i,e){for(var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},t=0;t<a;t++)an(i,e,n)}function Gd(a,i){if(a<i)return{newCellsSpan:1,updatedSpan:1};var e=Math.floor(a/i);return{newCellsSpan:e,updatedSpan:a-e*i+e}}var by=function(a){P(e,a);var i=M(e);function e(){return A(this,e),i.apply(this,arguments)}return C(e,[{key:"refresh",value:function(){var t=Pn(this.editor.model.document.selection);this.isEnabled=ra(t,this.editor.plugins.get(Mn))}},{key:"execute",value:function(){var t=this.editor.model,r=this.editor.plugins.get(Mn);t.change(function(o){var s=Pn(t.document.selection),l=s.shift(),c=function(g,m,p){var T,y=0,w=0,_=k(m);try{for(_.s();!(T=_.n()).done;){var x=T.value,N=p.getCellLocation(x),D=N.row;y=$d(x,N.column,y,"colspan"),w=$d(x,D,w,"rowspan")}}catch(K){_.e(K)}finally{_.f()}var J=p.getCellLocation(g);return{mergeWidth:y-J.column,mergeHeight:w-J.row}}(l,s,r),d=c.mergeHeight;Ve("colspan",c.mergeWidth,l,o),Ve("rowspan",d,l,o);var f,h=k(s);try{for(h.s();!(f=h.n()).done;)wy(f.value,l,o)}catch(g){h.e(g)}finally{h.f()}aa(l.findAncestor("table"),r),o.setSelection(l,"in")})}}]),e}(ve);function wy(a,i,e){Yd(a)||(Yd(i)&&e.remove(e.createRangeIn(i)),e.move(e.createRangeIn(a),e.createPositionAt(i,"end"))),e.remove(a)}function Yd(a){return 1==a.childCount&&a.getChild(0).is("element","paragraph")&&a.getChild(0).isEmpty}function $d(a,i,e,n){var t=parseInt(a.getAttribute(n)||1);return Math.max(e,i+t)}var _y=function(a){P(e,a);var i=M(e);function e(){return A(this,e),i.apply(this,arguments)}return C(e,[{key:"refresh",value:function(){var t=Ke(this.editor.model.document.selection);this.isEnabled=t.length>0}},{key:"execute",value:function(){for(var t=this.editor.model,r=Ke(t.document.selection),o=qt(r),s=r[0].findAncestor("table"),l=[],c=o.first;c<=o.last;c++){var d,u=k(s.getChild(c).getChildren());try{for(u.s();!(d=u.n()).done;)l.push(t.createRangeOn(d.value))}catch(f){u.e(f)}finally{u.f()}}t.change(function(f){f.setSelection(l)})}}]),e}(ve),Ay=function(a){P(e,a);var i=M(e);function e(){return A(this,e),i.apply(this,arguments)}return C(e,[{key:"refresh",value:function(){var t=Ke(this.editor.model.document.selection);this.isEnabled=t.length>0}},{key:"execute",value:function(){var m,t=this.editor.model,r=Ke(t.document.selection),o=r[0],s=r.pop(),l=o.findAncestor("table"),c=this.editor.plugins.get("TableUtils"),u=c.getCellLocation(o),d=c.getCellLocation(s),h=Math.min(u.column,d.column),f=Math.max(u.column,d.column),v=[],g=k(new we(l,{startColumn:h,endColumn:f}));try{for(g.s();!(m=g.n()).done;)v.push(t.createRangeOn(m.value.cell))}catch(y){g.e(y)}finally{g.f()}t.change(function(y){y.setSelection(v)})}}]),e}(ve);function Ty(a,i){var e=!1,n=function(s){var h,l=parseInt(s.getAttribute("headingRows")||0),c=s.childCount,u=[],d=k(new we(s));try{for(d.s();!(h=d.n()).done;){var f=h.value,v=f.row,m=f.cellHeight;if(!(m<2)){var p=v<l?l:c;v+m>p&&u.push({cell:f.cell,rowspan:p-v})}}}catch(w){d.e(w)}finally{d.f()}return u}(a);if(n.length){e=!0;var r,t=k(n);try{for(t.s();!(r=t.n()).done;){var o=r.value;Ve("rowspan",o.rowspan,o.cell,i,1)}}catch(s){t.e(s)}finally{t.f()}}return e}function xy(a,i){var o,e=!1,n=function(x){var z,N=new Array(x.childCount).fill(0),D=k(new we(x,{includeAllSlots:!0}));try{for(D.s();!(z=D.n()).done;)N[z.value.row]++}catch($){D.e($)}finally{D.f()}return N}(a),t=[],r=k(n.entries());try{for(r.s();!(o=r.n()).done;){var s=ee(o.value,2);s[1]||t.push(s[0])}}catch(x){r.e(x)}finally{r.f()}if(t.length){e=!0;var d,u=k(t.reverse());try{for(u.s();!(d=u.n()).done;){var h=d.value;i.remove(a.getChild(h)),n.splice(h,1)}}catch(x){u.e(x)}finally{u.f()}}var f=n[0];if(!n.every(function(x){return x===f})){var m,v=n.reduce(function(x,N){return N>x?N:x},0),g=k(n.entries());try{for(g.s();!(m=g.n()).done;){var p=ee(m.value,2),y=p[0],_=v-p[1];if(_){for(var T=0;T<_;T++)an(i,i.createPositionAt(a.getChild(y),"end"));e=!0}}}catch(x){g.e(x)}finally{g.f()}}return e}function Sy(a){var e=a.attributeKey;return"attribute"===a.type&&("headingRows"===e||"colspan"===e||"rowspan"===e)}function Ey(a,i){var t,e=!1,n=k(a.getChildren());try{for(n.s();!(t=n.n()).done;)e=Kd(t.value,i)||e}catch(o){n.e(o)}finally{n.f()}return e}function Kd(a,i){var t,e=!1,n=k(a.getChildren());try{for(n.s();!(t=n.n()).done;)e=la(t.value,i)||e}catch(o){n.e(o)}finally{n.f()}return e}function la(a,i){if(0==a.childCount)return i.insertElement("paragraph",a),!0;var t,e=Array.from(a.getChildren()).filter(function(o){return o.is("$text")}),n=k(e);try{for(n.s();!(t=n.n()).done;)i.wrap(i.createRangeOn(t.value),"paragraph")}catch(o){n.e(o)}finally{n.f()}return!!e.length}function My(a){return!(!a.position||!a.position.parent.is("element","tableCell"))&&("insert"==a.type&&"$text"==a.name||"remove"==a.type)}function Ny(a,i,e){if(!Array.from(a.getChildren()).some(function(t){return t.is("element","paragraph")}))return!1;if("attribute"==i){var n=Array.from(a.getChild(0).getAttributeKeys()).length;return 1===a.childCount&&n<2}return a.childCount<=("insert"==i?e+1:1)}E(94);var Oy=function(a){P(e,a);var i=M(e);function e(){return A(this,e),i.apply(this,arguments)}return C(e,[{key:"init",value:function(){var t=this.editor,r=t.model,o=r.schema,s=t.conversion;o.register("table",{allowWhere:"$block",allowAttributes:["headingRows","headingColumns"],isObject:!0,isBlock:!0}),o.register("tableRow",{allowIn:"table",isLimit:!0}),o.register("tableCell",{allowIn:"tableRow",allowAttributes:["colspan","rowspan"],isLimit:!0,isSelectable:!0}),o.extend("$block",{allowIn:"tableCell"}),o.addChildCheck(function(l,c){if("table"==c.name&&Array.from(l.getNames()).includes("table"))return!1}),s.for("upcast").add(function uy(){return function(a){a.on("element:table",function(i,e,n){var t=e.viewItem;if(n.consumable.test(t,{name:!0})){var r=function(h){for(var m,f={headingRows:0,headingColumns:0},v=[],g=[],p=0,y=Array.from(h.getChildren());p<y.length;p++){var w=y[p];if("tbody"===w.name||"thead"===w.name||"tfoot"===w.name){"thead"!==w.name||m||(m=w);var x,_=Array.from(w.getChildren()).filter(function(z){return z.is("element","tr")}),T=k(_);try{for(T.s();!(x=T.n()).done;){var N=x.value;if("thead"===N.parent.name&&N.parent===m)f.headingRows++,v.push(N);else{g.push(N);var D=dy(N);D>f.headingColumns&&(f.headingColumns=D)}}}catch(z){T.e(z)}finally{T.f()}}}return f.rows=[].concat(v,g),f}(t),o=r.rows,s=r.headingRows,l=r.headingColumns,c={};l&&(c.headingColumns=l),s&&(c.headingRows=s);var u=n.writer.createElement("table",c);if(n.safeInsert(u,e.modelCursor)){if(n.consumable.consume(t,{name:!0}),o.forEach(function(h){return n.convertItem(h,n.writer.createPositionAt(u,"end"))}),u.isEmpty){var d=n.writer.createElement("tableRow");n.writer.insert(d,n.writer.createPositionAt(u,"end")),an(n.writer,n.writer.createPositionAt(d,"end"))}n.updateConversionResult(u,e)}}})}}()),s.for("editingDowncast").add(Sd({asWidget:!0})),s.for("dataDowncast").add(Sd()),s.for("upcast").elementToElement({model:"tableRow",view:"tr"}),s.for("upcast").add(function(l){l.on("element:tr",function(c,u){u.viewItem.isEmpty&&0==u.modelCursor.index&&c.stop()},{priority:"high"})}),s.for("editingDowncast").add(function(l){return l.on("insert:tableRow",function(c,u,d){var h=u.item;if(d.consumable.consume(h,"insert")){var _,f=h.parent,v=function(N){var z,D=k(N.getChildren());try{for(D.s();!(z=D.n()).done;){var J=z.value;if("table"===J.name)return J}}catch($){D.e($)}finally{D.f()}}(d.mapper.toViewElement(f)),g=f.getChildIndex(h),m=new we(f,{row:g}),p={headingRows:f.getAttribute("headingRows")||0,headingColumns:f.getAttribute("headingColumns")||0},y=new Map,w=k(m);try{for(w.s();!(_=w.n()).done;){var T=_.value,x=y.get(g)||na(v,h,g,p,d);y.set(g,x),d.consumable.consume(T.cell,"insert"),ta(T,p,d.writer.createPositionAt(x,"end"),d,{asWidget:!0})}}catch(N){w.e(N)}finally{w.f()}}})}),s.for("editingDowncast").add(function(l){return l.on("remove:tableRow",function(c,u,d){c.stop();var w,h=d.writer,f=d.mapper,v=f.toViewPosition(u.position).getLastMatchingPosition(function(T){return!T.item.is("element","tr")}).nodeAfter,g=v.parent.parent,m=h.createRangeOn(v),p=h.remove(m),y=k(h.createRangeIn(p).getItems());try{for(y.s();!(w=y.n()).done;)f.unbindViewElement(w.value)}catch(T){y.e(T)}finally{y.f()}Md("thead",g,d),Md("tbody",g,d)},{priority:"higher"})}),s.for("upcast").elementToElement({model:"tableCell",view:"td"}),s.for("upcast").elementToElement({model:"tableCell",view:"th"}),s.for("upcast").add(xd("td")),s.for("upcast").add(xd("th")),s.for("editingDowncast").add(function(l){return l.on("insert:tableCell",function(c,u,d){var h=u.item;if(d.consumable.consume(h,"insert")){var w,f=h.parent,v=f.parent,g=v.getChildIndex(f),m=new we(v,{row:g}),p={headingRows:v.getAttribute("headingRows")||0,headingColumns:v.getAttribute("headingColumns")||0},y=k(m);try{for(y.s();!(w=y.n()).done;){var _=w.value;if(_.cell===h){var T=d.mapper.toViewElement(f);return void ta(_,p,d.writer.createPositionAt(T,f.getChildIndex(h)),d,{asWidget:!0})}}}catch(x){y.e(x)}finally{y.f()}}})}),s.attributeToAttribute({model:"colspan",view:"colspan"}),s.attributeToAttribute({model:"rowspan",view:"rowspan"}),s.for("editingDowncast").add(function(l){return l.on("attribute:headingColumns:table",function(c,u,d){var h=u.item;if(d.consumable.consume(u.item,c.name)){var y,f={headingRows:h.getAttribute("headingRows")||0,headingColumns:h.getAttribute("headingColumns")||0},v=u.attributeOldValue,g=u.attributeNewValue,p=k(new we(h,{endColumn:(v>g?v:g)-1}));try{for(p.s();!(y=p.n()).done;)fy(y.value,f,d)}catch(_){p.e(_)}finally{p.f()}}})}),t.commands.add("insertTable",new vy(t)),t.commands.add("insertTableRowAbove",new Od(t,{order:"above"})),t.commands.add("insertTableRowBelow",new Od(t,{order:"below"})),t.commands.add("insertTableColumnLeft",new Dd(t,{order:"left"})),t.commands.add("insertTableColumnRight",new Dd(t,{order:"right"})),t.commands.add("removeTableRow",new my(t)),t.commands.add("removeTableColumn",new py(t)),t.commands.add("splitTableCellVertically",new Ld(t,{direction:"vertically"})),t.commands.add("splitTableCellHorizontally",new Ld(t,{direction:"horizontally"})),t.commands.add("mergeTableCells",new by(t)),t.commands.add("mergeTableCellRight",new vi(t,{direction:"right"})),t.commands.add("mergeTableCellLeft",new vi(t,{direction:"left"})),t.commands.add("mergeTableCellDown",new vi(t,{direction:"down"})),t.commands.add("mergeTableCellUp",new vi(t,{direction:"up"})),t.commands.add("setTableColumnHeader",new yy(t)),t.commands.add("setTableRowHeader",new ky(t)),t.commands.add("selectTableRow",new _y(t)),t.commands.add("selectTableColumn",new Ay(t)),function Ry(a){a.document.registerPostFixer(function(){return function(i){var r,e=i.document.differ,n=new Set,t=k(e.getChanges());try{for(t.s();!(r=t.n()).done;){var o=r.value;if("attribute"==o.type){var s=o.range.start.nodeAfter;s&&s.is("element","table")&&"headingRows"==o.attributeKey&&n.add(s)}}}catch(d){t.e(d)}finally{t.f()}if(n.size){var c,l=k(n.values());try{for(l.s();!(c=l.n()).done;)e.refreshItem(c.value)}catch(d){l.e(d)}finally{l.f()}return!0}return!1}(a)})}(r),function Cy(a){a.document.registerPostFixer(function(i){return function(e,n){var l,t=n.document.differ.getChanges(),r=!1,o=new Set,s=k(t);try{for(s.s();!(l=s.n()).done;){var c=l.value,u=void 0;"table"==c.name&&"insert"==c.type&&(u=c.position.nodeAfter),"tableRow"!=c.name&&"tableCell"!=c.name||(u=c.position.findAncestor("table")),Sy(c)&&(u=c.range.start.findAncestor("table")),u&&!o.has(u)&&(r=Ty(u,e)||r,r=xy(u,e)||r,o.add(u))}}catch(d){s.e(d)}finally{s.f()}return r}(i,a)})}(r),function Iy(a){a.document.registerPostFixer(function(){return function(i){var o,e=i.document.differ,n=new Set,t=0,r=k(e.getChanges());try{for(r.s();!(o=r.n()).done;){var s=o.value,l="insert"==s.type||"remove"==s.type?s.position.parent:s.range.start.parent;l.is("element","tableCell")&&("insert"==s.type&&t++,Ny(l,s.type,t)&&n.add(l))}}catch(h){r.e(h)}finally{r.f()}if(n.size){var u,c=k(n.values());try{for(c.s();!(u=c.n()).done;)e.refreshItem(u.value)}catch(h){c.e(h)}finally{c.f()}return!0}return!1}(a)})}(r),function Py(a){a.document.registerPostFixer(function(i){return function(e,n){var s,t=n.document.differ.getChanges(),r=!1,o=k(t);try{for(o.s();!(s=o.n()).done;){var l=s.value;"insert"==l.type&&"table"==l.name&&(r=Ey(l.position.nodeAfter,e)||r),"insert"==l.type&&"tableRow"==l.name&&(r=Kd(l.position.nodeAfter,e)||r),"insert"==l.type&&"tableCell"==l.name&&(r=la(l.position.nodeAfter,e)||r),My(l)&&(r=la(l.position.parent,e)||r)}}catch(c){o.e(c)}finally{o.f()}return r}(i,a)})}(r)}}],[{key:"pluginName",get:function(){return"TableEditing"}},{key:"requires",get:function(){return[Mn]}}]),e}(U);E(96);var Dy=function(a){P(e,a);var i=M(e);function e(n){var t;A(this,e);var r=(t=i.call(this,n)).bindTemplate;return t.items=t._createGridCollection(),t.set("rows",0),t.set("columns",0),t.bind("label").to(X(t),"columns",X(t),"rows",function(o,s){return"".concat(s," \xd7 ").concat(o)}),t.setTemplate({tag:"div",attributes:{class:["ck"]},children:[{tag:"div",attributes:{class:["ck-insert-table-dropdown__grid"]},on:{"mouseover@.ck-insert-table-dropdown-grid-box":r.to("boxover")},children:t.items},{tag:"div",attributes:{class:["ck-insert-table-dropdown__label"]},children:[{text:r.to("label")}]}],on:{mousedown:r.to(function(o){o.preventDefault()}),click:r.to(function(){t.fire("execute")})}}),t.on("boxover",function(o,s){var l=s.target.dataset,u=l.column;t.set({rows:parseInt(l.row),columns:parseInt(u)})}),t.on("change:columns",function(){t._highlightGridBoxes()}),t.on("change:rows",function(){t._highlightGridBoxes()}),t}return C(e,[{key:"focus",value:function(){}},{key:"focusLast",value:function(){}},{key:"_highlightGridBoxes",value:function(){var t=this.rows,r=this.columns;this.items.map(function(o,s){var l=Math.floor(s/10)<t&&s%10<r;o.set("isOn",l)})}},{key:"_createGridCollection",value:function(){for(var t=[],r=0;r<100;r++){var o=Math.floor(r/10);t.push(new Ly(this.locale,o+1,r%10+1))}return this.createCollection(t)}}]),e}(ue),Ly=function(a){P(e,a);var i=M(e);function e(n,t,r){var o;A(this,e);var s=(o=i.call(this,n)).bindTemplate;return o.set("isOn",!1),o.setTemplate({tag:"div",attributes:{class:["ck-insert-table-dropdown-grid-box",s.if("isOn","ck-on")],"data-row":t,"data-column":r}}),o}return C(e)}(ue),Vy=function(a){P(e,a);var i=M(e);function e(){return A(this,e),i.apply(this,arguments)}return C(e,[{key:"init",value:function(){var t=this,r=this.editor,o=this.editor.t,s="ltr"===r.locale.contentLanguageDirection;r.ui.componentFactory.add("insertTable",function(l){var d,c=r.commands.get("insertTable"),u=yt(l);return u.bind("isEnabled").to(c),u.buttonView.set({icon:'<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M3 6v3h4V6H3zm0 4v3h4v-3H3zm0 4v3h4v-3H3zm5 3h4v-3H8v3zm5 0h4v-3h-4v3zm4-4v-3h-4v3h4zm0-4V6h-4v3h4zm1.5 8a1.5 1.5 0 0 1-1.5 1.5H3A1.5 1.5 0 0 1 1.5 17V4c.222-.863 1.068-1.5 2-1.5h13c.932 0 1.778.637 2 1.5v13zM12 13v-3H8v3h4zm0-4V6H8v3h4z"/></svg>',label:o("Insert table"),tooltip:!0}),u.on("change:isOpen",function(){d||(d=new Dy(l),u.panelView.children.add(d),d.delegate("execute").to(u),u.buttonView.on("open",function(){d.rows=0,d.columns=0}),u.on("execute",function(){r.execute("insertTable",{rows:d.rows,columns:d.columns}),r.editing.view.focus()}))}),u}),r.ui.componentFactory.add("tableColumn",function(l){var c=[{type:"switchbutton",model:{commandName:"setTableColumnHeader",label:o("Header column"),bindIsOn:!0}},{type:"separator"},{type:"button",model:{commandName:s?"insertTableColumnLeft":"insertTableColumnRight",label:o("Insert column left")}},{type:"button",model:{commandName:s?"insertTableColumnRight":"insertTableColumnLeft",label:o("Insert column right")}},{type:"button",model:{commandName:"removeTableColumn",label:o("Delete column")}},{type:"button",model:{commandName:"selectTableColumn",label:o("Select column")}}];return t._prepareDropdown(o("Column"),'<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M2.5 1h15A1.5 1.5 0 0 1 19 2.5v15a1.5 1.5 0 0 1-1.5 1.5h-15A1.5 1.5 0 0 1 1 17.5v-15A1.5 1.5 0 0 1 2.5 1zM2 2v16h16V2H2z" opacity=".6"/><path d="M18 7v1H2V7h16zm0 5v1H2v-1h16z" opacity=".6"/><path d="M14 1v18a1 1 0 0 1-1 1H7a1 1 0 0 1-1-1V1a1 1 0 0 1 1-1h6a1 1 0 0 1 1 1zm-2 1H8v4h4V2zm0 6H8v4h4V8zm0 6H8v4h4v-4z"/></svg>',c,l)}),r.ui.componentFactory.add("tableRow",function(l){var c=[{type:"switchbutton",model:{commandName:"setTableRowHeader",label:o("Header row"),bindIsOn:!0}},{type:"separator"},{type:"button",model:{commandName:"insertTableRowAbove",label:o("Insert row above")}},{type:"button",model:{commandName:"insertTableRowBelow",label:o("Insert row below")}},{type:"button",model:{commandName:"removeTableRow",label:o("Delete row")}},{type:"button",model:{commandName:"selectTableRow",label:o("Select row")}}];return t._prepareDropdown(o("Row"),'<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M2.5 1h15A1.5 1.5 0 0 1 19 2.5v15a1.5 1.5 0 0 1-1.5 1.5h-15A1.5 1.5 0 0 1 1 17.5v-15A1.5 1.5 0 0 1 2.5 1zM2 2v16h16V2H2z" opacity=".6"/><path d="M7 2h1v16H7V2zm5 0h1v16h-1V2z" opacity=".6"/><path d="M1 6h18a1 1 0 0 1 1 1v6a1 1 0 0 1-1 1H1a1 1 0 0 1-1-1V7a1 1 0 0 1 1-1zm1 2v4h4V8H2zm6 0v4h4V8H8zm6 0v4h4V8h-4z"/></svg>',c,l)}),r.ui.componentFactory.add("mergeTableCells",function(l){var c=[{type:"button",model:{commandName:"mergeTableCellUp",label:o("Merge cell up")}},{type:"button",model:{commandName:s?"mergeTableCellRight":"mergeTableCellLeft",label:o("Merge cell right")}},{type:"button",model:{commandName:"mergeTableCellDown",label:o("Merge cell down")}},{type:"button",model:{commandName:s?"mergeTableCellLeft":"mergeTableCellRight",label:o("Merge cell left")}},{type:"separator"},{type:"button",model:{commandName:"splitTableCellVertically",label:o("Split cell vertically")}},{type:"button",model:{commandName:"splitTableCellHorizontally",label:o("Split cell horizontally")}}];return t._prepareMergeSplitButtonDropdown(o("Merge cells"),'<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M2.5 1h15A1.5 1.5 0 0 1 19 2.5v15a1.5 1.5 0 0 1-1.5 1.5h-15A1.5 1.5 0 0 1 1 17.5v-15A1.5 1.5 0 0 1 2.5 1zM2 2v16h16V2H2z" opacity=".6"/><path d="M7 2h1v16H7V2zm5 0h1v7h-1V2zm6 5v1H2V7h16zM8 12v1H2v-1h6z" opacity=".6"/><path d="M7 7h12a1 1 0 0 1 1 1v11a1 1 0 0 1-1 1H7a1 1 0 0 1-1-1V8a1 1 0 0 1 1-1zm1 2v9h10V9H8z"/></svg>',c,l)})}},{key:"_prepareDropdown",value:function(t,r,o,s){var l=this.editor,c=yt(s),u=this._fillDropdownWithListOptions(c,o);return c.buttonView.set({label:t,icon:r,tooltip:!0}),c.bind("isEnabled").toMany(u,"isEnabled",function(){for(var d=arguments.length,h=new Array(d),f=0;f<d;f++)h[f]=arguments[f];return h.some(function(v){return v})}),this.listenTo(c,"execute",function(d){l.execute(d.source.commandName),l.editing.view.focus()}),c}},{key:"_prepareMergeSplitButtonDropdown",value:function(t,r,o,s){var l=this.editor,c=yt(s,Nu);return this._fillDropdownWithListOptions(c,o),c.buttonView.set({label:t,icon:r,tooltip:!0,isEnabled:!0}),this.listenTo(c.buttonView,"execute",function(){l.execute("mergeTableCells"),l.editing.view.focus()}),this.listenTo(c,"execute",function(u){l.execute(u.source.commandName),l.editing.view.focus()}),c}},{key:"_fillDropdownWithListOptions",value:function(t,r){var u,o=this.editor,s=[],l=new Qe,c=k(r);try{for(c.s();!(u=c.n()).done;)jy(u.value,o,s,l)}catch(h){c.e(h)}finally{c.f()}return Wr(t,l),s}}]),e}(U);function jy(a,i,e,n){var t=a.model=new tr(a.model),r=a.model,o=r.commandName,s=r.bindIsOn;if("button"===a.type||"switchbutton"===a.type){var l=i.commands.get(o);e.push(l),t.set({commandName:o}),t.bind("isEnabled").to(l),s&&t.bind("isOn").to(l,"value")}t.set({withText:!0}),n.add(a)}E(98);var sn=function(a){P(e,a);var i=M(e);function e(){return A(this,e),i.apply(this,arguments)}return C(e,[{key:"init",value:function(){var t=this;this.listenTo(this.editor.model,"deleteContent",function(o,s){return t._handleDeleteContent(o,s)},{priority:"high"}),this._defineSelectionConverter(),this._enablePluginDisabling()}},{key:"getSelectedTableCells",value:function(){var t=Pn(this.editor.model.document.selection);return 0==t.length?null:t}},{key:"getSelectionAsFragment",value:function(){var t=this,r=this.getSelectedTableCells();return r?this.editor.model.change(function(o){var s=o.createDocumentFragment(),l=t.editor.plugins.get("TableUtils"),c=En(r),u=c.first,d=c.last,h=qt(r),f=h.first,v=h.last,g=r[0].findAncestor("table"),m=v,p=d;if(ra(r,l)){var y={firstColumn:u,lastColumn:d,firstRow:f,lastRow:v};m=Hd(g,y),p=Wd(g,y)}var w=Vd(g,{startRow:f,startColumn:u,endRow:m,endColumn:p},o);return o.insert(w,s,0),s}):null}},{key:"setCellSelection",value:function(t,r){var o=this._getCellsToSelect(t,r);this.editor.model.change(function(s){s.setSelection(o.cells.map(function(l){return s.createRangeOn(l)}),{backward:o.backward})})}},{key:"getFocusCell",value:function(){var t=Y(this.editor.model.document.selection.getRanges()).pop().getContainedElement();return t&&t.is("element","tableCell")?t:null}},{key:"getAnchorCell",value:function(){var t=Xe(this.editor.model.document.selection.getRanges()).getContainedElement();return t&&t.is("element","tableCell")?t:null}},{key:"_defineSelectionConverter",value:function(){var t=this,r=this.editor,o=new Set;r.conversion.for("editingDowncast").add(function(s){return s.on("selection",function(l,c,u){var d=u.writer;!function(y){var _,w=k(o);try{for(w.s();!(_=w.n()).done;)y.removeClass("ck-editor__editable_selected",_.value)}catch(x){w.e(x)}finally{w.f()}o.clear()}(d);var h=t.getSelectedTableCells();if(h){var v,f=k(h);try{for(f.s();!(v=f.n()).done;){var m=u.mapper.toViewElement(v.value);d.addClass("ck-editor__editable_selected",m),o.add(m)}}catch(y){f.e(y)}finally{f.f()}var p=u.mapper.toViewElement(h[h.length-1]);d.setSelection(p,0)}},{priority:"lowest"})})}},{key:"_enablePluginDisabling",value:function(){var t=this,r=this.editor;this.on("change:isEnabled",function(){if(!t.isEnabled){var o=t.getSelectedTableCells();if(!o)return;r.model.change(function(s){var l=s.createPositionAt(o[0],0),c=r.model.schema.getNearestSelectionRange(l);s.setSelection(c)})}})}},{key:"_handleDeleteContent",value:function(t,r){var o=ee(r,2),s=o[0],l=o[1],c=this.editor.model,u=!l||"backward"==l.direction,d=Pn(s);d.length&&(t.stop(),c.change(function(h){var f=d[u?d.length-1:0];c.change(function(g){var p,m=k(d);try{for(m.s();!(p=m.n()).done;)c.deleteContent(g.createSelection(p.value,"in"))}catch(w){m.e(w)}finally{m.f()}});var v=c.schema.getNearestSelectionRange(h.createPositionAt(f,0));s.is("documentSelection")?h.setSelection(v):s.setTo(v)}))}},{key:"_getCellsToSelect",value:function(t,r){var m,o=this.editor.plugins.get("TableUtils"),s=o.getCellLocation(t),l=o.getCellLocation(r),c=Math.min(s.row,l.row),u=Math.max(s.row,l.row),d=Math.min(s.column,l.column),h=Math.max(s.column,l.column),f=new Array(u-c+1).fill(null).map(function(){return[]}),v={startRow:c,endRow:u,startColumn:d,endColumn:h},g=k(new we(t.findAncestor("table"),v));try{for(g.s();!(m=g.n()).done;){var p=m.value;f[p.row-c].push(p.cell)}}catch(x){g.e(x)}finally{g.f()}var _=l.row<s.row,T=l.column<s.column;return _&&f.reverse(),T&&f.forEach(function(x){return x.reverse()}),{cells:f.flat(),backward:_||T}}}],[{key:"pluginName",get:function(){return"TableSelection"}},{key:"requires",get:function(){return[Mn]}}]),e}(U),By=function(a){P(e,a);var i=M(e);function e(){return A(this,e),i.apply(this,arguments)}return C(e,[{key:"init",value:function(){var t=this,r=this.editor,o=r.editing.view.document;this.listenTo(o,"copy",function(s,l){return t._onCopyCut(s,l)}),this.listenTo(o,"cut",function(s,l){return t._onCopyCut(s,l)}),this.listenTo(r.model,"insertContent",function(s,l){return t._onInsertContent.apply(t,[s].concat(Y(l)))},{priority:"high"})}},{key:"_onCopyCut",value:function(t,r){var o=this.editor.plugins.get(sn);if(o.getSelectedTableCells()&&("cut"!=t.name||!this.editor.isReadOnly)){r.preventDefault(),t.stop();var l=this.editor.editing.view.document,c=this.editor.data.toView(o.getSelectionAsFragment());l.fire("clipboardOutput",{dataTransfer:r.dataTransfer,content:c,method:t.name})}}},{key:"_onInsertContent",value:function(t,r,o){var s=this;if(!o||o.is("documentSelection")){var l=this.editor.model,c=this.editor.plugins.get(Mn),u=function(h,f){if(!h.is("documentFragment")&&!h.is("element"))return null;if(h.is("element","table"))return h;if(1==h.childCount&&h.getChild(0).is("element","table"))return h.getChild(0);var m,v=f.createRangeIn(h),g=k(v.getItems());try{for(g.s();!(m=g.n()).done;){var p=m.value;if(p.is("element","table")){var y=f.createRange(v.start,f.createPositionBefore(p));if(f.hasContent(y,{ignoreWhitespaces:!0}))return null;var w=f.createRange(f.createPositionAfter(p),v.end);return f.hasContent(w,{ignoreWhitespaces:!0})?null:p}}}catch(_){g.e(_)}finally{g.f()}return null}(r,l);if(u){var d=Ke(l.document.selection);d.length?(t.stop(),l.change(function(h){var T,x,N,D,W,ie,ne,oe,ge,Me,z,J,$,Q,K,f={width:c.getColumns(u),height:c.getRows(u)},v=(x=f,N=h,D=c,z=(T=d)[0].findAncestor("table"),J=En(T),$=qt(T),Q={firstColumn:J.first,lastColumn:J.last,firstRow:$.first,lastRow:$.last},(K=1===T.length)&&(Q.lastRow+=x.height-1,Q.lastColumn+=x.width-1,ie=Q.lastRow+1,ne=Q.lastColumn+1,ge=(oe=D).getColumns(W=z),Me=oe.getRows(W),ne>ge&&oe.insertColumns(W,{at:ge,columns:ne-ge}),ie>Me&&oe.insertRows(W,{at:Me,rows:ie-Me})),K||!ra(T,D)?function(W,ie,ne){var oe=ie.firstRow,ge=ie.lastRow,Me=ie.firstColumn,ze=ie.lastColumn,bt={first:oe,last:ge},at={first:Me,last:ze};ua(W,Me,bt,ne),ua(W,ze+1,bt,ne),ca(W,oe,at,ne),ca(W,ge+1,at,ne,oe)}(z,Q,N):(Q.lastRow=Hd(z,Q),Q.lastColumn=Wd(z,Q)),Q),m=v.lastColumn-v.firstColumn+1,p={startRow:0,startColumn:0,endRow:Math.min(v.lastRow-v.firstRow+1,f.height)-1,endColumn:Math.min(m,f.width)-1};u=Vd(u,p,h);var y=d[0].findAncestor("table"),w=function(T,x,N,D,z){for(var ie,J=x.width,$=x.height,Q=function(ib,ob,ab){var rh,nh=new Array(ab).fill(null).map(function(){return new Array(ob).fill(null)}),mi=k(new we(ib));try{for(mi.s();!(rh=mi.n()).done;){var fa=rh.value;nh[fa.row][fa.column]=fa.cell}}catch(ub){mi.e(ub)}finally{mi.f()}return nh}(T,J,$),W=[],ne=0,oe=Y(new we(N,{startRow:D.firstRow,endRow:D.lastRow,startColumn:D.firstColumn,endColumn:D.lastColumn,includeAllSlots:!0}));ne<oe.length;ne++){var ge=oe[ne],Me=ge.row,ze=ge.column,bt=ge.cell,at=ge.isAnchor;ze===D.firstColumn&&(ie=ge.getPositionBefore()),at&&z.remove(bt);var ir=Q[(Me-D.firstRow)%$][(ze-D.firstColumn)%J];if(ir){var ln=z.cloneElement(ir);Ud(ln,Me,ze,D.lastRow,D.lastColumn,z),z.insert(ln,ie),W.push(ln),ie=z.createPositionAfter(ln)}}var or=parseInt(N.getAttribute("headingRows")||0),ha=parseInt(N.getAttribute("headingColumns")||0),Xy=D.firstColumn<ha&&ha<=D.lastColumn;if(D.firstRow<or&&or<=D.lastRow){var tb=ca(N,or,{first:D.firstColumn,last:D.lastColumn},z,D.firstRow);W.push.apply(W,Y(tb))}if(Xy){var rb=ua(N,ha,{first:D.firstRow,last:D.lastRow},z);W.push.apply(W,Y(rb))}return W}(u,f,y,v,h);if(s.editor.plugins.get("TableSelection").isEnabled){var _=Id(w.map(function(T){return h.createRangeOn(T)}));h.setSelection(_)}else h.setSelection(w[0],0)})):aa(u,c)}}}}],[{key:"pluginName",get:function(){return"TableClipboard"}},{key:"requires",get:function(){return[sn,Mn]}}]),e}(U);function ca(a,i,e,n){if(!(i<1))return jd(a,i,arguments.length>4&&void 0!==arguments[4]?arguments[4]:0).filter(function(r){return Jd(r.column,r.cellWidth,e)}).map(function(r){return Bd(r.cell,i,n)})}function ua(a,i,e,n){if(!(i<1))return zd(a,i).filter(function(t){return Jd(t.row,t.cellHeight,e)}).map(function(t){return Fd(t.cell,t.column,i,n)})}function Jd(a,i,e){var t=e.first;return a>=t&&a<=e.last||a<t&&a+i-1>=t}var zy=function(a){P(e,a);var i=M(e);function e(){return A(this,e),i.apply(this,arguments)}return C(e,[{key:"init",value:function(){var t=this,r=this.editor.editing.view.document;this.editor.keystrokes.set("Tab",function(){return t._handleTabOnSelectedTable.apply(t,arguments)},{priority:"low"}),this.editor.keystrokes.set("Tab",this._getTabHandler(!0),{priority:"low"}),this.editor.keystrokes.set("Shift+Tab",this._getTabHandler(!1),{priority:"low"}),this.listenTo(r,"keydown",function(){return t._onKeydown.apply(t,arguments)},{priority:mt.get("high")-10})}},{key:"_handleTabOnSelectedTable",value:function(t,r){var o=this.editor,s=o.model.document.selection.getSelectedElement();s&&s.is("element","table")&&(r(),o.model.change(function(l){l.setSelection(l.createRangeIn(s.getChild(0).getChild(0)))}))}},{key:"_getTabHandler",value:function(t){var r=this,o=this.editor;return function(s,l){var c=rr(o.model.document.selection)[0];if(c||(c=r.editor.plugins.get("TableSelection").getFocusCell()),c){l();var u=c.parent,d=u.parent,h=d.getChildIndex(u),f=u.getChildIndex(c),v=0===f;if(!t&&v&&0===h)return void o.model.change(function(_){_.setSelection(_.createRangeOn(d))});var p,g=f===u.childCount-1;if(t&&h===d.childCount-1&&g&&(o.execute("insertTableRowBelow"),h===d.childCount-1))return void o.model.change(function(_){_.setSelection(_.createRangeOn(d))});if(t&&g){var y=d.getChild(h+1);p=y.getChild(0)}else if(!t&&v){var w=d.getChild(h-1);p=w.getChild(w.childCount-1)}else p=u.getChild(f+(t?1:-1));o.model.change(function(_){_.setSelection(_.createRangeIn(p))})}}}},{key:"_onKeydown",value:function(t,r){var o=this.editor,s=r.keyCode;if(Tr(s)){var l=us(s,o.locale.contentLanguageDirection);this._handleArrowKeys(l,r.shiftKey)&&(r.preventDefault(),r.stopPropagation(),t.stop())}}},{key:"_handleArrowKeys",value:function(t,r){var c,o=this.editor.model.document.selection,s=["right","down"].includes(t),l=Pn(o);if(l.length)return c=r?this.editor.plugins.get("TableSelection").getFocusCell():s?l[l.length-1]:l[0],this._navigateFromCellInDirection(c,t,r),!0;var u=o.focus.findAncestor("tableCell");return!(!u||r&&!o.isCollapsed&&o.isBackward==s||!this._isSelectionAtCellEdge(o,u,s)||(this._navigateFromCellInDirection(u,t,r),0))}},{key:"_isSelectionAtCellEdge",value:function(t,r,o){var s=this.editor.model,l=this.editor.model.schema,c=o?t.getLastPosition():t.getFirstPosition();if(!l.getLimitElement(c).is("element","tableCell"))return s.createPositionAt(r,o?"end":0).isTouching(c);var u=s.createSelection(c);return s.modifySelection(u,{direction:o?"forward":"backward"}),c.isEqual(u.focus)}},{key:"_navigateFromCellInDirection",value:function(t,r){var o=arguments.length>2&&void 0!==arguments[2]&&arguments[2],s=this.editor.model,l=t.findAncestor("table"),c=Y(new we(l,{includeAllSlots:!0})),u=c[c.length-1],d=u.row,h=u.column,f=c.find(function(T){return T.cell==t}),v=f.row,g=f.column;switch(r){case"left":g--;break;case"up":v--;break;case"right":g+=f.cellWidth;break;case"down":v+=f.cellHeight}if(v<0||v>d||g<0&&v<=0||g>h&&v>=d)s.change(function(T){T.setSelection(T.createRangeOn(l))});else{g<0?(g=o?0:h,v--):g>h&&(g=o?h:0,v++);var m=c.find(function(T){return T.row==v&&T.column==g}).cell,p=["right","down"].includes(r),y=this.editor.plugins.get("TableSelection");if(o&&y.isEnabled){var w=y.getAnchorCell()||t;y.setCellSelection(w,m)}else{var _=s.createPositionAt(m,p?0:"end");s.change(function(T){T.setSelection(_)})}}}}],[{key:"pluginName",get:function(){return"TableKeyboard"}},{key:"requires",get:function(){return[sn]}}]),e}(U),Fy=function(a){P(e,a);var i=M(e);function e(n){var t;return A(this,e),(t=i.call(this,n)).domEventType=["mousemove","mouseup","mouseleave"],t}return C(e,[{key:"onDomEvent",value:function(t){this.fire(t.type,t)}}]),e}(Ut),Uy=function(a){P(e,a);var i=M(e);function e(){return A(this,e),i.apply(this,arguments)}return C(e,[{key:"init",value:function(){this.editor.editing.view.addObserver(Fy),this._enableShiftClickSelection(),this._enableMouseDragSelection()}},{key:"_enableShiftClickSelection",value:function(){var t=this,r=this.editor,o=!1,s=r.plugins.get(sn);this.listenTo(r.editing.view.document,"mousedown",function(l,c){if(t.isEnabled&&s.isEnabled&&c.domEvent.shiftKey){var u=s.getAnchorCell()||rr(r.model.document.selection)[0];if(u){var d=t._getModelTableCellFromDomEvent(c);d&&Qd(u,d)&&(o=!0,s.setCellSelection(u,d),c.preventDefault())}}}),this.listenTo(r.editing.view.document,"mouseup",function(){o=!1}),this.listenTo(r.editing.view.document,"selectionChange",function(l){o&&l.stop()},{priority:"highest"})}},{key:"_enableMouseDragSelection",value:function(){var o,s,t=this,r=this.editor,l=!1,c=!1,u=r.plugins.get(sn);this.listenTo(r.editing.view.document,"mousedown",function(d,h){t.isEnabled&&u.isEnabled&&(h.domEvent.shiftKey||h.domEvent.ctrlKey||h.domEvent.altKey||(o=t._getModelTableCellFromDomEvent(h)))}),this.listenTo(r.editing.view.document,"mousemove",function(d,h){if(h.domEvent.buttons&&o){var f=t._getModelTableCellFromDomEvent(h);f&&Qd(o,f)&&(s=f,l||s==o||(l=!0)),l&&(c=!0,u.setCellSelection(o,s),h.preventDefault())}}),this.listenTo(r.editing.view.document,"mouseup",function(){l=!1,c=!1,o=null,s=null}),this.listenTo(r.editing.view.document,"selectionChange",function(d){c&&d.stop()},{priority:"highest"})}},{key:"_getModelTableCellFromDomEvent",value:function(t){var o=this.editor.editing.view.createPositionAt(t.target,0);return this.editor.editing.mapper.toModelPosition(o).parent.findAncestor("tableCell",{includeSelf:!0})}}],[{key:"pluginName",get:function(){return"TableMouse"}},{key:"requires",get:function(){return[sn]}}]),e}(U);function Qd(a,i){return a.parent.parent==i.parent.parent}function Hy(a){var i=a.getSelectedElement();return i&&Zd(i)?i:null}function Wy(a){var i=function(e,n){for(var t=n.parent;t;){if("table"===t.name)return t;t=t.parent}}(0,a.getFirstPosition());return i&&Zd(i.parent)?i.parent:null}function Zd(a){return!!a.getCustomProperty("table")&&Wt(a)}E(100);var Xd=function(){function a(i,e){var n=this;A(this,a),this.model=i,this.testCallback=e,this.hasMatch=!1,this.set("isEnabled",!0),this.on("change:isEnabled",function(){n.isEnabled?n._startListening():(n.stopListening(i.document.selection),n.stopListening(i.document))}),this._startListening()}return C(a,[{key:"_startListening",value:function(){var e=this,n=this.model.document;this.listenTo(n.selection,"change:range",function(t,r){r.directChange&&(n.selection.isCollapsed?e._evaluateTextBeforeSelection("selection"):e.hasMatch&&(e.fire("unmatched"),e.hasMatch=!1))}),this.listenTo(n,"change:data",function(t,r){"transparent"!=r.type&&e._evaluateTextBeforeSelection("data",{batch:r})})}},{key:"_evaluateTextBeforeSelection",value:function(e){var h,f,v,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},t=this.model,r=t.document.selection,o=t.createRange(t.createPositionAt(r.focus.parent,0),r.focus),s=(f=t,v=(h=o).start,{text:Array.from(h.getItems()).reduce(function(g,m){return m.is("$text")||m.is("$textProxy")?g+m.data:(v=f.createPositionAfter(m),"")},""),range:f.createRange(v,h.end)}),l=s.text,c=s.range,u=this.testCallback(l);if(!u&&this.hasMatch&&this.fire("unmatched"),this.hasMatch=!!u,u){var d=Object.assign(n,{text:l,range:c});"object"==typeof u&&Object.assign(d,u),this.fire("matched:"+e,d)}}}]),a}();se(Xd,Re);var eh=/[\\^$.*+?()[\]{}|]/g,qy=RegExp(eh.source),Yy={copyright:{from:"(c)",to:"\xa9"},registeredTrademark:{from:"(r)",to:"\xae"},trademark:{from:"(tm)",to:"\u2122"},oneHalf:{from:"1/2",to:"\xbd"},oneThird:{from:"1/3",to:"\u2153"},twoThirds:{from:"2/3",to:"\u2154"},oneForth:{from:"1/4",to:"\xbc"},threeQuarters:{from:"3/4",to:"\xbe"},lessThanOrEqual:{from:"<=",to:"\u2264"},greaterThanOrEqual:{from:">=",to:"\u2265"},notEqual:{from:"!=",to:"\u2260"},arrowLeft:{from:"<-",to:"\u2190"},arrowRight:{from:"->",to:"\u2192"},horizontalEllipsis:{from:"...",to:"\u2026"},enDash:{from:/(^| )(--)( )$/,to:[null,"\u2013",null]},emDash:{from:/(^| )(---)( )$/,to:[null,"\u2014",null]},quotesPrimary:{from:Nn('"'),to:[null,"\u201c",null,"\u201d"]},quotesSecondary:{from:Nn("'"),to:[null,"\u2018",null,"\u2019"]},quotesPrimaryEnGb:{from:Nn("'"),to:[null,"\u2018",null,"\u2019"]},quotesSecondaryEnGb:{from:Nn('"'),to:[null,"\u201c",null,"\u201d"]},quotesPrimaryPl:{from:Nn('"'),to:[null,"\u201e",null,"\u201d"]},quotesSecondaryPl:{from:Nn("'"),to:[null,"\u201a",null,"\u2019"]}},th={symbols:["copyright","registeredTrademark","trademark"],mathematical:["oneHalf","oneThird","twoThirds","oneForth","threeQuarters","lessThanOrEqual","greaterThanOrEqual","notEqual","arrowLeft","arrowRight"],typography:["horizontalEllipsis","enDash","emDash"],quotes:["quotesPrimary","quotesSecondary"]},$y=["symbols","mathematical","typography","quotes"];function Ky(a){return"string"==typeof a?new RegExp("(".concat(function(i){return(i=Fi(i))&&qy.test(i)?i.replace(eh,"\\$&"):i}(a),")$")):a}function Jy(a){return"string"==typeof a?function(){return[a]}:a instanceof Array?function(){return a}:a}function Qy(a){return(a.textNode?a.textNode:a.nodeAfter).getAttributes()}function Nn(a){return new RegExp("(^|\\s)(".concat(a,")([^").concat(a,"]*)(").concat(a,")$"))}var da=function(a){P(e,a);var i=M(e);function e(){return A(this,e),i.apply(this,arguments)}return C(e)}(ac);da.builtinPlugins=[function(a){P(e,a);var i=M(e);function e(){return A(this,e),i.apply(this,arguments)}return C(e,null,[{key:"requires",get:function(){return[nn,nm,cm,im,gm,Mc]}},{key:"pluginName",get:function(){return"Essentials"}}]),e}(U),function(a){P(e,a);var i=M(e);function e(){return A(this,e),i.apply(this,arguments)}return C(e,null,[{key:"requires",get:function(){return[xm,Pm]}},{key:"pluginName",get:function(){return"Alignment"}}]),e}(U),function(a){P(e,a);var i=M(e);function e(){return A(this,e),i.apply(this,arguments)}return C(e,null,[{key:"requires",get:function(){return[Im,Nm]}},{key:"pluginName",get:function(){return"FontSize"}}]),e}(U),function(a){P(e,a);var i=M(e);function e(){return A(this,e),i.apply(this,arguments)}return C(e,null,[{key:"requires",get:function(){return[Lm,Vm]}},{key:"pluginName",get:function(){return"FontFamily"}}]),e}(U),function(a){P(e,a);var i=M(e);function e(){return A(this,e),i.apply(this,arguments)}return C(e,null,[{key:"requires",get:function(){return[Bm,Fm]}},{key:"pluginName",get:function(){return"FontColor"}}]),e}(U),function(a){P(e,a);var i=M(e);function e(){return A(this,e),i.apply(this,arguments)}return C(e,null,[{key:"requires",get:function(){return[sp,lp]}},{key:"pluginName",get:function(){return"FontBackgroundColor"}}]),e}(U),Jc,function(a){P(e,a);var i=M(e);function e(){return A(this,e),i.apply(this,arguments)}return C(e,[{key:"afterInit",value:function(){this._addListAutoformats(),this._addBasicStylesAutoformats(),this._addHeadingAutoformats(),this._addBlockQuoteAutoformats(),this._addCodeBlockAutoformats()}},{key:"_addListAutoformats",value:function(){var t=this.editor.commands;t.get("bulletedList")&&nr(this.editor,this,/^[*-]\s$/,"bulletedList"),t.get("numberedList")&&nr(this.editor,this,/^1[.|)]\s$/,"numberedList")}},{key:"_addBasicStylesAutoformats",value:function(){var t=this.editor.commands;if(t.get("bold")){var r=Yr(this.editor,"bold");An(this.editor,this,/(\*\*)([^*]+)(\*\*)$/g,r),An(this.editor,this,/(__)([^_]+)(__)$/g,r)}if(t.get("italic")){var o=Yr(this.editor,"italic");An(this.editor,this,/(?:^|[^*])(\*)([^*_]+)(\*)$/g,o),An(this.editor,this,/(?:^|[^_])(_)([^_]+)(_)$/g,o)}if(t.get("code")){var s=Yr(this.editor,"code");An(this.editor,this,/(`)([^`]+)(`)$/g,s)}if(t.get("strikethrough")){var l=Yr(this.editor,"strikethrough");An(this.editor,this,/(~~)([^~]+)(~~)$/g,l)}}},{key:"_addHeadingAutoformats",value:function(){var t=this,r=this.editor.commands.get("heading");r&&r.modelElements.filter(function(o){return o.match(/^heading[1-6]$/)}).forEach(function(o){var l=new RegExp("^(#{".concat(o[7],"})\\s$"));nr(t.editor,t,l,function(){if(!r.isEnabled||r.value===o)return!1;t.editor.execute("heading",{value:o})})})}},{key:"_addBlockQuoteAutoformats",value:function(){this.editor.commands.get("blockQuote")&&nr(this.editor,this,/^>\s$/,"blockQuote")}},{key:"_addCodeBlockAutoformats",value:function(){this.editor.commands.get("codeBlock")&&nr(this.editor,this,/^```$/,"codeBlock")}}],[{key:"pluginName",get:function(){return"Autoformat"}}]),e}(U),function(a){P(e,a);var i=M(e);function e(){return A(this,e),i.apply(this,arguments)}return C(e,null,[{key:"requires",get:function(){return[dp,hp]}},{key:"pluginName",get:function(){return"Bold"}}]),e}(U),function(a){P(e,a);var i=M(e);function e(){return A(this,e),i.apply(this,arguments)}return C(e,null,[{key:"requires",get:function(){return[fp,vp]}},{key:"pluginName",get:function(){return"Italic"}}]),e}(U),function(a){P(e,a);var i=M(e);function e(){return A(this,e),i.apply(this,arguments)}return C(e,null,[{key:"requires",get:function(){return[gp,mp]}},{key:"pluginName",get:function(){return"Strikethrough"}}]),e}(U),function(a){P(e,a);var i=M(e);function e(){return A(this,e),i.apply(this,arguments)}return C(e,null,[{key:"requires",get:function(){return[pp,kp]}},{key:"pluginName",get:function(){return"Underline"}}]),e}(U),function(a){P(e,a);var i=M(e);function e(){return A(this,e),i.apply(this,arguments)}return C(e,null,[{key:"requires",get:function(){return[bp,wp]}},{key:"pluginName",get:function(){return"BlockQuote"}}]),e}(U),function(a){P(e,a);var i=M(e);function e(){return A(this,e),i.apply(this,arguments)}return C(e,null,[{key:"pluginName",get:function(){return"CKFinder"}},{key:"requires",get:function(){return[Gp,_p,Jc]}}]),e}(U),function(a){P(e,a);var i=M(e);function e(){return A(this,e),i.apply(this,arguments)}return C(e,null,[{key:"requires",get:function(){return[xu,Iu,zu]}},{key:"pluginName",get:function(){return"EasyImage"}}]),e}(U),function(a){P(e,a);var i=M(e);function e(){return A(this,e),i.apply(this,arguments)}return C(e,null,[{key:"requires",get:function(){return[wk,_k]}},{key:"pluginName",get:function(){return"Heading"}}]),e}(U),Iu,function(a){P(e,a);var i=M(e);function e(){return A(this,e),i.apply(this,arguments)}return C(e,null,[{key:"requires",get:function(){return[Ck]}},{key:"pluginName",get:function(){return"ImageCaption"}}]),e}(U),function(a){P(e,a);var i=M(e);function e(){return A(this,e),i.apply(this,arguments)}return C(e,null,[{key:"requires",get:function(){return[Sk,Pk]}},{key:"pluginName",get:function(){return"ImageStyle"}}]),e}(U),function(a){P(e,a);var i=M(e);function e(){return A(this,e),i.apply(this,arguments)}return C(e,[{key:"afterInit",value:function(){var t=this.editor,r=t.t;t.plugins.get(ui).register("image",{ariaLabel:r("Image toolbar"),items:t.config.get("image.toolbar")||[],getRelatedElement:Bo})}}],[{key:"requires",get:function(){return[ui]}},{key:"pluginName",get:function(){return"ImageToolbar"}}]),e}(U),zu,function(a){P(e,a);var i=M(e);function e(){return A(this,e),i.apply(this,arguments)}return C(e,null,[{key:"pluginName",get:function(){return"Indent"}},{key:"requires",get:function(){return[Ek,Mk]}}]),e}(U),function(a){P(e,a);var i=M(e);function e(n){var t;return A(this,e),t=i.call(this,n),n.config.define("indentBlock",{offset:40,unit:"px"}),t}return C(e,[{key:"init",value:function(){var t=this.editor,r=t.config.get("indentBlock"),o=!r.classes||!r.classes.length,s=Object.assign({direction:"forward"},r),l=Object.assign({direction:"backward"},r);o?(t.data.addStyleProcessorRules(Ik),this._setupConversionUsingOffset(t.conversion),t.commands.add("indentBlock",new di(t,new id(s))),t.commands.add("outdentBlock",new di(t,new id(l)))):(this._setupConversionUsingClasses(r.classes),t.commands.add("indentBlock",new di(t,new od(s))),t.commands.add("outdentBlock",new di(t,new od(l))))}},{key:"afterInit",value:function(){var t=this.editor,r=t.model.schema,o=t.commands.get("indent"),s=t.commands.get("outdent");["paragraph","heading1","heading2","heading3","heading4","heading5","heading6"].forEach(function(l){r.isRegistered(l)&&r.extend(l,{allowAttributes:"blockIndent"})}),r.setAttributeProperties("blockIndent",{isFormatting:!0}),o.registerChildCommand(t.commands.get("indentBlock")),s.registerChildCommand(t.commands.get("outdentBlock"))}},{key:"_setupConversionUsingOffset",value:function(){var t=this.editor.conversion,r="rtl"===this.editor.locale.contentLanguageDirection?"margin-right":"margin-left";t.for("upcast").attributeToAttribute({view:{styles:te({},r,/[\s\S]+/)},model:{key:"blockIndent",value:function(s){return s.getStyle(r)}}}),t.for("downcast").attributeToAttribute({model:"blockIndent",view:function(s){return{key:"style",value:te({},r,s)}}})}},{key:"_setupConversionUsingClasses",value:function(t){var s,r={model:{key:"blockIndent",values:[]},view:{}},o=k(t);try{for(o.s();!(s=o.n()).done;){var l=s.value;r.model.values.push(l),r.view[l]={key:"class",value:[l]}}}catch(c){o.e(c)}finally{o.f()}this.editor.conversion.attributeToAttribute(r)}}],[{key:"pluginName",get:function(){return"IndentBlock"}}]),e}(U),function(a){P(e,a);var i=M(e);function e(){return A(this,e),i.apply(this,arguments)}return C(e,null,[{key:"requires",get:function(){return[bu,Vk]}},{key:"pluginName",get:function(){return"Link"}}]),e}(U),function(a){P(e,a);var i=M(e);function e(){return A(this,e),i.apply(this,arguments)}return C(e,null,[{key:"requires",get:function(){return[Yk,$k]}},{key:"pluginName",get:function(){return"List"}}]),e}(U),function(a){P(e,a);var i=M(e);function e(){return A(this,e),i.apply(this,arguments)}return C(e,null,[{key:"requires",get:function(){return[hi,ey,Zk,Ko]}},{key:"pluginName",get:function(){return"MediaEmbed"}}]),e}(U),li,function(a){P(e,a);var i=M(e);function e(){return A(this,e),i.apply(this,arguments)}return C(e,[{key:"init",value:function(){var t=this.editor,r=t.editing.view.document,o=[];o.push(new cy(r)),o.push(new iy(r)),t.plugins.get("Clipboard").on("inputTransformation",function(s,l){if(!l.isTransformedWithPasteFromOffice){var c=l.dataTransfer.getData("text/html"),u=o.find(function(d){return d.isActive(c)});u&&(u.execute(l),l.isTransformedWithPasteFromOffice=!0)}},{priority:"high"})}}],[{key:"pluginName",get:function(){return"PasteFromOffice"}},{key:"requires",get:function(){return[nn]}}]),e}(U),function(a){P(e,a);var i=M(e);function e(){return A(this,e),i.apply(this,arguments)}return C(e,null,[{key:"requires",get:function(){return[Oy,Vy,sn,Uy,zy,By,Ko]}},{key:"pluginName",get:function(){return"Table"}}]),e}(U),function(a){P(e,a);var i=M(e);function e(){return A(this,e),i.apply(this,arguments)}return C(e,[{key:"afterInit",value:function(){var t=this.editor,r=t.t,o=t.plugins.get(ui),s=t.config.get("table.contentToolbar"),l=t.config.get("table.tableToolbar");s&&o.register("tableContent",{ariaLabel:r("Table toolbar"),items:s,getRelatedElement:Wy}),l&&o.register("table",{ariaLabel:r("Table toolbar"),items:l,getRelatedElement:Hy})}}],[{key:"requires",get:function(){return[ui]}},{key:"pluginName",get:function(){return"TableToolbar"}}]),e}(U),function(a){P(e,a);var i=M(e);function e(n){var t;return A(this,e),t=i.call(this,n),n.config.define("typing",{transformations:{include:$y}}),t}return C(e,[{key:"init",value:function(){var t=this,r=this.editor.model.document.selection;r.on("change:range",function(){t.isEnabled=!r.anchor.parent.is("element","codeBlock")}),this._enableTransformationWatchers()}},{key:"_enableTransformationWatchers",value:function(){var c,d,h,t=this.editor,r=t.model,o=t.plugins.get("Input"),s=(c=t.config.get("typing.transformations"),d=c.remove||[],h=function(v){return!d.includes(v)},function(f){var m,v=new Set,g=k(f);try{for(g.s();!(m=g.n()).done;){var p=m.value;if(th[p]){var w,y=k(th[p]);try{for(y.s();!(w=y.n()).done;)v.add(w.value)}catch(T){y.e(T)}finally{y.f()}}else v.add(p)}}catch(T){g.e(T)}finally{g.f()}return Array.from(v)}(c.include.concat(c.extra||[]).filter(h)).filter(h).map(function(f){return Yy[f]||f}).map(function(f){return{from:Ky(f.from),to:Jy(f.to)}})),l=new Xd(t.model,function(c){var d,u=k(s);try{for(u.s();!(d=u.n()).done;){var h=d.value;if(h.from.test(c))return{normalizedTransformation:h}}}catch(f){u.e(f)}finally{u.f()}});l.on("matched:data",function(c,u){if(o.isInput(u.batch)){var d=u.normalizedTransformation,f=d.to,v=d.from.exec(u.text),g=f(v.slice(1)),m=u.range,p=v.index;r.enqueueChange(function(y){for(var w=1;w<v.length;w++){var _=v[w],T=g[w-1];if(null!=T){var x=m.start.getShiftedBy(p),N=r.createRange(x,x.getShiftedBy(_.length)),D=Qy(x);r.insertContent(y.createText(T,D),N),p+=T.length}else p+=_.length}})}}),l.bind("isEnabled").to(this)}}],[{key:"pluginName",get:function(){return"TextTransformation"}}]),e}(U)],da.defaultConfig={toolbar:{items:["heading","|","fontfamily","fontsize","fontColor","fontBackgroundColor","|","bold","italic","underline","strikethrough","|","alignment","|","numberedList","bulletedList","|","indent","outdent","|","link","blockquote","imageUpload","insertTable","mediaEmbed","|","undo","redo"]},image:{styles:["full","alignLeft","alignRight"],toolbar:["imageStyle:alignLeft","imageStyle:full","imageStyle:alignRight","|","imageTextAlternative"]},table:{contentToolbar:["tableColumn","tableRow","mergeTableCells"]},language:"en"}}]).default},7228:function(R){R.exports=function re(q,te){(null==te||te>q.length)&&(te=q.length);for(var B=0,L=new Array(te);B<te;B++)L[B]=q[B];return L},R.exports.__esModule=!0,R.exports.default=R.exports},2858:function(R){R.exports=function re(q){if(Array.isArray(q))return q},R.exports.__esModule=!0,R.exports.default=R.exports},3646:function(R,re,q){var te=q(7228);R.exports=function B(L){if(Array.isArray(L))return te(L)},R.exports.__esModule=!0,R.exports.default=R.exports},1506:function(R){R.exports=function re(q){if(void 0===q)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return q},R.exports.__esModule=!0,R.exports.default=R.exports},4575:function(R){R.exports=function re(q,te){if(!(q instanceof te))throw new TypeError("Cannot call a class as a function")},R.exports.__esModule=!0,R.exports.default=R.exports},9100:function(R,re,q){var te=q(9489),B=q(7067);function L(X,ce,Ie){return B()?(R.exports=L=Reflect.construct,R.exports.__esModule=!0,R.exports.default=R.exports):(R.exports=L=function(ee,k,G){var A=[null];A.push.apply(A,k);var P=new(Function.bind.apply(ee,A));return G&&te(P,G.prototype),P},R.exports.__esModule=!0,R.exports.default=R.exports),L.apply(null,arguments)}R.exports=L,R.exports.__esModule=!0,R.exports.default=R.exports},3913:function(R){function re(te,B){for(var L=0;L<B.length;L++){var X=B[L];X.enumerable=X.enumerable||!1,X.configurable=!0,"value"in X&&(X.writable=!0),Object.defineProperty(te,X.key,X)}}R.exports=function q(te,B,L){return B&&re(te.prototype,B),L&&re(te,L),Object.defineProperty(te,"prototype",{writable:!1}),te},R.exports.__esModule=!0,R.exports.default=R.exports},3269:function(R,re,q){var te=q(379);R.exports=function B(L,X){var ce="undefined"!=typeof Symbol&&L[Symbol.iterator]||L["@@iterator"];if(!ce){if(Array.isArray(L)||(ce=te(L))||X&&L&&"number"==typeof L.length){ce&&(L=ce);var Ie=0,Y=function(){};return{s:Y,n:function(){return Ie>=L.length?{done:!0}:{done:!1,value:L[Ie++]}},e:function(C){throw C},f:Y}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var G,ee=!0,k=!1;return{s:function(){ce=ce.call(L)},n:function(){var C=ce.next();return ee=C.done,C},e:function(C){k=!0,G=C},f:function(){try{!ee&&null!=ce.return&&ce.return()}finally{if(k)throw G}}}},R.exports.__esModule=!0,R.exports.default=R.exports},9842:function(R,re,q){var te=q(9754),B=q(7067),L=q(8585);R.exports=function X(ce){var Ie=B();return function(){var k,ee=te(ce);if(Ie){var G=te(this).constructor;k=Reflect.construct(ee,arguments,G)}else k=ee.apply(this,arguments);return L(this,k)}},R.exports.__esModule=!0,R.exports.default=R.exports},182:function(R){R.exports=function re(q,te,B){return te in q?Object.defineProperty(q,te,{value:B,enumerable:!0,configurable:!0,writable:!0}):q[te]=B,q},R.exports.__esModule=!0,R.exports.default=R.exports},6525:function(R,re,q){var te=q(8331);function B(){return"undefined"!=typeof Reflect&&Reflect.get?(R.exports=B=Reflect.get,R.exports.__esModule=!0,R.exports.default=R.exports):(R.exports=B=function(X,ce,Ie){var Y=te(X,ce);if(Y){var ee=Object.getOwnPropertyDescriptor(Y,ce);return ee.get?ee.get.call(arguments.length<3?X:Ie):ee.value}},R.exports.__esModule=!0,R.exports.default=R.exports),B.apply(this,arguments)}R.exports=B,R.exports.__esModule=!0,R.exports.default=R.exports},9754:function(R){function re(q){return R.exports=re=Object.setPrototypeOf?Object.getPrototypeOf:function(B){return B.__proto__||Object.getPrototypeOf(B)},R.exports.__esModule=!0,R.exports.default=R.exports,re(q)}R.exports=re,R.exports.__esModule=!0,R.exports.default=R.exports},2205:function(R,re,q){var te=q(9489);R.exports=function B(L,X){if("function"!=typeof X&&null!==X)throw new TypeError("Super expression must either be null or a function");L.prototype=Object.create(X&&X.prototype,{constructor:{value:L,writable:!0,configurable:!0}}),Object.defineProperty(L,"prototype",{writable:!1}),X&&te(L,X)},R.exports.__esModule=!0,R.exports.default=R.exports},430:function(R){R.exports=function re(q){return-1!==Function.toString.call(q).indexOf("[native code]")},R.exports.__esModule=!0,R.exports.default=R.exports},7067:function(R){R.exports=function re(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(q){return!1}},R.exports.__esModule=!0,R.exports.default=R.exports},6860:function(R){R.exports=function re(q){if("undefined"!=typeof Symbol&&null!=q[Symbol.iterator]||null!=q["@@iterator"])return Array.from(q)},R.exports.__esModule=!0,R.exports.default=R.exports},3884:function(R){R.exports=function re(q,te){var B=null==q?null:"undefined"!=typeof Symbol&&q[Symbol.iterator]||q["@@iterator"];if(null!=B){var Ie,Y,L=[],X=!0,ce=!1;try{for(B=B.call(q);!(X=(Ie=B.next()).done)&&(L.push(Ie.value),!te||L.length!==te);X=!0);}catch(ee){ce=!0,Y=ee}finally{try{!X&&null!=B.return&&B.return()}finally{if(ce)throw Y}}return L}},R.exports.__esModule=!0,R.exports.default=R.exports},521:function(R){R.exports=function re(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")},R.exports.__esModule=!0,R.exports.default=R.exports},8206:function(R){R.exports=function re(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")},R.exports.__esModule=!0,R.exports.default=R.exports},8585:function(R,re,q){var te=q(8).default,B=q(1506);R.exports=function L(X,ce){if(ce&&("object"===te(ce)||"function"==typeof ce))return ce;if(void 0!==ce)throw new TypeError("Derived constructors may only return object or undefined");return B(X)},R.exports.__esModule=!0,R.exports.default=R.exports},9489:function(R){function re(q,te){return R.exports=re=Object.setPrototypeOf||function(L,X){return L.__proto__=X,L},R.exports.__esModule=!0,R.exports.default=R.exports,re(q,te)}R.exports=re,R.exports.__esModule=!0,R.exports.default=R.exports},3038:function(R,re,q){var te=q(2858),B=q(3884),L=q(379),X=q(521);R.exports=function ce(Ie,Y){return te(Ie)||B(Ie,Y)||L(Ie,Y)||X()},R.exports.__esModule=!0,R.exports.default=R.exports},8331:function(R,re,q){var te=q(9754);R.exports=function B(L,X){for(;!Object.prototype.hasOwnProperty.call(L,X)&&null!==(L=te(L)););return L},R.exports.__esModule=!0,R.exports.default=R.exports},319:function(R,re,q){var te=q(3646),B=q(6860),L=q(379),X=q(8206);R.exports=function ce(Ie){return te(Ie)||B(Ie)||L(Ie)||X()},R.exports.__esModule=!0,R.exports.default=R.exports},8:function(R){function re(q){return R.exports=re="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(te){return typeof te}:function(te){return te&&"function"==typeof Symbol&&te.constructor===Symbol&&te!==Symbol.prototype?"symbol":typeof te},R.exports.__esModule=!0,R.exports.default=R.exports,re(q)}R.exports=re,R.exports.__esModule=!0,R.exports.default=R.exports},379:function(R,re,q){var te=q(7228);R.exports=function B(L,X){if(L){if("string"==typeof L)return te(L,X);var ce=Object.prototype.toString.call(L).slice(8,-1);if("Object"===ce&&L.constructor&&(ce=L.constructor.name),"Map"===ce||"Set"===ce)return Array.from(L);if("Arguments"===ce||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(ce))return te(L,X)}},R.exports.__esModule=!0,R.exports.default=R.exports},5957:function(R,re,q){var te=q(9754),B=q(9489),L=q(430),X=q(9100);function ce(Ie){var Y="function"==typeof Map?new Map:void 0;return R.exports=ce=function(k){if(null===k||!L(k))return k;if("function"!=typeof k)throw new TypeError("Super expression must either be null or a function");if(void 0!==Y){if(Y.has(k))return Y.get(k);Y.set(k,G)}function G(){return X(k,arguments,te(this).constructor)}return G.prototype=Object.create(k.prototype,{constructor:{value:G,enumerable:!1,writable:!0,configurable:!0}}),B(G,k)},R.exports.__esModule=!0,R.exports.default=R.exports,ce(Ie)}R.exports=ce,R.exports.__esModule=!0,R.exports.default=R.exports}}]);